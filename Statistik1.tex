% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
\PassOptionsToPackage{dvipsnames,svgnames,x11names}{xcolor}
%
\documentclass[
  a4paper,
  DIV=11]{scrreprt}

\usepackage{amsmath,amssymb}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
\usepackage{lmodern}
\ifPDFTeX\else  
    % xetex/luatex font selection
    \setmainfont[]{Times New Roman}
    \setsansfont[]{Arial}
    \setmonofont[]{Courier New}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\ifLuaTeX
  \usepackage{luacolor}
  \usepackage[soul]{lua-ul}
\else
  \usepackage{soul}
  
\fi
\setlength{\emergencystretch}{3em} % prevent overfull lines
\setcounter{secnumdepth}{5}
% Make \paragraph and \subparagraph free-standing
\makeatletter
\ifx\paragraph\undefined\else
  \let\oldparagraph\paragraph
  \renewcommand{\paragraph}{
    \@ifstar
      \xxxParagraphStar
      \xxxParagraphNoStar
  }
  \newcommand{\xxxParagraphStar}[1]{\oldparagraph*{#1}\mbox{}}
  \newcommand{\xxxParagraphNoStar}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
  \let\oldsubparagraph\subparagraph
  \renewcommand{\subparagraph}{
    \@ifstar
      \xxxSubParagraphStar
      \xxxSubParagraphNoStar
  }
  \newcommand{\xxxSubParagraphStar}[1]{\oldsubparagraph*{#1}\mbox{}}
  \newcommand{\xxxSubParagraphNoStar}[1]{\oldsubparagraph{#1}\mbox{}}
\fi
\makeatother

\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{241,243,245}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.40,0.45,0.13}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\BuiltInTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\ExtensionTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.28,0.35,0.67}{#1}}
\newcommand{\ImportTok}[1]{\textcolor[rgb]{0.00,0.46,0.62}{#1}}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\RegionMarkerTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.07,0.07,0.07}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}

\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}\usepackage{longtable,booktabs,array}
\usepackage{calc} % for calculating minipage widths
% Correct order of tables after \paragraph or \subparagraph
\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
% definitions for citeproc citations
\NewDocumentCommand\citeproctext{}{}
\NewDocumentCommand\citeproc{mm}{%
  \begingroup\def\citeproctext{#2}\cite{#1}\endgroup}
\makeatletter
 % allow citations to break across lines
 \let\@cite@ofmt\@firstofone
 % avoid brackets around text for \cite:
 \def\@biblabel#1{}
 \def\@cite#1#2{{#1\if@tempswa , #2\fi}}
\makeatother
\newlength{\cslhangindent}
\setlength{\cslhangindent}{1.5em}
\newlength{\csllabelwidth}
\setlength{\csllabelwidth}{3em}
\newenvironment{CSLReferences}[2] % #1 hanging-indent, #2 entry-spacing
 {\begin{list}{}{%
  \setlength{\itemindent}{0pt}
  \setlength{\leftmargin}{0pt}
  \setlength{\parsep}{0pt}
  % turn on hanging indent if param 1 is 1
  \ifodd #1
   \setlength{\leftmargin}{\cslhangindent}
   \setlength{\itemindent}{-1\cslhangindent}
  \fi
  % set entry spacing
  \setlength{\itemsep}{#2\baselineskip}}}
 {\end{list}}
\usepackage{calc}
\newcommand{\CSLBlock}[1]{\hfill\break\parbox[t]{\linewidth}{\strut\ignorespaces#1\strut}}
\newcommand{\CSLLeftMargin}[1]{\parbox[t]{\csllabelwidth}{\strut#1\strut}}
\newcommand{\CSLRightInline}[1]{\parbox[t]{\linewidth - \csllabelwidth}{\strut#1\strut}}
\newcommand{\CSLIndent}[1]{\hspace{\cslhangindent}#1}

% load packages
%\usepackage{multicol}
\usepackage{fontspec}
\usepackage{emoji}
\usepackage{xltxtra}
%\usepackage{xcolor}
\usepackage{listings}
\usepackage{fvextra}


\definecolor{ycol}{RGB}{230,159,0}
\definecolor{modelcol}{RGB}{86,180,233}
\definecolor{errorcol}{RGB}{0,158,115}
\definecolor{beta0col}{RGB}{213,94,0}
\definecolor{beta1col}{RGB}{0,114,178}
\definecolor{xcol}{RGB}{204,121,167}


\lstset{
  breaklines=true
}

\DefineVerbatimEnvironment{Highlighting}{Verbatim}{breaklines,commandchars=\\\{\}}
\DefineVerbatimEnvironment{OutputCode}{Verbatim}{breaklines,commandchars=\\\{\}}
\usepackage{booktabs}
\usepackage{caption}
\usepackage{longtable}
\usepackage{colortbl}
\usepackage{array}
\KOMAoption{captions}{tableheading}
\makeatletter
\@ifpackageloaded{tcolorbox}{}{\usepackage[skins,breakable]{tcolorbox}}
\@ifpackageloaded{fontawesome5}{}{\usepackage{fontawesome5}}
\definecolor{quarto-callout-color}{HTML}{909090}
\definecolor{quarto-callout-note-color}{HTML}{0758E5}
\definecolor{quarto-callout-important-color}{HTML}{CC1914}
\definecolor{quarto-callout-warning-color}{HTML}{EB9113}
\definecolor{quarto-callout-tip-color}{HTML}{00A047}
\definecolor{quarto-callout-caution-color}{HTML}{FC5300}
\definecolor{quarto-callout-color-frame}{HTML}{acacac}
\definecolor{quarto-callout-note-color-frame}{HTML}{4582ec}
\definecolor{quarto-callout-important-color-frame}{HTML}{d9534f}
\definecolor{quarto-callout-warning-color-frame}{HTML}{f0ad4e}
\definecolor{quarto-callout-tip-color-frame}{HTML}{02b875}
\definecolor{quarto-callout-caution-color-frame}{HTML}{fd7e14}
\makeatother
\makeatletter
\@ifpackageloaded{caption}{}{\usepackage{caption}}
\AtBeginDocument{%
\ifdefined\contentsname
  \renewcommand*\contentsname{Inhaltsverzeichnis}
\else
  \newcommand\contentsname{Inhaltsverzeichnis}
\fi
\ifdefined\listfigurename
  \renewcommand*\listfigurename{Abbildungsverzeichnis}
\else
  \newcommand\listfigurename{Abbildungsverzeichnis}
\fi
\ifdefined\listtablename
  \renewcommand*\listtablename{Tabellenverzeichnis}
\else
  \newcommand\listtablename{Tabellenverzeichnis}
\fi
\ifdefined\figurename
  \renewcommand*\figurename{Abbildung}
\else
  \newcommand\figurename{Abbildung}
\fi
\ifdefined\tablename
  \renewcommand*\tablename{Tabelle}
\else
  \newcommand\tablename{Tabelle}
\fi
}
\@ifpackageloaded{float}{}{\usepackage{float}}
\floatstyle{ruled}
\@ifundefined{c@chapter}{\newfloat{codelisting}{h}{lop}}{\newfloat{codelisting}{h}{lop}[chapter]}
\floatname{codelisting}{Listing}
\newcommand*\listoflistings{\listof{codelisting}{Listingverzeichnis}}
\usepackage{amsthm}
\theoremstyle{definition}
\newtheorem{example}{Beispiel}[chapter]
\theoremstyle{definition}
\newtheorem{definition}{Definition}[chapter]
\theoremstyle{definition}
\newtheorem{exercise}{√úbungsaufgabe}[chapter]
\theoremstyle{remark}
\AtBeginDocument{\renewcommand*{\proofname}{Beweis}}
\newtheorem*{remark}{Anmerkung}
\newtheorem*{solution}{L√∂sung}
\newtheorem{refremark}{Anmerkung}[chapter]
\newtheorem{refsolution}{L√∂sung}[chapter]
\makeatother
\makeatletter
\makeatother
\makeatletter
\@ifpackageloaded{caption}{}{\usepackage{caption}}
\@ifpackageloaded{subcaption}{}{\usepackage{subcaption}}
\makeatother
\makeatletter
\@ifpackageloaded{fontawesome5}{}{\usepackage{fontawesome5}}
\makeatother
\makeatletter
\@ifpackageloaded{tikz}{}{\usepackage{tikz}}
\makeatother
        \newcommand*\circled[1]{\tikz[baseline=(char.base)]{
          \node[shape=circle,draw,inner sep=1pt] (char) {{\scriptsize#1}};}}  
                  

\ifLuaTeX
\usepackage[bidi=basic]{babel}
\else
\usepackage[bidi=default]{babel}
\fi
\babelprovide[main,import]{ngerman}
\ifPDFTeX
\else
\babelfont{rm}[]{Times New Roman}
\fi
% get rid of language-specific shorthands (see #6817):
\let\LanguageShortHands\languageshorthands
\def\languageshorthands#1{}
\ifLuaTeX
  \usepackage{selnolig}  % disable illegal ligatures
\fi
\usepackage{bookmark}

\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same} % disable monospaced font for URLs
\hypersetup{
  pdftitle={Statistik1},
  pdfauthor={Sebastian Sauer},
  pdflang={de},
  colorlinks=true,
  linkcolor={blue},
  filecolor={Maroon},
  citecolor={Blue},
  urlcolor={Blue},
  pdfcreator={LaTeX via pandoc}}


\title{Statistik1}
\author{Sebastian Sauer}
\date{2024-08-30}

\begin{document}
\maketitle

\renewcommand*\contentsname{Inhaltsverzeichnis}
{
\hypersetup{linkcolor=}
\setcounter{tocdepth}{2}
\tableofcontents
}

\chapter{Willkommen!}\label{willkommen}

\begin{figure}[H]

{\centering \includegraphics[width=0.33\textwidth,height=\textheight]{index_files/figure-pdf/unnamed-chunk-1-1.pdf}

}

\caption{Statistik und Du: Guter Fit!}

\end{figure}%

\section{Es geht um Ihren Lernerfolg}\label{es-geht-um-ihren-lernerfolg}

Meister Yoda r√§t: Lesen Sie die Hinweise (Abbildung~\ref{fig-yoda}).

\begin{figure}

\centering{

\includegraphics[width=0.5\textwidth,height=\textheight]{img/yoda.jpg}

}

\caption{\label{fig-yoda}Lesen Sie die folgenden Hinweise im eigenen
Interesse}

\end{figure}%

\href{https://imgflip.com/memegenerator}{Quelle: Imgflip Memengenerator}

\subsection{Lernziele}\label{lernziele}

\begin{itemize}
\item
  Die Studentis sind mit wesentlichen Methoden der explorativen
  Datenanalyse vertraut und k√∂nnen diese selbst√§ndig anwenden.
\item
  Die Studentis k√∂nnen g√§ngige Forschungsfragen in lineare Modelle
  √ºbersetzen, diese auf echte Datens√§tze anwenden und die Ergebnisse
  interpretieren.
\end{itemize}

Kurz gesagt: Das ist ein Grundkurs in Daten z√§hmen.

\begin{figure}[H]

{\centering \includegraphics[width=0.5\textwidth,height=\textheight]{img/datenzaehmen.png}

}

\caption{Daten z√§hmen}

\end{figure}%

\href{https://github.com/allisonhorst/stats-illustrations}{Bildquelle:
Allison Horst, CC-BY}

\subsection{Was lerne ich hier und wozu ist das
gut?}\label{was-lerne-ich-hier-und-wozu-ist-das-gut}

\emph{Was lerne ich hier?}

Sie lernen das \emph{Handwerk der Datenanalyse} mit einem Schwerpunkt
auf Vorhersage. Anders gesagt: Sie lernen, \emph{Daten aufzubereiten}
und aus Daten \emph{Vorhersagen} abzuleiten. Zum Beispiel: Kommt ein
Student zu Ihnen und sagt ``Ich habe 42 Stunden f√ºr die Klausur gelernt,
welche Note kann ich in der Klausur erwarten?''. Darauf Ihre Antwort:
``Auf Basis meiner Daten und meines Modells m√ºsstest du eine 2.7
schreiben!''.\footnote{Darauf die Studentin: ``Hpmf.''}. Au√üerdem lernen
Sie, wie man die G√ºte einer Vorhersage auf Stichhaltigkeit pr√ºft. Denn
Vorhersagen kann man ja in jeder Eckkneipe oder beim Wahrsager bekommen.
Wir wollen aber belastbare Vorhersagen und zumindest wissen, wie gut die
Vorhersagen (von jemanden) bisher waren.

\emph{Warum ist das wichtig?}

Wir wollen nicht auf Leuten vertrauen, die behaupten, sie w√ºssten, was
f√ºr uns richtig und gut ist. Wir wollen selber die Fakten pr√ºfen k√∂nnen.

\emph{Wozu brauche ich das im Job?}

Datenanalyse spielt bereits heute in vielen Berufen eine Rolle. Tendenz
stark zunehmend.

\emph{Wozu brauche ich das im weiterem Studium?}

In Forschungsarbeiten (wie in empirischen Forschungsprojekten, etwa in
der Abschlussarbeit) ist es √ºblich, statistische Ergebnisse hinsichtlich
quantitativ zu analysieren.

\emph{Ist Statistik nicht sehr abstrakt?}

Der Schwerpunkt dieses Kurses liegt auf Anwenden und Tun; √§hnlich dem
Erlernen eines Handwerks. Theorien und Abstraktionen stehen nur am Rand.

\emph{Gibt es auch gute Jobs, wenn man sich mit Daten auskennt?}

Das Forum (2020) berichtet zu den ``Top 20 job roles in increasing and
decreasing demand across industries'' (S. 30, Abb. 22):

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Data Analysts und Scientists
\item
  AI and Machine Learning Specialists
\item
  Big Data Specialists
\end{enumerate}

\subsection{Was ist hier das
Erfolgsgeheimnis?}\label{was-ist-hier-das-erfolgsgeheimnis}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-important-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-important-color}{\faExclamation}\hspace{0.5em}{Wichtig}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-important-color-frame]

\emph{Dran bleiben} ist der Schl√ºssel zum Erfolg. √úben Sie regelm√§√üig.
Geben Sie bei Schwierigkeiten nicht auf.

\emoji{person-lifting-weights} \emoji{clockwise-vertical-arrows}
\emoji{key} \emoji{glowing-star} \(\square\)

\end{tcolorbox}

\subsection{Motivieren Sie mich!}\label{motivieren-sie-mich}

Schauen Sie sich das Video mit einer
\href{https://youtu.be/jtNlzpcPr5Y}{Ansprache zur Motivation}
an.\footnote{\url{https://youtu.be/jtNlzpcPr5Y}}

\subsection{Voraussetzungen}\label{voraussetzungen}

Um von diesem Kurs am besten zu profitieren, sollten Sie Folgendes
mitbringen:

\begin{itemize}
\tightlist
\item
  Bereitschaft, Neues zu lernen
\item
  Bereitschaft, nicht gleich aufzugeben
\item
  Kenntnis grundlegender Methoden wissenschaftlichen Arbeitens
\end{itemize}

Was Sie \emph{nicht} brauchen, sind besondere Mathe-Vorkenntnisse.

\subsection{√úberblick}\label{uxfcberblick}

Abb. Abbildung~\ref{fig-ueberblick} gibt einen √úberblick √ºber den
Verlauf und die Inhalte des Buches. Das Diagramm hilft Ihnen zu
verorten, wo welches Thema im Gesamtzusammenhang steht.

\begin{figure}

\centering{

\includegraphics{img/fig-ueberblick.png}

}

\caption{\label{fig-ueberblick}√úberblick √ºber den Inhalt und Verlauf des
Buches}

\end{figure}%

Das Diagramm zeigt den Ablauf einer typischen Datenanalyse. Nat√ºrlich
kann man sich auch andere sinnvolle Darstellungen dieses Ablaufs
vorstellen.

\section{Software}\label{software}

Sie ben√∂tigen R, RStudio und einige R-Pakete f√ºr diesen Kurs.

\subsection{Installation}\label{installation}

\href{https://hinweisbuch.netlify.app/hinweise-software}{Hier} finden
Sie \emph{Installationshinweise.}\footnote{\url{https://hinweisbuch.netlify.app/hinweise-software}}

\subsection{Viel R (?)}\label{viel-r}

Dieses Buch enth√§lt ``mittel'' viel R. Auf fortgeschrittene R-Techniken
wurde aber komplett verzichtet. Dem einen oder der anderen Anf√§nger:in
mag es dennoch ``viel Code'' erscheinen. Es w√§re ja auch m√∂glich
gewesen, auf R zu verzichten und stattdessen eine ``Klick-Software'' zu
verwenden. \href{https://jasp-stats.org/}{JASP} oder
\href{https://www.jamovi.org/}{Jamovi} sind Beispiele f√ºr tolle Software
aus dieser Kategorie. Ich glaube aber, der Verzicht auf eine
Skriptsprache (R) w√§re ein schlechter Dienst an den Studentis. Mit Blick
auf eine ``High-Tech-Zukunft'' sollte man zumindest mit etwas
Computer-Code vertraut sein. Auf Computercode zu verzichten erschiene
mir daher fahrl√§ssig f√ºr die ``Zukunftsfestigkeit'' der Ausbildung.

\section{Zum Autor}\label{zum-autor}

N√§here Hinweise zum Autor dieses Buch, Sebastian Sauer, finden Sie
\href{https://sebastiansauer-academic.netlify.app/}{hier}.\footnote{\url{https://sebastiansauer-academic.netlify.app/}}
Dort gibt es auch einen √úberblick √ºber
\href{https://sebastiansauer-academic.netlify.app/\#ebooks}{weitere
B√ºcher des Autors zum Themenkreis Datenanalyse}.\footnote{\url{https://sebastiansauer-academic.netlify.app/\#ebooks}}

\section{Nomenklatur}\label{nomenklatur}

\subsection{Griechische Buchstaben}\label{sec-greek}

In diesem Buch werden ein paar (wenige) griechische Buchstaben
verwendet, die in der Statistik √ºblich sind. H√§ufig werden
\emph{griechische} Buchstaben verwendet, um eine Grundgesamtheit
(Population) zu beschreiben (die meistens unbekannt ist). Lateinische
(``normale'') Buchstaben werden demgegen√ºber verwendet, um eine
Stichprobe (Datensatz, vorliegende Daten) zu beschreiben.
Tabelle~\ref{tbl-griech} stellt diese Buchstaben zusammen mit ihrer
Aussprache und Bedeutung vor.

\begin{longtable}[]{@{}lllr@{}}
\caption{Griechische Buchstaben, die in diesem Buch verwendet
werden.}\label{tbl-griech}\tabularnewline
\toprule\noalign{}
Zeichen & Aussprache & Buchstabe & Bedeutung in der Statistik \\
\midrule\noalign{}
\endfirsthead
\toprule\noalign{}
Zeichen & Aussprache & Buchstabe & Bedeutung in der Statistik \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\(\beta\) & beta & b & Regressionskoeffizent \\
\(\mu\) & m√º & m & Mittelwert \\
\(\sigma\) & sigma & s & Streuung \\
\(\Sigma\) & Sigma & S & Summenzeichen \\
\(\rho\) & rho & r & Korrelation (nach Pearson) \\
\end{longtable}

Mehr griechische Buchstaben finden sich
\href{https://de.wikipedia.org/wiki/Griechisches_Alphabet}{z.B. in
Wikipedia}.\footnote{\url{https://de.wikipedia.org/wiki/Griechisches_Alphabet}}

\section{Zitation}\label{zitation}

Bitte zitieren Sie dieses Buch wie folgt:

\begin{quote}
Sauer, S. (2024). \emph{Statistik1}. https://statistik1.netlify.app/
\end{quote}

Hier sind die maschinenlesbaren Zitationsinfos (Bibtex-Format), die Sie
in Ihre Literatursoftware importieren k√∂nnen:

\begin{verbatim}
@book{sauer_statistik1,
    title = {Statistik1},
    rights = {CC-BY-NC},
    url = {https://statistik1.netlify.app/},
    author = {Sauer, Sebastian},
    date = {2024},
}
\end{verbatim}

Hier ist die DOI:

\href{https://zenodo.org/doi/10.5281/zenodo.10082517}{10.5281/zenodo.10082517}

\section{Reproduzierbarkeit}\label{reproduzierbarkeit}

Die verwendeten R-Pakete sind mit
\href{https://rstudio.github.io/renv/index.html}{renv}
dokumentiert.\footnote{\url{https://rstudio.github.io/renv/index.html}}

Der Quellcode ist \href{https://github.com/sebastiansauer/statistik1}{in
diesem Github-Repo} dokumentiert.\footnote{\url{https://github.com/sebastiansauer/statistik1}}

Dieses Dokument wurde erzeugt am/um: 2024-08-30 12:05:17.

\part{Organisatorisches}

\chapter{Pr√ºfung}\label{pruxfcfung}

Die folgenden Hinweise sind dem
\href{https://hinweisbuch.netlify.app/}{Hinweisbuch} des Autors
entnommen. Lesen Sie auch die √ºbrigen Hinweise dort.\footnote{\url{https://hinweisbuch.netlify.app/}}

\section{Pr√ºfungleistung}\label{pruxfcfungleistung}

Die Pr√ºfungsleistung besteht aus einer Hauptleistung (keine
Bonusleistung).

Die Hauptleistung besteht aus einer Projektarbeit im Form eines
\emph{Prognosewettbewerbs}.

\section{Zum Prognosewettbewerb}\label{zum-prognosewettbewerb}

\href{https://hinweisbuch.netlify.app/}{Im Hinweisbuch} finden Sie
\href{https://hinweisbuch.netlify.app/080-hinweise-pruefung-prognosewettbewerb-frame}{Hinweise
zur Pr√ºfung}.\footnote{\url{https://hinweisbuch.netlify.app/080-hinweise-pruefung-prognosewettbewerb-frame}}

\section{Pr√ºfungsrelevanter Stoff}\label{pruxfcfungsrelevanter-stoff}

Beachten Sie die
\href{https://hinweisbuch.netlify.app/010-hinweise-pruefung-allgemein-frame\#pr\%C3\%BCfungsrelevanter-stoff}{Hinweise
zum pr√ºfungsrelevanten Stoff}.\footnote{\url{https://hinweisbuch.netlify.app/010-hinweise-pruefung-allgemein-frame\#pr\%C3\%BCfungsrelevanter-stoff}}

\section{Wie kann ich mich auf die Pr√ºfung
vorbereiten?}\label{wie-kann-ich-mich-auf-die-pruxfcfung-vorbereiten}

\href{https://hinweisbuch.netlify.app/150-hinweise-pruefungsvorbereitung-frame}{Hier}
finden Sie Hinweise zur Pr√ºfungsvorbereitung.\footnote{\url{https://hinweisbuch.netlify.app/150-hinweise-pruefungsvorbereitung-frame}}

\section{Allgemeine
Pr√ºfungsheinweise}\label{allgemeine-pruxfcfungsheinweise}

Die folgenden Hinweise gelten grunds√§tzlich, d.h. soweit nicht anders in
der jeweiligen Pr√ºfung bzw. der jeweiligen Aufgabe angegeben.
Nichtbeachten von Pr√ºfungshinweisen kann zu Punkteabzug oder
Nichtbestehen f√ºhren. Lesen Sie sich diese Hinweise im eigenen Interesse
sorgf√§ltig durch. Kenntnis dieser Hinweise wird bei der Begutachtung
vorausgesetzt.

F√ºr eine einfachere Kommunikation kontaktieren Sie mich per E-Mail bei
Fragen, die nur Sie betreffen. Bei Fragen von allgemeinem Interesse
(z.B. ``Bis wann m√ºssen wir die Arbeit abgeben?'') nutzen Sie bitte
(sofern verf√ºgbar) das Kursforum, damit die Kommilitonen auch von dem
Austausch profitieren.

Beachten Sie die
\href{https://hinweisbuch.netlify.app/010-hinweise-pruefung-allgemein-frame}{allgemeinen
Pr√ºfungshinweise}.\footnote{\url{https://hinweisbuch.netlify.app/010-hinweise-pruefung-allgemein-frame}}

\section{Lieblingsfehler}\label{lieblingsfehler}

Vermeiden Sie diese
\href{https://hinweisbuch.netlify.app/170-beispiele-fehler-prognosewettbewerb-frame}{h√§ufigen
Fehler im Prognosewettbewerb}.\footnote{\url{https://hinweisbuch.netlify.app/170-beispiele-fehler-prognosewettbewerb-frame}}

\section{Fazit}\label{fazit}

\emoji{four-leaf-clover}\emoji{four-leaf-clover}\emoji{four-leaf-clover}VIEL
ERFOLG!\emoji{four-leaf-clover}\emoji{four-leaf-clover}\emoji{four-leaf-clover}

\part{Vorbereiten}

\chapter{Rahmen}\label{rahmen}

\[
\definecolor{ycol}{RGB}{230,159,0}
\definecolor{modelcol}{RGB}{86,180,233}
\definecolor{errorcol}{RGB}{0,158,115}
\definecolor{beta0col}{RGB}{213,94,0}
\definecolor{beta1col}{RGB}{0,114,178}
\definecolor{xcol}{RGB}{204,121,167}
\]

\section{Lernsteuerung}\label{lernsteuerung}

\subsection{Standort im Lernpfad}\label{standort-im-lernpfad}

Abbildung~\ref{fig-ueberblick} zeigt den Standort dieses Kapitels im
Lernpfad und gibt damit einen √úberblick √ºber das Thema dieses Kapitels
im Kontext aller Kapitel.

Abbildung~\ref{fig-tidy5} zeigt, dass unser Vorgehen in diesem Buch
einem Flie√üband gleicht: Schritt f√ºr Schritt, in der richtigen
Reihenfolge, vom Anfang bis Ende, erarbeiten wir unser
``Datenprodukt''.\footnote{Quelle: Allison Horst, CC-by,
  \url{https://github.com/allisonhorst/stats-illustrations}}

\begin{figure}

\centering{

\includegraphics[width=0.75\textwidth,height=\textheight]{img/tidydata_5.jpg}

}

\caption{\label{fig-tidy5}Datenanalyse als eine Abfolge am Flie√üband}

\end{figure}%

\subsection{Lernziele}\label{lernziele-1}

\begin{itemize}
\tightlist
\item
  Sie k√∂nnen eine Definition von Statistik wiedergeben.
\item
  Sie k√∂nnen eine Definition von Daten wiedergeben.
\item
  Sie k√∂nnen den Begriff Tidy-Daten erl√§utern.
\item
  Sie k√∂nnen Beispiele f√ºr verschiedene Skalenniveaus nennen.
\end{itemize}

\subsection{Einstieg}\label{einstieg}

\begin{exercise}[Hallo,
Statistik]\protect\hypertarget{exr-einstieg}{}\label{exr-einstieg}

Gehen Sie in eine kleine Gruppe zusammen (3-4 Personen). Stellen Sie
sich anhand der Schlagworte einander vor:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Name
\item
  (wissenschaftliche) Interessen
\item
  Erwartung an diesen Kurs \(\square\)
\end{enumerate}

\end{exercise}

\begin{exercise}[Frag
jetzt]\protect\hypertarget{exr-fragjetzt}{}\label{exr-fragjetzt}

Die Lehrkraft stellt Ihnen ein Forum zur Verf√ºgung, auf dem Sie
\emph{anonym} Fragen an die Lehrkraft richten k√∂nnen (z.B. auf
\href{https://frag.jetzt/home}{frag.jetzt}).

Stellen Sie dort Ihre Fragen ein; voten Sie die Fragen Ihrer
Kommilitonis auf oder ab. Die Lehrkraft beantwortet dann die Fragen mit
den meisten Upvotes. \(\square\)

\end{exercise}

\subsection{Erfolsgrezept}\label{erfolsgrezept}

Ihren Lernerfolg kann man als von drei Faktoren abh√§ngig betrachten: 1)
Ihrer Lehrkraft, 2) Ihrer Mitarbeit im Unterricht und 3) Ihrem
Eigenstudium zuhause (Vor- bzw. Nachbereitung des Unterrichts), s.
Abbildung~\ref{fig-erfolgsrezept}.

\begin{figure}

\centering{

\includegraphics[width=5.42in,height=1.06in]{010-rahmen_files/figure-latex/mermaid-figure-1.png}

}

\caption{\label{fig-erfolgsrezept}Ihr Lernerfolg besteht aus drei
Komponenten: Der Lehrkraft, Ihrer Konzentration im Unterricht und Ihrer
Vor- bzw. Nachbereitung zuhause.}

\end{figure}%

Eine gute Lehrkraft ist wie der Funke, der eine (Lern-)Flamme entz√ºndet.
Aber es braucht Brennmaterial, einen Holzscheit, das ist Ihre
Konzentration im Unterricht. Ein Holzscheit alleine ist aber nicht
nachhaltig, es braucht viel mehr Brennmaterial, um das Feuer am Leben zu
halten: Ihr Eigenstudium, das stetige, selbst√§ndige Besch√§ftigen mit der
Materie.

\section{Was ist Statistik und wozu ist sie
gut?}\label{was-ist-statistik-und-wozu-ist-sie-gut}

\begin{exercise}[Nutzen von
Statistik]\protect\hypertarget{exr-nutzen-statistik}{}\label{exr-nutzen-statistik}

üèãÔ∏è‚Äç‚ôÄÔ∏è Fragen Sie ChatGPT, was der Nutzen von Statistik ist. Diskutieren Sie
die Antwort. \(\square\)

\end{exercise}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

In diesem Buch werden die Begriffe \emph{Statistik}, \emph{Datenanalyse}
und \emph{Data Science} synonym verwendet.\(\square\)

\end{tcolorbox}

Hm. Vielleicht fragen wir mal ChatGPT, was es unter Statistik versteht:

\begin{quote}
üë® Was ist Statistik? Bitte definiere verst√§ndlich.
\end{quote}

\begin{quote}
ü§ñ Statistik ist eine Wissenschaft, die sich mit der Sammlung, Analyse,
Interpretation, Pr√§sentation und √úbertragung von Daten besch√§ftigt. Ziel
ist es, Muster und Trends in den Daten zu erkennen und verl√§ssliche
Schlussfolgerungen √ºber eine gr√∂√üere Gruppe (z.B. Bev√∂lkerung) auf der
Basis einer Stichprobe (Teilmenge) zu treffen. Die Statistik hilft uns
bei der Beantwortung von Fragen, indem sie uns dabei hilft, die
Unsicherheit in den Daten zu messen und zu verstehen\footnote{Release
  2023-Jan}.
\end{quote}

Es gibt mehrere Definition von Statistik; hier ist eine.

\begin{definition}[Statistik]\protect\hypertarget{def-statistik}{}\label{def-statistik}

Statistik fasst Daten zusammen, um wesentliche Informationen den Daten
zu entnehmen und beschreibt die Ungewissheit unserer Schl√ºsse (Poldrack
2023); Kaplan (2009) .\(\square\)

\end{definition}

Betrachten wir die zwei Bestimmungsst√ºcke einer Definition von Statistik
genauer:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Daten zusammenfassen
\item
  Ungewissheit beschreiben
\end{enumerate}

\subsection{Daten zusammenfassen}\label{daten-zusammenfassen}

Abbildung~\ref{fig-zsmnfassen} verdeutlicht das Prinzip des
Zusammenfassens von Daten. Anschaulich gesprochen: Eine Menge von Zahlen
wird zu einer einzelnen Zahl ``zusammengedampt''. Eine einzelne Zahl ist
wesentlich besser zu verstehen als eine gro√üe Menge von Zahlen. Bei
vielen Zahlen w√ºrde man den √úberblick verlieren.

\begin{figure}

\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{010-rahmen_files/figure-pdf/fig-zsmnfassen-1.pdf}

}

\subcaption{\label{fig-zsmnfassen-1}Zusammenfassen einer Variable zu
einem Punktwert, hier zum Mittelwert}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{010-rahmen_files/figure-pdf/fig-zsmnfassen-2.pdf}

}

\subcaption{\label{fig-zsmnfassen-2}Zusammenfassen zweier Variablen zu
einer Geraden}

\end{minipage}%

\caption{\label{fig-zsmnfassen}Daten zusammenfassen}

\end{figure}%

\subsection{Unterschiedlichkeit
messen}\label{unterschiedlichkeit-messen}

Eine allgegenw√§rtige Tatsache ist, dass die Dinge der Welt sich
unterscheiden, etwa, dass Exemplare einer Gattung sich unterscheiden. So
sind nicht alle Menschen gleich gro√ü, nicht alle B√ºcher gleich lang oder
nicht alle Tage gleich warm.

Ein zentrales Vorgehen bei statistischen Analysen ist es, die
\emph{Unterschiedlichkeit der Dinge} zu beschreiben, pr√§ziser gesagt:
die \emph{Variation zu quantifizieren}. Betrachten wir dazu das Beispiel
in s. Abbildung~\ref{fig-groesse}.

\begin{figure}

\centering{

\includegraphics{010-rahmen_files/figure-pdf/fig-groesse-1.png}

}

\caption{\label{fig-groesse}Wenig Variation in der K√∂rpergr√∂√üe bei den
Basketballern. Alles lange Kerle. Viel Variation bei den Schachspielern:
Manche sind klein, ander gro√ü.}

\end{figure}%

Bei den Basketballern gibt es \emph{geringe} Variation in der
K√∂rpergr√∂√üe - alle sind gro√ü, √§hnlich gro√ü. Bei den Schachspielern gibt
es (im Verh√§ltnis) \emph{hohe} Variation: Einige Personen sind gro√ü,
andere klein.

Die Variation (auch ``Variabilit√§t'' genannt) kann man auch gut so
darstellen wie in s. Abbildung~\ref{fig-variab} gezeigt.

\begin{figure}

\centering{

\includegraphics{010-rahmen_files/figure-pdf/fig-variab-1.png}

}

\caption{\label{fig-variab}Die Abweichungen der einzelnen Personen von
der mittleren K√∂rpergr√∂√üe ihres Teams}

\end{figure}%

Eine \emph{Abweichung} (auch \emph{Residuum}) genannt, zeigt hier die
Differenz von Mittelwert und dem Wert der K√∂rpergr√∂√üe bei der jeweiligen
Person. Wenn wir allgemein von einer Person \(i\) sprechen, Das Merkmal
\emph{K√∂rpergr√∂√üe} mit \(X\) bezeichnen und den Mittelwert der
K√∂rpergr√∂√üe als \(\bar{x}\) (``x quer''), dann k√∂nnen wir knapp und
pr√§zise das Residuum der \(i\)-ten Person mit \(r_i\) bezeichnen und
entsprechend definieren.

\begin{definition}[Residuum]\protect\hypertarget{def-residuum}{}\label{def-residuum}

Das Residuum des Merkmals \(X\) der \(i\)-ten Beobachtung ist definiert
als die Differenz vom Wert \(x_i\) und einem Referenzwert, etwa dem
Mittelwert, \(\bar{x}\):

\(r_i = x_i - \bar{x}\). \(\square\)

\end{definition}

\section{Was ist das Ziel Ihrer
Analyse?}\label{was-ist-das-ziel-ihrer-analyse}

\subsection{Arten von Zielen}\label{arten-von-zielen}

\begin{figure}

\centering{

\includegraphics[width=4.84in,height=1.04in]{010-rahmen_files/figure-latex/mermaid-figure-6.png}

}

\caption{\label{fig-ziele}Zielarten einer Datenanalyse}

\end{figure}%

Beispiele f√ºr die einzelnen Zielarten der Datenanalyse:

\begin{itemize}
\tightlist
\item
  \emph{Beschreiben}: ``Wie gro√ü ist der Gender-Paygap in der Branche X
  im Zeitraum Y?''
\item
  \emph{Vorhersagen}: Wenn ich 100 Stunden auf die Statistikklausur
  lernen, welche Note kann ich dann erwarten?
\item
  \emph{Erkl√§ren}: Wie viel bringt mir das Lernen auf die
  Statistikklausur?
\end{itemize}

\begin{exercise}[]\protect\hypertarget{exr-ziele-stat}{}\label{exr-ziele-stat}

Benennen Sie Beispiele f√ºr die die drei Zielarten von Datenanalysen!
\(\square\)

\end{exercise}

\subsection{Forschungsfrage}\label{forschungsfrage}

Eine Forschungsfrage ist die Leitfrage Ihrer Analyse. Sie definiert, was
Sie herausfinden wollen. H√§ufig sind Forschungsfragen so aufgebaut:

\begin{quote}
Hat X einen Einfluss auf Y?
\end{quote}

Eine Forschungsfrage weist h√§ufig folgende Struktur auf, s.
Abbildung~\ref{fig-fo-struktur}.

\begin{figure}

\centering{

\includegraphics[width=5.9in,height=1.24in]{010-rahmen_files/figure-latex/mermaid-figure-5.png}

}

\caption{\label{fig-fo-struktur}Struktur eine Forschungsfrage}

\end{figure}%

\begin{example}[Forschungsfrage
1]\protect\hypertarget{exm-fofrage1}{}\label{exm-fofrage1}

~

\begin{quote}
Hat Lernen (X) einen Einfluss auf den Pr√ºfungserfolg (Y)? Verringert
Joggen (X) die Menge des H√ºftgolds (Y)? Um welchen Betrag erh√∂ht sich
der Umsatz (Y), wenn wir 1000‚Ç¨ mehr Werbung ausgeben? (X)\(\square\)
\end{quote}

\end{example}

\begin{example}[Forschungsfrage
2]\protect\hypertarget{exm-fofrage2}{}\label{exm-fofrage2}

Nach dem Studium haben Sie bei einem gro√üen Online-Auktionshaus
angeheuert. Da Sie angaben, sich im Studium \st{intensiv} etwas mit
Statistik besch√§ftigt zu haben, hat man Sie in die
F\&E-Abteilung\footnote{Forschung und Entwicklung} gesteckt. Heute ist
es Ihre Aufgabe, Auktionen zur Spielekonsole
\href{https://www.nintendo.de/Wii/Wii-94559.html}{Wii} zu
untersuchen,\footnote{\url{https://www.nintendo.de/Wii/Wii-94559.html}}
genauer gesagt, geht es um das Spiel
\href{https://www.nintendo.de/Spiele/Wii/Mario-Kart-Wii-281848.html\#_bersicht}{Mariokart}.\footnote{y\url{https://www.nintendo.de/Spiele/Wii/Mario-Kart-Wii-281848.html\#_bersicht}}
Ihre Forschungsfrage lautet:

\begin{quote}
Welche Produktmerkmale stehen mit einem hohen Verkaufserl√∂s in
Zusammenhang?\(\square\)
\end{quote}

\end{example}

\begin{example}[Handynutzung und
Konzentrationsf√§higkeit]\protect\hypertarget{exm-braindrain}{}\label{exm-braindrain}

Eine Forschungsfrage k√∂nnte lauten zum Thema Handynutzung:

\begin{quote}
Verringert intensive Handynutzung die Konzentrationsf√§higkeit?
\(\square\)
\end{quote}

\end{example}

\begin{example}[]\protect\hypertarget{exm-braindrain2}{}\label{exm-braindrain2}

~

\subsection{Aus der Forschung:
Smartphone-Brain-Drain}\label{aus-der-forschung-smartphone-brain-drain-1}

(\textbf{ward\_brain\_2017?}) untersuchten die Forschungsfrage, ob die
blo√üe Gegenwart eines Handies (z.B. wenn es vor Ihnen auf dem Tisch
liegt) dazu f√ºhrt, dass man abgelenkt wird und daher schlechtere
kognitive Leistungen zeigt.

Leider schreiben die Autoren Ihre Hypothese nicht glasklar, aber
implizit ist obige Hypothese herauszulesen:

\begin{quote}
First, smartphones may redirect the orientation of conscious attention
away from the focal task and toward thoughts or behaviors associated
with one's phone. Prior research provides ample evidence that \ldots{}
this digital distraction adversely affects both performance \ldots{} and
enjoyment.
\end{quote}

Sp√§ter formulieren Sie Ihre Hypothese noch genauer:

\begin{quote}
In two experiments, we test the hypothesis that the mere presence of
one's own smartphone reduces available cognitive capacity.
\end{quote}

Die Ergebnisse unterst√ºtzen Ihre Hypothese, s.
Abbildung~\ref{fig-braindrain}. Im Diagramm ist ersichtlich, dass die
kognitive Leistung (Y-Achse) sowohl in der Kapazit√§t des
Arbeitsged√§chtnisses (links) als auch in der fluiden Intelligenz
(rechts) am geringsten ist, wenn das Handy auf dem Schreibtisch (Desk)
liegt. Am besten ist die kognitive Leistung, wenn das Handy nicht im
Raum ist.\(\square\)

\begin{figure}

\centering{

\includegraphics{img/braindrain1.jpg}

}

\caption{\label{fig-braindrain}Handy in Sichtweite verringert die
kognitiven Ressourcen}

\end{figure}%

\end{example}

\begin{exercise}[]\protect\hypertarget{exr-braindrain1}{}\label{exr-braindrain1}

Benennen Sie X und Y in Beispiel~\ref{exm-braindrain2}! \(\square\)

\end{exercise}

\begin{exercise}[]\protect\hypertarget{exr-braindrain-chatgpt}{}\label{exr-braindrain-chatgpt}

Fragen Sie einen Bot (z.B. ChatGPT) zum Stand der Forschung hinsichtlich
der Braindrain-Forschungsfrage. Diskutieren Sie die Antwort, auch in
ihren Grenzen. \(\square\)

\end{exercise}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-caution-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-caution-color}{\faFire}\hspace{0.5em}{Vorsicht}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-caution-color-frame]

Es ist ein h√§ufiger Fehler, in der Forschungsfrage zu formulieren ``X
f√ºhrt zu Y'', aber in der Analyse keine Methode zu verwenden, die
geeignet ist, kausale Zusammenh√§nge aufzudecken. Es reicht nicht, dass
man z.B. einen (negativen) Zusammenhang zwischen der H√§ufigkeit von
Smartphone-Nutzung und Konzentrationsf√§higkeit findet (Schwaiger und
Tahir 2022), um zu sagen: ``Daddeln macht dumm!''. Es k√∂nnte ja z.B.
auch umgekehrt sein. Platt gesagt: ``Dummheit f√ºhrt zu Daddeln''.
Weitere Erkl√§rungen sind m√∂glich. Vorsicht also mit (vor)schnellen
Aussagen zu kausalen Abh√§ngigkeiten.

\end{tcolorbox}

\subsection{Der Prozess der
Datenanalyse}\label{der-prozess-der-datenanalyse}

Datenanalyse ist eine Art des Probleml√∂sens. Anders gesagt, man macht es
nicht zum Spa√ü\footnote{jedenfalls nicht alle von uns}, sondern um ein
Ziel zu erreichen, d.h. ein Problem zu l√∂sen. Daher analysiert man nicht
gleich zu Anfang wild drauf los. Zun√§chst 1) kl√§rt man das Problem und
das Ziel. Dann 2) plant man das Vorgehen, z.B. welche Daten man erheben
m√∂chte. Als n√§chstes 3) erhebt man die Daten und bereitet sie auf.
Schlie√ülich kann man sie 4) endlich analysieren. Aber Daten sprechen
nicht f√ºr sich, man muss sie 5) interpretieren und Schl√ºsse daraus
ziehen. Dazu geh√∂rt auch, dass man die Schw√§chen der eigenen Analyse
kritisch beleuchtet, vgl. Abbildung~\ref{fig-ppdac}. Diesen Ablauf nennt
man auch das PPDAC-Modell (MacKay und Oldford 2000):

\begin{itemize}
\tightlist
\item
  P: \emph{Problem} (Problem und Ziel und Sachgegenstand verstehen)
\item
  P: \emph{Plan} (Vorgehen planen)
\item
  D: \emph{Data} (Daten erheben und aufbereiten)
\item
  A: \emph{Analysis} (Daten analysieren)
\item
  C: \emph{Conclusions} (Schlussfolgerungen ziehen; Daten interpretieren
  )
\end{itemize}

\begin{figure}

\centering{

\includegraphics[width=5.76in,height=0.88in]{010-rahmen_files/figure-latex/mermaid-figure-4.png}

}

\caption{\label{fig-ppdac}Datenanalyse als Prozess: Das PPDAC-Modell}

\end{figure}%

\section{Was sind Daten?}\label{was-sind-daten}

\begin{definition}[Hallo,
Daten]\protect\hypertarget{def-daten}{}\label{def-daten}

Daten kann man als eine geordnete Folge von Zeichen
definieren.\(\square\)

\end{definition}

Daten kommen h√§ufig in Tabellenform vor; so sind sie (oft) am besten zu
untersuchen, s. Tabelle~\ref{tbl-daten}.

\begin{longtable}{rlr}

\caption{\label{tbl-daten}So sehen Daten aus.}

\tabularnewline

\toprule
id & name & note \\ 
\midrule\addlinespace[2.5pt]
1 & Anna & 1.3 \\ 
2 & Berta & 2.3 \\ 
3 & Carla & 3.0 \\ 
\bottomrule

\end{longtable}

Die erste Spalte \texttt{id} ist nur eine laufende Nummer. Sie dient
dazu, die einzelnen Beobachtungen (hier Studentis) identifizieren zu
k√∂nnen und birgt ansonsten keine Information. Beispiele f√ºr ID-Variablen
sind z.B. Matrikulationsnummer, Personalausweisnummern oder
Bestellnummern.

\begin{example}[Daten zur Forschungsfrage
2]\protect\hypertarget{exm-daten}{}\label{exm-daten}

Hier ist ein Auszug der Daten zur Tabelle \texttt{mariokart}, s.
Tabelle~\ref{tbl-mariokart}.

\begin{longtable}[]{@{}
  >{\raggedleft\arraybackslash}p{(\columnwidth - 18\tabcolsep) * \real{0.1011}}
  >{\raggedleft\arraybackslash}p{(\columnwidth - 18\tabcolsep) * \real{0.0787}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 18\tabcolsep) * \real{0.0562}}
  >{\raggedleft\arraybackslash}p{(\columnwidth - 18\tabcolsep) * \real{0.1011}}
  >{\raggedleft\arraybackslash}p{(\columnwidth - 18\tabcolsep) * \real{0.0899}}
  >{\raggedleft\arraybackslash}p{(\columnwidth - 18\tabcolsep) * \real{0.1011}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 18\tabcolsep) * \real{0.1236}}
  >{\raggedleft\arraybackslash}p{(\columnwidth - 18\tabcolsep) * \real{0.1348}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 18\tabcolsep) * \real{0.1348}}
  >{\raggedleft\arraybackslash}p{(\columnwidth - 18\tabcolsep) * \real{0.0787}}@{}}

\caption{\label{tbl-mariokart}Auszug aus der Tabelle mariokart}

\tabularnewline

\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedleft
duration
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
n\_bids
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
cond
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
start\_pr
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
ship\_pr
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
total\_pr
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
ship\_sp
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
seller\_rate
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
stock\_photo
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
wheels
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
3 & 20 & new & 0.99 & 4.0 & 52 & standard & 1580 & yes & 1 \\
7 & 13 & used & 0.99 & 4.0 & 37 & firstClass & 365 & yes & 1 \\
3 & 16 & new & 0.99 & 3.5 & 46 & firstClass & 998 & no & 1 \\
3 & 18 & new & 0.99 & 0.0 & 44 & standard & 7 & yes & 1 \\
1 & 20 & new & 0.01 & 0.0 & 71 & media & 820 & yes & 2 \\
3 & 19 & new & 0.99 & 4.0 & 45 & standard & 270144 & yes & 0 \\

\end{longtable}

Eine Erkl√§rung aller Variablen des Datensatzes \texttt{mariokart} findet
sich
\href{https://www.openintro.org/data/index.php?data=mariokart}{hier}.
\(\square\)

\end{example}

\begin{definition}[Data-Dictionary]\protect\hypertarget{def-datadict}{}\label{def-datadict}

Eine Erkl√§rung, was die Namen einer Datentabelle bedeuten, nennt man
\emph{Code Book} or \emph{Data Dictionary}.\(\square\)

\end{definition}

\subsection{Was ist eine Variable?}\label{was-ist-eine-variable}

\begin{definition}[Variable]\protect\hypertarget{def-var}{}\label{def-var}

Eine Variable ist ein Platzhalter, der f√ºr ein Merkmal steht, das
verschiedene Werte annehmen kann.\(\square\)

\end{definition}

Man kann sich eine Variable wie einen Beh√§lter vorstellen, auf dem mit
einem Stift geschrieben steht, was f√ºr eine Art Inhalt darin ist, s.
Abbildung~\ref{fig-var-zuweisen}.

\begin{figure}

\centering{

\includegraphics[width=0.25\textwidth,height=\textheight]{img/Variablen_zuweisen.png}

}

\caption{\label{fig-var-zuweisen}Wir definieren eine Variable ``temp''
mit dem Inhalt ``9''}

\end{figure}%

\subsection{Beobachtungseinheit}\label{beobachtungseinheit}

\begin{definition}[Beobachtungseinheit]\protect\hypertarget{def-beobeinheit}{}\label{def-beobeinheit}

Beobachtungseinheiten sind die Dinge, die wir untersuchen (beobachten).
Beobachtungseinheiten sind die Tr√§ger von Variablen.\(\square\)

\end{definition}

In Tabelle~\ref{tbl-daten} gibt es drei Variablen: \texttt{id},
\texttt{Name} und \texttt{Note}. Es gibt auch drei
Beobachtungseinheiten: \emph{Anna}, \emph{Berta} und \emph{Carla.}

\subsection{Wert}\label{wert}

\begin{definition}[Wert]\protect\hypertarget{def-wert}{}\label{def-wert}

Ein \emph{Wert} ist der Inhalt einer Variablen.\(\square\)

\end{definition}

In Abbildung~\ref{fig-var-zuweisen} ist der Wert von \texttt{temp} 9. In
Tabelle~\ref{tbl-daten} hat die Variable \texttt{name} drei Elemente:
Anna, Berta, Carla. Der Wert des 2. Elements ist Berta.

\begin{definition}[Auspr√§gung]\protect\hypertarget{def-auspraegung}{}\label{def-auspraegung}

Als \emph{Auspr√§gungen} bezeichnet man die verschiedenen Werte einer
Variablen. \(\square\)

\end{definition}

\begin{example}[]\protect\hypertarget{exm-geschlecht}{}\label{exm-geschlecht}

In einer Studie wurden zehn Probanden untersucht. Die Variable
\texttt{geschlecht} dokumentiert die Geschlechter der Personen:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{geschlecht }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"Mann"}\NormalTok{, }\StringTok{"Frau"}\NormalTok{, }\StringTok{"Frau"}\NormalTok{, }\StringTok{"Frau"}\NormalTok{, }\StringTok{"Mann"}\NormalTok{,}
                \StringTok{"Frau"}\NormalTok{, }\StringTok{"Mann"}\NormalTok{, }\StringTok{"Mann"}\NormalTok{, }\StringTok{"divers"}\NormalTok{, }\StringTok{"Frau"}\NormalTok{)}
\NormalTok{geschlecht}
\DocumentationTok{\#\#  [1] "Mann"   "Frau"   "Frau"   "Frau"   "Mann"   "Frau"   "Mann"   "Mann"  }
\DocumentationTok{\#\#  [9] "divers" "Frau"}
\end{Highlighting}
\end{Shaded}

In dieser Variable (die aus 10 Werten besteht) finden sich drei
Auspr√§gungen: divers, Frau, Mann.\(\square\)

\end{example}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-tip-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-tip-color}{\faLightbulb}\hspace{0.5em}{Tipp}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-tip-color-frame]

Gerade haben Sie etwas Computer-Syntax gesehen, genauer gesagt, Befehle
aus der Programmiersprache \emph{R}. Bisher haben wir diese Befehle
nicht kennengelernt. Sie verstehen Sie vermutlich (nicht ganz).
Ignorieren Sie diese Befehle einfach erstmal.

\end{tcolorbox}

\subsection{Tidy Data}\label{tidy-data}

\begin{definition}[Tidy
Data]\protect\hypertarget{def-tidy}{}\label{def-tidy}

Unter \emph{Tidy-Data} (tidy data, ``Normalform'') versteht man eine
Tabelle, in der jede Zeile eine Beobachtungseinheit darstellt, jede
Spalte eine Variable und jede Zelle der Tabelle einen Wert, s.
Abbildung~\ref{fig-tidy1}. (Zus√§tzlich ist noch eine ``Kopfzeile''
erlaubt, in der die Namen der Variablen stehen.)\(\square\)

\end{definition}

Tabelle~\ref{tbl-daten} ist ein Beispiel f√ºr Tidy-Data.
Abbildung~\ref{fig-tidy1} zeigt ein Sinnbild f√ºr Tidy-Data (Wickham und
Grolemund 2018). Und Abbildung~\ref{fig-tidy-hadley} erl√§utert das
Tidy-Prinzip genauer.

\begin{figure}

\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{img/tidy-1.png}

}

\subcaption{\label{fig-tidy1}Tidy-Data-Sinnbild. Image Credit: Hadley
Wickham}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{img/tidydata_1.jpg}

}

\subcaption{\label{fig-tidy-hadley}Was ist Tidy-Data?. Image Credit:
Allision Horst}

\end{minipage}%

\caption{\label{fig-tidy-all}Stay Tidy!}

\end{figure}%

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-important-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-important-color}{\faExclamation}\hspace{0.5em}{Wichtig}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-important-color-frame]

F√ºr eine statistische Analyse ist es oft sinnvoll, dass die Daten im
Tidy-Format vorliegen.

\end{tcolorbox}

Der Vorteil des Tidy-Formats ist es, dass man wei√ü, wie die Daten
aufgebaut sind. Au√üerdem k√∂nnen Statistikprogramme oft mit dieser Form
am besten umgehen, s. Abbildung~\ref{fig-tidy3}.

\begin{figure}

\centering{

\includegraphics[width=0.75\textwidth,height=\textheight]{img/tidydata_3.jpg}

}

\caption{\label{fig-tidy3}Immer sch√∂n Ordnung halten\ldots{} Image
credit: Allision Horst,
https://github.com/allisonhorst/stats-illustrations, CC-BY}

\end{figure}%

Das Tidy-Format wird auch als ``langes'' Format bezeichnet.

Abbildung~\ref{fig-long-wide-anim} zeigt einen Datensatz in der
``langen'' Form, also tidy, und den gleichen Datensatz, umformatiert in
der ``breiten'' Form, nicht-tidy.

\begin{figure}

\centering{

\includegraphics[width=0.5\textwidth,height=\textheight]{img/wide-long.png}

}

\caption{\label{fig-long-wide-anim}Links: Eine Tabelle mit Format
``wide'' - nicht ``tidy''. Rechts: Das ``Langformat'' (``long'') ist
``tidy''.}

\end{figure}%

{Quelle: Garrick Aden-Buie, 2018, CC0-1.0 license,
\url{https://www.garrickadenbuie.com/project/tidyexplain/}, CC-BY-SA}

\begin{example}[]\protect\hypertarget{exm-widelong}{}\label{exm-widelong}

Im Folgenden sind eine Nicht-Tidy-Tabelle (Tabelle~\ref{tbl-untidy1})
und eine Tidy-Tablle (Tabelle~\ref{tbl-tidy1}) dargestellt.

\begin{figure}

\begin{minipage}{0.50\linewidth}

\subsubsection{Breitformat}\label{breitformat}

\begin{longtable}[]{@{}lrrr@{}}

\caption{\label{tbl-untidy1}Beispiel f√ºr eine NICHT-Tidy-Tabelle
(Breitformat)}

\tabularnewline

\toprule\noalign{}
Produkt & Umsatz\_2021 & Umsatz\_2022 & Umsatz\_2023 \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
Hammer & 10 & 11 & 12 \\
N√§gel & 15 & 10 & 5 \\

\end{longtable}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\subsubsection{Langformat (tidy)}\label{langformat-tidy}

\begin{longtable}[]{@{}llr@{}}

\caption{\label{tbl-tidy1}Beispiel f√ºr eine Tidy-Tabelle (Langformat)}

\tabularnewline

\toprule\noalign{}
Produkt & Jahr & Umsatz \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
Hammer & 2021 & 10 \\
Hammer & 2022 & 11 \\
Hammer & 2023 & 12 \\
N√§gel & 2021 & 15 \\
N√§gel & 2022 & 10 \\
N√§gel & 2023 & 5 \\

\end{longtable}

\end{minipage}%

\end{figure}%

\end{example}

\begin{exercise}[]\protect\hypertarget{exr-widelong}{}\label{exr-widelong}

Suchen Sie ein Beispiel f√ºr eine Konfiguration einer Tabelle im Long-
vs.~Wide-Format. \(\square\)

\end{exercise}

\begin{quote}
{\emoji{student}} Wozu braucht man das Tidy-Format?
\end{quote}

\begin{quote}
{\emoji{woman-teacher}} In vielen Software-Programmen der Datenanalyse
wei√üt man z.B. der X- oder Y-Variable eine Spalte einer Tabelle zu.
M√∂chte man etwa die Ver√§nderung des Umsatzes im Verlauf der Jahre
visualisieren oder analysieren, so braucht es die Spalten `Jahr' und
`Umsatz', also ein Tidy-Format.
\end{quote}

Abbildung~\ref{fig-tidy} stellt auf Basis einer ``Tidy-Tabelle''
(Tabelle~\ref{tbl-tidy1}) ein Diagramm dar. Ohne Tidy-Daten w√§re dieses
Diagramm nicht (so einfach) zu erstellen gewesen.

\begin{figure}

\centering{

\includegraphics{010-rahmen_files/figure-pdf/fig-tidy-1.pdf}

}

\caption{\label{fig-tidy}Beispiel f√ºr eine Visualisierung auf Basis
einer Tidy-Tabelle, vgl. Tabelle~\ref{tbl-tidy1}}

\end{figure}%

\subsection{Je mehr, desto besser (?)}\label{je-mehr-desto-besser}

Was Daten betrifft, k√∂nnte man behaupten: ``Viel hilft viel'' oder ``Je
mehr, desto besser''. Nat√ºrlich unter sonst gleichen
Umst√§nden\footnote{Ceteris paribus, auf Latein, h√∂rt sich gleich viel
  schlauer an}. Viel Datenm√ºll ist nat√ºrlich nicht besser als ein paar
knappe, wasserdichte Fakten!

\begin{example}[]\protect\hypertarget{exm-samplesize}{}\label{exm-samplesize}

Um Ihre eigene Lehraktivit√§t zu organisieren, wollen Sie sich ein Bild
machen, wie viel Ihre Nebensitzer im H√∂rsaal so lernen. Sie blicken nach
links und fragen ``wie viel lernst du so?''. Sie blicken nach recht und
wiederholen die Frage gerichtet an den rechtsnebensitzenden
Kommilitonen. Dann addieren Sie die zwei Zahlen (unter der Annahme, dass
Sie zwei Zahlen bekommen haben), und teilen durch zwei, um den
Mittelwert zu erhalten.

Ein kritischer Geist k√∂nnte anmerken, dass Sie besser die Untersuchung
nicht gemacht h√§tten (auch wenn Sie, vielleicht ohne zu wollen, eine
statistische Untersuchung angestellt haben). Denn bei so wenig befragten
Personen ist die Ungenauigkeit Ihrer Sch√§tzung der typischen Lernzeit
bei Studentis einfach zu hoch.\(\square\)

\end{example}

Abbildung~\ref{fig-sample-estimate} veranschaulicht, dass man einen
Mittelwert genauer sch√§tzen kann, wenn man auf eine gr√∂√üere Stichprobe
zur√ºckgreift. Das Teilbild links zeigt den Mittelwert einer Stichprobe
mit \(n=20\) Beobachtungen. Das Teilbild rechts zeigt den Mittelwert
einer Stichprobe mit \(n=200\) Beobachtungen (jeweils aus der gleichen
Grundgesamtheit). Wie man sieht, ist im linken Teilbild die Streuung
(Variation) h√∂her als im rechten Teilbild:

\begin{figure}

\centering{

\includegraphics{010-rahmen_files/figure-pdf/fig-sample-estimate-1.pdf}

}

\caption{\label{fig-sample-estimate}Sch√§tzgenauigkeit als Funktion der
Stichprobengr√∂√üe. Jeder Punkt stellt eine Stichprobe dar, entweder mit
n=20 (links) oder mit n=200 (rechts). Kleine Stichproben (links) haben
im Schnitt eine gr√∂√üere Abweichung vom wahren Mittelwert als gr√∂√üere
Stichproben (rechts).}

\end{figure}%

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-important-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-important-color}{\faExclamation}\hspace{0.5em}{Wichtig}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-important-color-frame]

Mehr Daten = genauere Ergebnisse (unter sonst gleichen Umst√§nden)
\(\square\)

\end{tcolorbox}

\begin{exercise}[Live-Experiment zum Effekt der
Stichprobengr√∂√üe]\protect\hypertarget{exr-kleine-grosse-stipro}{}\label{exr-kleine-grosse-stipro}

In diesem Live-Experiment untersuchen wir den Effekt der
\emph{Stichprobengr√∂√üe} auf die Streuung des Mittelwerts in der
\emph{Stichprobe.} Streuen die Ergebnisse mehr in kleinen Stichproben
als in gro√üen? Probieren wir es aus!

In diesem Experiment werfen Sie (in kleinen Gruppen) eine M√ºnze (auf
faire Art und Weise) und notieren das Ergebnis (Kopf oder Zahl). Uns
interessiert dabei die Frage, ob die Ergebnisse bei kleinen Stichproben
(n=5 M√ºnzw√ºrfe) anders streuen als in gro√üen Stichproben (n=20
M√ºnzw√ºrfe).

Sie brauchen nur experimentierfreudige Partner (Kleingruppen mit 2-4
Personen), eine faire M√ºnze und dann kann's los gehen!
\href{https://docs.google.com/forms/d/e/1FAIpQLSeAwqNyZtyQwttq5JrQdQ2AO7w5vzcVDXjiejKnyFNxiWtEag/viewform?usp=sf_link}{Klicken
Sie hier, um mit dem Experiment zu starten}.\footnote{\url{https://forms.gle/q4F1DrbgfhLAiH1s5}}

Die Daten aller Versuche k√∂nnen Sie
\href{https://docs.google.com/spreadsheets/d/11mKFFpr-Y1CMPpq4dGA-JA_Z9jRkPbXolo54Y0G_2gE/edit?usp=sharing}{hier}
einsehen.\footnote{\url{https://tinyurl.com/3w8ke2n2}} \(\square\)

\end{exercise}

\begin{example}[Dorfschulen machen die schlauesten
Sch√ºler!]\protect\hypertarget{exm-schule-samplesize}{}\label{exm-schule-samplesize}

In einer Pressemitteilung sei zu lesen, dass die besten Sch√ºler in den
Dorfschulen zu finden seien\footnote{Das ist eine fiktive Geschichte}.
Mit etwas Recherche finden Sie heraus, dass diese Aussage f√ºr
belastbaren Daten beruht: Tats√§chlich sind die Notendurchschnitte auf
den kleinen Dorfschulen deutlich besser als in den gro√üen Schulen in der
Stadt. Also stimmt die Behauptung der Pressemitteilung? Die gute
Landluft l√§sst das Hirn wachsen? Sie recherchieren noch etwas weiter in
den Daten. Dann f√§llt Ihnen auf: Die \emph{schlechtesten} Sch√ºler kommen
auch aus den Dorfschulen! Eine statistische Erkl√§rung bietet sich an: In
den Dorfschulen gibt es nur wenig Kinder und kleine Klassen -- die
Stichproben sind also klein. Bei kleinen Stichproben gibt es viel
Variation um den Mittelwert herum, s.
Abbildung~\ref{fig-sample-estimate}, und zwar nach oben (guter
Notenschnitt) und nach unten (schlechter Notenschnitt). \(\square\)

\end{example}

\section{Arten von Variablen}\label{sec-arten-variablen}

\subsection{Nach Position in der
Forschungsfrage}\label{nach-position-in-der-forschungsfrage}

Angenommen, Ihre Forschungsfrage lautet:

\begin{quote}
Hat Lernen einen Einfluss auf den Pr√ºfungserfolg?
\end{quote}

In dem Fall gilt:

\begin{itemize}
\tightlist
\item
  \emph{Lernen} ist die Inputvariable/X-Variable/Ursache/unabh√§ngig
  Variable (UV)
\item
  \emph{Pr√ºfungserfolg} ist die
  Outputvariable/Y-Variable/Wirkung/abh√§ngige Variable (AV)
\end{itemize}

Abbildung~\ref{fig-ueberblick-fragen} stellt diese beiden ``Positionen''
einer Variable dar. Die erste Position ist vor dem Pfeil. Die zweite
Position ist nach dem Pfeil.

\begin{figure}

\centering{

\includegraphics[width=4in,height=3.99in]{010-rahmen_files/figure-latex/mermaid-figure-3.png}

}

\caption{\label{fig-ueberblick-fragen}Synonyme Bezeichnungen f√ºr Input-
und Output-Variablen einer Forschungsfrage}

\end{figure}%

\begin{exercise}[]\protect\hypertarget{exr-uvav}{}\label{exr-uvav}

√úberlegen Sie sich eine Forschungsfrage, die eine UV und eine AV
enth√§lt. Sagen Sie einer/em Kommilitonen diese Forschungsfrage und
fragen Sie, was die UV und die AV ist. Bei richtiger Antwort belohnen
Sie gro√üz√ºgig. \(\square\)

\end{exercise}

\subsection{Nach dem Skalenniveau}\label{nach-dem-skalenniveau}

\begin{definition}[Skalenniveau]\protect\hypertarget{def-skalenniveau}{}\label{def-skalenniveau}

Der Begriff \emph{Skalenniveau} wird verwendet, um die Art und Menge der
Information, die in Variablen enthalten ist, zu benennen. Diese
Klassifikation basiert auf den Eigenschaften der Daten und den
mathematischen Operationen, die sinnvoll auf diese Daten angewendet
werden k√∂nnen. \(\square\)

\end{definition}

Abbildung~\ref{fig-skalenniveau} gibt einen √úberblick √ºber typisch
verwendete Skalenniveaus.

\begin{figure}

\centering{

\includegraphics[width=5.82in,height=2.26in]{010-rahmen_files/figure-latex/mermaid-figure-2.png}

}

\caption{\label{fig-skalenniveau}Skalenniveaus}

\end{figure}%

\subsection{Beispiele f√ºr
Skalenniveaus}\label{beispiele-fuxfcr-skalenniveaus}

Beispiele zu den Skalenniveaus sind in Tabelle~\ref{tbl-skalen-bsps}
aufgef√ºhrt. \(\square\)

\begin{longtable}[]{@{}ll@{}}

\caption{\label{tbl-skalen-bsps}Beispiele f√ºr Skalenniveaus}

\tabularnewline

\toprule\noalign{}
Variable & Skalenniveau \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
Haarfarbe & Nominalskala \\
Augenfarbe & Nominalskala \\
Geschlecht & Nominalskala \\
Automarke & Nominalskala \\
Partei & Nominalskala \\
Lieblingsessen & Ordinalskala \\
Medaillen beim 100-Meter-Lauf & Ordinalskala \\
Uniranking & Ordinalskala \\
IQ & Intervallskala \\
Extraversion & Intervallskala \\
Temperatur in Celcius & Intervallskala \\
Temperatur in Fahrenheit & Intervallskala \\
Temperatur in Kelvin & Verh√§ltnisskala \\
K√∂rpergr√∂√üe & Verh√§ltnisskala \\
Geschwindigkeit & Verh√§ltnisskala \\
L√§nge & Verh√§ltnisskala \\

\end{longtable}

Jenachdem √ºber welches Skalenniveau eine Variable verf√ºgt, sind
verschiedenen Rechenoperationen erlaubt, s.
{Tabelle~\ref{tbl-skalenniveaus-pdf}}.

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.2237}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1579}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1447}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1579}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1184}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1974}}@{}}

\caption{\label{tbl-skalenniveaus-pdf}Erlaubte Rechenoperationen nach
Skalenniveau}

\tabularnewline

\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
Skalenniveau
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Quantitativ
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Gleichheit
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Reihenfolge
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Addition
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Multiplikation
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
Nominalniveau & nein & ja & nein & nein & nein \\
Ordinalniveau & nein & ja & ja & nein & nein \\
Intervallniveau & ja & ja & ja & ja & nein \\
Verh√§ltnisniveau & ja & ja & ja & ja & ja \\

\end{longtable}

Was soll das bedeuten, ``Rechenoperationen''?

Schauen wir uns f√ºr jedes Skalenniveau ein ``Rechenbeispiel'' an.

\emph{Nominalskala}: Die Variable \emph{Geschlecht} ist nominalskaliert.
Das bedeutet, dass ihre Auspr√§gungen \emph{Frau} und \emph{Mann} z.B.
nicht (sinnvoll) addiert oder sonstwie ``verrechnet'' werden k√∂nnen. Man
k√∂nnte, z.B. um das Eintippen zu erleichtern, Frauen mit \texttt{1}
kodieren und M√§nner mit \texttt{2}. Damit darf man aber nicht rechnen!
Nicht addieren, multiplizieren \ldots{} Es macht keinen Sinn zu sagen:
``Ich habe eine Frau und einen Mann in meiner Tabelle, das ist im
Schnitt ein diverses Geschlecht, weil der Mittelwert von 1 und 2 ist
1,5!''

Die \emph{einzige} ``Rechenoperation'', die man auf der Nominalskala
machen darf, ist die Pr√ºfung auf \emph{Gleichheit}: Mann kann
feststellen, ob ein Objekt gleich zu einem anderen ist oder
unterschiedlich. Also ob zwei Personen das gleiche Geschlecht haben oder
von unterschiedlichem Geschlecht sind. Anders ausgedr√ºckt:

\begin{itemize}
\tightlist
\item
  FRAU \(\ne\) MANN
\item
  FRAU \(=\) FRAU
\item
  MANN \(=\) MANN
\end{itemize}

\emph{Ordinalskala}: Diese Skala entspricht einer Rangordnung. Eine
Rangordnung ist etwa die geordnete Abfolge Ihres
Leibgerichte\footnote{1. Pizza, 2. Spagetthi, 3. Schnitzel}. Etwas
``formaler'' ausgedr√ºckt:

\begin{itemize}
\tightlist
\item
  \(\text{Pizza} \succ \text{Spagetthi} \succ \text{Schnitzel}\)
\end{itemize}

Das komische Zeichen \(\succ\) soll hei√üen: ``Ist auf meiner Liste von
Leibgerichten weiter oben, mag ich lieber''. Man kann aber \emph{nicht}
sagen, ``Ich mag aber Pizza um 42\% mehr als die Spagetthi und die
wieder um 73\% mehr als ein Schnitzel!''. Zumindest kann man das nicht
ohne weitere Informationen und Annahmen. Es gibt also Dinge auf der
Welt, die man leicht in eine Rangordnung bringen kann, aber die man nur
schwer in der Gr√∂√üe der Unterschiede bemessen kann. Das ist die
Ordinalskala.

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-important-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-important-color}{\faExclamation}\hspace{0.5em}{Wichtig}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-important-color-frame]

Die Ordinalskale erlaubt, Objekte zu ordnen (hinsichtlich eines
Merkmals). Die Abst√§nde zwischen den Objekten k√∂nnen nicht quantifiziert
werden. \(\square\)

\end{tcolorbox}

\emph{Intervallskala}: Das ist vielleicht eine √úberraschung f√ºr Sie:
Wenn es heute 10¬∞C hat und morgen 5¬∞C -- dann ist es heute \emph{nicht}
doppelt so warm wie morgen. Ja, 10 ist das Doppelte von 5. Aber
\emph{10¬∞ Celcius} ist \emph{nicht} doppelt so warm wie 20¬∞ Celcius.
Wenn Sie das verwundert: Das ist normal, so geht es vielen Leuten, wenn
sie das zum ersten Mal h√∂ren. Der Grund, dass es nicht erlaubt ist,
Verh√§ltnisse (wie doppelt/halb so viel etc.) auf der Celcius-Skala zu
bilden, ist, dass der Nullpunkt der Skala, 0¬∞ C, kein echter,
physikalischer Nullpunkt ist. Bei 0¬∞ C liegt eben nicht Null
W√§rmeenergie vor. Stattdessen wurde eine W√§rmenergiemenge gew√§hlt, die
f√ºr uns Menschen ganz praktisch, da augenf√§llig ist: der Gefrierpunkt
von Wasser. Was bei der Intervallskala erlaubt ist, ist das Addieren
(und Subtrahieren): heute 10¬∞C, morgen 5¬∞C, das ist ein Unterschied von
5¬∞C. Oder: Im Schnitt waren es 7,5¬∞C, das ist genau in der Mitte von 5
und 10¬∞C. Abbildung~\ref{fig-intervall} versinnbildlicht die
Intervallskala.

\begin{figure}

\centering{

\includegraphics[width=1\textwidth,height=\textheight]{010-rahmen_files/figure-pdf/fig-intervall-1.png}

}

\caption{\label{fig-intervall}Ein Meterma√ü steckt im Wasser. Auf dem
Meterma√ü k√∂nnen wir die aufgedruckten Zahlen ablesen. Aber wir wissen
nicht, ob der Meterma√ü auf dem Boden steht. Wir wissen demnach nicht, ob
der vom Meterma√ü angegebene Nullpunkt der wahre Nullpunkt (Meeresboden)
ist.}

\end{figure}%

\emph{Verh√§ltnisskala}: Eine Verh√§ltnisskala ist das, was man sich
gemeinhin unter einer metrische Variable vorstellt: Man kann ``normal''
rechnen, alle Rechenoperationen sind erlaubt. Zuz√ºglich zu denen, die
auch in anderen, ``niedrigeren'' Skalenniveaus erlaubt sind, ist das das
Bilden von Verh√§ltnissen -- Multiplizieren, s.
Abbildung~\ref{fig-verhaeltnis}.

\begin{figure}

\centering{

\includegraphics{010-rahmen_files/figure-pdf/fig-verhaeltnis-1.png}

}

\caption{\label{fig-verhaeltnis}Puh! Der rote Flitzer ist 10 Mal so
teuer wie die blaue M√∂hre. Kohlen zusammenkratzen.}

\end{figure}%

In \href{https://www.youtube.com/watch?v=_mN3kFe56ng}{diesem Video} gibt
es noch ausf√ºhrlichere Erkl√§rung zum Thema Skalenniveaus.

Au√üerdem k√∂nnen quantitative Variablen untergliedert werden in:

\begin{itemize}
\tightlist
\item
  \emph{stetige} Variablen, das sind Variablen, bei denen man zwischen
  zwei Auspr√§gungen immer noch eine weitere quetschen kann. So gibt es
  eine Wert f√ºr die K√∂pergr√∂√üe zwischen 1.60\,m und 1.61\,m. Und einen
  Wert zwischen 1.601\,m und 1.602\,m, etc.
\item
  diskrete Variablen, das sind metrische Variablen, die nur bestimmte
  Auspr√§gungen haben, h√§ufig sind das die nat√ºrlichen Zahlen:
  \(1,2,...\). Ein Beispiel w√§re die Anzahl der Kinder in einer Familie.
\end{itemize}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-tip-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-tip-color}{\faLightbulb}\hspace{0.5em}{Tipp}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-tip-color-frame]

Fragen nach Skalenniveaus geh√∂ren zu den Lieblingspr√ºfungsfragen in
diesem Themenbereich. Sie sind gut beraten, sich gerade mit dieser Frage
intensiver zu besch√§ftigen. Auch in thematisch angrenzenden F√§chern wird
immer wieder die Frage nach dem Skalennvieau aufgeworfen. Das zeigt
nat√ºrlich auch die hohe Relevanz des Themas.

\end{tcolorbox}

\begin{exercise}[]\protect\hypertarget{exr-skalenniveaus}{}\label{exr-skalenniveaus}

√úberlegen Sie sich f√ºr einige Variablen die Skalenniveaus und befragen
Sie dann eine:n Kommilitonen dazu. \(\square\)

\end{exercise}

\section{Modelle}\label{modelle}

Woran denken Sie beim Wort ``Modell''? Vielleicht an Spielzeugautos, s.
Abbildung~\ref{fig-matchbox}.

\begin{figure}

\centering{

\includegraphics[width=0.25\textwidth,height=\textheight]{img/matchbox.jpg}

}

\caption{\label{fig-matchbox}Matchbox-Autos sind Modelle f√ºr Autos}

\end{figure}%

\begin{definition}[Modelle]\protect\hypertarget{def-modelle}{}\label{def-modelle}

Modelle sind ein vereinfachtes Abbild der Realit√§t, eine
\emph{Repr√§sentation} (Kaplan 2009).\(\square\)

\end{definition}

\begin{example}[Beispiele f√ºr
Modelle]\protect\hypertarget{exm-Modelle}{}\label{exm-Modelle}

Puppen sind Modelle f√ºr Babies, Landkarten f√ºr Landstriche und
\href{https://de.wikipedia.org/wiki/Bohrsches_Atommodell}{das Atommodell
von Nils Bohr} ist ein Modell f√ºr Atome.\footnote{\url{https://de.wikipedia.org/wiki/Bohrsches_Atommodell}}\(\square\)

\end{example}

Auch in der Statistik nutzen wir Modelle. Helfen Sie Prof.~Weiss-Ois: Er
blickt nicht durch. Gerne w√ºrde er wissen, wie viele Stunden seine
Studentis auf die Pr√ºfung lernen. Aber mit so vielen Zahlen kann er
nicht umgehen \ldots{} Geben Sie ihm ein Modell: Sagen Sie ihm, wie lang
die Studis typischerweise lernen (sagen Sie ihm ein einfach den
Mittelwert der Lernzeiten).\footnote{Bilduelle: Icon unter Flaticon
  licence, Autor: iconixar,
  \url{https://www.flaticon.com/free-icons/professor}}

\begin{figure}

\begin{minipage}{0.44\linewidth}

\subsection{Vorher}\label{vorher}

12, 8, 10, 11, 10, 9, 13, 9, 14, 9, 12, 14, 7, 9, 9, 11, 9, 4, 5, 12, 9,
6, 9, 12, 13, 9, 9, 6, 10, 8

\begin{figure}[H]

{\centering \includegraphics[width=0.25\textwidth,height=\textheight]{img/teacher.png}

}

\subcaption{Oh jeh, so viele Zahlen! Ich check nix! Wie viel lernen denn
jetzt meine Studis?!}

\end{figure}%

\end{minipage}%
%
\begin{minipage}{0.11\linewidth}

\end{minipage}%
%
\begin{minipage}{0.44\linewidth}

\subsection{Nachher}\label{nachher}

\centering{9.6}

\begin{figure}[H]

{\centering \includegraphics[width=0.25\textwidth,height=\textheight]{img/teacher.png}

}

\subcaption{Yeah, jetzt wei√ü ich, wie viel die Studis so typischerweise
lernen. Viel zu wenig nat√ºrlich!}

\end{figure}%

\end{minipage}%

\end{figure}%

Der Nutzen von Modellen ist, dass sie komplexe Sachverhalte vereinfachen
und damit oft √ºberhaupt erst dem Verst√§ndnis oder einer Untersuchung
zug√§nglich machen: Modelle erm√∂glichen Verst√§ndnis. In der Datenanalyse
bzw. Statistik\footnote{die beiden Begriffe werden hier weitgehend
  synonym gebraucht} fassen Sie oft viele Daten pr√§gnant zusammen, z.B.
zu einer einzelnen Kennzahl. Das Verr√ºckte an Modellen ist, dass man
Informationen wegwirft, um eine (andere, hoffentlich n√ºtzlichere)
Information zu bekommen (Stigler 2016). Weniger ist mehr?!

\section{Praxisbezug}\label{praxisbezug}

Wir leben im Datenzeitalter; Daten durchdringen alle Bereiche des
beruflichen, gesellschaftlichen und privaten Lebens. Die Datenanalyse
hat sich in den letzten Jahren massiv ver√§ndert, s.
Abbildung~\ref{fig-fo-fr√ºher-heute}.

\begin{figure}

\centering{

\includegraphics{img/Forschung_frueher_heute-crop.png}

}

\caption{\label{fig-fo-fr√ºher-heute}Forschung fr√ºher und heute}

\end{figure}%

Diese Entwicklung ist durchaus auch kritisch zu betrachten. Mit der
wachsenden Bedeutung von Daten w√§chst in gleichem Ma√üe die Bedeutung von
Datenanalyse. Denn Daten ohne Sinn sind nutzlos. Aus diesem Grund kann
man sagen, dass Datenanalyse (und damit auch Statistik als eine
spezielle Art von Datenanalyse) zu stark nachgefragten Jobs geh√∂ren.

Laut \href{https://web.arbeitsagentur.de/entgeltatlas/beruf/129987}{dem
Entgeltatlas der Bundesagentur f√ºr Arbeit} liegt ein typisches Gehalt
von Data Scientisten bei knapp 6000 ‚Ç¨ pro Monat (in der Altersgruppe von
25 bis 54)\footnote{Abrufdatum: 1.2.23;
  \url{https://web.arbeitsagentur.de/entgeltatlas/beruf/129987}}. Laut
dem
\href{https://gehaltsreporter.de/gehaelter-von-a-bis-z/it/data-scientist/}{Gehaltsreporter}
liegt das Einstiegsgehalt dieser Berufsgruppe bei knapp 50.000‚Ç¨ pro
Jahr.\footnote{\url{https://gehaltsreporter.de/gehaelter-von-a-bis-z/it/data-scientist/}}

\section{Wie man mit Statistik
l√ºgt}\label{wie-man-mit-statistik-luxfcgt}

Das \emph{File-Drawer-Problem}: Sie haben ein tolles Experiment
durchgef√ºhrt, viel Arbeit, viel Stress, endlich geschafft, puh. Von den
20 Variablen (als AV, s. Kapitel~\ref{sec-arten-variablen}), die Sie
untersucht haben, zeigt nur 1 einen interessanten Effekt, leider. 1 von
20, das h√∂rt sich nicht so toll an. W√§re es da nicht ``elegant'', die 19
Variablen ohne sch√∂nen Effekt einfach in der Schublade liegen zu lassen
bis zum Sankt-Nimmerleins-Tag? Dann k√∂nnten Sie stattdessen als Ergebnis
nur die eine Variable mit sch√∂nen Ergebnis pr√§sentieren, ganz ohne
widersprechende Befunde.

Dieser Versuchung nicht zu erliegen, kann schwer sein. Es ist aber
gef√§hrlich, missliebige Ergebnisse zu verschweigen: Die anderen Menschen
bekommen dann ein falsches Bild der Ergebnislage; man spricht von
\href{https://de.wikipedia.org/wiki/Publikationsbias}{Publikationsbias}.\footnote{\url{https://de.wikipedia.org/wiki/Publikationsbias}}
Wer Ergebnisse verschweig, verzerrt die insgesamte Befundlage (Rothstein
2014).

\section{Fazit}\label{fazit-1}

Die Aufgabe von Statistik ist es, durch Zusammenfassen von Daten Modelle
zu bilden, die es uns einfacher machen, schwierige Sachverhalte zu
verstehen. Zentral ist dabei, die Analyse von Variabilit√§t der Daten.
Daten kommen in verschiedenen Varianten vor, typischerweise in
Tabellenform, m√∂glichst im Tidy-Format.

\section{Aufgaben}\label{aufgaben}

Die Webseite \href{https://datenwerk.netlify.app}{datenwerk.netlify.app}
stellt eine Reihe von einschl√§gigen √úbungsaufgaben bereit. Sie k√∂nnen
die Suchfunktion der Webseite nutzen, um die Aufgaben mit den folgenden
Namen zu suchen:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \href{https://datenwerk.netlify.app/posts/variation01/variation01.html}{variation01}
\item
  \href{https://datenwerk.netlify.app/posts/def-statistik01/def-statistik01}{Def-Statistik01}
\item
  \href{https://datenwerk.netlify.app/posts/tidy1/tidy1.html}{tidy1}
\item
  \href{https://datenwerk.netlify.app/posts/skalenniveau1a/skalenniveau1a}{Skalenniveau1a}
\item
  \href{https://datenwerk.netlify.app/posts/ziele-statistik/ziele-statistik}{Ziele-Statistik}
\item
  \href{https://datenwerk.netlify.app/posts/variation02/variation02.html}{variation02}
\item
  \href{https://datenwerk.netlify.app/posts/skalenniveau1b/skalenniveau1b}{Skalenniveau1b}
\item
  \href{https://datenwerk.netlify.app/posts/tidydata1/tidydata1.html}{tidydata1}
\end{enumerate}

\section{Vertiefung}\label{vertiefung}

\subsection{Excel f√ºr K√∂nner}\label{excel-fuxfcr-kuxf6nner}

In vielen Organisationen werden Exceltabellen f√ºr bestimmte Zwecke der
Datenverarbeitung verwendet. Excel\footnote{und √§hnliche Programme} hat
bestimmte St√§rken und Vorteile, aber auch gewisse Nachteile und
Schw√§che; das liegt z.T. daran, dass Excel f√ºr bestimmte Aufgaben besser
und f√ºr andere weniger gut geeignet ist. Wenn man mit Excel arbeitet,
wiederholen sich erfahrungsgem√§√ü immer wieder die gleichen Fehler bzw.
suboptimalen Vorgehensweise zum Aufbau einer Exceltabelle.

\href{https://www.tandfonline.com/doi/full/10.1080/00031305.2017.1375989}{Dieser
Artikel} von Broman und Woo (2018) zeigt anhand einiger praktischer
Tipps, wie man Exceltabellen so aufbaut, dass Fehler minimiert werden.

\begin{exercise}[Fassen Sie den Artikel von Broman und Woo (2018)
zusammen]\protect\hypertarget{exr-xls-paper}{}\label{exr-xls-paper}

Die Lehrkraft teilt Sie dazu in Gruppen ein und weist jeder Gruppe einen
Abschnitt des Artikels zu. Fassen Sie das \emph{Wesentliche} (und nur
das Wesentliche) an einem geeigneten Ort zusammen (z.B. auf einem
Miro-Board). \(\square\)

\end{exercise}

\subsection{Sind wir s√ºchtig nach dem
Handy?}\label{sind-wir-suxfcchtig-nach-dem-handy}

Sind Sie s√ºchtig nach Ihrem Handy? Lassen Sie uns eine kleine Studie
dazu live im H√∂rsaal durchf√ºhren. F√ºllen Sie
\href{https://forms.gle/PP8yb6Ubqq3JU78F9}{diese Umfrage} zum Thema
Smartphonse-Sucht aus (anonym und kein Muss).\footnote{\url{https://forms.gle/PP8yb6Ubqq3JU78F9}}
Kernst√ºck der Umfrage ist die Smartphone-Sucht-Skala (Kwon u.~a. 2013).
Eine Studie fand, dass ca. ein Siebtel der Studierenden s√ºchtig nach
ihrem Smartphone sind (Haug u.~a. 2015); demnach k√∂nnte dem Thema eine
hohe Bedeutsamkeit zukommen.

Wir werden die Daten im weiteren Verlauf auswerten. \(\square\)

\subsection{Datenprofi plaudert aus dem
N√§hk√§stchen}\label{datenprofi-plaudert-aus-dem-nuxe4hkuxe4stchen}

Inspiration von einer Praktikerin der Datenanalyse: Caitlin Hudon verr√§t
\href{https://www.youtube.com/watch?v=O5lP6XcopdQ&list=PL9HYL-VRX0oQchs7dqFICoxMgnvFO10tC&index=15&t=1s}{in
diesem Video}, welche Fehler Sie sie in in den acht Jahren ihrer
Berufserfahrung gemacht hat und was sie daraus gelernt hat.\footnote{\url{https://youtu.be/O5lP6XcopdQ?si=7UsS6xbeYjnorGhx}}

\url{https://www.youtube.com/watch?v=O5lP6XcopdQ&list=PL9HYL-VRX0oQchs7dqFICoxMgnvFO10tC&index=15&t=1s}

\section{Literaturhinweise}\label{literaturhinweise}

Einen Einblick in die Fundamente statistischer Analyse bietet Stigler
(2016). Cetinkaya-Rundel und Hardin (2021), stellen grundlegende
Konzepte der Analyse von Daten im Kapitel 1, ``Hello data'', vor. Downey
(2023) illustriert statistische √úberraschungsmoment auf unterhaltsame,
und vor allem: sofataugliche Art.

\section{Literatur}\label{literatur}

\chapter{Daten einlesen}\label{daten-einlesen}

\section{Lernsteuerung}\label{lernsteuerung-1}

\subsection{Standort im Lernpfad}\label{standort-im-lernpfad-1}

Abb. Abbildung~\ref{fig-ueberblick} den Standort dieses Kapitels im
Lernpfad und gibt damit einen √úberblick √ºber das Thema dieses Kapitels
im Kontext aller Kapitel.

\subsection{Lernziele}\label{lernziele-2}

\begin{itemize}
\tightlist
\item
  Sie k√∂nnen R und RStudio starten.
\item
  Sie k√∂nnen R-Pakete installieren und starten.
\item
  Sie k√∂nnen Variablen in R zuweisen und auslesen.
\item
  Sie k√∂nnen Daten in R importieren.
\item
  Sie k√∂nnen den Begriff \emph{Reproduzierbarkeit} definieren.
\end{itemize}

\subsection{√úberblick}\label{uxfcberblick-1}

Abbildung~\ref{fig-ueberblick} zeigt Ihnen, wo auf unserer Reise durch
die Datenanalyse sich dieses Kapitels verorten l√§sst.

Abbildung~\ref{fig-roller} zeigt den typischen Lernverlauf in
Zusammenhang mit Datenanalyse (und R) an: Es gibt H√∂hen und Tiefen. Die
wechseln sich ab. Das ist ganz normal!

\begin{figure}

\centering{

\includegraphics[width=0.8\textwidth,height=\textheight]{img/r_rollercoaster.png}

}

\caption{\label{fig-roller}Life is a roller-coaster. You just have to
ride it. Image credit: Allison Horst;
\url{https://github.com/allisonhorst/stats-illustrations}, CC-BY}

\end{figure}%

\subsection{Ab diesem Kapitel ben√∂tigen Sie
R}\label{ab-diesem-kapitel-benuxf6tigen-sie-r}

Bitte stellen Sie sicher, dass Sie R rechtzeitig einsatzbereit haben.
Weiter unten in diesem Kapitel finden Sie Installationshinweise
(Kapitel~\ref{sec-install-r}). Falls Sie dieses Kapitel zum ersten Mal
bzw. sich noch nicht mir R auskennen, werden Sie vielleicht einigen
Inhalten begegnen, die Sie noch nicht gleich verstehen. Keine Sorge, das
ist normal. Mit etwas √úbung wird Ihnen bald alles schnell von der Hand
ghen.

\subsection{Begleitvideos}\label{begleitvideos}

Schauen Sie sich malden YouTube-Kanal
\texttt{@sebastiansauerstatistics}\footnote{\url{https://www.youtube.com/@sebastiansauerstatistics}}
an und dort die Playlist ``R''\footnote{\url{https://www.youtube.com/playlist?list=PLRR4REmBgpIEaIyeNBgNGPgmhQJ_T1y8_}}.
Dort finden Sie einige Videos zum Thema R.

\section{Errrstkontakt}\label{errrstkontakt}

\subsection{Warum R?}\label{warum-r}

Gr√ºnde, die f√ºr den Einsatz von R sprechen:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  R ist kostenlos, andere Softwarepakete f√ºr Datenanalyse sind teuer.
\item
  R und R-Befehle sind quelloffen, d.h. man kann sich die
  zugrundeliegenden Computerbefehle anschauen. Jeder kann pr√ºfen, ob R
  vern√ºnftig arbeitet. Alle k√∂nnen beitragen.
\item
  R hat die neuesten Methoden.
\item
  R hat eine gro√üe Community.
\item
  R ist ma√ügeschneidert f√ºr Datenanalyse.
\end{enumerate}

Allerdings gibt es auch abweichende Meinungen, s.
Abbildung~\ref{fig-bill-excel}.

\begin{figure}

\centering{

\includegraphics[width=0.5\textwidth,height=\textheight]{img/bill-gates-excel.jpg}

}

\caption{\label{fig-bill-excel}Manche finden Excel cooler als R, nicht
wahr, Bill Gates?}

\end{figure}%

\subsection{R und Reproduzierbarkeit}\label{r-und-reproduzierbarkeit}

\begin{definition}[Reproduzierbarkeit]\protect\hypertarget{def-repro}{}\label{def-repro}

Ein (wissenschaftlicher) Befunde ist reproduzierbar, wenn andere
Analystis mit dem gleichen experimentellen Setup zum gleichen Ergebnis
(wie in der urspr√ºnglichen Analyse) kommen (Plesser 2018). \(\square\)

\end{definition}

Definition~\ref{def-repro} ist, etwas √ºberspitzt, in
Abbildung~\ref{fig-repro} wiedergegeben.

\begin{figure}

\centering{

\includegraphics[width=0.5\textwidth,height=\textheight]{img/repro-star-struck.png}

}

\caption{\label{fig-repro}Daten + Syntax + genaue Beschreibung der
Messungen = reproduzierbar}

\end{figure}%

\begin{example}[Aus der Forschung: Reproduzierbarkeit in der
Psychologie]\protect\hypertarget{exm-repro}{}\label{exm-repro}

~

\begin{quote}
{\emoji{student}} Wie ist es um unsere Wissenschaft, Psychologie,
bestellt? Haben die Befunde Hand und Fu√ü?
\end{quote}

Obels u.~a. (2020) haben die Reproduzierbarkeit in psychologischen
Studien untersucht. Sie berichten folgendes Ergebnis

\begin{quote}
We examined data and code sharing for Registered Reports published in
the psychological literature from 2014 to 2018 and attempted to
independently computationally reproduce the main results in each
article. Of the 62 articles that met our inclusion criteria, 41 had data
available, and 37 had analysis scripts available. Both data and code for
36 of the articles were shared. We could run the scripts for 31
analyses, and we reproduced the main results for 21 articles.
\(\square\)
\end{quote}

\end{example}

\subsection{R \& RStudio}\label{r-rstudio}

Wenn wir sagen, ``wir arbeiten mit R'', dann hei√üt das in unserem Fall
``wir arbeiten mit R und mit RStudio''.

\begin{figure}

\begin{minipage}{0.25\linewidth}
\includegraphics{img/R-logo.png}\end{minipage}%
%
\begin{minipage}{0.25\linewidth}

\includegraphics[width=0.4\textwidth,height=\textheight]{img/sparkling_heart.png}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}
\includegraphics{img/rlogo.png}\end{minipage}%

\end{figure}%

Ismay und Kim (2020) zeigen eine sch√∂ne Analogie, was der Unterschied
von \emph{R} und \emph{RStudio} ist, s.
Abbildung~\ref{fig-r-rstudio}.\footnote{Streng genommen ist RStudio f√ºr
  die Datenanalyse irrelevant, aber RStudio ist praktisch, Sie werden es
  nicht missen wollen.}

\begin{figure}

\centering{

\includegraphics[width=5.05in,height=\textheight]{img/r_vs_rstudio_1.png}

}

\caption{\label{fig-r-rstudio}R vs.~RStudio: R macht die Arbeit, RStudio
ist f√ºr Komfort und √úbersicht}

\end{figure}%

Kurz gesagt: Das eigentlich Arbeiten besorgt R. F√ºr den Komfort und die
Sch√∂nheit ist RStudio zust√§ndig. Auch eine Art von Arbeitsteilung!

Hier sehen Sie einen Screenshot von der Oberfl√§che von RStudio, s.
Abbildung~\ref{fig-rstudio}.

\begin{figure}

\centering{

\includegraphics{img/rstudio.png}

}

\caption{\label{fig-rstudio}So sieht RStudio aus}

\end{figure}%

\section{Installation von R und RStudio}\label{sec-install-r}

\subsection{Installation von R}\label{installation-von-r}

R ist ein Softwarepaket f√ºr statistische Berechnungen\footnote{Mehr
  Infos finden sich hier:
  \url{https://de.wikipedia.org/wiki/R_\%28Programmiersprache\%29}}.
Laden Sie es f√ºr Ihr Betriebssytem herunter:

\begin{itemize}
\tightlist
\item
  \href{https://cloud.r-project.org/bin/windows/base/}{Windows}
\item
  \href{https://cloud.r-project.org/bin/macosx/}{MacOS}
\item
  \href{https://cloud.r-project.org/bin/linux/}{Linux}
\end{itemize}

Mehr Infos zu R finden Sie unter
\url{https://cloud.r-project.org/}.\footnote{Wenn Sie gefragt werden,
  dass Sie einen ``Mirror'' ausw√§hlen sollen, hei√üt das, Sie sollen
  einen Computer (Server) w√§hlen, von dem Sie R herunterladen. Der
  sollte m√∂glichst nicht zu weit weg stehen, dann spart es vielleicht
  etwas Zeit und Bandbreite.}

Wenn Sie die Installationsdatei heruntergeladen haben, √∂ffnen Sie diese
Datei (Doppelklick) und Sie werden durch die Installation
gef√ºhrt.\footnote{Sie ben√∂tigen Admin-Rechte auf Ihrem Computer.}

\subsection{Installation von RStudio
Desktop}\label{installation-von-rstudio-desktop}

RStudio ist eine \emph{graphische Benutzeroberfl√§che} (graphical user
interface, GUI) f√ºr R, plus ein paar Goodies\footnote{in Form einer
  \emph{intergrierten Entwicklungsumgebung} (integrated development
  environment, IDE:
  \url{https://en.wikipedia.org/wiki/Integrated_development_environment}))}.

Laden Sie zun√§chst die \emph{Desktop-Version} von RStudio herunter f√ºr
Ihr Betriebssystem (Windows, MacOS, Linux) vom Anbieter (Posit)
herunter. \footnote{\url{https://posit.co/download/rstudio-desktop/}}.

Wenn Sie die Installationsdatei heruntergeladen haben, √∂ffnen Sie diese
Datei (Doppelklick) und Sie werden durch die Installation
gef√ºhrt.\footnote{Sie ben√∂tigen u.U. Admin-Rechte auf Ihrem Computer.}

\subsection{RStudio Cloud}\label{rstudio-cloud}

\subsubsection{RStudio Cloud als Alternative zu
RStudio}\label{rstudio-cloud-als-alternative-zu-rstudio}

RStudio Cloud\footnote{\url{https://rstudio.cloud/}; neuerdings auch
  ``Posit Cloud'' genannt} ist ein Webdienst von Posit/RStudio (zum Teil
kostenlos), also \emph{RStudio online}: Man kann damit online mit R
arbeiten. Die Oberfl√§che ist praktisch identisch zur Desktop-Version, s.
Abbildung~\ref{fig-rstudio-cloud}. Sie k√∂nnen es als Alternative zur
Installation von RStudio auf Ihrem Computer verwenden. Ein Vorteil von
RStudio Cloud ist, dass man als Nutzer \emph{nichts installieren} muss
und dass es \emph{auch auf Tablets} l√§uft (im Gegensatz zur
Desktop-Version von RStudio). Ein Nachteil ist, dass es etwas langsamer
ist und nur f√ºr ein gewisses Zeitvolumen kostenlos. Sie m√ºssen sich ein
Konto anlegen, um den Dienst nutzen zu k√∂nnen.

\begin{figure}

\centering{

\includegraphics{img/rstudio-cloud.png}

}

\caption{\label{fig-rstudio-cloud}So sieht RStudio Cloud aus. Genau wie
RStudio Desktop}

\end{figure}%

\subsubsection{Vertiefung}\label{vertiefung-1}

Wenn Ihr Dozent Ihnen einen Projektordner bzw. einen Link dazu
bereitstellt, ist das komfortabel, da der Dozent dann schon Pakete
installieren, Daten bereitstellen und andere Nettigkeit vorbereiten kann
f√ºr Sie. Allerdings m√ºssen Sie den Projektordner in Ihrem Konto
abspeichern, wenn Sie etwas speichern m√∂chten, da Sie vermutlich keine
Schreibrechte im Projektordner Ihres Dozenten haben. Klicken Sie dazu
auf ``Save a permanent copy'', s. Abbildung~\ref{fig-perm-copy}.

\begin{figure}

\centering{

\includegraphics{img/rstudio-save-a-permanent-copy.png}

}

\caption{\label{fig-perm-copy}Einen Projektordner im eigenen Konto
abspeichern, um Schreibrechte zu haben}

\end{figure}%

Sie k√∂nnen auch von der Cloud exportieren, also Ihre Syntaxdatei
herunterladen. Klicken Sie dazu im Reiter ``Files'' auf
\texttt{More\ \textgreater{}\ Export\ ...}.

\section{RStudio starten, nicht R}\label{rstudio-starten-nicht-r}

Wir verwenden beide Programme (R und RStudio). Aber wir \emph{√∂ffnen
nur} RStudio. RStudio findet selbst√§ndig R und √∂ffnet dieses
``heimlich''. √ñffnen Sie nicht noch extra R (sonst w√§re R zweifach
ge√∂ffnet).

Anstelle von \emph{RStudio Desktop} (auf Ihrem Computer/Desktop) k√∂nnen
Sie auch die \emph{RStudio Cloud} (die Online-Version ) starten.

\section{R-Pakete}\label{r-pakete}

\subsection{Was sind R-Pakete?}\label{was-sind-r-pakete}

Typisch f√ºr R ist sein modularer Aufbau: Man kann eine gro√üe Zahl an
Erweiterungen (``Pakete'', engl. \emph{packages}) installieren, alle
kostenlos. In R Paketen ``wohnen'' R-Befehle, also Dinge, die R kann,
``Skills'' sozusagen. Au√üerdem k√∂nnen in R-Paketen auch Daten
bereitgestellt werden. Damit man die Inhalte eines R-Pakets nutzen kann,
muss man es zuerst installieren und dann starten.

Man kann sich daher ein R-Paket vorstellen wie ein Buch: Wenn R es
gelesen hat, dann kennt es die Inhalte. Diese Inhalte k√∂nnten
irgendwelche Formeln, also Berechnungen sein. Es k√∂nnte aber die
``Bauanleitung'' f√ºr ein sch√∂nes Diagramm sein.

Ist ein spezielles R-Paket auf Ihrem Computer installiert, so k√∂nnen Sie
diese Funktionalit√§t nutzen.

Die Zahl an diesen ``Paketen'' ist gro√ü; zur Verdeutlichung s.
Abbildung~\ref{fig-pakete}.

\begin{figure}

\centering{

\subsection{Viele Pakete}

\centering{

\includegraphics[width=0.5\textwidth,height=\textheight]{img/11102039694_d42ca1ff1c_c.jpg}

}

\subcaption{\label{fig-ship}Containershiff mit vielen Paketen, Corey
Seeman, CC-BY-NC 20, Flickr.com}

\subsection{Es kommen viele dazu}

\centering{

\includegraphics{img/number-of-submitted-packages-to-CRAN.png}

}

\subcaption{\label{fig-cran}Die Anzahl der R-Pakete ist exponenziell
gewachsen}

Es gibt viele R-Pakete.

}

\caption{\label{fig-pakete}}

\end{figure}%

\emph{Erweiterungen} kennt man von vielen Programmen, sie werden auch
\emph{Add-Ons}, \emph{Plug-Ins} oder sonstwie genannt. Man siehe zur
Verdeutlichung Erweiterungen beim Broswer Chrome,
Abbildung~\ref{fig-chrome}.

\begin{figure}

\centering{

\includegraphics[width=0.5\textwidth,height=\textheight]{img/chrome-extensions.png}

}

\caption{\label{fig-chrome}Erweiterungen beim Browser Chrome}

\end{figure}%

Die Anzahl der R-Pakete ist gro√ü; allein auf dem ``offiziellen
Web-Store'' (nennt sich ``CRAN'') von R gibt es ca. 20,000 Pakete (vgl.
Abbildung~\ref{fig-cran});
\href{https://gist.github.com/daroczig/3cf06d6db4be2bbe3368}{Stand:
2022; Quelle}). Und es kommen immer mehr dazu.

\subsection{Pakete installieren}\label{install-r-pckgs}

Wie jede Software muss man Pakete (Erweiterungen f√ºr R) erst einmal
installieren, bevor man sie verwenden kann. Ja, einmal installieren
reicht.

Das geht komfortabel, wenn man beim Reiter \emph{Packages} auf
\emph{Install} klickt (s. Abbildung~\ref{fig-pckgs}) und dann den Namen
des zu installierenden Pakets eingibt.

\begin{figure}

\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{img/install-packages.png}

}

\subcaption{\label{fig-install-packages}Klicken Sie auf ``Install'' im
Reiter ``Packages'', um R-Pakete zu installieren}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{img/install-packages3.png}

}

\subcaption{\label{fig-so-installieren}Geben Sie den Namen des zu
installierenden R-Pakets in dieser Maske ein}

\end{minipage}%

\caption{\label{fig-pckgs}So installiert man Pakete in R.}

\end{figure}%

\begin{quote}
{\emoji{student}} Welche R-Pakete sind denn schon installiert?
\end{quote}

Im Reiter \emph{Packages} k√∂nnen Sie nachschauen, welche Pakete auf
Ihrem Computer schon installiert sind. Diese Pakete brauchen Sie
logischerweise dann \emph{nicht} noch mal installieren, s.
Abbildung~\ref{fig-paket-installiert}.

\begin{figure}

\centering{

\includegraphics{img/paket-installiert.png}

}

\caption{\label{fig-paket-installiert}So sehen Sie, ob ein R-Paket auf
Ihrem System installiert ist}

\end{figure}%

Alternativ k√∂nnen Sie zum Installieren von Paketen auch den Befehl
\texttt{install.packages()} verwenden. Also zum Beispiel
\texttt{install.packages(tidyverse)} um das Paket \texttt{tidyverse} zu
installieren.

\begin{quote}
{\emoji{student}} Ja, aber welche R-Pakete ``soll'' ich denn
installieren, welche brauch ich denn?
\end{quote}

Im Moment sollten Sie die folgenden Pakete installiert haben:

\begin{itemize}
\tightlist
\item
  \texttt{tidyverse}
\item
  \texttt{easystats}
\end{itemize}

Wenn Sie die noch nicht installiert haben sollten, dann k√∂nnen Sie das
jetzt ja nachholen.\footnote{√úbrigens sind \texttt{tidyverse} und
  \texttt{easystats} Pakete, die nur daf√ºr da sind, mehrere Pakete zu
  installieren. So geh√∂ren z.B. zu \texttt{tidyverse} die Pakete
  \texttt{ggplot} (Daten verbildlichen) und \texttt{dplyr} (Datenjudo).
  Damit wir nicht alle Pakete einzeln installieren und starten m√ºssen,
  bietet uns das Paket \texttt{tidyverse} den Komfort, alle die Pakete
  dieser ``Sammlung'' auf einmal zu starten. Praktisch.}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-caution-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-caution-color}{\faFire}\hspace{0.5em}{Vorsicht}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-caution-color-frame]

Bevor Sie ein R-Paket (oder √ºberhaupt irgendwelche Software)
installieren/updaten, sollten Sie das R-Paket schlie√üen/beenden. Sonst
schrauben Sie an einem elektrischen Ger√§t herum, das noch unter Strom
steht (nicht gut). Die einfachste Art, alle Pakete zu beenden ist,
\texttt{Session\ \textgreater{}\ Restart\ R} zu klicken (in
RStudio).\(\square\)

\end{tcolorbox}

\subsection{Pakete starten}\label{pakete-starten}

Wenn Sie ein Softwareprogramm -- nichts anderes sind R-Pakete --
installiert haben, m√ºssen Sie es noch \emph{starten}.

Merke: Ein bestimmtes R-Paket muss man nur \emph{einmalig installieren}.
Aber man muss es \emph{jedes Mal neu starten}, wenn man R (bzw. RStudio)
startet.

Sie erkennen leicht, ob ein Paket gestartet ist, wenn Sie ein H√§kchen
vor dem Namen des Pakets in der Paketliste (Reiter \emph{Packages})
sehen, s. Abbildung Abbildung~\ref{fig-install-packages}.\footnote{Dieses
  Video
  \url{https://www.youtube.com/watch?v=Yej9xzKQ3yI&list=PLRR4REmBgpIEaIyeNBgNGPgmhQJ_T1y8_&index=26}
  verdeutlicht den Unterschied zwischen \emph{Installation} und
  \emph{Starten} eines R-Pakets.}

\section{Mit R arbeiten}\label{mit-r-arbeiten}

\subsection{Projekte in R}\label{projekte-in-r}

Ein \emph{Projekt} in RStudio (s. Abbildung~\ref{fig-projects}) ist
letztlich ein Ordner, der als ``Basis'' f√ºr eine Reihe von Dateien
verwendet wird. Sagen wir, das Projekt hei√üt \texttt{cool\_stuff}.
RStudio legt uns diesen Ordner an einem von uns gew√§hlten Platz auf
unserem Computer an. Das ist ganz praktisch, weil man dann sagen kann
``Hey R, nimmt die Datei `daten.csv'\,'', ohne einen Pfad anzugeben.
Vorausgesetzt, die Datei liegt auch im Projektordner
(\texttt{cool\_stuff}).

Projekte kann anlegen mit Klick auf das Icon, das einen Quader mit dem
Buchstaben R darin anzeigt (s. Abbildung~\ref{fig-rstudio-projekte}).
RStudio-Projekte machen Ihr Leben leichter (s.
Abbildung~\ref{fig-projects}).

\begin{figure}

\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics[width=0.5\textwidth,height=\textheight]{img/rstudio-projekte.png}

}

\subcaption{\label{fig-rstudio-projekte}RStudio-Projekte, Beispiele}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{img/cracked_setwd.png}

}

\subcaption{\label{fig-setwd}RStudio-Projekte sind viel sicherer als das
Arbeitsverzeichnis von Hand zu w√§hlen oder mit Pfaden herumzubasteln.
Image credit: Allision Horst}

\end{minipage}%

\caption{\label{fig-projects}Nutzen Sie RStudio-Projekte, das macht Ihr
Leben leichter.}

\end{figure}%

\subsection{Skriptdateien}\label{skriptdateien}

Die R-Befehle (``Syntax'') schreiben Sie am besten in eine speziell
daf√ºr vorgesehene Textdatei in RStudio. Eine Sammlung von
(R-)Computer-Befehlen nennt man auch ein \emph{Skript}, daher spricht
man auch von einer \emph{Skriptdatei}.

\subsubsection{So √∂ffnen Sie eine neue
Skriptdatei}\label{so-uxf6ffnen-sie-eine-neue-skriptdatei}

Um eine neue R-Skriptdatei zu √∂ffnen, klicken Sie auf das Icon, das ein
wei√ües Blatt mit einem gr√ºnen Pluszeichen zeigt, s.
Abbildung~\ref{fig-script-new}.

\begin{figure}

\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics[width=0.5\textwidth,height=\textheight]{img/script-new.png}

}

\subcaption{\label{fig-script-new1}So erstellen Sie eine neue
Skriptdatei}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}
\end{minipage}%
\newline
\begin{minipage}{0.50\linewidth}
\end{minipage}%

\caption{\label{fig-script-new}Es gibt verschiedene Wege, um eine neue
R-Skript-Datei in RStudio zu √∂ffnen.}

\end{figure}%

\subsubsection{So speichern Sie Ihre
Skripdatei}\label{so-speichern-sie-ihre-skripdatei}

Vergessen Sie nicht zu \emph{speichern}, wenn Sie ein tolles Skript
geschrieben haben. Daf√ºr gibt es mehrere M√∂glichkeiten:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Tastaturk√ºrzel \emph{Strg+S}
\item
  Men√º: \texttt{File\ \textgreater{}\ Save}
\item
  Klick auf das Icon mit der Diskette, s.
  Abbildung~\ref{fig-script-new}.
\end{enumerate}

\subsubsection{So √∂ffnen Sie eine
Skriptdatei}\label{so-uxf6ffnen-sie-eine-skriptdatei}

Eine Skriptdatei k√∂nnen Sie in typischer Manier \emph{√∂ffnen}:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Strg+O
\item
  Klick auf das Icon mit der Akte und dem gr√ºnen Pfeil (vgl.
  Abbildung~\ref{fig-script-new})
\item
  Men√º: \texttt{File\ \textgreater{}\ Open\ File...}
\end{enumerate}

\subsection{Quarto-Dokumente}\label{quarto-dokumente}

\href{https://quarto.org/}{Quarto} ist ein Programm zum Erstellen von
Texten, in das man R-Syntax einf√ºgen kann. Die Ausgaben der R-Befehle
werden dann direkt im Dokument eingebunden.
Abbildung~\ref{fig-exm-quarto} zeit ein Beispiel f√ºr ein
Quarto-Dokument.

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Quarto ist eine komfortable und leistungsf√§hige Methode, um Dokumente
mit R-Syntax zu schreiben. Sie sind aber nicht verpflichtet, Quarto zu
nutzen. Stattdessen k√∂nnen Sie Ihre Syntax auch in Skriptdateien
schreiben. \(\square\)

\end{tcolorbox}

\begin{figure}

\centering{

\includegraphics{index_files/mediabag/rstudio-hello.png}

}

\caption{\label{fig-exm-quarto}Dokumente schreiben mit Quarto}

\end{figure}%

Wenn Sie Quarto nutzen m√∂chten, m√ºssen Sie es zun√§chst installieren,
d.h. \href{https://quarto.org/docs/get-started/}{herunterladen}. Dann
k√∂nnen Sie in RStudio Quarto-Dateien erstellen.\footnote{\textless ttps://quarto.org/docs/get-started/\textgreater{}}
Ein neues Quarto-Dokument k√∂nnen Sie erstellen mit Klick auf \emph{File
\textgreater{} New File \textgreater{} Quarto Document
\ldots{}}.\footnote{Dieses Video \url{https://youtu.be/_f3latmOhew} gibt
  Ihnen Einstiegshilfe in Quarto.}

\section{Errisch f√ºr Einsteiger}\label{errisch-fuxfcr-einsteiger}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Sie finden den R-Code f√ºr jedes Kapitel
\href{https://github.com/sebastiansauer/statistik1/tree/main/R-code-for-all-chapters}{hier}.
\(\square\)

\end{tcolorbox}

\subsection{Variablen}\label{sec-rvars}

In jeder Programmiersprache kann man Variablen definieren, so auch in R:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{richtige\_antwort }\OtherTok{=} \DecValTok{42}
\NormalTok{falsche\_antwort }\OtherTok{=} \DecValTok{43}
\NormalTok{typ }\OtherTok{=} \StringTok{"Antwort"}
\NormalTok{ist\_korrekt }\OtherTok{=} \ConstantTok{TRUE}
\end{Highlighting}
\end{Shaded}

Alternativ zum Gleichheitszeichen \texttt{=} k√∂nnen Sie auch (synonym)
den Zuweisungspfeil \texttt{\textless{}-} verwenden. Beides f√ºhrt zum
gleichen Ergebnis. Allerdings ist der Zuweisungspfeil pr√§ziser, und
sollte daher \emph{bevorzugt} werden.

Der \emph{Zuweisungspfeil} \texttt{\textless{}-} bzw. das
Gleichheitszeichen \texttt{=} definiert eine neue \emph{Variable} (oder
√ºberschreibt den Inhalt, wenn die Variable schon existiert).\footnote{Dieses
  Video
  \url{https://www.youtube.com/watch?v=TKQk-tEF9YQ&list=PLRR4REmBgpIEaIyeNBgNGPgmhQJ_T1y8_&index=28}
  und dieses Video
  \url{https://www.youtube.com/watch?v=Nal0m_AmMwg&list=PLRR4REmBgpIEaIyeNBgNGPgmhQJ_T1y8_&index=48}
  geben eine Einf√ºhrung in das Definieren von Variablen in R}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{richtige\_antwort }\OtherTok{\textless{}{-}} \DecValTok{42}
\NormalTok{falsche\_antwort }\OtherTok{\textless{}{-}} \DecValTok{43}
\NormalTok{typ }\OtherTok{\textless{}{-}} \StringTok{"Antwort"}
\NormalTok{ist\_korrekt }\OtherTok{\textless{}{-}} \ConstantTok{TRUE}
\end{Highlighting}
\end{Shaded}

Sie k√∂nnen sich eine Variable wie einen Becher oder Beh√§lter vorstellen,
der bestimmte Werte enth√§lt. Auf dem Becher steht (mit Edding
geschrieben) der Name des Bechers. Nat√ºrlich k√∂nnen Sie die Werte aus
dem Becher entfernen und sie durch neue ersetzen (vgl.
Abbildung~\ref{fig-def-vars}).

\begin{figure}

\centering{

\includegraphics[width=0.25\textwidth,height=\textheight]{img/Variablen_zuweisen.png}

}

\caption{\label{fig-def-vars}Variablen zuweisen}

\end{figure}%

R kann √ºbrigens auch rechnen. Probieren Sie es doch gleich mal hier aus!

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{die\_summe }\OtherTok{\textless{}{-}}\NormalTok{ falsche\_antwort }\SpecialCharTok{+}\NormalTok{ richtige\_antwort}
\end{Highlighting}
\end{Shaded}

Aber was ist jetzt der Wert, der ``Inhalt'' der Variable
\texttt{die\_summe}?

Um den Wert, d.h. den Inhalt einer Variablen in R \emph{auszulesen},
geben wir einfach den Namen des Objekts ein:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{die\_summe}
\DocumentationTok{\#\# [1] 85}
\end{Highlighting}
\end{Shaded}

Was passiert wohl, wenn wir \texttt{die\_summe} jetzt wie folgt
definieren?

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{die\_summe }\OtherTok{\textless{}{-}}\NormalTok{ falsche\_antwort }\SpecialCharTok{+}\NormalTok{ richtige\_antwort }\SpecialCharTok{+} \DecValTok{1}
\end{Highlighting}
\end{Shaded}

Wer h√§tt's geahnt:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{die\_summe}
\DocumentationTok{\#\# [1] 86}
\end{Highlighting}
\end{Shaded}

Variablen k√∂nnen auch ``leer'' sein:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{alter }\OtherTok{\textless{}{-}} \ConstantTok{NA}
\NormalTok{alter}
\DocumentationTok{\#\# [1] NA}
\end{Highlighting}
\end{Shaded}

\texttt{NA} steht f√ºr \emph{not available}, nicht verf√ºgbar und macht
deutlich, dass hier ein Wert fehlt.

\begin{quote}
{\emoji{student}} Wozu brauche ich bitte fehlende Werte?!
\end{quote}

Fehlende Werte sind ein h√§ufiges Problem in der Praxis. Vielleicht hat
sich die befragte Person geweigert, ihr Alter anzugeben\footnote{Datenschutz!}.
Oder als Sie die Daten in Ihren Computer eingeben wollten, ist Ihre
Katze √ºber die Tastatur gelaufen und alles war futsch\ldots{}

\subsection{Funktionen (``Befehle'')}\label{funktionen-befehle}

Das, was R kann, ist in ``Funktionen'' hinterlegt. Genauer gesagt ist
``Befehl'' eine Funktion.

\begin{definition}[Funktion]\protect\hypertarget{def-fun}{}\label{def-fun}

Eine Funktion ist eine Regel, die jedem Eingabewert (auch Argument
genannt) einen Ausgabewert zuordnet. Man kann sich Funktionen als
Maschinen vorstellen, die Eingabedaten in Ausgabedaten umwandeln, vgl.
Abbildung~\ref{fig-function-schema}. \(\square\)

\end{definition}

\subsubsection{Eine erste Funktion: Vektoren
erstellen}\label{eine-erste-funktion-vektoren-erstellen}

Ein Beispiel f√ºr eine solche Funktion k√∂nnte sein: ``Berechne den
Mittelwert dieser Datenreihe'' (schauen wir uns gleich an).

Das geht so:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{Antworten }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{42}\NormalTok{, }\DecValTok{43}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

Der Befehl \texttt{c} (c wie \emph{c}ombine) f√ºgt mehrere Werte zusammen
zu einer ``Liste'' (einem Vektor).\footnote{Streng genommen sollte man
  nicht von einer Liste sprechen, da es in R noch einen anderen
  Objekttyp gibt, der \texttt{list} hei√üt, und eine verallgemeinerte
  Form eines Vektors ist.}

\begin{definition}[Vektor]\protect\hypertarget{def-vektor}{}\label{def-vektor}

Als \emph{Vektor} bezeichnen wir eine geordnete Folge von Werten. In R
kann man sie mit der Funktion \texttt{c()} erstellen. Die Werte eines
Vektors bezeichnet man als \emph{Elemente}. \(\square\)

\end{definition}

Mit dem Zuweisungspfeil geben wir diesem Vektor einen Namen, hier
\texttt{Antworten}. Dieser Vektor besteht aus zwei Werten, zuerst
\texttt{42}, dann kommt \texttt{43}.

\begin{example}[Beispiele f√ºr
Vektoren]\protect\hypertarget{exm-vektoren}{}\label{exm-vektoren}

Vektoren k√∂nnen (praktisch) beliebig lang sein, z.B. drei Elemente.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{3}\NormalTok{)}
\NormalTok{y }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{2}\NormalTok{, }\DecValTok{1}\NormalTok{, }\DecValTok{3}\NormalTok{)  }\CommentTok{\# x und y sind ungleich (Reihenfolge der Werte)}
\NormalTok{z }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\FloatTok{3.14}\NormalTok{, }\FloatTok{2.71}\NormalTok{)  }
\NormalTok{namen }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"Anni"}\NormalTok{, }\StringTok{"Bert"}\NormalTok{, }\StringTok{"Charli"}\NormalTok{) }\CommentTok{\# Text{-}Vektor}
\end{Highlighting}
\end{Shaded}

\end{example}

Zwei wichtige Typen von Vektoren sind numerische Vektoren (reelle
Zahlen; in R auch als \emph{numeric} oder \emph{double} bezeichnet) und
Textvektoren, in R auch als \emph{String} oder \emph{character}
bezeichnet.

\begin{example}[]\protect\hypertarget{exm-funs}{}\label{exm-funs}

Weitere Beispiel f√ºr Funktionen sind:

\begin{itemize}
\tightlist
\item
  ``Erstelle eine Liste (Vektor) von Werten''.
\item
  ``Lade dieses R-Paket.''
\item
  ``Gib den gr√∂√üten Wert dieser Datenreihe aus.'' \(\square\)
\end{itemize}

\end{example}

\subsection{Unsere erste statistische Funktion}\label{sec-first-fun}

Jetzt wird's ernst. Jetzt kommt die Statistik. üßü Berechnen wir also
unsere erste statistische Funktion: Den Mittelwert. Puh.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{mean}\NormalTok{(Antworten)}
\DocumentationTok{\#\# [1] 42.5}
\end{Highlighting}
\end{Shaded}

Sie h√§tten \texttt{Antworten} auch durch \texttt{c(42,\ 43)} ersetzen
k√∂nnen, so haben Sie ja schlie√ülich die Variable gerade definiert.

R arbeitet so einen ``verschachtelten'' Befehl \emph{von innen nach
au√üen} ab:

Start: \texttt{mean(Antworten)}

{\(\downarrow\)}

Schritt 1: \texttt{mean(c(42,\ 43))}

{\(\downarrow\)}

Schritt 2: \texttt{42.5}

\subsubsection{Schema einer Funktion}\label{schema-einer-funktion}

Abbildung~\ref{fig-function-schema} stellt eine Funktion schematisch
dar.

\begin{figure}

\centering{

\includegraphics[width=0.75\textwidth,height=\textheight]{img/function-schema.pdf}

}

\caption{\label{fig-function-schema}Schema einer Funktion}

\end{figure}%

\subsubsection{Argumente einer Funktion}\label{argumente-einer-funktion}

Eine Funktion hat einen oder mehrere \emph{Inputs} (s.
Abbildung~\ref{fig-function-schema}), das sind Daten oder
Verarbeitungshinweise, die man in die Funktion \texttt{fun}
\emph{eingibt}, bevor sie loslegt. Eine Funktion hat immer (genau) eine
\emph{Ausgabe} (Output), in der das Ergebnis einer Funktion ausgegeben
wird.

\begin{definition}[Argumente einer
Funktion]\protect\hypertarget{def-args}{}\label{def-args}

Die ``Trichter'' einer (R-)Funktion, in denen man die Eingaben
``einf√ºllt'', nennt man auch \emph{Argumente}.\(\square\)

\end{definition}

So hat die Funktion \texttt{mean()} z.B. folgende Argumente, s.
Listing~\ref{lst-mean}.

\begin{codelisting}

\caption{\label{lst-mean}Die Argumente der R-Funktion \texttt{mean}}

\centering{

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{mean}\NormalTok{(x, }\AttributeTok{trim =} \DecValTok{0}\NormalTok{, }\AttributeTok{na.rm =} \ConstantTok{FALSE}\NormalTok{, ...)}
\end{Highlighting}
\end{Shaded}

}

\end{codelisting}%

\begin{itemize}
\tightlist
\item
  \texttt{x}: das ist der Vektor, f√ºr den der Mittelwert berechnet
  werden soll
\item
  \texttt{trim\ =\ 0}: Sollen die extremsten Werte von \texttt{x} lieber
  ``abgeschnitten'' werden, also nicht in die Berechnung des Mittelwerts
  einflie√üen?
\item
  \texttt{na.rm\ =\ FALSE}: Wie soll mit fehlenden Werten \texttt{NA}
  umgegangen werden? Im Standard liefert \texttt{mean}\footnote{und
    viele andere arithmetische Funktionen in R} \texttt{NA} zur√ºck. R
  schwenkt sozusagen die rote Fahne, um zu signalisieren, Achtung,
  Mensch, hier ist irgendwas nicht in Ordnung. Setzt man aber
  \texttt{na.rm\ =\ TRUE}, dann entfernt (remove, rm) R die fehlenden
  Werte und berechnet den Mittelwert.
\item
  \texttt{...} hei√üt ``sonstiges Zeugs, das manchmal eine Rolle spielen
  k√∂nnte''; darum k√ºmmern wir uns jetzt nicht.
\end{itemize}

Einige Argumente haben einen \emph{Standardwert} bzw. eine
\emph{Voreinstellung} (engl. \emph{default}). So wird bei der Funktion
\texttt{mean} im Standard nicht getrimmt (\texttt{trim\ =\ 0}) und
fehlende Werte werden nicht entfernt (\texttt{na.rm\ =\ FALSE)}.

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Wenn ein R-Befehl ein Argument mit Voreinstellung hat, brauchen Sie
dieses Argument \emph{nicht} zu bef√ºllen. In dem Fall wird auf den Wert
der Voreinstellung zur√ºckgegriffen. Argumente ohne Voreinstellung -- wie
\texttt{x} bei \texttt{mean()} -- m√ºssen Sie aber auf jeden Fall mit
einem Wert bef√ºllen. Man w√ºrde also \texttt{mean} zumeist so aufrufen:
\texttt{mean(x)}. \(\square\)

\end{tcolorbox}

Bei jedem R-Befehl haben die Argumente eine bestimmte Reihenfolge, etwa
bei \texttt{mean()}:
\texttt{mean(x,\ trim\ =\ 0,\ na.rm\ =\ FALSE,\ ...)}.

(Nur) wenn man die Argumente in ihrer vorgegebenen Reihenfolge
anspricht, muss man \emph{nicht} den Namen des Arguments anf√ºhren:

\emoji{check-mark-button} \texttt{mean(Antworten,\ 0,\ FALSE)}

H√§lt man sich aber nicht an die vorgebene Reihenfolge, so wei√ü R nicht,
was zu tun ist und fl√ºchtet sich in eine Fehlermeldung:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{mean}\NormalTok{(Antworten, }\ConstantTok{FALSE}\NormalTok{, }\DecValTok{0}\NormalTok{)  }\CommentTok{\# FALSCH, DON\textquotesingle{}T DO IT }
\DocumentationTok{\#\# Error in mean.default(Antworten, FALSE, 0): \textquotesingle{}trim\textquotesingle{} must be numeric of length one}
\end{Highlighting}
\end{Shaded}

Wenn man die Namen der Argumente anspricht, ist die Reihenfolge egal:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{mean}\NormalTok{(}\AttributeTok{na.rm =} \ConstantTok{FALSE}\NormalTok{, }\AttributeTok{x =}\NormalTok{ Antworten)  }\CommentTok{\# ok}
\FunctionTok{mean}\NormalTok{(}\AttributeTok{trim =} \DecValTok{0}\NormalTok{, }\AttributeTok{x =}\NormalTok{ Antworten, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{)  }\CommentTok{\# ok}
\end{Highlighting}
\end{Shaded}

√úbrigens: Leerzeichen sind R fast immer egal. Aus Gr√ºnden der
√úbersichtlichkeit sollte man aber Leerzeichen verwenden. In diesen
F√§llen sind Leerzeichen nicht erlaubt:

\begin{itemize}
\tightlist
\item
  \texttt{\textless{}-}
\item
  \texttt{\textless{}=} etc.
\item
  Variablennamen
\end{itemize}

\subsubsection{Achtung bei fehlenden
Werten}\label{achtung-bei-fehlenden-werten}

Sagen wir, wir haben einen fehlenden Wert in unseren Daten:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{Antworten }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{42}\NormalTok{, }\DecValTok{43}\NormalTok{, }\ConstantTok{NA}\NormalTok{)}
\NormalTok{Antworten}
\DocumentationTok{\#\# [1] 42 43 NA}
\end{Highlighting}
\end{Shaded}

Wenn wir jetzt den Mittelwert berechnen wollen, quittiert R das mit
einem schn√∂den \texttt{NA}. \texttt{NA} steht f√ºr \emph{not available},
ist also ein Hinweis, dass Werte fehlen.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{mean}\NormalTok{(Antworten)}
\DocumentationTok{\#\# [1] NA}
\end{Highlighting}
\end{Shaded}

R meint es gut mit Ihnen\footnote{\textgreater{} {\emoji{robot}} Naja,
  manchmal.}. Stellen Sie sich vor, dass R Sie auf dieses Problem
aufmerksam machen m√∂chte:

\begin{quote}
{\emoji{robot}} Achtung, lieber Herr und Gebieter, du hast nicht mehr
alle Latten am Zaun, will sagen, alle Daten im Vektor!
\end{quote}

(Danke, R.)

M√∂chten Sie aber lieber R dieses Verhalten austreiben, so bef√ºllen Sie
das Argument \texttt{na.rm} mit dem Wert \texttt{TRUE}.\footnote{\texttt{na.rm}
  steht f√ºr \emph{r}e\emph{m}ove die NA, also fehlenden Werte}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{mean}\NormalTok{(Antworten, }\AttributeTok{na.rm =} \ConstantTok{TRUE}\NormalTok{)}
\DocumentationTok{\#\# [1] 42.5}
\end{Highlighting}
\end{Shaded}

\begin{exercise}[Geben Sie neue Bedeutungen an, was ``NA'' noch bedeuten
k√∂nnte!]\protect\hypertarget{exr-na}{}\label{exr-na}

~

\begin{quote}
{\emoji{robot}} Wie w√§re es mit ``nebul√∂se Anomalie'' oder
``nix-checkender Angeber'' oder ``n√∂lender Automat''.
\end{quote}

\begin{quote}
{\emoji{woman-student}} Hm\ldots{}
\end{quote}

\(\square\)

\end{exercise}

\subsection{Vektorielles Rechnen}\label{sec-veccalc}

\begin{definition}[Vektorielles
Rechnen]\protect\hypertarget{def-veccalc}{}\label{def-veccalc}

Das Rechnen mit Vektoren in R bezeichnen wir als \emph{vektorielles
Rechnen}. \(\square\)

\end{definition}

Vektorielles Rechnen ist ein praktische Angelegenheit, man kann z.B.
folgende Dinge einfach in R ausrechnen.

Gegeben sei \texttt{x} als Vektor \texttt{(1,\ 2,\ 3)}. Dann k√∂nnen wir
die Differenz (Abweichung) jedes Elements von \texttt{x} zum Mittelwert
von \texttt{x} komfortabel so ausrechnen:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\SpecialCharTok{{-}} \FunctionTok{mean}\NormalTok{(x)}
\DocumentationTok{\#\# [1] {-}1  0  1}
\end{Highlighting}
\end{Shaded}

Etwas fancier ausgedr√ºckt: Wir haben die Funktion mit Namen
``Differenz'' (``Minus-Rechnen'') auf jedes Element von \texttt{x}
angewandt. Im Einzelnen haben wir also folgenden drei Differenzen
ausgerechnet:

\begin{Shaded}
\begin{Highlighting}[]
\DecValTok{1} \SpecialCharTok{{-}} \DecValTok{2}
\DecValTok{2} \SpecialCharTok{{-}} \DecValTok{2}
\DecValTok{3} \SpecialCharTok{{-}} \DecValTok{2}
\end{Highlighting}
\end{Shaded}

Diese drei Rechenschritte sind symbolisch in
Abbildung~\ref{fig-vektoriell} dargestellt.

\begin{figure}

\centering{

\includegraphics[width=0.5\textwidth,height=\textheight]{020-R_files/figure-pdf/fig-vektoriell-1.pdf}

}

\caption{\label{fig-vektoriell}Schema des vektoriellen Rechnens: Eine
Funktion wird auf jedes Element eines Vektors angewandt. Hier: 1-2=-1;
2-2=0; 3-2=1}

\end{figure}%

\subsection{R-Quiz}\label{r-quiz}

\begin{exercise}[]\protect\hypertarget{exr-rquiz}{}\label{exr-rquiz}

Ihre R-Muskeln sind gest√§hlt? Oder doch noch nicht so ganz ausdefiniert?
Macht nichts! Trainieren Sie sich mit dem R-Quiz auf der
Datenwerk-Webseite\footnote{\url{https://datenwerk.netlify.app/posts/r-quiz/r-quiz}}!
\(\square\)

\end{exercise}

\subsection{Ich brauche R-Hilfe!}\label{r-faq}

\begin{itemize}
\tightlist
\item
  \emph{Wo finde ich Hilfe zu einer bestimmten Funktion, z.B.
  \texttt{fun()}?} Geben Sie dazu folgenden R-Befehl ein:
  \texttt{help(fun)}. Alternativ geben Sie den Namen der Funktion in
  RStudio im Suchfeld beim Reiter \texttt{Help} ein.
\item
  \emph{Wenn ich ein R-Paket installiere, fragt mich R manchmal, ob ich
  auch Pakete installieren, will, die ``kompiliert'' werden m√ºssen. Soll
  ich das machen?}. Nein, das ist nicht n√∂tig; geben Sie ``no'' ein.
\item
  \emph{In welchem Paket wohnt meine R-Funktion}? Suchen Sie nach der
  Funktion auf der Webseite \emph{RDocumentation}\footnote{https://www.rdocumentation.org/}.
\item
  \emph{Ich wei√ü nicht, wie der R-Befehl funktioniert!} Vermutlich haben
  andere Ihr Problem auch, und meistens hat irgendwer das Problem schon
  gel√∂st. Am besten suchen Sie mal auf Stackoverflow\footnote{\url{https://www.stackoverflow.com}}.
\item
  \emph{Ich muss mal grundlegend verstehen, wozu ein bestimmten R-Paket
  gut ist. Was tun?} Lesen Sie die Dokumenation (``Vignette'') eines
  R-Pakets durch. F√ºr das Paket \texttt{dplyr} bekommen Sie so einen
  √úberblick √ºber die verf√ºgbaren Vignetten diese Pakets:
  \texttt{vignette(package\ =\ "dplyr")}. Dann suchen Sie sich aus der
  angezeigten Liste eine Vignette raus; mit \texttt{vignette("rowwise")}
  k√∂nnen Sie sich dann die gew√ºnschte Vignette (z.B. \texttt{rowwise})
  anzeigen lassen.
\item
  \emph{Oh nein, ich seh rot, das hei√üt, R zeigt mir irgendwas in roter
  Schrift an. Ist jetzt was kaputt?} Keine Sorge, R ist in seiner
  Ausgabe nicht sparsam mit roter Frabe. Solange es nicht als
  Fehlermeldung (\texttt{ERROR}) erscheint, ist es meist kein Problem.
\item
  \emph{R hat sich aufgeh√§ngt oder bringt einen Fehler an einer Stelle,
  wo sonst alles funktioniert hat.} Probieren Sie auf jeden Fall mal das
  AEG-Prinzip (Aus-Ein-Gut): sprich R neu starten.
\item
  \emph{Ich suche schon seit einer Stunde einen Fehler und find ihn
  nicht. Ich habe schon verschiedene Gegenst√§nde vor Wut an die Wand
  geworfen. Was soll ich tun?} Machen Sie eine Pause. Doch, das ist
  ernst gemeint. Meine Erfahrung: Mit etwas Abstand wird der Kopf klarer
  und man findet das Problem viel einfacher.\footnote{Und manchmal ist
    einem das Problem danach schlichtweg egal.}
\item
  \emph{Irgendwie reagiert R komisch, vielleicht hat es sich
  aufgeh√§ngt?} Starten Sie R neu. Klicken Sie auf \emph{Session
  \textgreater{} Restart R}.
\item
  \emph{Ich muss mal klar Schiff machen und alle (oder einige) Variablen
  l√∂schen. Wie werd ich das Zeug wieder los?} Beim Neustart von R werden
  alle Objekte (Variablen) gel√∂scht. Einzelne Objekte k√∂nnen Sie
  selektiv l√∂schen mit dem Befehl \texttt{rm}, so l√∂scht
  \texttt{rm(mariokart)} das Objekt namens \texttt{mariokart}.
\end{itemize}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-caution-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-caution-color}{\faFire}\hspace{0.5em}{Vorsicht}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-caution-color-frame]

R ist penibel: So sind \texttt{name} und \texttt{Name} zwei verschiedene
Variablen f√ºr R. Gro√ü- und Kleinschreibung wird von R streng beachtet!
Hingegen ist es R egal, ob Sie zur besseren √úbersichtlichkeit
Leerzeichen in Ihre Syntax tippen. Ausnahme sind spezielle Operatoren
wie \texttt{\textless{}-} oder \texttt{\textless{}=}.

Eine gute Nachricht: Wenn R etwas von \texttt{WARNING} (bzw. Warnung)
sagt, k√∂nnen Sie das zumeist ignorieren. Eine \emph{Warnung} ist kein
Fehler (\texttt{ERROR}) und meistens nicht gravierend oder nicht
dringend. Ihre Syntax l√§uft trotzdem durch. Im Zweifel ist Googeln eine
gute Idee. Nur wenn R von \texttt{Error} spricht, ist es auch ein Fehler
und Ihre Syntax l√§uft nicht durch.\(\square\)

\end{tcolorbox}

\section{Mit Daten arbeiten}\label{mit-daten-arbeiten}

\subsection{Wo sind meine Daten?}\label{wo-sind-meine-daten}

Damit Sie eine Datendatei importieren k√∂nnen, m√ºssen Sie wissen, wo die
Datei ist. Schauen wir uns zwei M√∂glichkeiten an, wo Ihre Datei liegen
k√∂nnte.

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Irgendwo im Internet\footnote{z.B. hier:
    \url{https://vincentarelbundock.github.io/Rdatasets/csv/openintro/mariokart.csv}}
\item
  Irgendwo auf Ihrem Computer, z.B. in Ihrem R-Projektordner
\end{enumerate}

In beiden F√§llen wird der ``Aufenthaltsort'' der Datei durch den
\emph{Pfad}\footnote{Der Pfad einer Datei sagt, in welchem Ordner und
  Unterorder und Unter-Unterordner die gesuchte Datei liegt. Ein Pfad
  k√∂nnte z.B. so aussehen:
  ``/Users/sebastiansaueruser/github-repos/statistik1/''.} und den Namen
der Datei definiert.

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Wir werden in diesem Kurs h√§ufiger mit dem Daten \texttt{mariokart}
arbeiten; Sie finden ihn
\href{https://vincentarelbundock.github.io/Rdatasets/csv/openintro/mariokart.csv}{hier}.\footnotemark{}

\end{tcolorbox}

\footnotetext{Auf dieser Webseite
\url{https://vincentarelbundock.github.io/Rdatasets/articles/data.html}
finden Sie eine gro√üe Zahl an Datens√§tzen. Nur f√ºr den Fall, dass Ihnen
langweilig ist.}

\subsection{Gebr√§uchliche
Datenformate}\label{gebruxe4uchliche-datenformate}

Daten werden in verschiedenen Formaten im Computer abgespeichert;
Tabellen h√§ufig als

\begin{itemize}
\tightlist
\item
  Excel-Datei
\item
  CSV-Datei
\end{itemize}

In der Datenanalyse ist das gebr√§uchlichste Format f√ºr Daten in
Tabellenform die \emph{CSV-Datei}. Das hat den Grund, weil dieses Format
technisch sch√∂n einfach ist. F√ºr uns Endverbraucher tut das nichts gro√ü
zur Sache, die CSV-Datei beherbergt einfach eine brave Tabelle in einer
\emph{Textdatei}, sonst nichts.

In diesem Buch werden wir mit einem Datensatz namens \texttt{mariokart}
arbeiten; hallo Mario (s. Abbildung~\ref{fig-mario})!

\begin{figure}

\centering{

\includegraphics[width=0.25\textwidth,height=\textheight]{img/mario.jpg}

}

\caption{\label{fig-mario}Hallo, Mario}

\end{figure}%

\begin{exercise}[CSV-Datei von
innen]\protect\hypertarget{exr-texteditor}{}\label{exr-texteditor}

~

\subsection{Aufgabe}

√ñffnen Sie die CSV-Datei \texttt{mariokart.csv} mit einem
\emph{Texteditor} (nicht mit Word und auch nicht mit Excel). Schauen Sie
sich gut an, was Sie dort sehen und erkl√§ren Sie die Datenstruktur.

\subsection{L√∂sung}

Eine CSV-Datei repr√§sentiert eine Datentabelle. Eine Spaltengrenze wird
mittels eines Kommas dargestellt (man kann auch andere Zeichen w√§hlen,
um Spalten voneinander abzugrenzen).

\end{exercise}

\subsection{Daten importieren}\label{daten-importieren}

\subsubsection{Importieren von einem
R-Paket}\label{importieren-von-einem-r-paket}

Ihr Datensatz schon in einem R-Paket gespeichert, k√∂nnen Sie ihn aus
diesem R-Paket starten. Das ist die bequemste Option. Zum Beispiel
``wohnt'' der Datensatz \texttt{mariokart} im R-Paket
\texttt{openintro}.

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-tip-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-tip-color}{\faLightbulb}\hspace{0.5em}{Tipp}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-tip-color-frame]

Ein h√§ufiger Fehler ist, dass man vergisst, dass man zuerst ein R-Paket
installieren muss, bevor man es nutzen kann. Auf der anderen Seite muss
man ein R-Paket (wie andere Software auch) nur ein Mal installieren --
das Paket muss man ein Paket nach jedem Neustart von RStudio mit
\texttt{library()} starten.

\end{tcolorbox}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{data}\NormalTok{(}\StringTok{"mariokart"}\NormalTok{, }\AttributeTok{package =} \StringTok{"openintro"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\subsubsection{Importieren von einer
Webseite}\label{importieren-von-einer-webseite}

Hier ist eine M√∂glichkeit, Daten (in Form einer Tabelle) von einer
Webseite (URL) in R zu importieren:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\FunctionTok{paste0}\NormalTok{(}
  \StringTok{"https://vincentarelbundock.github.io/Rdatasets/"}\NormalTok{,}
  \StringTok{"csv/openintro/mariokart.csv"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

Es ist egal, welchen Namen Sie der Tabelle geben. Ich nehme oft
\texttt{d}, \emph{d} die Daten. Au√üerdem ist \texttt{d} kurz, muss man
nicht so viel tippen. Auf der anderen Seite ist \texttt{d} nicht gerade
pr√§zise und vielsagend.

Werfen wir einen Blick in die Tabelle (engl. \emph{to glimpse}):

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{glimpse}\NormalTok{(d)}
\DocumentationTok{\#\# Rows: 143}
\DocumentationTok{\#\# Columns: 12}
\DocumentationTok{\#\# $ id          \textless{}dbl\textgreater{} 150377422259, 260483376854, 3204323429\textasciitilde{}}
\DocumentationTok{\#\# $ duration    \textless{}int\textgreater{} 3, 7, 3, 3, 1, 3, 1, 1, 3, 7, 1, 1, 1,\textasciitilde{}}
\DocumentationTok{\#\# $ n\_bids      \textless{}int\textgreater{} 20, 13, 16, 18, 20, 19, 13, 15, 29, 8,\textasciitilde{}}
\DocumentationTok{\#\# $ cond        \textless{}fct\textgreater{} new, used, new, new, new, new, used, n\textasciitilde{}}
\DocumentationTok{\#\# $ start\_pr    \textless{}dbl\textgreater{} 0.99, 0.99, 0.99, 0.99, 0.01, 0.99, 0.\textasciitilde{}}
\DocumentationTok{\#\# $ ship\_pr     \textless{}dbl\textgreater{} 4.00, 3.99, 3.50, 0.00, 0.00, 4.00, 0.\textasciitilde{}}
\DocumentationTok{\#\# $ total\_pr    \textless{}dbl\textgreater{} 51.55, 37.04, 45.50, 44.00, 71.00, 45.\textasciitilde{}}
\DocumentationTok{\#\# $ ship\_sp     \textless{}fct\textgreater{} standard, firstClass, firstClass, stan\textasciitilde{}}
\DocumentationTok{\#\# $ seller\_rate \textless{}int\textgreater{} 1580, 365, 998, 7, 820, 270144, 7284, \textasciitilde{}}
\DocumentationTok{\#\# $ stock\_photo \textless{}fct\textgreater{} yes, yes, no, yes, yes, yes, yes, yes,\textasciitilde{}}
\DocumentationTok{\#\# $ wheels      \textless{}int\textgreater{} 1, 1, 1, 1, 2, 0, 0, 2, 1, 1, 2, 2, 2,\textasciitilde{}}
\DocumentationTok{\#\# $ title       \textless{}fct\textgreater{} "\textasciitilde{}\textasciitilde{} Wii MARIO KART \&amp; WHEEL \textasciitilde{} NINTE\textasciitilde{}}
\end{Highlighting}
\end{Shaded}

\href{https://vincentarelbundock.github.io/Rdatasets/doc/openintro/mariokart.html}{Hier}
findet sich eine Erkl√§rung des Datensatzes.

\subsubsection{Importieren von Ihrem Computer in RStudio
Desktop}\label{importieren-von-ihrem-computer-in-rstudio-desktop}

Gehen wir davon aus, dass sich die Datendatei im gleichen Ordner wie die
R-Datei\footnote{\texttt{.R}- oder \texttt{.qmd}-Datei} befindet, in der
Sie den Befehl zum Importieren schreiben. Dann k√∂nnen Sie die Datei
einfach so importieren:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{d }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{"mariokart.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\href{https://youtu.be/B_nuN-M0pQM}{Dieses Video} erkl√§rt die Schritte
des Importierens einer Datendatei von Ihrem Computer.\footnote{\url{https://youtu.be/B_nuN-M0pQM}}

\subsubsection{Importieren von Ihrem Computer in RStudio
Cloud}\label{importieren-von-ihrem-computer-in-rstudio-cloud}

Das Importieren in von Ihrem Computer zu RStudio Cloud ist identisch zum
Importieren von Ihrem Computer in RStudio Desktop. Nur dass Sie die
Datendatei vorab hochladen m√ºssen, schlie√ülich ist RStudio Cloud in der
Cloud und nicht auf Ihrem Computer. Klicken Sie dazu auf das Icon
\texttt{Upload} im Reiter \texttt{Files}, s.
Abbildung~\ref{fig-upload-to-posit-cloud}.

\begin{figure}

\centering{

\includegraphics[width=0.5\textwidth,height=\textheight]{img/upload-to-posit-cloud.png}

}

\caption{\label{fig-upload-to-posit-cloud}}

\end{figure}%

W√§hlen Sie am besten den Ordner als Ziel, in dem sich auch die R-Datei,
von der aus Sie den Befehl zum Daten importieren schreiben, befindet.

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Es gibt verschiedene Formate, in denen (Tabellen-)Dateien in einem
Computer abgespeichert werden. Die gebr√§uchlichsten sind CSV und Excel.
Es gibt auch mehrere R-Befehle, um Daten in R zu importieren, z.B.
\texttt{read.csv()} oder \texttt{data\_read()}. Praktischerweise kann
der R-Befehl \texttt{data\_read()} viele verschiedene Formate
automatisch einlesen, so dass wir uns nicht weiter um das Format k√ºmmern
brauchen. Der Vorteil von \texttt{read.csv} ist, dass Sie kein
Extra-Paket installiert bzw. gestartet haben m√ºssen.

\end{tcolorbox}

\subsubsection{Daten importieren per
Klick}\label{daten-importieren-per-klick}

RStudio Desktops GUI (Benutzeroberfl√§che) erlaubt es Ihnen auch, Daten
per Klick, also ohne R-Befehle, zu importieren, s.
Abbildung~\ref{fig-daten-rstudio}.

Sie k√∂nnen √ºber diese Maske sowohl CSV-Dateien, Excel-Dateien oder
Daten-Dateien aus anderen Statistik-Programmen (z.B. SPSS) importieren
auf diese Weise.

Zur Erinnerung: CSV-Dateien sind Textdateien, w√§hlen Sie in dem Fall
also \texttt{From\ Text}. Ich empfehle die Variante
\texttt{From\ Text\ (readr)\ ...}.

\begin{figure}

\centering{

\includegraphics[width=0.5\textwidth,height=\textheight]{img/import-rstudio.png}

}

\caption{\label{fig-daten-rstudio}Daten importieren per Klick}

\end{figure}%

In der folgenden Maske k√∂nnen Sie unter \texttt{Browse} die zu
importierende Datendatei ausw√§hlen. Mit Klick auf \texttt{Import} wird
die Datei schlie√ülich in R importiert.

\subsection{Dataframes}\label{dataframes}

Eine in R importierte Tabelle (mit bestimmten Eigenschaften) hei√üt
\emph{Dataframe}. Dataframes sind in der Datenanalyse von gro√üer
Bedeutung.

\begin{definition}[Dataframe]\protect\hypertarget{def-dataframe}{}\label{def-dataframe}

Ein Dataframe (data frame; auch ``Tibble'' genannt\footnote{von ``tbl''
  wie Table}) ist ein Datenobjekt in R zur Darstellung von Tabellen.
Dataframes bestehen aus einer oder mehreren Spalten. Spalten haben einen
Namen, sozusagen einen ``Spaltenkopf''. Alle Spalten m√ºssen die gleiche
L√§nge haben; anschaulich gesprochen ist eine Tabelle (in R) rechteckig.
Jede Spalte einzeln betrachtet kann als Vektor aufgefasst werden.
\(\square\)

\end{definition}

Tabelle~\ref{tbl-mariokart} ist die Tabelle mit den Mariokart-Daten;
etwas pr√§ziser gesprochen ein Dataframe mit Namen \texttt{mariokart}.
√úbrigens ist Tabelle~\ref{tbl-mariokart} in Normalform (Tidy-Format),
vgl. Definition~\ref{def-tidy}.

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Geben Sie den Namen eines Dataframes ein, um sich den Inhalt anzeigen zu
lassen. Beachten Sie, dass Sie die Daten auf diese Weise nur anschauen,
nicht √§ndern k√∂nnen. \(\square\)

\end{tcolorbox}

\subsection{Tabellen in R betrachten}\label{sec-viewtab}

Wenn Sie in R z.B. die Tabelle \texttt{mariokart} in einer
Excel-typischen Ansicht betrachten wollen, klicken Sie am besten auf das
Tabellen-Icon im Reiter \emph{Environment}, gleich neben dem Namen
\texttt{mariokart}, s. Abbildung~\ref{fig-view-mariokart}.

\begin{figure}

\centering{

\includegraphics[width=0.5\textwidth,height=\textheight]{img/rstudio-environment-mariokart.png}

}

\caption{\label{fig-view-mariokart}Per Klick auf das Tabellen-Icon
k√∂nnen Sie eine Tabellenansicht der Tabelle \texttt{mariokart} √∂ffnen}

\end{figure}%

Alternativ √∂ffnet der Befehl \texttt{View(mariokart)} die gleiche
Ansicht.

\section{Logikpr√ºfung}\label{sec-logic}

\begin{quote}
{\emoji{student}} Wer will schon wieder wen pr√ºfen?!
\end{quote}

In diesem Abschnitt schauen wir uns \emph{Logikpr√ºfungen} an: Wir lassen
R pr√ºfen, ob eine Variable einen bestimmten Wert hat oder gr√∂√üer/kleiner
als ein Referenzwert ist.

Definieren wir zuerst eine Variable, \texttt{x}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \DecValTok{42}
\end{Highlighting}
\end{Shaded}

Dann fragen wir R, ob diese Variable den Wert \texttt{42} hat.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\SpecialCharTok{==} \DecValTok{42}
\DocumentationTok{\#\# [1] TRUE}
\end{Highlighting}
\end{Shaded}

\begin{quote}
{\emoji{robot}} Hallo, Mensch. Ja, diese Variable hat den Wert 42.
\end{quote}

(Danke, R.)

M√∂chte man mit R pr√ºfen, ob eine Variable \texttt{x} einen bestimmten
\texttt{Wert} (``Inhalt'') hat, so schreibt man:

\texttt{x\ ==\ Wert}.

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-important-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-important-color}{\faExclamation}\hspace{0.5em}{Wichtig}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-important-color-frame]

Man beachte das \emph{doppelte} Gleichheitszeichen. Zur Pr√ºfung auf
Gleichheit muss man das doppelte Gleichheitszeichen verwenden.

\end{tcolorbox}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-caution-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-caution-color}{\faFire}\hspace{0.5em}{Vorsicht}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-caution-color-frame]

Ein beliebter Fehler ist es, bei der Pr√ºfung auf Gleichheit, nur ein
Gleichheitszeichen zu verwenden, z.B. so: \texttt{x\ =\ 73}. Mit einem
Gleichheitszeichen pr√ºft man aber \emph{nicht} auf Gleichheit, sondern
man definiert die Variable oder bestimmt ein Funktionsargument, s.
Kapitel~\ref{sec-rvars}. \(\square\)

\end{tcolorbox}

Tabelle~\ref{tbl-lgl} gibt einen √úberblick √ºber wichtige Logikpr√ºfungen
in R.\footnote{Um das Zeichen f√ºr das logische ODER, \texttt{\textbar{}}
  auf einer Mac-Tastatur zu erhalten, dr√ºckt man \emph{Option+7}.}

\begin{longtable}{ll}

\caption{\label{tbl-lgl}Logische Pr√ºfungen in R}

\tabularnewline

\toprule
Pr√ºfung.auf & R-Syntax \\ 
\midrule\addlinespace[2.5pt]
Gleichheit & x == Wert \\ 
Ungleichheit & x != Wert \\ 
Gr√∂√üer als Wert & x > Wert \\ 
Gr√∂√üer oder gleich Wert & x >= Wert \\ 
Kleiner als Wert & x < Wert \\ 
Kleiner oder gleich Wert & x <= Wert \\ 
Logisches UND & (x < Wert1) \& (x > Wert2) \\ 
Logisches ODER & (x < Wert1) | (x > Wert2) \\ 
\bottomrule

\end{longtable}

\section{Praxisbezug}\label{praxisbezug-1}

\begin{quote}
{\emoji{student}} R in der Praxis wirklich genutzt? Oder ist R nur der
Traum von (vielleicht verwirrten) Profs im Elfenbeinturm?
\end{quote}

Schauen wir uns dazu die Suchanfragen bei
\href{www.stackoverflow.com}{stackoverflow.com} an, dem gr√∂√üten
FAQ-Forum f√ºr Software-Entwicklung. Wir vergleichen Suchanfragen mit dem
Tag \texttt{{[}r{]}} zu Suchanfragen mit dem Tag
\texttt{{[}spss{]}}\footnote{Durchgef√ºhrt am 2022-02-24, 17:21 CET}. Die
Ergebnisse sind in Abbildung Abbildung~\ref{fig-stackoverflow1}
dargestellt.

\begin{figure}

\centering{

\includegraphics{020-R_files/figure-pdf/fig-stackoverflow1-1.pdf}

}

\caption{\label{fig-stackoverflow1}Suchanfragen nach R bzw SPSS, Stand
2022-02-24}

\end{figure}%

Das ist grob gerechnet ein Faktor von 200 (der Unterschied von R zu
SPSS). Dieses Ergebnis l√§sst darauf schlie√üen, dass R in der Praxis viel
mehr als Excel gebraucht wird.

\begin{quote}
{\emoji{student}} Aber ist R wirklich ein Werkzeug, das mir im Job
hilft?
\end{quote}

Viele Firmen weltweit nutzen R zur Datenanalyse.\footnote{wie diese
  Liste zeigt:
  \url{https://www.quora.com/Which-organizations-use-R?share=1} zeigt}.

\begin{quote}
{\emoji{woman-student}} R ist \emph{der} Place-to-be f√ºr die
Datenanalyse.
\end{quote}

\begin{quote}
{\emoji{student}} Aber ist Datenanalyse wirklich etwas, womit ich in
Zukunft einen guten Job bekomme?
\end{quote}

Berufe mit Bezug zu Daten, Datenanalyse oder, allgemeiner, K√ºnstlicher
Intelligenz (artificial intelligence) geh√∂ren zu den am meisten
wachsenden Berufen:

\begin{quote}
Artificial intelligence (AI) continues to make a strong showing on our
Emerging Jobs lists, which is no surprise. Many jobs that have risen up
as a result of AI in Ô¨Åelds like cybersecurity and data science and
because it's is so pervasive many roles may demand more knowledge of AI
than you may think. For example, real estate and business development
roles. (Quelle: LinkedIn\footnote{\url{https://blog.linkedin.com/2019/december/10/the-jobs-of-tomorrow-linkedins-2020-emerging-jobs-report}})
\end{quote}

\section{Aufgaben}\label{aufgaben-1}

\begin{exercise}[Statistik-Meme]\protect\hypertarget{exr-meme}{}\label{exr-meme}

Suchen Sie ein sch√∂nes Meme zum Thema Statistik, Datenanalyse und Data
Science.
\href{https://data-se.netlify.app/2021/02/23/data-science-memes/}{Hier}
ist ein Startpunkt. \(\square\)

\end{exercise}

Die Webseite \href{https://datenwerk.netlify.app}{datenwerk.netlify.app}
stellt eine Reihe von einschl√§gigen √úbungsaufgaben bereit. Sie k√∂nnen
die Suchfunktion der Webseite nutzen, um die Aufgaben mit den folgenden
Namen zu suchen:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \href{https://datenwerk.netlify.app/posts/typ-fehler-r-01/typ-fehler-r-01.html}{Typ-Fehler-R-01}
\item
  \href{https://datenwerk.netlify.app/posts/typ-fehler-r-02/typ-fehler-r-02.html}{Typ-Fehler-R-02}
\item
  \href{https://datenwerk.netlify.app/posts/typ-fehler-r-03/typ-fehler-r-03.html}{Typ-Fehler-R-03}
\item
  \href{https://datenwerk.netlify.app/posts/typ-fehler-r-04/typ-fehler-r-04.html}{Typ-Fehler-R-04}
\item
  \href{https://datenwerk.netlify.app/posts/typ-fehler-r-06a/typ-fehler-r-06a.html}{Typ-Fehler-R-06a}
\item
  \href{https://datenwerk.netlify.app/posts/typ-fehler-r-07/typ-fehler-r-07.html}{Typ-Fehler-R-07}
\item
  \href{https://datenwerk.netlify.app/posts/typ-fehler-r-08-name-clash/typ-fehler-r-08-name-clash}{Typ-Fehler-R-08-name-clash}
\item
  \href{https://datenwerk.netlify.app/posts/logikpruefung1/logikpruefung1}{Logikpruefung1}
\item
  \href{https://datenwerk.netlify.app/posts/logikpruefung2/logikpruefung2}{Logikpruefung2}
\item
  \href{https://datenwerk.netlify.app/posts/there-is-no-package/there-is-no-package.html}{there-is-no-package}
\item
  \href{https://datenwerk.netlify.app/posts/wertberechnen2/wertberechnen2}{Wertberechnen2}
\item
  \href{https://datenwerk.netlify.app/posts/wertzuweisen_mc/wertzuweisen_mc}{Wertzuweisen\_mc}
\item
  \href{https://datenwerk.netlify.app/posts/argumente/argumente.html}{argumente}
\item
  \href{https://datenwerk.netlify.app/posts/import-mtcars/import-mtcars.html}{import-mtcars}
\item
  \href{https://datenwerk.netlify.app/posts/wertzuweisen/wertzuweisen}{Wertzuweisen}
\item
  \href{https://datenwerk.netlify.app/posts/wertpruefen/wertpruefen}{Wertpruefen}
\item
  \href{https://datenwerk.netlify.app/posts/wrangle1/wrangle1.html}{wrangle1}
\item
  \href{https://datenwerk.netlify.app/posts/repro1-sessioninfo/repro1-sessioninfo.html}{repro1-sessioninfo}
\item
  \href{https://datenwerk.netlify.app/posts/mw-berechnen/mw-berechnen}{mw-berechnen}
\end{enumerate}

Pr√ºfen Sie Ihr Wissen mit
\href{https://datenwerk.netlify.app/posts/r-quiz/r-quiz}{diesem
Quiz}!\footnote{\url{https://datenwerk.netlify.app/posts/r-quiz/r-quiz}}

Noch nicht genug? Checken Sie alle Aufgaben mit dem Tag
\href{https://datenwerk.netlify.app/\#category=R}{R} auf dem Datenwerk
aus.\footnote{\url{https://datenwerk.netlify.app/\#category=R}}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Die Webseite \href{https://datenwerk.netlify.app/}{Datenwerk} stellt
eine Reihe von Aufgaben zum Thema Statistik bereit. Zu jeder Aufgabe
sind ein oder mehrere Schlagw√∂rter (Tags) zugeordnet. Wenn Sie auf ein
Schlagwort klicken, sehen Sie die Liste der Aufgaben mit diesem
Schlagwort. Es kann aber sein, dass Sie einige Aufgabe nicht l√∂sen
k√∂nnen, da Wissen vorausgesetzt wird, das Sie (noch) nicht haben. Lassen
Sie sich davon nicht ins Boxhorn jagen. Ignorieren Sie solche Aufgaben
f√ºrs Erste. \(\square\)

\end{tcolorbox}

\section{Vertiefung}\label{vertiefung-2}

\subsection{\texorpdfstring{Varianten zu
\texttt{read.csv}}{Varianten zu read.csv}}\label{varianten-zu-read.csv}

Hier ist eine weitere M√∂glichkeit, um Daten von einem Ordner (egal ob
dieser sich im Internet oder auf Ihrem Computer befinde) einzulesen,
stellt die Funktion \texttt{data\_read} bereit:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(easystats)  }\CommentTok{\# Das Paket muss installiert sein}
\NormalTok{d }\OtherTok{\textless{}{-}} \FunctionTok{data\_read}\NormalTok{(}\FunctionTok{paste0}\NormalTok{(}
  \StringTok{"https://vincentarelbundock.github.io/Rdatasets/"}\NormalTok{,}
  \StringTok{"csv/openintro/mariokart.csv"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

Der Unterschied ist, dass \texttt{data\_read} \emph{viele} Formate von
Daten (Excel, CSV, SPSS, \ldots) verkraftet, wohingegen
\texttt{read.csv} nur Standard-CSV einlesen kann.

Schauen wir uns die letzte R-Syntax en Detail an:

\begin{verbatim}
Hey R,
hol das "Buch" easystats aus der B√ºcherei und lies es
definiere als "d" die Tabelle,
die du unter der angegebenen URL findest.
\end{verbatim}

In R gibt es oft viele M√∂glichkeiten, ein Ziel zu erreichen. Zum
Beispiel haben wir hier den Befehl \texttt{data\_read()} verwendet, um
Daten zu importieren. Andere, gebr√§uchliche Befehle, die CSV-Dateien
importieren, hei√üen \texttt{read.csv()} (aus dem Standard-R, kein
Extra-Paket n√∂tig) und \texttt{read\_csv()} (aus dem Meta-Paket
\texttt{\{tidyverse\}}).

\subsection{Importieren von
Excel-Tabellen}\label{importieren-von-excel-tabellen}

Mit der Funktion \texttt{data\_read} aus \texttt{\{easystats\}} kann man
viele verschiedene Datenformate importieren, auch Excel-Tabellen (.xls,
.xlsx).

Als Beispiel betrachten wir den Datensatz \texttt{extra} aus dem R-Paket
\texttt{\{pradadata\}}\footnote{\url{https://github.com/sebastiansauer/pradadata}}.
In diesem Datensatz werden die Ergebnisse einer Umfrage zu den
Korrelaten von Extraversion beschrieben. Details zu der
zugrundeliegenden Studie finden Sie hier: \url{https://osf.io/4kgzh}.

Ein Daten-Dictionary findet sich
\href{https://github.com/sebastiansauer/statistik1/raw/main/daten/extra-dictionary.md}{hier}.\footnote{\url{https://github.com/sebastiansauer/statistik1/raw/main/daten/extra-dictionary.md}}

Laden Sie die Excel-Datei herunter. Angenommen, Sie speichern die
Excel-Datei in einem Unterordner namens \texttt{daten} Ihres aktuellen
Projektordners. Dann k√∂nnen Sie die Daten so importieren:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(easystats)}
\NormalTok{extra }\OtherTok{\textless{}{-}} \FunctionTok{data\_read}\NormalTok{(}\StringTok{"daten/extra.xls"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

Allerdings kann \texttt{data\_read} keine Dateien aus dem Internet
importieren, was praktisch w√§re. Stattdessen muss die Datei lokal auf
Ihrer Festplatte liegen.

Wenn Sie allerdings ``remote'', also aus dem Internet, eine Excel-Datei
importieren m√∂chten, so k√∂nnen Sie das mit \texttt{import} aus dem
R-Paket \texttt{\{rio\}} tun:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(rio)}
\NormalTok{extra\_path }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(}
  \StringTok{"https://github.com/sebastiansauer/statistik1/"}\NormalTok{,}
  \StringTok{"raw/main/daten/extra.xls"}\NormalTok{)}
\NormalTok{extra }\OtherTok{\textless{}{-}} \FunctionTok{import}\NormalTok{(extra\_path)}
\end{Highlighting}
\end{Shaded}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

CSV-Dateien werden auf vielen Computern als eine Datei erkannt, die
Excel √∂ffnen kann und das auch tut, wenn man eine CSV-Datei
doppelklickt. Dennoch ist das CSV-Format keine Datei im Excel-Format,
sondern eine einfache Text-Datei, die auch mit jedem Text-Editor
ge√∂ffnet und bearbeitet werden kann. \(\square\)

\end{tcolorbox}

Alternativ k√∂nnen Sie in RStudio auch Excel-Dateien \emph{ohne} R-Code
importieren, s. Abbildung~\ref{fig-daten-rstudio}.

\subsection{Der Dollar-Operator}\label{sec-dollar-op}

In Beispiel~\ref{exm-vektoren} hatten wir Vektoren definiert. Solche
Vektoren fliegen sozusagen frei in Ihrem \texttt{Environment} herum
(Schauen Sie mal dort nach!) Die Spalten einer Tabelle sind aber auch
Vektoren, nur eben nicht frei im \texttt{Environment}, sondern in eine
Tabelle eingebunden.

M√∂chte man diese Vektoren direkt ansprechen, so kann man das mit dem
sog. \emph{Dollar-Operator} \texttt{\$} tun.

Angenommen, Sie m√∂chten sich die Verkaufspreise (\texttt{total\_pr}) aus
der Tabelle \texttt{mariokart} herausziehen, dann k√∂nnen Sie das mit dem
Dollar-Operator tun:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart}\SpecialCharTok{$}\NormalTok{total\_pr}
\DocumentationTok{\#\#   [1]  51.55  37.04  45.50  44.00  71.00  45.00  37.02}
\DocumentationTok{\#\#   [8]  53.99  47.00  50.00  54.99  56.01  48.00  56.00}
\DocumentationTok{\#\#  [15]  43.33  46.00  46.71  46.00  55.99 326.51  31.00}
\DocumentationTok{\#\#  [22]  53.98  64.95  50.50  46.50  55.00  34.50  36.00}
\DocumentationTok{\#\#  [29]  40.00  47.00  43.00  31.00  41.99  49.49  41.00}
\DocumentationTok{\#\#  [36]  44.78  47.00  44.00  63.99  53.76  46.03  42.25}
\DocumentationTok{\#\#  [43]  46.00  51.99  55.99  41.99  53.99  39.00  38.06}
\DocumentationTok{\#\#  [50]  46.00  59.88  28.98  36.00  51.99  43.95  32.00}
\DocumentationTok{\#\#  [57]  40.06  48.00  36.00  31.00  53.99  30.00  58.00}
\DocumentationTok{\#\#  [64]  38.10 118.50  61.76  53.99  40.00  64.50  49.01}
\DocumentationTok{\#\#  [71]  47.00  40.10  41.50  56.00  64.95  49.00  48.00}
\DocumentationTok{\#\#  [78]  38.00  45.00  41.95  43.36  54.99  45.21  65.02}
\DocumentationTok{\#\#  [85]  45.75  64.00  36.00  54.70  49.91  47.00  43.00}
\DocumentationTok{\#\#  [92]  35.99  54.49  46.00  31.06  55.60  40.10  52.59}
\DocumentationTok{\#\#  [99]  44.00  38.26  51.00  48.99  66.44  63.50  42.00}
\DocumentationTok{\#\# [106]  47.00  55.00  33.01  53.76  46.00  43.00  42.55}
\DocumentationTok{\#\# [113]  52.50  57.50  75.00  48.92  45.99  40.05  45.00}
\DocumentationTok{\#\# [120]  50.00  49.75  47.00  56.00  41.00  46.00  34.99}
\DocumentationTok{\#\# [127]  49.00  61.00  62.89  46.00  64.95  36.99  44.00}
\DocumentationTok{\#\# [134]  41.35  37.00  58.98  39.00  40.70  39.51  52.00}
\DocumentationTok{\#\# [141]  47.70  38.76  54.51}
\end{Highlighting}
\end{Shaded}

Der Dollar-Operator trennt den Namen der Tabelle vom Namen der Spalte.

Nat√ºrlich k√∂nnen Sie mit dem resultierenden Vektor beliebig
weiterarbeiten, etwa ihn in einem anderen Vektor speichern oder eine
Funktion anwenden:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{verkaufspreise }\OtherTok{\textless{}{-}}\NormalTok{ mariokart}\SpecialCharTok{$}\NormalTok{total\_pr}
\FunctionTok{mean}\NormalTok{(verkaufspreise)}
\DocumentationTok{\#\# [1] 49.88049}
\FunctionTok{mean}\NormalTok{(mariokart}\SpecialCharTok{$}\NormalTok{total\_pr)  }\CommentTok{\# synonym zur obigen Zeile}
\DocumentationTok{\#\# [1] 49.88049}
\end{Highlighting}
\end{Shaded}

\subsection{R-Zertifikat bei LinkedIn}\label{r-zertifikat-bei-linkedin}

Sie k√∂nnen bei LinkedIn\footnote{\url{https://www.linkedin.com/help/linkedin/answer/a510481}}
(oder anderen Anbietern ein Zertifikat) erhalten, das Ihre R-Kenntnisse
dokumentiert.

\subsection{R-Funktionen
verschachteln}\label{r-funktionen-verschachteln}

Das Kombinieren von Funktionen kann kompliziert werden:

\begin{codelisting}

\caption{\label{lst-schachtel}Verschachtelte Funktionen}

\centering{

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{3}\NormalTok{)}
\FunctionTok{sum}\NormalTok{(}\FunctionTok{abs}\NormalTok{(}\FunctionTok{mean}\NormalTok{(x)}\SpecialCharTok{{-}}\NormalTok{x)) }
\DocumentationTok{\#\# [1] 2}
\end{Highlighting}
\end{Shaded}

}

\end{codelisting}%

Die Funktion \texttt{abs(x)} gibt den (Absolut-)Betrag von \texttt{x}
zur√ºck (entfernt das Vorzeichen, mit anderen Worten).

Verschachtelte Ausdr√ºcke lesen sich von innen nach au√üen (und werden in
dieser Reihenfolge abgearbeitet). F√ºr unser Beispiel
(Listing~\ref{lst-schachtel}):

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Berechne den Mittelwert von \texttt{x}
\item
  Ziehe vom Mittelwert jeweils die Elemente von \texttt{x} ab
\item
  Nimm vom Ergebnis jeweils den Absolutwert
\item
  Summiere diese Werte
\end{enumerate}

Kurz gesagt: Hier haben wir die mittlere Absolutabweichung der Elemente
von \texttt{x} zum Mittelwert ausgerechnet.

\subsection{R und Friends updaten}\label{r-und-friends-updaten}

Irgendwann werden Ihr R, Ihr RStudio und Ihre R-Pakete veraltet sein, s.
Abbildung~\ref{fig-arnie}. Installieren Sie dann einfach die neue
Version von R und RStudio wie oben beschreiben, s.
Kapitel~\ref{sec-install-r}.

So updaten Sie Ihre R-Pakete: Klicken Sie im Reiter \texttt{Packages}
(in RStudio) und dort auf den Button \texttt{Update}.\footnote{Wenn die
  Anzahl der zu aktualisierenden Pakete gro√ü ist, dann besser nicht alle
  ausw√§hlen, sondern nur ein paar. Dann die n√§chsten paar Pakete usw.}
Denken Sie daran, dass Sie die Software (R, RStudio, R-Paket), die Sie
updaten/installieren, nicht laufen darf.

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Ihre R-Pakete sollten aktuell sein. Klicken Sie beim Reiter
\emph{Packages} auf ``Update'', um Ihre R-Pakete zu aktualisieren.
Arnold Schwarzenegger r√§t, Ihre R-Pakete aktuell zu halten, s.
Abbildung~\ref{fig-arnie}\footnotemark{}.

\end{tcolorbox}

\footnotetext{Bildquelle: \url{https://imgflip.com/memegenerator}}

\begin{figure}

\centering{

\includegraphics[width=0.5\textwidth,height=\textheight]{img/terminator.jpg}

}

\caption{\label{fig-arnie}R-Pakete sollten stets aktuell sein, so Arnold
Schwarzenegger}

\end{figure}%

\subsection{Ben√∂tigte R-Pakete}\label{benuxf6tigte-r-pakete}

In diesem Kapitel ben√∂tigen Sie folgendes R-Paket:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(openintro)  }\CommentTok{\# Datensatz \textasciigrave{}mariokart\textasciigrave{}}
\end{Highlighting}
\end{Shaded}

\subsection{Ben√∂tigte Daten}\label{benuxf6tigte-daten}

Sie ben√∂tigen in diesem Kapitel den Datensatz \texttt{mariokart}, der
entweder online\footnote{ √ºber diese Internetadresse:
  \url{https://vincentarelbundock.github.io/Rdatasets/csv/openintro/mariokart.csv}}
oder √ºber R-Paket \texttt{openintro} importiert werden kann:

\subsubsection{Import via Download}\label{import-via-download}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\FunctionTok{paste0}\NormalTok{(}
  \StringTok{"https://vincentarelbundock.github.io/Rdatasets/"}\NormalTok{,}
  \StringTok{"csv/openintro/mariokart.csv"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\subsubsection{Import via R-Paket}\label{import-via-r-paket}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Das Paket \textquotesingle{}openintro\textquotesingle{} muss installiert sein:}
\FunctionTok{data}\NormalTok{(mariokart, }\AttributeTok{package =} \StringTok{"openintro"}\NormalTok{) }
\end{Highlighting}
\end{Shaded}

\section{Literaturhinweise}\label{literaturhinweise-1}

``Warum R? Warum, R?'' hei√üt ein Kapitel in Sauer (2019), das einiges
zum Pro und Contra von R ausf√ºhrt. In Kapitel 3 in der gleichen Quelle
finden sich viele Hinweise, wie man R startet; In Kapitel 4 werden
Grundlagen von ``Errisch'' erl√§utert; Kapitel 5 f√ºhrt in Datenstrukturen
von R ein (schon etwas anspruchsvoller). Alternativ bietet
\href{https://moderndive.com/1-getting-started.html}{Kapitel 1} von
Ismay und Kim (2020) einen guten und sehr anwenderfreundlichen
√úberblick. Das Buch hat auch den Vorteil, dass es komplett frei online
verf√ºgbar ist. Vergleichbar dazu ist Cetinkaya-Rundel und Hardin (2021),
vielleicht einen Tick formaler; auf jeden Fall genau das richtige Niveau
f√ºr Bachelor-Statistik in angewandten nicht-technischen Studieng√§ngen.

Nat√ºrlich gibt es viele Online-Kurse zu R, die aber teilweise
kostenplichtig sind\footnote{Ein Beispiel ist der Kurs \emph{Getting
  Started with RStudio},
  \url{https://www.coursera.org/projects/getting-started-rstudio}
  (Kursdauer: 1 Stunde)}.

\section{Literatur}\label{literatur-1}

\chapter{Daten umformen}\label{daten-umformen}

\section{Lernsteuerung}\label{lernsteuerung-2}

\subsection{Standort im Lernpfad}\label{standort-im-lernpfad-2}

Abb. Abbildung~\ref{fig-ueberblick} zeigt den Standort dieses Kapitels
im Lernpfad und gibt damit einen √úberblick √ºber das Thema dieses
Kapitels im Kontext aller Kapitel.

\subsection{Lernziele}\label{lernziele-3}

\begin{itemize}
\tightlist
\item
  Sie k√∂nnen folgende Verben des Datenjudo anwenden: \texttt{arrange},
  \texttt{filter}, \texttt{select}, \texttt{summarise},
  \texttt{group\_by}, \texttt{mutate}.
\item
  Sie k√∂nnen R-Befehle mit der ``Pfeife'' verketten.
\end{itemize}

\subsection{Ben√∂tigte R-Pakete}\label{benuxf6tigte-r-pakete-1}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(tidyverse)}
\FunctionTok{library}\NormalTok{(easystats)}
\end{Highlighting}
\end{Shaded}

\subsection{Ben√∂tigte Daten}\label{benuxf6tigte-daten-1}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(}
  \StringTok{"https://vincentarelbundock.github.io/Rdatasets/"}\NormalTok{,}
  \StringTok{"csv/openintro/mariokart.csv"}\NormalTok{)}

\NormalTok{mariokart }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(mariokart\_path)}
\end{Highlighting}
\end{Shaded}

\begin{exercise}[]\protect\hypertarget{exr-los}{}\label{exr-los}

Importieren Sie den Datensatz \texttt{mariokart}. Probieren Sie alle
vorgestellten Verben des Datenjudos aus, zun√§chst in dem Sie einfach den
R-Code kopieren und selber ausf√ºhren.\(\square\)

\end{exercise}

\subsection{R-Code zum Copy-Pasten}\label{r-code-zum-copy-pasten}

Sie finden den R-Code f√ºr jedes Kapitel
\href{https://github.com/sebastiansauer/statistik1/tree/main/R-code-for-all-chapters}{hier}.
\(\square\)

\subsection{Frag den Bot}\label{frag-den-bot}

\begin{quote}
{\emoji{student}} Erkl√§re einem F√ºnfj√§hrigen, warum Statistik n√ºtzlich
ist.
\end{quote}

\begin{quote}
{\emoji{robot}} Okay, h√∂r zu. Stell dir vor, du hast viele
Spielzeugautos und du willst herausfinden, welches Auto am meisten
bespielt wird. Du kannst jeden Tag z√§hlen, wie oft du jedes Auto benutzt
hast. Aber das w√§re sehr m√ºhsam und k√∂nnte schnell durcheinander
gebracht werden. Stattdessen kannst du mit Statistik eine einfachere
Methode finden. Du kannst zum Beispiel eine Liste machen und jedes Auto
mit einer bestimmten Farbe markieren. Dann kannst du jeden Tag einfach
z√§hlen, wie oft du jede Farbe verwendet hast. Am Ende kannst du
herausfinden, welches Auto am meisten bespielt wurde, indem du siehst,
welche Farbe am meisten verwendet wurde. Das ist ein Beispiel daf√ºr, wie
Statistik uns dabei helfen kann, Muster in gro√üen Datens√§tzen zu finden
und Entscheidungen zu treffen, ohne alles einzeln zu z√§hlen.
\end{quote}

Quelle: ChatGTP 3.5, 2023-02-09

\subsection{Zum Einstieg}\label{zum-einstieg}

Vielleicht fordert Sie die Lehrkraft zu einem Einstiegsquiz auf, etwas
mittels der Plattform
\href{https://antworte.jetzt/}{antworte.jetzt}.\footnote{https://antworte.jetzt/}
Alternativ √ºberlegen Sie sich selber 10 Quiz-Aufgaben zum Stoff des
letzten Kapitels.

\section{Datenjudo}\label{datenjudo}

\begin{definition}[Datenjudo]\protect\hypertarget{def-datenjudo}{}\label{def-datenjudo}

Mit \emph{Datenjudo} meint man den Prozess der Aufbereitens, Umformens
oder Zusammenfassen von Daten, sowohl f√ºr einzelne Beobachtungen (Zeilen
einer Datentabelle) oder Variablen (Spalten einer Datentabelle) oder
einer ganzen Datentabelle. \(\square\)

\end{definition}

\subsection{Die Wahrheit √ºber Data
Science}\label{die-wahrheit-uxfcber-data-science}

Denkt man an Data Science, stellt man sich coole Leute vor (in San
Francisco oder Berlin), die an abgefahrenen Berechnungen mit hoch
komplexen statistischen Modellen f√ºr gigantische Datenmengen basteln.
Tats√§chlich besteht ein gro√üer Teil der Arbeit aus dem Aufbereiten von
Daten.

\subsection{Praxisbezug: Aus dem Alltag des Data
Scientisten}\label{praxisbezug-aus-dem-alltag-des-data-scientisten}

Laut dem
\href{https://hbr.org/2018/08/what-data-scientists-really-do-according-to-35-data-scientists}{Harvard
Business Review} allerdings, verbringen diese Leute ``80\%'' ihrer Zeit
mit dem \emph{Aufbereiten} von Daten (Bowne-Anderson 2018).\footnote{\url{https://hbr.org/2018/08/what-data-scientists-really-do-according-to-35-data-scientists}}
Ja: mit uncoolen T√§tigkeiten wie Tippfehler aus Datens√§tzen entfernen
oder die Daten √ºberhaupt nutzbar und verst√§ndlich zu machen.

Das zeigt zumindest, dass das Aufbereiten von Daten a) wichtig ist und
b) dass man allein damit schon weit kommen kann. Eine gute Nachricht ist
(vielleicht), dass das Aufbereiten von Daten keine aufw√§ndige Mathematik
verlangt, stattdessen muss man ein paar Handgriffe und Kniffe kennen.
Daher passt der Begriff \emph{Datenjudo} vielleicht ganz gut. K√ºmmern
wir uns also um das Aufbereiten bzw. Umformen von Daten, um das
Datenjudo. üî¢ü§π \(\square\)

\begin{example}[]\protect\hypertarget{exm-datenjudo}{}\label{exm-datenjudo}

Beispiele f√ºr typische T√§tigkeiten des Datenjudos sind:

\begin{itemize}
\tightlist
\item
  Zeilen \emph{filtern} (z. B. nur Studentis des Studiengangs X)
\item
  Zeilen \emph{sortieren} (z. B. Studenten mit guten Noten in den oberen
  Zeilen)
\item
  Spalten \emph{w√§hlen} (z. B. 100 weitere Produkte ausblenden)
\item
  Spalten in eine Zahl \emph{zusammenfassen} (z. B. Notenschnitt der 1.
  Klausur)
\item
  Tabelle \emph{gruppieren} (z. B. Analyse getrennt nach Standorten)
\item
  Werte aus einer Spalte \emph{ver√§ndern} oder \emph{neue Spalte} bilden
  (z. B. Punkte in Prozent-Richtige umrechnen).
\item
  \ldots{} \(\square\)
\end{itemize}

\end{example}

\subsection{Mach's einfach}\label{machs-einfach}

Es gibt einen (einfachen) Trick, wie man umfangreiche Datenaufbereitung
elegant geregelt kriegt, klingt fast zu sch√∂n, um wahr zu sein (s.
Abbildung~\ref{fig-that-would-be-great}).

\begin{figure}

\centering{

\includegraphics[width=0.5\textwidth,height=\textheight]{img/thatwouldbegreat.jpg}

}

\caption{\label{fig-that-would-be-great}Mach's einfach. Made at
imgflip.com, Meme Generator}

\end{figure}%

Der Trick besteht darin, komplexe Operationen in mehrere einfache
Teilschritte zu zergliedern\footnote{Genau darin besteht das Wesen einer
  Analyse: die Zerlegung eines Objekts in seine Bestandteile.}. Man
k√∂nnte vom ``Lego-Prinzip'' sprechen, s. Abbildung~\ref{fig-lego}. Im
linken Teil von Abbildung~\ref{fig-lego} sieht man ein (recht) komplexes
Gebilde. Zerlegt man es aber in seine Einzelteile, so sind es deutlich
einfachere geometrische Objekte wie Dreiecke oder Quadrate (rechter Teil
des Diagramms).

\begin{figure}

\centering{

\includegraphics[width=0.75\textwidth,height=\textheight]{img/Bausteine_dplyr_crop.pdf}

}

\caption{\label{fig-lego}Das Lego-Prinzip}

\end{figure}%

Damit Sie es selber einfach machen k√∂nnen, m√ºssen Sie selber Hand
anlegen. Importieren Sie daher den Datensatz \texttt{mariokart}, z.B.
so:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(mariokart\_path)}

\FunctionTok{glimpse}\NormalTok{(mariokart)}
\DocumentationTok{\#\# Rows: 143}
\DocumentationTok{\#\# Columns: 13}
\DocumentationTok{\#\# $ rownames    \textless{}int\textgreater{} 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17,\textasciitilde{}}
\DocumentationTok{\#\# $ id          \textless{}dbl\textgreater{} 1.5e+11, 2.6e+11, 3.2e+11, 2.8e+11, 1.7e+11, 3.6e+11, 1.2e\textasciitilde{}}
\DocumentationTok{\#\# $ duration    \textless{}int\textgreater{} 3, 7, 3, 3, 1, 3, 1, 1, 3, 7, 1, 1, 1, 1, 7, 7, 3, 3, 1, 7\textasciitilde{}}
\DocumentationTok{\#\# $ n\_bids      \textless{}int\textgreater{} 20, 13, 16, 18, 20, 19, 13, 15, 29, 8, 15, 15, 13, 16, 6, \textasciitilde{}}
\DocumentationTok{\#\# $ cond        \textless{}chr\textgreater{} "new", "used", "new", "new", "new", "new", "used", "new", \textasciitilde{}}
\DocumentationTok{\#\# $ start\_pr    \textless{}dbl\textgreater{} 0.99, 0.99, 0.99, 0.99, 0.01, 0.99, 0.01, 1.00, 0.99, 19.9\textasciitilde{}}
\DocumentationTok{\#\# $ ship\_pr     \textless{}dbl\textgreater{} 4.0, 4.0, 3.5, 0.0, 0.0, 4.0, 0.0, 3.0, 4.0, 4.0, 3.0, 0.0\textasciitilde{}}
\DocumentationTok{\#\# $ total\_pr    \textless{}dbl\textgreater{} 52, 37, 46, 44, 71, 45, 37, 54, 47, 50, 55, 56, 48, 56, 43\textasciitilde{}}
\DocumentationTok{\#\# $ ship\_sp     \textless{}chr\textgreater{} "standard", "firstClass", "firstClass", "standard", "media\textasciitilde{}}
\DocumentationTok{\#\# $ seller\_rate \textless{}int\textgreater{} 1580, 365, 998, 7, 820, 270144, 7284, 4858, 27, 201, 4858,\textasciitilde{}}
\DocumentationTok{\#\# $ stock\_photo \textless{}chr\textgreater{} "yes", "yes", "no", "yes", "yes", "yes", "yes", "yes", "ye\textasciitilde{}}
\DocumentationTok{\#\# $ wheels      \textless{}int\textgreater{} 1, 1, 1, 1, 2, 0, 0, 2, 1, 1, 2, 2, 2, 2, 1, 0, 1, 1, 2, 2\textasciitilde{}}
\DocumentationTok{\#\# $ title       \textless{}chr\textgreater{} "\textasciitilde{}\textasciitilde{} Wii MARIO KART \&amp; WHEEL \textasciitilde{} NINTENDO Wii \textasciitilde{} BRAND NEW \textasciitilde{}}
\end{Highlighting}
\end{Shaded}

\begin{example}[]\protect\hypertarget{exm-datenjudo}{}\label{exm-datenjudo}

Sie arbeiten immer noch bei dem gro√üen Online-Auktionshaus. Mittlerweile
haben Sie sich den Ruf des ``Datenguru'' erworben. Vielleicht weil Sie
behauptet haben, Data Science sei zu 80\% Datenjudo, das hat irgendwie
Eindruck geschindet\ldots{} Naja, jedenfalls m√ºssen Sie jetzt mal
zeigen, dass Sie nicht nur schlaue Spr√ºche draufhaben, sondern auch die
Daten ordentlich abb√ºrsten k√∂nnen. Sie analysieren daf√ºr im Folgenden
den Datensatz \texttt{mariokart}. Na, dann los.\(\square\)

\end{example}

\section{Die Verben des Datenjudos}\label{die-verben-des-datenjudos}

Im R-Paket \texttt{\{dplyr\}}, das wiederum Teil des R-Pakets
\texttt{\{tidyverse\}} ist, gibt es eine Reihe von R-Befehlen, die das
Datenjudo in eine Handvoll einfacher Verben runterbrechen.\footnote{Falls
  Sie das R-Paket \texttt{\{tidyverse\}} noch nicht installiert haben
  sollten, w√§re jetzt ein guter Zeitpunkt daf√ºr.} Die wichtigsten Verben
des Datenjudos schauen wir uns im Folgenden an.

Wir betrachten dazu im Folgenden einen einfachen (Spielzeug-)Datensatz,
an dem wir zun√§chst die Verben des Datenjudos vorstellen, s.
Tabelle~\ref{tbl-datenjudo}.

\begin{longtable}{rllr}

\caption{\label{tbl-datenjudo}Ein einfacher Datensatz von schlichtem
Gem√ºt}

\tabularnewline

\toprule
id & name & gruppe & note \\ 
\midrule\addlinespace[2.5pt]
1 & Anni & A & 2.7 \\ 
2 & Berti & A & 2.7 \\ 
3 & Charli & B & 1.7 \\ 
\bottomrule

\end{longtable}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-important-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-important-color}{\faExclamation}\hspace{0.5em}{Wichtig}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-important-color-frame]

Die Verben des Datenjudos wohnen im Paket \texttt{\{dyplr\}}, welches
gestartet wird, wenn Sie \texttt{library(tidyverse)} eingeben. Falls Sie
vergessen , das Paket \texttt{\{tidyverse\}} zu starten, dann
funktionieren diese Befehle nicht.\(\square\)

\end{tcolorbox}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Zur Erinnerung: In RStudio k√∂nnen Sie per Klick auf das kleine
Tabellen-Icon im Bereich \emph{Environment} die Tabellenansicht einer
Tabelle √∂ffnen, s. Kapitel~\ref{sec-viewtab}. \(\square\)

\end{tcolorbox}

\subsection{\texorpdfstring{Tabelle sortieren:
\texttt{arrange}}{Tabelle sortieren: arrange}}\label{tabelle-sortieren-arrange}

\emph{Sortieren} der Zeilen ist eine einfache, aber h√§ufige T√§tigkeit
des Datenjudos, s. Abbildung~\ref{fig-arrange}.

\begin{figure}

\centering{

\includegraphics{030-aufbereiten_files/figure-pdf/fig-arrange-1.pdf}

}

\caption{\label{fig-arrange}Sinnbild f√ºr das Sortieren einer Tabelle mit
\texttt{arrange()}}

\end{figure}%

\begin{example}[Was sind die h√∂chsten
Preise?]\protect\hypertarget{exm-arrange1}{}\label{exm-arrange1}

Sie wollen mal locker anfangen. Daher stellen Sie sich folgende Frage:
Was sind denn eigentlich die h√∂chsten Preise, f√ºr die das Spiel
\emph{Mariokart} √ºber den Online-Ladentisch geht? Die Spalte des
Verkaufspreis hei√üt offenbar \texttt{total\_pr} (s. Tabelle
\texttt{mariokart}). In Excel kann die Spalte, nach der man die Tabelle
sortieren m√∂chte, einfach anklicken. Ob das in R auch so einfach geht?
Die Funktion \texttt{arrange()} macht es uns ziemlich einfach:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{arrange}\NormalTok{(mariokart, total\_pr) }
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}rr@{}}
\toprule\noalign{}
total\_pr & start\_pr \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
29 & 0.99 \\
30 & 0.01 \\
31 & 0.99 \\
31 & 1.99 \\
31 & 30.00 \\
31 & 0.01 \\
\end{longtable}

√úbersetzen wir die R-Syntax ins Deutsche:

\begin{verbatim}
Hey R,
arrangiere (sortiere) `mariokart` nach der Spalte `total_pr`.
\end{verbatim}

Gar nicht so schwer.\(\square\)

\end{example}

√úbrigens wird in \texttt{arrange()} per Voreinstellung aufsteigend
sortiert. Setzt man ein Minus vor der zu sortierenden Spalte, wird
umgekehrt, also \emph{absteigend} sortiert:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mario\_sortiert }\OtherTok{\textless{}{-}} \FunctionTok{arrange}\NormalTok{(mariokart, }\SpecialCharTok{{-}}\NormalTok{total\_pr)}
\end{Highlighting}
\end{Shaded}

\begin{exercise}[]\protect\hypertarget{exr-arrange2}{}\label{exr-arrange2}

Sortieren Sie die Mariokart-Daten absteigend nach der Anzahl der
beigelegten Lenkr√§der.\(\square\)

\end{exercise}

\subsection{\texorpdfstring{Zeilen filtern:
\texttt{filter}}{Zeilen filtern: filter}}\label{zeilen-filtern-filter}

\subsubsection{Nur bestimmte Zeilen
behalten}\label{nur-bestimmte-zeilen-behalten}

Zeilen \emph{filtern} bedeutet, dass man nur \emph{bestimmte}
\emph{Zeilen} (Beobachtungen) \emph{behalten} m√∂chte, die restlichen
Zeilen brauchen wir nicht, weg mit ihnen. Wir haben also ein
Filterkriterium im Kopf, anhand dessen wir die Tabelle filern, s.
Abbildung~\ref{fig-filter}.

\begin{figure}

\centering{

\includegraphics{030-aufbereiten_files/figure-pdf/fig-filter-1.pdf}

}

\caption{\label{fig-filter}Sinnbild f√ºr das Filtern einer Tabelle mit
\texttt{filter()}}

\end{figure}%

\begin{example}[Ob ein Foto f√ºr den Verkaufspreis n√ºtzlich
ist?]\protect\hypertarget{exm-filter}{}\label{exm-filter}

Als n√§chstes kommt Ihnen die Idee, mal zu schauen, ob Auktionen mit
Photo der Ware einen h√∂heren Verkaufspreis erzielen als Auktionen ohne
Photo.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart\_neu }\OtherTok{\textless{}{-}} \FunctionTok{filter}\NormalTok{(mariokart, stock\_photo }\SpecialCharTok{==} \StringTok{"yes"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

Sie filtern also die Tabelle so, dass \emph{nur} diese Auktionen im
Datensatz verbleiben, welche ein Photo haben, mit anderen Worten,
Auktionen (Beobachtungen) bei denen gilt:
\texttt{stock\_photo\ ==\ TRUE}.\(\square\)

\end{example}

\subsubsection{Komplexeres Filtern}\label{komplexeres-filtern}

Angestachelt von Ihren Erfolgen m√∂chten Sie jetzt komplexere Hypothesen
pr√ºfen: Ob wohl Auktionen von \emph{neuen} Spielen und zwar \emph{mit}
Photo einen h√∂heren Preis erzielen als die √ºbrigen Auktionen?

Anders gesagt haben Sie zwei Filterkriterien im Blick: Neuheit
\texttt{cond} und Photo \texttt{stock\_photo}. Nur diejenigen Auktionen,
die \emph{sowohl} Neuheit \emph{als auch} Photo erf√ºllen, m√∂chten Sie
n√§her untersuchen (Filtern mit dem logischen UND):

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mario\_filter1 }\OtherTok{\textless{}{-}} \FunctionTok{filter}\NormalTok{(mariokart, stock\_photo }\SpecialCharTok{==} \StringTok{"yes"} \SpecialCharTok{\&}\NormalTok{ cond }\SpecialCharTok{==} \StringTok{"new"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

Hm. Was ist mit den Auktionen, die \emph{entweder} √ºber ein Photo
verf√ºgen \emph{oder auch} neu sind, oder beides (Filtern mit dem
logischen ODER)?

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mario\_filter2 }\OtherTok{\textless{}{-}} \FunctionTok{filter}\NormalTok{(mariokart, }
\NormalTok{                        stock\_photo }\SpecialCharTok{==} \StringTok{"yes"} \SpecialCharTok{|}\NormalTok{ cond }\SpecialCharTok{==} \StringTok{"new"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

Zur Erinnerung: Logische Operatoren sind in Kapitel~\ref{sec-logic}
erl√§utert.

Hier k√∂nnte man noch viele interessante Hypothesen pr√ºfen, denken Sie
sich und tun das auch \ldots{}

\begin{exercise}[]\protect\hypertarget{exr-filter2}{}\label{exr-filter2}

Filtern Sie die Spiele mit nur einem Lenkrad und ohne
Versandkosten.\(\square\)

\end{exercise}

\begin{exercise}[]\protect\hypertarget{exr-filter3}{}\label{exr-filter3}

Filtern Sie die Spiele mit nur einem Lenkrad, die einen
√ºberdurchschnittlichen Verkaufspreis erzielen. Tipp: Nutzen Sie die
Funktion \texttt{describe\_distribution(name\_der\_tabelle)}, um den
Mittelwert einer Variable des Datensatzes zu erfahren (diese Funktion
wohnt im R-Paket \texttt{easystats}). \(\square\)

\end{exercise}

\subsection{\texorpdfstring{Spalten ausw√§hlen mit
\texttt{select}}{Spalten ausw√§hlen mit select}}\label{spalten-auswuxe4hlen-mit-select}

Eine Tabelle mit vielen Spalten kann schnell un√ºbersichtlich werden. Da
lohnt es sich, eine alte goldene Regel zu beachten: Mache die Dinge so
einfach wie m√∂glich, aber nicht einfacher. W√§hlen wir also \emph{nur}
die Spalten aus, die uns interessieren und entfernen wir die restlichen,
s. Abbildung~\ref{fig-select}.

\begin{figure}

\centering{

\includegraphics{030-aufbereiten_files/figure-pdf/fig-select-1.pdf}

}

\caption{\label{fig-select}Sinnbild f√ºr das Ausw√§hlen von Spalten mit
\texttt{select()}}

\end{figure}%

\begin{example}[Fokus auf nur zwei
Spalten]\protect\hypertarget{exm-select}{}\label{exm-select}

Ob wohl gebrauchte Spiele deutlich geringere Preise erzielen im
Vergleich zu neuwertigen Spielen? Sie entschlie√üen sich, mal ein
St√ºndchen auf die relevanten Daten zu starren.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mario\_select1 }\OtherTok{\textless{}{-}} \FunctionTok{select}\NormalTok{(mariokart, cond, total\_pr)}
\end{Highlighting}
\end{Shaded}

Aha (?)\(\square\)

\end{example}

Der Befehl \texttt{select} erwartet als Input eine Tabelle und gibt (als
Output) eine Tabelle zur√ºck -- genau wie die meisten anderen Befehle des
Datenjudos. Auch wenn Sie nur eine Spalte ausw√§hlen, bleibt es eine
Tabelle, eben eine Tabelle mit nur einer Spalte.

\texttt{select} erlaubt Komfort; Sie k√∂nnen Spalten auf mehrere Arten
ausw√§hlen, z.B.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{select}\NormalTok{(mariokart, }\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{)  }\CommentTok{\# Spalte 1 und 2}
\FunctionTok{select}\NormalTok{(mariokart, }\DecValTok{2}\SpecialCharTok{:}\DecValTok{5}\NormalTok{)  }\CommentTok{\#  Spalten 2 *bis* 5 }
\FunctionTok{select}\NormalTok{(mariokart, }\SpecialCharTok{{-}}\DecValTok{1}\NormalTok{)  }\CommentTok{\# Alle Spalte *aber nicht* Spalte 1}
\end{Highlighting}
\end{Shaded}

\begin{exercise}[]\protect\hypertarget{exr-select}{}\label{exr-select}

W√§hlen Sie die Spalten \texttt{total\_pr}, \texttt{cond} sowie die
zweite Spalte der Tabelle \texttt{mariokart} aus!\footnote{\texttt{select(mariokart,\ total\_pr,\ cond,\ 2)}}
\(\square\)

\end{exercise}

Vertiefte Informationen zum Ausw√§hlen von Spalten mit \texttt{select}
findet sich
\href{https://tidyr.tidyverse.org/reference/tidyr_tidy_select.html}{hier}.\footnote{\url{https://tidyr.tidyverse.org/reference/tidyr_tidy_select.html}}

\subsection{\texorpdfstring{Spalten zu einer Zahl zusammenfassen mit
\texttt{summarise}}{Spalten zu einer Zahl zusammenfassen mit summarise}}\label{spalten-zu-einer-zahl-zusammenfassen-mit-summarise}

So eine lange Spalte mit Zahlen -- mal ehrlich: wer blickt da schon
durch? Viel besser w√§re es doch, die Spalte \texttt{total\_pr} zu einer
Zahl zusammenzufassen, das ist doch viel handlicher. Kurz entschlossen
fassen Sie die Spalte \texttt{total\_pr}, den Verkaufspreis, zum
Mittelwert zusammen, s. Abbildung~\ref{fig-summarise}.

\begin{figure}

\centering{

\includegraphics{030-aufbereiten_files/figure-pdf/fig-summarise-1.pdf}

}

\caption{\label{fig-summarise}Spalten zu einer einzelnen Zahl
zusammenfassen mit \texttt{summaris()}}

\end{figure}%

\begin{example}[Was ist der mittlere
Verkaufspreis?]\protect\hypertarget{exm-summarise}{}\label{exm-summarise}

Mit \texttt{summarise}, s. Listing~\ref{lst-summarise}, k√∂nnen wir den
mittleren Verkaufspreis der Mariokart-Spiele berechnen.

\begin{codelisting}

\caption{\label{lst-summarise}Die R-Funktion summarise fasst einen
Vektor z u einer Zahl zusammen}

\centering{

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart\_mittelwert }\OtherTok{\textless{}{-}} \FunctionTok{summarise}\NormalTok{(mariokart,}
                                  \AttributeTok{preis\_mw =} \FunctionTok{mean}\NormalTok{(total\_pr))}
\NormalTok{mariokart\_mittelwert}
\end{Highlighting}
\end{Shaded}

}

\end{codelisting}%

\begin{longtable}[]{@{}r@{}}
\toprule\noalign{}
preis\_mw \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
49.88049 \\
\end{longtable}

Aha! Etwa 50‚Ç¨ erzielt so eine Auktion im Schnitt.\(\square\)

\end{example}

√úbersetzen wir Listing~\ref{lst-summarise} vom Errischen ins Deutsche:

\begin{quote}
{\emoji{student}} Hey R, fasse die Zeilen von \texttt{total\_pr} aus
\texttt{mariokart} zu einer Zahl zusammen, und zwar mit Hilfe des
Mittelwerts. Die resultierende Tabelle nennen wir
\texttt{mariokart\_mittelwert,\ sehr\ kreativ.\ Und\ die\ resultierende\ Spalte,\ die\ einzige\ in}mariokart\_mittelwert\texttt{,\ nennen\ wir}preis\_mw`.
\end{quote}

Ein bisschen abstrakter gesprochen, fasst \texttt{summarise} also eine
\emph{Spalte} zu einer (einzelnen) \emph{Zahl} zusammen, s.
Gleichung~\ref{eq-desk-summ}.\footnote{Eine Alternative, um eine Spalte
  zu einer Zahl zusammenzufassen, bietet der ``Dollar-Operator''
  (\texttt{\$}): \texttt{mean(mariokart\$total\_pr)}. Der
  Dollar-Operator trennt hier die Tabelle von der Spalte:
  \texttt{tibble\$spalte}. Im Gegensatz zu den Verben des Tidyverse (die
  immer einer Tabelle zur√ºckliefern), liefert der Dollar-Operator einen
  Vektor (Spalte) zur√ºck. (Diese wird von \texttt{mean} dann zu einer
  einzelnen Zahl zusammengefasst.)} \emph{Auf welche Art}
zusammengefasst werden soll, z.B. anhand des Mittelwerts oder
Maximalwerts, muss noch zus√§tzlich innerhalb von \texttt{summarise}
angegeben werden.

\begin{equation}\phantomsection\label{eq-desk-summ}{\begin{array}{|c|} \hline \\ \hline \\  \\  \\ \\ \hline \end{array} \qquad \rightarrow  \qquad \begin{array}{|c|} \hline \\  \hline \end{array}}\end{equation}

\begin{exercise}[]\protect\hypertarget{exr-summarise}{}\label{exr-summarise}

Identifizieren Sie den h√∂chsten Kaufpreis eines
Mariokart-Spiels!\footnote{\texttt{summarise(mariokart,\ hoechster\_preis\ =\ max(total\_pr))}}
\(\square\)

\end{exercise}

\subsection{Tabelle gruppieren}\label{tabelle-gruppieren}

Es ist ja gut und sch√∂n, zu wissen, was so ein Spiel im Schnitt kostet.
Aber viel interessanter w√§re es doch, denken Sie sich, zu wissen, ob die
neuen Spiele im Schnitt mehr kosten als die alten? Ob R Ihnen so etwas
ausrechnen kann?

\begin{quote}
{\emoji{robot}} Ich tue fast alles f√ºr dich. {\emoji{heart}}
\end{quote}

Also gut, R, dann gruppiere die Tabelle, s. Abbildung~\ref{fig-group}.

\begin{figure}

\centering{

\includegraphics{030-aufbereiten_files/figure-pdf/fig-group-1.pdf}

}

\caption{\label{fig-group}Gruppieren von Datens√§tzen mit
\texttt{group\_by()}}

\end{figure}%

Durch das Gruppieren wird die Tabelle in ``Teiltabellen'' --
entsprechend der Gruppen -- aufgeteilt. Das sieht man der R-Tabelle aber
nicht wirklich an. Aber alle nachfolgenden Berechnungen werden \emph{f√ºr
jede Teiltabelle} einzeln ausgef√ºhrt.

\begin{example}[Mittlerer Preis pro
Gruppe]\protect\hypertarget{exm-groupby}{}\label{exm-groupby}

Gruppieren alleine liefert Ihnen zwei (oder mehrere) Teiltabellen, etwa
neue Spiele (Gruppe 1, \texttt{new}) vs.~gebrauchte Spiele (Gruppe 2,
\texttt{used}). Mit anderen Worten: Wir gruppieren anhand der Variable
\texttt{cond}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart\_gruppiert }\OtherTok{\textless{}{-}} \FunctionTok{group\_by}\NormalTok{(mariokart, cond)}
\end{Highlighting}
\end{Shaded}

Wenn Sie die neue Tabelle betrachte, sehen Sie wenig Aufregendes, nur
einen Hinweis, dass die Tabelle gruppiert ist. Jetzt k√∂nnen Sie an jeder
Teiltabelle Ihre weiteren Berechnungen vornehmen, etwa die Berechnung
des mittleren Verkaufspreises.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{summarise}\NormalTok{(mariokart\_gruppiert, }\AttributeTok{preis\_mw =} \FunctionTok{mean}\NormalTok{(total\_pr))}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}lr@{}}
\toprule\noalign{}
cond & preis\_mw \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
new & 53.77068 \\
used & 47.14810 \\
\end{longtable}

Langsam f√ºhlen Sie sich als Datenchecker \ldots{} ü•∑ ü¶π‚Äç‚ôÄ \(\square\)

\end{example}

\begin{exercise}[]\protect\hypertarget{exr-groupby}{}\label{exr-groupby}

~

\subsection{Aufgabe}

Berechnen Sie den mittleren und maximalen Verkaufspreis getrennt f√ºr
Spiele mit und ohne Foto!

\subsection{L√∂sung}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart\_gruppiert\_foto }\OtherTok{\textless{}{-}} \FunctionTok{group\_by}\NormalTok{(mariokart, stock\_photo)}

\NormalTok{mariokart\_verkaufspreis\_foto }\OtherTok{\textless{}{-}} 
  \FunctionTok{summarise}\NormalTok{(mariokart\_gruppiert\_foto,}
            \AttributeTok{total\_pr\_avg =} \FunctionTok{mean}\NormalTok{(total\_pr),}
            \AttributeTok{total\_pr\_max =} \FunctionTok{max}\NormalTok{(total\_pr))}

\NormalTok{mariokart\_verkaufspreis\_foto}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}lrr@{}}
\toprule\noalign{}
stock\_photo & total\_pr\_avg & total\_pr\_max \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
no & 53.70500 & 326.51 \\
yes & 48.49638 & 75.00 \\
\end{longtable}

\end{exercise}

\subsection{\texorpdfstring{Spalten ver√§ndern mit
\texttt{mutate}}{Spalten ver√§ndern mit mutate}}\label{spalten-veruxe4ndern-mit-mutate}

Immer mal wieder m√∂chte man \emph{Spalten ver√§ndern}, bzw. deren Werte
umrechnen, s. Abbildung~\ref{fig-mutate}.

\begin{figure}

\centering{

\includegraphics{030-aufbereiten_files/figure-pdf/fig-mutate-1.pdf}

}

\caption{\label{fig-mutate}Spalten ver√§ndern/neu berechnen mit
\texttt{mutate()}}

\end{figure}%

\begin{example}[]\protect\hypertarget{exm-mutate}{}\label{exm-mutate}

Der Hersteller des Computerspiels \emph{Mariokart} kommt aus Japan;
daher erscheint es Ihnen opportun f√ºr ein anstehendes Meeting mit dem
Hersteller die Verkaufspreise von Dollar in japanische Yen umzurechnen.
Nach etwas Googeln finden Sie einen Umrechnungskurs von 1:133.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart2 }\OtherTok{\textless{}{-}} \FunctionTok{mutate}\NormalTok{(mariokart, }\AttributeTok{total\_pr\_yen =}\NormalTok{ total\_pr }\SpecialCharTok{*} \DecValTok{133}\NormalTok{)}
\NormalTok{mariokart2 }\OtherTok{\textless{}{-}} \FunctionTok{select}\NormalTok{(mariokart2, total\_pr\_yen, total\_pr)}
\NormalTok{mariokart2 }\SpecialCharTok{|\textgreater{}} \FunctionTok{head}\NormalTok{()  }\CommentTok{\# nur die ersten paar Zeilen}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}rr@{}}
\toprule\noalign{}
total\_pr\_yen & total\_pr \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
6856 & 52 \\
4926 & 37 \\
6052 & 46 \\
5852 & 44 \\
9443 & 71 \\
5985 & 45 \\
\end{longtable}

Sicherlich werden Sie Ihre Gespr√§chspartner schwer
beeindrucken.\(\square\)

\end{example}

Mit \texttt{mutate} berechnen Sie eine Spalte \texttt{x} (in einer
Tabelle) neu. Die Funktion, die Sie in \texttt{mutate} benennen wird f√ºr
jede Zeile der Spalte \texttt{x} angewendet.

\begin{example}[Beispiele f√ºr Funktionen f√ºr
\texttt{mutate}]\protect\hypertarget{exm-mutate2}{}\label{exm-mutate2}

\texttt{mutate} eignet sich, z.B. um Spalten zu addieren, zu
multiplizieren oder sonstwie zu transformieren (z.B. den Logarithmus
anwenden oder den Mittelwert der Spalte von jeder Zeile abziehen).
\(\square\)

\end{example}

\begin{exercise}[]\protect\hypertarget{exr-mutate}{}\label{exr-mutate}

~

\subsection{Aufgabe}

Rechnen Sie die Dauer der Auktionen von Tagen in Wochen um.

\subsection{L√∂sung}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart\_duration\_wochen }\OtherTok{\textless{}{-}} 
  \FunctionTok{mutate}\NormalTok{(mariokart, }\AttributeTok{duration\_week =}\NormalTok{ duration }\SpecialCharTok{/} \DecValTok{7}\NormalTok{)}

\NormalTok{mariokart\_duration\_wochen }\OtherTok{\textless{}{-}}
   \FunctionTok{select}\NormalTok{(mariokart\_duration\_wochen, duration, duration\_week)}
\NormalTok{mariokart\_duration\_wochen }\SpecialCharTok{|\textgreater{}} \FunctionTok{head}\NormalTok{()  }\CommentTok{\# nur die ersten paar Zeilen}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}rr@{}}
\toprule\noalign{}
duration & duration\_week \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
3 & 0.43 \\
7 & 1.00 \\
3 & 0.43 \\
3 & 0.43 \\
1 & 0.14 \\
3 & 0.43 \\
\end{longtable}

\end{exercise}

\begin{exercise}[]\protect\hypertarget{exr-mutate2}{}\label{exr-mutate2}

~

\subsection{Aufgabe}

Rechnen Sie wieder die Dauer der Auktionen von Tagen in Wochen um, aber
runden Sie die Wochen auf ganze Wochen.

\subsection{L√∂sung}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart\_duration\_wochen }\OtherTok{\textless{}{-}} 
  \FunctionTok{mutate}\NormalTok{(mariokart, }\AttributeTok{duration\_week =}\NormalTok{ duration }\SpecialCharTok{/} \DecValTok{7}\NormalTok{)}

\NormalTok{mariokart\_duration\_wochen\_gerundet }\OtherTok{\textless{}{-}}
  \FunctionTok{mutate}\NormalTok{(mariokart\_duration\_wochen, }\AttributeTok{duration\_week\_gerundet =}
           \FunctionTok{round}\NormalTok{(duration\_week, }\AttributeTok{digits =} \DecValTok{0}\NormalTok{))}

\NormalTok{mariokart\_duration\_wochen\_schmal }\OtherTok{\textless{}{-}}
  \FunctionTok{select}\NormalTok{(mariokart\_duration\_wochen\_gerundet, duration, }
\NormalTok{         duration\_week, duration\_week\_gerundet)}
\NormalTok{mariokart\_duration\_wochen\_schmal }\SpecialCharTok{|\textgreater{}} \FunctionTok{head}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}rrr@{}}
\toprule\noalign{}
duration & duration\_week & duration\_week\_gerundet \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
3 & 0.43 & 0 \\
7 & 1.00 & 1 \\
3 & 0.43 & 0 \\
3 & 0.43 & 0 \\
1 & 0.14 & 0 \\
3 & 0.43 & 0 \\
\end{longtable}

\end{exercise}

\begin{quote}
{\emoji{woman-zombie}}Ô∏è Statistik, wann braucht man schon sowas!?
\end{quote}

\begin{quote}
{\emoji{robot}} Eigentlich nur dann, wenn man die Fakten gut verstehen
will, sonst nicht.
\end{quote}

\subsection{\texorpdfstring{Zeilen z√§hlen mit
\texttt{count}}{Zeilen z√§hlen mit count}}\label{zeilen-zuxe4hlen-mit-count}

Arbeitet man mit nominalskalierten Daten, ist (fast) alles, was man tun
kann, das Zeilen z√§hlen.\footnote{Ja, das ist traurig.}

Man k√∂nnte z.B. fragen, wie viele neue und wie viele alte Spiele in der
Tabelle (Dataframe) \texttt{mariokart} vorhanden sind.

\begin{example}[]\protect\hypertarget{exm-count}{}\label{exm-count}

Nach der letzten Pr√§sentation Ihrer Analyse hat Ihre Chefin gest√∂hnt:
``Oh nein, alles so kompliziert. Statistik! Himmel hilf! Kann man das
nicht einfacher machen?'' Anstelle von irgendwelchen komplizierten
Berechnungen (Mittelwert?) m√∂chten Sie ihr beim n√§chsten Treffen nur
zeigen, wie viele Computerspiele neu und wie viele gebraucht sind (in
Ihrem Datensatz). Schlichte H√§ufigkeiten also. Hoffentlich ist Ihre
Chefin nicht wieder √ºberfordert\ldots{}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariocart\_counted }\OtherTok{\textless{}{-}} \FunctionTok{count}\NormalTok{(mariokart, cond)}
\NormalTok{mariocart\_counted}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}lr@{}}
\toprule\noalign{}
cond & n \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
new & 59 \\
used & 84 \\
\end{longtable}

Aha! Es gibt mehr gebrauchte als neue Spiele.\(\square\)

\end{example}

Jetzt k√∂nnte man noch den \emph{Anteil} (engl. \emph{proportion})
erg√§nzen: Welcher \emph{Anteil} (der 143 Spiele in \texttt{mariokart})
ist neu, welcher gebraucht?

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{mutate}\NormalTok{(mariocart\_counted, }\AttributeTok{Anteil =}\NormalTok{ n }\SpecialCharTok{/} \FunctionTok{sum}\NormalTok{(n))}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}lrr@{}}
\toprule\noalign{}
cond & n & Anteil \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
new & 59 & 0.4125874 \\
used & 84 & 0.5874126 \\
\end{longtable}

\begin{exercise}[]\protect\hypertarget{exr-count}{}\label{exr-count}

Z√§hlen Sie Sie, wie viele Auktionen ein Foto enthalten.\footnote{\texttt{count(mariokart,\ stock\_photo)}}
\(\square\)

\end{exercise}

\begin{exercise}[]\protect\hypertarget{exr-count2}{}\label{exr-count2}

Z√§hlen Sie Sie, wie viele Auktionen ein Foto enthalten -- innerhalb der
gebrauchten Spiele und innerhalb der neuen Spiele. Anders gesagt: Teilen
Sie den Datensatz sowohl nach Zustand als auch nach Foto auf und z√§hlen
Sie jeweils, wie viele Spiele/Auktionen in die jeweilige Gruppe
geh√∂ren.\footnote{\texttt{count(mariokart,\ stock\_photo,\ cond)}}
\(\square\)

\end{exercise}

\subsection{Fazit: Verben am
Flie√üband}\label{fazit-verben-am-flieuxdfband}

die Befehle (``Verben'') des Tidyverse sind jeweils f√ºr einzelne,
typische Aufgaben des Datenaufbereitens (``Datenjudo'') zust√§ndig.

Typischerweise erwarten diese Befehle eine Tabelle (‚ñ•) als Input und
liefern eine Tabelle aus Output zur√ºck, s.
Abbildung~\ref{fig-tbl-in-out}.

\begin{figure}

\centering{

\includegraphics[width=3.19in,height=0.53in]{030-aufbereiten_files/figure-latex/mermaid-figure-1.png}

}

\caption{\label{fig-tbl-in-out}Tidyverse-Befehle erwarten normalerweise
eine Tabelle (tibble) als Input und geben auch eine Tabelle zur√ºck als
Output}

\end{figure}%

\section{Die Pfeife}\label{sec-pipe}

Das ist keine Pfeife, wie Ren√© Magritte 1929 in seinem
\href{https://en.wikipedia.org/wiki/File:MagrittePipe.jpg}{ber√ºhmten
Bild} schrieb, s. Abbildung~\ref{fig-pfeifen}.\footnote{Vgl.
  \url{https://en.wikipedia.org/wiki/The_Treachery_of_Images}}

\begin{figure}

\centering{

\begin{figure}[H]

\begin{minipage}{0.30\linewidth}

\centering{

\includegraphics[width=0.5\textwidth,height=\textheight]{img/800px-Pipa_savinelli.jpg}

}

\subcaption{\label{fig-pfeife}Das ist keine Pfeife. Sondern ein Bild
einer Pfeife.}

\end{minipage}%
%
\begin{minipage}{0.10\linewidth}

\end{minipage}%
%
\begin{minipage}{0.30\linewidth}

\%\textgreater\%

\end{minipage}%
%
\begin{minipage}{0.30\linewidth}

\textbar\textgreater{}

\end{minipage}%

\end{figure}%

}

\caption{\label{fig-pfeifen}So sieht die Pfeife in R aus (Jaja, das ist
keine Pfeife, sondern ein Symbol einer Pfeife\ldots). Links: Ein Bild
einer Pfeife. Mitte und Rechts: Die zwei R-Symbole f√ºr eine ``Pfeife''
(pipe).}

\end{figure}%

\subsection{Russische Puppen}\label{russische-puppen}

Computerbefehle, und im Speziellen R-Befehle kann man ``aufeinander'' --
oder vielmehr: ineinander -- stapeln, so √§hnlich wie eine russische
Puppe (vgl. Kapitel~\ref{sec-first-fun}). Schauen wir uns das in einem
Beispiel an. Dazu definieren wir zuerst einen Vektor \texttt{x} aus drei
Zahlen:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{3}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

Und dann kommt unser verschachtelter Befehl:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{sum}\NormalTok{(x }\SpecialCharTok{{-}} \FunctionTok{mean}\NormalTok{(x))}
\DocumentationTok{\#\# [1] 0}
\end{Highlighting}
\end{Shaded}

Wie schon erw√§hnt, arbeitet R so einen ``verschachtelten'' Befehl
\emph{von innen nach au√üen} ab:

Start: \texttt{sum(x\ -\ mean(x))}

{\(\downarrow\)}

Schritt 1: \texttt{sum(x\ -\ 2)}

{\(\downarrow\)}

Schritt 2: \texttt{sum(-1,\ 0,\ 1)}

{\(\downarrow\)}

Schritt 3: \texttt{0}. Fertig. Puh. Kompliziert.

Soweit kann man noch einigerma√üen folgen. Aber das Verschachteln kann
man noch extremer machen, dann wird's wild. Schauen Sie sich mal
folgende (Pseudo-)Syntax an:\footnote{Ein beliebter Fehler ist es
  √ºbrigens, nicht die richtige Zahl an schlie√üenden Klammern
  hinzuschreiben, z.B.
  \texttt{fasse\_zusammen(gruppiere(w√§hle\_spalten(filter\_zeilen(meine\_daten))))}
  FALSCHE ZAHL AN KLAMMERN.}

\begin{codelisting}

\caption{\label{lst-schachtel}Eine wild verschachtelte Sequenz von
R-Befehlen}

\centering{

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{fasse\_zusammen}\NormalTok{(}
  \FunctionTok{gruppiere}\NormalTok{(}
\NormalTok{    w√§hle}\FunctionTok{\_spalten}\NormalTok{(}
      \FunctionTok{filter\_zeilen}\NormalTok{(meine\_daten))))}
\end{Highlighting}
\end{Shaded}

}

\end{codelisting}%

ü§Ø

\subsection{Die Pfeife zur Rettung}\label{die-pfeife-zur-rettung}

Listing~\ref{lst-schachtel} ist schon harter Tobak, was f√ºr echte Fans.
W√§re es nicht einfacher, man k√∂nnte Listing~\ref{lst-schachtel} wie
folgt schreiben:

\begin{verbatim}
Nimm "meine_daten" *und dann*
  filter gew√ºnschte Zeilen *und dann*
  w√§hle gew√ºnschte Spalten *und dann*
  teile in Subgruppen *und dann*
  fasse sie zusammen.
\end{verbatim}

\begin{definition}[Pfeife]\protect\hypertarget{def-pipe}{}\label{def-pipe}

``Und dann'' hei√üt auf Errisch \texttt{\%\textgreater{}\%} oder
\texttt{\textbar{}\textgreater{}}. Man nennt diesen Befehl ``Pfeife''
(engl. \emph{pipe}). \(\square\)

\end{definition}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Der Befehl \texttt{\%\textgreater{}\%} \emph{verkn√ºpft} Befehle. Der
Shortcut f√ºr diesen Befehl ist Strg-Shift-M. Die Pfeife
\texttt{\%\textgreater{}\%} ``wohnt'' im Paket
\texttt{\{tidyverse\}}.\footnotemark{}

\end{tcolorbox}

\footnotetext{Genauer gesagt im Paket \texttt{\{magrittr\}}, welches
aber under the hood von \texttt{\{tidyverse\}} geladen wird. Also
nichts, um dass Sie sich k√ºmmern m√ºssten.}

Mittlerweile\footnote{Seit R 4.1} ist auch im Standard-R eine Pfeife
eingebaut. die sieht so aus: \texttt{\textbar{}\textgreater{}}. Die
eingebaute Pfeife funktioniert praktisch gleich zur anderen Pfeife
\texttt{\%\textgreater{}\%}, hat aber den Vorteil, dass Sie nicht
\texttt{\{tidyverse\}} starten m√ºssen. Da wir \texttt{\{tidyverse\}}
aber sowieso praktisch immer starten werden, bringt es uns keinen
Vorteil, die neuere Pfeife des Standard-R
\texttt{\textbar{}\textgreater{}} zu verwenden.\footnote{Aber auch
  keinen Nachteil. Unter \emph{Tools \textgreater{} Global
  Options\ldots{}} k√∂nnen Sie einstellen, dass der Shortcut Strg-Shift-M
  die eingebaute Pfeife verwendet.}

\begin{figure}

\centering{

\includegraphics[width=1.49in,height=4.86in]{030-aufbereiten_files/figure-latex/mermaid-figure-2.png}

}

\caption{\label{fig-pfeife}Illustration f√ºr eine Pfeifensequenz, es geht
vorw√§rts wie am Flie√üband.}

\end{figure}%

Und jetzt kommt's: So eine Art von Befehls-Verkettung gibt es in R.
Schauen Sie sich mal Listing~\ref{lst-pfeife} an:

\begin{codelisting}

\caption{\label{lst-pfeife}Eine Pfeifen-Befehlssequenz (Pseudo-Syntax)}

\centering{

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{meine\_daten }\SpecialCharTok{\%\textgreater{}\%}
\NormalTok{  filter\_gew√ºnschte}\FunctionTok{\_zeilen}\NormalTok{() }\SpecialCharTok{\%\textgreater{}\%}
\NormalTok{  w√§hle\_gew√ºnschte}\FunctionTok{\_spalten}\NormalTok{() }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{gruppiere}\NormalTok{() }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{fasse\_zusammen}\NormalTok{() }
\end{Highlighting}
\end{Shaded}

}

\end{codelisting}%

So eine Pfeifen-Befehlsequenz ist ein wie ein Flie√üband, an dem es
mehrere Arbeitsstationen gibt, s. Abbildung~\ref{fig-pfeife}. Unser
Datensatz wird am Flie√üband von Station zu Station weitergereicht und an
jeder Stelle weiterverarbeitet.

So k√∂nnte Ihre ``Pfeifen-Sequenz'' aussehen:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Hey R, nimm die Tabelle "mariokart":}
\NormalTok{mariokart }\SpecialCharTok{\%\textgreater{}\%}  
   \CommentTok{\# filter nur die g√ºnstigen Spiele:}
  \FunctionTok{filter}\NormalTok{(total\_pr }\SpecialCharTok{\textless{}} \DecValTok{100}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%} 
  \CommentTok{\# w√§hle die zwei Spalten:}
  \FunctionTok{select}\NormalTok{(cond, total\_pr) }\SpecialCharTok{\%\textgreater{}\%}  
  \CommentTok{\# gruppiere die Tabelle nach Zustand des Spiels:}
  \FunctionTok{group\_by}\NormalTok{(cond) }\SpecialCharTok{\%\textgreater{}\%}  
  \CommentTok{\# fasse beide Gruppen nach dem mittleren Preis zusammen:}
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{total\_pr\_mean =} \FunctionTok{mean}\NormalTok{(total\_pr))  }
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}lr@{}}
\toprule\noalign{}
cond & total\_pr\_mean \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
new & 53.77068 \\
used & 42.87110 \\
\end{longtable}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-important-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-important-color}{\faExclamation}\hspace{0.5em}{Wichtig}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-important-color-frame]

Die Syntax \texttt{filter(mariokart,\ total\_pr\ \textless{}\ 100)} und
die Syntax
\texttt{mariokart\ \textbar{}\textgreater{}\ filter(total\_pr\ \textless{}\ 100)}
sind identisch.

Allgemeiner: \texttt{d\ \textbar{}\textgreater{}\ f(x)} =
\texttt{f(d,\ x)}.

\end{tcolorbox}

\section{Beispiele f√ºr
Forschungsfragen}\label{beispiele-fuxfcr-forschungsfragen}

\begin{exercise}[]\protect\hypertarget{exr-fallbsps}{}\label{exr-fallbsps}

Bevor Sie die L√∂sungen der folgenden Fallbeispiele lesen, versuchen Sie
die Aufgaben selber zu l√∂sen. Ja, ich wei√ü, es ist hart, nicht gleich
auf die L√∂sungen zu schauen! \(\square\)

\end{exercise}

Sie arbeiten als \st{Diener} strategischer Assistent der
Gesch√§ftsf√ºhrerin und sind f√ºr Faktenchecks und andere Daten-Aufgaben
zust√§ndig. Heute sollen Sie zeigen, was Sie k√∂nnen (Schluck).

\subsection{Forschungsfrage 1}\label{forschungsfrage-1-1}

\subsection{Frage}

\begin{quote}
{\emoji{woman}} Ich w√ºrde von Ihnen gerne wissen, was das teuerste Spiel
ist, aber jeweils f√ºr neue und gebrauchte Spiele. Aber nur f√ºr Spiele,
die mit Foto verkauft wurden!
\end{quote}

\subsection{Antwort}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{filter}\NormalTok{(stock\_photo }\SpecialCharTok{==} \StringTok{"yes"}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{group\_by}\NormalTok{(cond) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{total\_pr\_max =} \FunctionTok{max}\NormalTok{(total\_pr))}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}lr@{}}
\toprule\noalign{}
cond & total\_pr\_max \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
new & 75.00 \\
used & 61.76 \\
\end{longtable}

Die Funktion \texttt{max} liefert den gr√∂√üten Wert eines Vektors zur√ºck:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{x }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{10}\NormalTok{)}
\FunctionTok{max}\NormalTok{(x)}
\DocumentationTok{\#\# [1] 10}
\end{Highlighting}
\end{Shaded}

\subsection{Forschungsfrage 2}\label{forschungsfrage-2-1}

\subsection{Frage}

\begin{quote}
{\emoji{woman}} Ich w√ºrde gerne die mittlere Versandpauschale wissen,
aber getrennt nach Anzahl der Lenkr√§der, die dem Spiel beigelegt sind.
Und ich will nur Gruppen ber√ºcksichtigen, die aus mindestens 10 Spielen
bestehen!
\end{quote}

\subsection{Antwort}

Wenn wir die Anzahl der Spiele z√§hlen in Abh√§ngigkeit der beigelegten
Lenkr√§der (\texttt{wheels}), bekommen wir eine Tabelle mit zwei Spalten:
\texttt{wheels} und \texttt{n}. \texttt{n} z√§hlt, wie viele Spiele
(Zeilen) in der jeweiligen Gruppe (``Teiltabelle'') von \texttt{wheels}
sind.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{count}\NormalTok{(wheels)}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}rr@{}}
\toprule\noalign{}
wheels & n \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
0 & 37 \\
1 & 52 \\
2 & 51 \\
3 & 2 \\
4 & 1 \\
\end{longtable}

Aus dieser Tabellet sehen wir, dass 3 oder 4 Lenkr√§der nur selten (2
bzw. 1 Mal) beigelegt wurden und wir solche Spiele herausfiltern
sollten, bevor wir den Mittelwert der Versankosten ausrechnen:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{filter}\NormalTok{(wheels }\SpecialCharTok{\textless{}} \DecValTok{3}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{group\_by}\NormalTok{(wheels) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{mittlere\_versandkosten =} \FunctionTok{mean}\NormalTok{(ship\_pr),}
            \AttributeTok{anzahl\_spiele =} \FunctionTok{n}\NormalTok{())}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}rrr@{}}
\toprule\noalign{}
wheels & mittlere\_versandkosten & anzahl\_spiele \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
0 & 2.663784 & 37 \\
1 & 3.620000 & 52 \\
2 & 2.935882 & 51 \\
\end{longtable}

Die Funktion \texttt{n()} gibt die Anzahl der Zeilen pro Teiltabelle
zur√ºck.

\subsection{Forschungsfrage 3}\label{forschungsfrage-3}

\subsection{Frage}

\begin{quote}
{\emoji{woman}} Ich w√ºrde gerne den Verkaufspreis in Yen wissen, nicht
in Euro. Dann rechne mal den mittleren Verkaufspreis aus und ziehe 10\%
ab, die wir als Provision unseren Verk√§ufern zahlen m√ºssen.
\end{quote}

\subsection{Antwort}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{select}\NormalTok{(total\_pr) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{total\_pr\_yen =}\NormalTok{ total\_pr }\SpecialCharTok{*} \DecValTok{133}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{summarise}\NormalTok{(}
    \AttributeTok{preis\_yen\_mw =} \FunctionTok{mean}\NormalTok{(total\_pr\_yen),}
    \AttributeTok{preis\_yen\_mw\_minus\_10proz =}\NormalTok{ preis\_yen\_mw }\SpecialCharTok{{-}} \FloatTok{0.1}\SpecialCharTok{*}\NormalTok{preis\_yen\_mw)}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}rr@{}}
\toprule\noalign{}
preis\_yen\_mw & preis\_yen\_mw\_minus\_10proz \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
6634.105 & 5970.695 \\
\end{longtable}

Wie man sieht kann man in \texttt{summarise} auch mehr als eine
Berechnung einstellen. In diesem Fall haben wir zwei Berechnungen
angestellt: Einmal den Mittelwert und einmal den Mittelwert minus 10\%
(des Mittelwerts).

\begin{exercise}[Do It
Yourself]\protect\hypertarget{exr-diy}{}\label{exr-diy}

Denken Sie sich selber √§hnliche Forschungsfragen aus. Stellen Sie diese
einer vertrauensw√ºrdigen Kommilitonen bzw. einem vertrauensw√ºrdigen
Kommilitonen. DIY! Schauen Sie, ob Ihre Aufgabe richtig gel√∂st wird.
\(\square\)

\end{exercise}

\section{Praxisbezug}\label{praxisbezug-2}

Die Covid19-Epidemie hatte weltweit massive Auswirkungen; auch
psychologischer Art wie Vereinsamung, Angst oder Depression. Eine
Studie, die die psychologischen Auswirkungen von Mulukom u.~a. (2020),
die \href{https://osf.io/tsjnb/}{unter der Projekt-ID tsjnb bei der Open
Science Foundation (OSF), \textless https://osf.io/tsjnb/\textgreater,
angemeldet ist}. Die Daten wurden mit R ausgewertet. Beispielhaft ist
unter \url{https://osf.io/4b9p2} die R-Syntax zu sehen, die die Autoren
zur Datenaufbereitung verwendet haben. Einen guten Teil dieser Syntax
kennen Sie aus diesem Kapitel. Diese Studie ist, neben einigen
vergleichbaren, ein sch√∂nes Beispiel, wie Forschung und Praxis
ineinander greifen k√∂nnen: Angewandte Forschung als Beitrag zur L√∂sung
eines akuten Problems, der Corona-Pandemie.

\section{Wie man mit Statistik
l√ºgt}\label{wie-man-mit-statistik-luxfcgt-1}

Ein (leider) immer mal wieder zu beobachtender ``Trick'', um Daten zu
frisieren ist, nur die Daten zu berichten, die einem in den Kram passen.

\begin{example}[]\protect\hypertarget{exm-luege-filter}{}\label{exm-luege-filter}

Eine Analystin {\emoji{woman}} m√∂chte zeigen, dass der Verkaufspreis von
Mariokart-Spielen ``viel zu niedrig'' ist. Es muss ein h√∂herer Wert
rauskommen, findet dis Analysti. Der mittlere Verkaufspreis (im
Datensatz \texttt{mariokart}) liegt bei 50 Euro.

\begin{quote}
{\emoji{woman}} Kann man den Wert nicht \ldots{} ``kreativ verbessern''?
Ein paar Statistik-Tricks anwenden?
\end{quote}

Um dieses Ziel zu erreichen, teilt die Analystin den Datensatz in
Gruppen nach Anzahl der dem Spiel beigelegten Lenkr√§der
(\texttt{wheels}). Dann wird der Mittelwert pro Gruppe berechnet.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart\_wheels }\OtherTok{\textless{}{-}} 
\NormalTok{mariokart }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{group\_by}\NormalTok{(wheels) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{pr\_mean =} \FunctionTok{mean}\NormalTok{(total\_pr),}
            \AttributeTok{count\_n =} \FunctionTok{n}\NormalTok{())  }\CommentTok{\# n() gibt die Anzahl der Zeilen pro Gruppe an}

\NormalTok{mariokart\_wheels}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}rrr@{}}
\toprule\noalign{}
wheels & pr\_mean & count\_n \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
0 & 41.05973 & 37 \\
1 & 44.16885 & 52 \\
2 & 61.02745 & 51 \\
3 & 69.75000 & 2 \\
4 & 65.02000 & 1 \\
\end{longtable}

Schlie√ülich berechnet unsere Analystin den \emph{ungewichteten}
Mittelwert √ºber diese 5 Gruppen:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart\_wheels }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{summarise}\NormalTok{(}\FunctionTok{mean}\NormalTok{(pr\_mean))}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}r@{}}
\toprule\noalign{}
mean(pr\_mean) \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
56.20521 \\
\end{longtable}

Und das Ergebnis lautet: 56 Euro! Das ist doch schon etwas ``besser''
als 50 Euro.

Nat√ºrlich ist es \emph{falsch} und irref√ºhrend, hier einen ungewichteten
Mittelwert zu berechnen. Der gewichtete Mittelwert w√ºrde wiederum zum
korrekten Ergebnis, 50 Euro, f√ºhren.\(\square\)

\end{example}

\section{Fallstudien}\label{fallstudien}

\subsection{Die Pinguine}\label{die-pinguine}

\begin{figure}

\centering{

\includegraphics[width=0.5\textwidth,height=\textheight]{img/penguins.png}

}

\caption{\label{fig-penguins}Possierlich: Die Pinguine}

\end{figure}%

\begin{exercise}[]\protect\hypertarget{exr-peng-start}{}\label{exr-peng-start}

Machen Sie sich zun√§chst mit dem Pinguin-Datensatz vertraut. Fokussieren
Sie sich auf die Zielvariable \emph{Gewicht}. \(\square\)

\end{exercise}

Bearbeiten Sie die
\href{https://allisonhorst.shinyapps.io/dplyr-learnr/\#section-welcome}{Fallstudie
zu Pinguinen} von Allison Horst.\footnote{\url{https://allisonhorst.shinyapps.io/dplyr-learnr/\#section-welcome}}
Sie k√∂nnen die Teile auslassen, die Themen beinhalten, die \emph{nicht}
in diesem Kapitel vorgestellt wurden.

\subsection{Weitere Fallstudien}\label{weitere-fallstudien}

\href{https://sebastiansauer.github.io/Fallstudie_Flights/}{Diese
Fallstudie} hat die Analyse von Flugversp√§tungen zum Thema.

\includegraphics[width=0.3\textwidth,height=\textheight]{img/Covidistress1.jpg}
\url{https://osf.io/z39us/}

\begin{quote}
The COVIDiSTRESS global survey is an international collaborative
undertaking for data gathering on human experiences, behavior and
attitudes during the COVID-19 pandemic. In particular, the survey
focuses on psychological stress, compliance with behavioral guidelines
to slow the spread of Coronavirus, and trust in governmental
institutions and their preventive measures, but multiple further items
and scales are included for descriptive statistics, further analysis and
comparative mapping between participating countries. Round one data
collection was concluded May 30. 2020. To gather comparable data swiftly
from across the globe, when the Coronavirus started making a critical
impact on societies and individuals, the collaboration and survey was
constructed as an urgent collaborative process. Individual contributors
and groups in the COVIDiSTRESS network (see below) conducted
translations to each language and shared online links by their own best
means in each country.
\end{quote}

\href{https://osf.io/z39us/files/osfstorage}{Die Daten} stehen unter
\url{https://osf.io/z39us} zur freien Verf√ºgung. Sie k√∂nnen diese echten
Daten eigenst√§ndig analysieren.
\href{https://osf.io/z39us/files/osfstorage/5f20b69732080501f5156b02}{Diese
Datei} beinhaltet die finalen, aufbereiteten Daten. Achtung: Die Datei
ist recht gro√ü, ca. 90 MB.

\section{Aufgaben}\label{aufgaben-2}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-tip-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-tip-color}{\faLightbulb}\hspace{0.5em}{ChatGPT}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-tip-color-frame]

Nutzen Sie einen Chat-Bot wie ChatGPT, um sich Hilfe f√ºr die R-Syntax
geben zu lassen. \(\square\)

\end{tcolorbox}

Die Webseite \href{https://datenwerk.netlify.app}{datenwerk.netlify.app}
stellt eine Reihe von einschl√§gigen √úbungsaufgaben bereit. Sie k√∂nnen
die Suchfunktion der Webseite nutzen, um die Aufgaben mit den folgenden
Namen zu suchen:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \href{https://datenwerk.netlify.app/posts/wrangle3/wrangle3.html}{wrangle3}
\item
  \href{https://datenwerk.netlify.app/posts/wrangle4/wrangle4.html}{wrangle4}
\item
  \href{https://datenwerk.netlify.app/posts/wrangle5/wrangle5.html}{wrangle5}
\item
  \href{https://datenwerk.netlify.app/posts/wrangle7/wrangle7.html}{wrangle7}
\item
  \href{https://datenwerk.netlify.app/posts/wrangle9/wrangle9.html}{wrangle9}
\item
  \href{https://datenwerk.netlify.app/posts/wrangle10/wrangle10.html}{wrangle10}
\item
  \href{https://datenwerk.netlify.app/posts/tidydata1/tidydata1.html}{tidydata1}
\item
  \href{https://datenwerk.netlify.app/posts/affairs-dplyr/affairs-dplyr.html}{affairs-dplyr}
\item
  \href{https://datenwerk.netlify.app/posts/dplyr-uebersetzen/dplyr-uebersetzen.html}{dplyr-uebersetzen}
\item
  \href{https://datenwerk.netlify.app/posts/haeufigkeit01/haeufigkeit01.html}{haeufigkeit01}
\item
  \href{https://datenwerk.netlify.app/posts/mariokart-mean1/mariokart-mean1.html}{mariokart-mean1}
\item
  \href{https://datenwerk.netlify.app/posts/mariokart-mean2/mariokart-mean2.html}{mariokart-mean2}
\item
  \href{https://datenwerk.netlify.app/posts/mariokart-mean3/mariokart-mean3.html}{mariokart-mean3}
\item
  \href{https://datenwerk.netlify.app/posts/mariokart-mean4/mariokart-mean4.html}{mariokart-mean4}
\item
  \href{https://datenwerk.netlify.app/posts/mariokart-max1/mariokart-max1.html}{mariokart-max1}
\item
  \href{https://datenwerk.netlify.app/posts/mariokart-max2/mariokart-max2.html}{mariokart-max2}
\item
  \href{https://datenwerk.netlify.app/posts/filter01/filter01.html}{filter01}
\item
  \href{https://datenwerk.netlify.app/posts/affairs-dplyr/affairs-dplyr.html}{affairs-dplyr}
\item
  \href{https://datenwerk.netlify.app/posts/summarise01/summarise01.html}{summarise01}
\item
  \href{https://datenwerk.netlify.app/posts/summarise02/summarise02.html}{summarise02}
\item
  \href{https://datenwerk.netlify.app/posts/mutate01/mutate01.html}{mutate01}
\item
  \href{https://datenwerk.netlify.app/posts/wrangle3/wrangle3}{wrangle3}
\end{enumerate}

\section{Vertiefung}\label{vertiefung-3}

\subsection{Tidydatatutor}\label{tidydatatutor}

Die Verben des Datenjudos werden beim
\href{https://tidydatatutor.com/}{``Tidydatatutor''} anschaulich
illustriert.\footnote{\textless(https://tidydatatutor.com\textgreater{}}

\subsection{Fortgeschrittenes R}\label{fortgeschrittenes-r}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

In weiterf√ºhrendem Material werden Sie immer wieder auf Inhalte treffen,
die Sie noch nicht kennen, die etwa noch nicht im Unterricht behandelt
wurden. Seien Sie unbesorgt: In der Regel k√∂nnen Sie diese Inhalte
einfach auslassen, ohne den Anschluss zu verlieren. Einfach ignorieren.
üòÑ

\end{tcolorbox}

H√§ufig ist es n√ºtzlich, die Werte einer Variablen umzukodieren, z.B.
``weiblich'' in ``w'' oder in \texttt{0}. Eine gute M√∂glichkeit, dies in
R umzusetzen, bietet der Befehl \texttt{case\_when()}; der Befehl wohnt
im Tidyverse. \href{https://www.statology.org/dplyr-case_when/}{Hier} -
und an vielen weiteren Stellen im Internet - finden Sie ein
Tutorium.\footnote{\url{https://www.statology.org/dplyr-case_when/}}. Im
Datenwerk finden Sie dazu √úbungen, etwa
\href{https://datenwerk.netlify.app/posts/mutate03/mutate03.html}{mutate03}

\subsection{Hilfe?! Erbie!}\label{sec-erbie}

R will nicht, so wie Sie wollen? Sie haben das Gef√ºhl, R verweigert
st√∂rrisch den Dienst, vermutlich rein aus Boshaftigkeit, rein um Sie zu
√§rgern? Ausf√ºhrliches Googeln und ChatGPT befragen hat keine L√∂sung
gebracht? Kurz, Sie brauchen die Hilfe eines kundigen
Menschens?\footnote{\url{https://www.youtube.com/watch?v=2Q_ZzBGPdqE}}

\href{https://data-se.netlify.app/2022/01/31/erbie-einfache-reproduzierbare-beispiele-ihres-problems-mit-r-syntax/}{Hier}
finden Sie eine Anleitung, wie man seinen Hilfeschrei so formuliert
(ruft), dass er nicht nur geh√∂rt, sondern auch verstanden wird und einen
anderen Menschen veranlasst und erm√∂glicht Ihnen zu helfen.\footnote{\url{https://data-se.netlify.app/2022/01/31/erbie-einfache-reproduzierbare-beispiele-ihres-problems-mit-r-syntax/}}

Also: Sie m√ºssen Ihr Problem nachvollziehbar aber pr√§gnant formulieren.
Das nennt man auch ein \emph{ERBie}, ein \emph{einfaches,
reproduzierbare Beispiel} Ihres Problems mit (R-)Syntax:

\begin{itemize}
\tightlist
\item
  einfach: die einfachste Syntax, die Ihr Problem bzw. die Fehlermeldung
  produziert. Es bietet sich an, einen einfachen, allgemein bekannten
  Datensatz zu verwenden, etwa \texttt{mtcars}
\item
  reproduzierbar: Code (z.B. als Textdatei oder in einem Post), der die
  Fehlermeldung entstehen l√§sst
\end{itemize}

\begin{example}[Beispiel f√ºr ein
Erbie]\protect\hypertarget{exm-erbie}{}\label{exm-erbie}

\emph{Problem:} Ich verstehe nicht, warum eine Fehlermeldung kommt

\emph{Ziel:} Ich m√∂chte die Automatikautos filtern (am = 0)

\emph{Was ich schon versucht habe:} Ich habe folgende Posts gelesen
\ldots, aber ohne Erfolg

\emph{Erbie}:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{data}\NormalTok{(mtcars)}
\FunctionTok{library}\NormalTok{(dplyr)  }\CommentTok{\# nicht "tidyverse", denn "dplyr" reicht}

\NormalTok{mtcars }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{filter}\NormalTok{(}\AttributeTok{am =} \DecValTok{0}\NormalTok{)  }\CommentTok{\# den k√ºrzesten Code, der Ihren Fehler entstehen l√§sst!}

\FunctionTok{sessionInfo}\NormalTok{()  }\CommentTok{\# gibt Infos zur R{-}Version etc. aus}
\end{Highlighting}
\end{Shaded}

Mit dem Paket \texttt{\{reprex\}} kann man sich R-Syntax sch√∂n
formuliert ausgeben lassen. Das ist perfekt, um den Code dann in einem
Forum (oder Mail) einzustellen. Daf√ºr m√ºssen Sie nur den Code ausw√§hlen,
\texttt{Strg-C} dr√ºcken und dann \texttt{reprex::reprex} ausf√ºhren. Mit
\texttt{Strg-V} k√∂nnen Sie die sch√∂n formatierte Syntax (sowie die
Ausgabe, auch sch√∂n formatiert) dann irgendwohin pasten.

\end{example}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-tip-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-tip-color}{\faLightbulb}\hspace{0.5em}{Tipp}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-tip-color-frame]

Posten Sie Ihr Erbie bei \url{https://gist.github.com/} als ``public
gist''.
\href{https://gist.github.com/sebastiansauer/0649a0453b5cc7c6a1d16ac760667215}{Hier}
ist ein Beispiel.\(\square\)

\end{tcolorbox}

\subsection{Zertifikate und
Online-Kurse}\label{zertifikate-und-online-kurse}

Sie k√∂nnen zu den Inhalten dieses Kapitels Zertifikate erwerben
(teilweise kostenlos), indem Sie einen Online-Kurs absolvieren, bei z.B.
folgenden Anbietern\footnote{Das ist keine Werbung f√ºr spezifische
  Anbieter und kein umfassender √úberblick und keine Kaufempfehlung.}:

\begin{itemize}
\tightlist
\item
  \href{https://www.linkedin.com/learning/search?keywords=R}{LinkedIn: R
  Courses}
\item
  \href{https://www.coursera.org/learn/data-analysis-r\#modules}{Google/Coursera:
  Data Analysis with R Programming}
\item
  \href{https://www.coursera.org/specializations/statistics}{Duke
  University/Coursera: Data Analysis with R Specialization}
\end{itemize}

\section{Exkurs}\label{exkurs}

\href{https://openai.com/dall-e-2/}{Dall-E 2} ist eine KI, die
``realistische Bilder und Kunst aus einer Beschreibung in nat√ºrlicher
Sprache'' erstellt.\footnote{\textless Dall-E 2\textgreater{}}

\begin{quote}
{\emoji{teacher}} I'd like a mixture between robot und professor, in oil
painting
\end{quote}

\begin{quote}
{\emoji{robot}} \ldots{} s. Abbildung~\ref{fig-mix-rob-prof}
\end{quote}

\begin{figure}

\centering{

\includegraphics[width=0.5\textwidth,height=\textheight]{img/mix-prof-robot.png}

}

\caption{\label{fig-mix-rob-prof}Bild erzeugt von k√ºnstlicher
Intelligenz, Quelle: DALL-E 2, 2023-02-09}

\end{figure}%

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Der Nutzen k√ºnstlicher Intelligenz f√ºr die Datenanalyse ist nat√ºrlich
breiter: Wenn Sie sich z.B. √ºber die Syntax eines bestimmten Befehls
(oder allgemeiner: Vorhabens) nicht sicher sind, fragen Sie sich doch
mal einen Bot wie ChatGPT.

\end{tcolorbox}

\section{Literaturhinweise}\label{literaturhinweise-2}

Sauer (2019), Kap. 7, gibt eine Einf√ºhrung in die Datenaufbereitung (mit
Hilfe von R), √§hnlich zu den Inhalten dieses Kapitels. Mehr in die Tiefe
des ``Datenjudo'' f√ºhren Wickham und Grolemund (2018); der Autor Hadley
Wickham ist die Leitfigur in der R-Community schlechthin. Kap. 5
behandelt (etwas ausf√ºhrlicher) die Themen dieses Kapitels. Er ist einer
der Hauptautoren von den beliebten R-Paketen \texttt{dplyr} und
\texttt{ggplot2}.

Wer sich tiefer in das Datenjudo mit dem Tidyverse einarbeiten m√∂chte,
dem sei z.B. dieser
\href{https://www.datacamp.com/courses/introduction-to-the-tidyverse}{Kurs}
empfohlen.\footnote{\url{https://www.datacamp.com/courses/introduction-to-the-tidyverse}}

\section{Literatur}\label{literatur-2}

\part{Modellieren}

\chapter{Daten verbildlichen}\label{daten-verbildlichen}

\section{Lernsteuerung}\label{lernsteuerung-3}

\subsection{Standort im Lernpfad}\label{standort-im-lernpfad-3}

Abb. Abbildung~\ref{fig-ueberblick} zeigt den Standort dieses Kapitels
im Lernpfad und gibt damit einen √úberblick √ºber das Thema dieses
Kapitels im Kontext aller Kapitel.

\subsection{Lernziele}\label{lernziele-4}

\begin{itemize}
\tightlist
\item
  Sie k√∂nnen erl√§utern, wann und wozu das Visualisieren statistischer
  Inhalte sinnvoll ist.
\item
  Sie kennen typische Arte von Datendiagrammen.
\item
  Sie k√∂nnen typische Datendiagramme mit R visualisieren.
\item
  Sie k√∂nnen zentrale Ergebnisse aus Datendiagrammen herauslesen.
\end{itemize}

\subsection{Ben√∂tigte R-Pakete}\label{benuxf6tigte-r-pakete-2}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(tidyverse)}
\FunctionTok{library}\NormalTok{(easystats)}
\FunctionTok{library}\NormalTok{(DataExplorer)  }\CommentTok{\# nicht vergessen zu installieren}
\FunctionTok{library}\NormalTok{(ggpubr)  }\CommentTok{\# optional}
\FunctionTok{library}\NormalTok{(ggstatsplot)  }\CommentTok{\# optional}
\end{Highlighting}
\end{Shaded}

\subsection{Ben√∂tigte Daten}\label{benuxf6tigte-daten-2}

Zuerst definieren wir den Pfad, wo wir die Daten finden, s.
Listing~\ref{lst-mariokart-path-pdf}.

\begin{codelisting}

\caption{\label{lst-mariokart-path-pdf}Pfad zu den Mariokart-Daten}

\centering{

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart\_path }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(}
  \StringTok{"https://vincentarelbundock.github.io/Rdatasets"}\NormalTok{,}
  \StringTok{"/csv/openintro/mariokart.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

}

\end{codelisting}%

Dann importieren wir die Mariokart-Daten:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(mariokart\_path)}
\end{Highlighting}
\end{Shaded}

\subsection{R-Code zum Copy-Pasten}\label{r-code-zum-copy-pasten-1}

Sie finden den R-Code f√ºr jedes Kapitel
\href{https://github.com/sebastiansauer/statistik1/tree/main/R-code-for-all-chapters}{hier}.
\(\square\)

\subsection{Quiz zum Einstieg}\label{quiz-zum-einstieg}

Vielleicht fordert Sie die Lehrkraft zu einem Einstiegsquiz auf, etwas
mittels der Plattform
\href{https://antworte.jetzt/}{antworte.jetzt}.\footnote{https://antworte.jetzt/}
Alternativ √ºberlegen Sie sich selber 10 Quiz-Aufgaben zum Stoff des
letzten Kapitels.

\subsection{Wozu das alles?}\label{wozu-das-alles}

\begin{quote}
{\emoji{ninja}} Wir m√ºssen die Galaxis retten, Kermit.
\end{quote}

\begin{quote}
{\emoji{frog}} \emph{Schlock}
\end{quote}

\section{Ein Dino sagt mehr als 1000
Worte}\label{ein-dino-sagt-mehr-als-1000-worte}

Es hei√üt, ein Bild sage mehr als 1000 Worte. Schon richtig, aber ein
Dinosaurier sagt auch mehr als 1000 Worte, s.
Abbildung~\ref{fig-dino1}.\footnote{Quelle:
  \url{https://towardsdatascience.com/how-to-turn-a-dinosaur-dataset-into-a-circle-dataset-with-the-same-statistics-64136c2e2ca0}}

\begin{figure}

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-dino1-1.pdf}

}

\caption{\label{fig-dino1}Alle Diagramme haben gleiche statistische
Koeffizienten, wie Mittelwert und Streuung und Korrelation, aber die
Datengrundlage sind komplett verschieden.}

\end{figure}%

In Abbildung~\ref{fig-dino1} sieht man verschiedene ``Bilder'', also
Datens√§tze: etwa einen Dino und einmal einen Kreis. Obwohl die Bilder
grundverschiedene sind, sind die zentralen statistischen Kennwerte
(praktisch) identisch.

In die gleiche Bresche schl√§gt ``Anscombes Quartett''
(\textbf{Anscombe1973?}), s. Abbildung~\ref{fig-dino2}: Es zeigt vier
Datens√§tze, in denen die zentralen Statistiken fast identisch sind,\\
also Mittelwerte, Streuungen, Korrelationen. Aber die Streudiagramme
sind grundverschieden.\footnote{Quelle:
  \url{https://en.wikipedia.org/wiki/Anscombe\%27s_quartet}}

Anscombes Beispiel zeigt (zugespitzt): Eine Visualisierung enth√ºllt, was
der Statistik (als Kennzahl) verh√ºllt bleibt.

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-important-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-important-color}{\faExclamation}\hspace{0.5em}{Wichtig}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-important-color-frame]

Statistische Diagramme k√∂nnen Einblicke geben, die sich nicht (leicht)
in grundlegenden Statistiken (Kennwerten) abbilden. \(\square\)

\end{tcolorbox}

\begin{figure}

\centering{

\includegraphics{img/anscombe.png}

}

\caption{\label{fig-dino2}Anscombes Quartet: Gleiche statistischen
Kennwerte in vier Datens√§tzen}

\end{figure}%

Unter visueller Cortex ist sehr leistungsf√§hig. Wir k√∂nnen ohne M√ºhe
eine gro√üe Anzahl an Informationen aufnehmen und parallel verarbeiten.
Aus diesem Grund sind Datendiagramme eine effektive und einfache Art,
aus Daten Erkenntnisse zu ziehen.

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-tip-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-tip-color}{\faLightbulb}\hspace{0.5em}{Tipp}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-tip-color-frame]

Nutzen Sie Datendiagramme umfassend; sie sind einfach zu verstehen und
doch sehr m√§chtig.

\end{tcolorbox}

\subsection{Datendiagramm}\label{datendiagramm}

Ein \emph{Datendiagramm} (kurz: Diagramm) ist ein Diagramm, das Daten
und Statistiken zeigt, mit dem Zweck, Erkenntnisse daraus zu ziehen.

\begin{example}[Aus der Forschung: Ein aufw√§ndiges (und ansprechendes)
Datendiagramm]\protect\hypertarget{exm-datendiagramm}{}\label{exm-datendiagramm}

\href{https://besjournals.onlinelibrary.wiley.com/cms/asset/22fa2646-002f-4890-800d-2717cc12bce8/jane13070-fig-0002-m.jpg}{Hier}
finden Sie ein Beispiel f√ºr ein Datendiagramm, das mit R erzeugt wurde
(\textbf{scherer\_seasonal\_2019?}).

\end{example}

\subsection{Ein Bild hat nicht so viele
Dimensionen}\label{ein-bild-hat-nicht-so-viele-dimensionen}

Abbildung~\ref{fig-many-dims} zeigt ein Bild mit mehreren (5) Variablen,
die jeweils einer ``Dimension'' entsprechen. Wie man (nicht) sieht, wird
es langsam un√ºbersichtlich. Offenbar kann man in einem Bild nicht
beliebig viele Variablen sinnvoll reinquetschen. Die ``Dimensionalit√§t''
eines Diagramms hat ihre Grenzen, vielleicht bei 4-6 Variablen.

\begin{figure}

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-many-dims-1.pdf}

}

\caption{\label{fig-many-dims}Ein Diagramm kann nur eine begrenzte
Anzahl von Variablen zeigen. Wenn Sie dieses Bild nicht checken: Prima.
Genau das soll das Bild zeigen.}

\end{figure}%

M√∂chten wir den Zusammenhang von vielen Variablen, z.B. mehr als 5,
verstehen, kommen wir mit Bildern nicht weiter. Dann brauchen wir andere
Werkzeuge: statistics to the rescue.

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Bei klaren Zusammenh√§ngen und wenig Variablen braucht man keine
(aufw√§ndige) Statistik. Ein Bild (Datendiagramm) ist dann (oft)
ausreichend. Man k√∂nnte sagen, dass es Statistik nur deshalb gibt, weil
unser Auge mit mehr als ca. 4-6 Variablen nicht gleichzeitig umgehen
kann.

\end{tcolorbox}

\begin{exercise}[]\protect\hypertarget{exr-anz-dims}{}\label{exr-anz-dims}

Wie viele Variablen sind in Abbildung~\ref{fig-many-dims}
dargestellt?\footnote{5}

\end{exercise}

\section{Nomenklatur von
Datendiagrammen}\label{nomenklatur-von-datendiagrammen}

Tabelle~\ref{tbl-nom-plots} zeigt eine -- sehr kurze Nomenklatur -- an
Datendiagrammen.\footnote{Weitere Nomenklaturen sind m√∂glich, aber wir
  halten hier die Sache einfach. Wer an Vertiefung interessiert ist, f
  indet bei data-to-vis einen √úberblick √ºber verschiedene Typen an
  Diagrammen, sogar in Form einer systematischen Nomenklatur:
  \url{https://www.data-to-viz.com/}.}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 4\tabcolsep) * \real{0.2143}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 4\tabcolsep) * \real{0.3571}}
  >{\raggedright\arraybackslash}p{(\columnwidth - 4\tabcolsep) * \real{0.4286}}@{}}

\caption{\label{tbl-nom-plots}Ein (sehr kurze) Nomenklatur von
Datendiagrammen}

\tabularnewline

\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
Erkenntnisziel
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
qualitativ
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
quantitativ
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
Verteilung & Balkendiagramm & Histogramm und Dichtediagramm \\
Zusammenhang & gef√ºlltes Balkendiagramm & Streudiagramm \\
Unterschied & gef√ºlltes Balkendiagramm & Boxplot \\

\end{longtable}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Wir arbeiten hier mit dem Datensatz \texttt{mariokart}. Hilfe bzw. ein
Data-Dictionary (Codebook) finden Sie
\href{https://www.rdocumentation.org/packages/openintro/versions/2.4.0/topics/mariokart}{hier}.

\end{tcolorbox}

\section{Verteilungen verbildlichen}\label{verteilungen-verbildlichen}

\subsection{Verteilung: nominale
Variable}\label{verteilung-nominale-variable}

\begin{definition}[Verteilung]\protect\hypertarget{def-verteilung}{}\label{def-verteilung}

Eine (H√§ufigkeits-)Verteilung einer Variablen \(X\) schl√ºsselt auf, wie
h√§ufig jede Auspr√§gung von \(X\) ist.\(\square\)

\end{definition}

\begin{example}[]\protect\hypertarget{exm-verteilung1}{}\label{exm-verteilung1}

Tabelle~\ref{tbl-wheels-n} zeigt die H√§ufigkeitsverteilung von
\texttt{cond} (condition, also der Zustand des Artikels, neu oder
gebraucht) aus dem Datensatz \texttt{mariokart}. Die Variable hat 5
Auspr√§gungen; z.B. kommt die Auspr√§gung \texttt{new} 59 mal
vor.\(\square\)

\end{example}

\begin{longtable}[]{@{}ll@{}}

\caption{\label{tbl-wheels-n}H√§ufigkeitsverteilung von \texttt{cond} aus
dem Datensatz \texttt{mariokart}}

\tabularnewline

\toprule\noalign{}
cond & n \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
new & 59 \\
used & 84 \\

\end{longtable}

Zugegeben, das Datendiagramm von \texttt{cond} ist nicht so aufregend,
s. Abbildung~\ref{fig-mario-n-plot-cond}. Wie man sieht, besteht so ein
Diagramm als \emph{Balken}, daher hei√üt es
\emph{Balkendiagramm}\footnote{synonym: S√§ulendiagramm}. Man kann so ein
Diagramm um 90¬∞ drehen; keine Ausrichtung ist unbedingt besser als die
andere.

\begin{definition}[Balkendiagramm]\protect\hypertarget{def-balken}{}\label{def-balken}

Ein Balkendiagramm eignet sich, um H√§ufigkeiten darzustellen

\end{definition}

\begin{figure}

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-mario-n-plot-cond-1.pdf}

}

\caption{\label{fig-mario-n-plot-cond}H√§ufigkeitsverteilung der Variable
\texttt{cond}}

\end{figure}%

\begin{figure}

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-de1-1.pdf}

}

\caption{\label{fig-de1}Balkendiagramm mit dem R-Paket
\texttt{DataExplorer}}

\end{figure}%

Es gibt viele Methoden, sich mit R ein Balkendiagramm ausgeben zu
lassen. Eine einfache, komfortable ist die mit dem Paket
\texttt{DataExplorer}, s. Abbildung~\ref{fig-de1}.

Zuerst importieren wir die Daten, s. Listing~\ref{lst-mariokart} und
Listing~\ref{lst-mariokart-path-pdf}.

\begin{codelisting}

\caption{\label{lst-mariokart}Mariokart-Daten importieren von einer
Webseite}

\centering{

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(mariokart\_path)}
\end{Highlighting}
\end{Shaded}

}

\end{codelisting}%

Au√üerdem nicht vergessen, das Paket \texttt{DataExplorer} zu starten, s.
Listing~\ref{lst-dataexplorer}.\footnote{Nat√ºrlich m√ºssen Sie das Paket
  einmalig installiert haben, bevor Sie es starten k√∂nnen.} In diesem
Paket ``wohnen'' die Befehle, die wir zum Erstellen der Datendiagramme
nutzen werden. Listing~\ref{lst-de1} zeigt die Syntax, um ein
Balkendiagramm zu erstellen.\footnote{Auf der Hilfeseite der Funktion
  finden Sie weitere Details zur Funktion.}

\begin{codelisting}

\caption{\label{lst-dataexplorer}Wir starten das R-Paket DataExplorer}

\centering{

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(DataExplorer)}
\end{Highlighting}
\end{Shaded}

}

\end{codelisting}%

\begin{codelisting}

\caption{\label{lst-de1}Syntax zur Erstellung eines Balkendiagramms}

\centering{

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{select}\NormalTok{(cond) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{plot\_bar}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

}

\end{codelisting}%

\includegraphics{040-verbildlichen_files/figure-pdf/unnamed-chunk-8-1.pdf}

Die Syntax ist in Listing~\ref{lst-de1} abgedruckt\footnote{Zur
  Erinnerung: \texttt{\%\textgreater{}\%} nennt man die ``Pfeife und
  l√§sst sich als''und dann'' √ºbersetzen, vgl. Kapitel~\ref{sec-pipe}.} .
√úbersetzen wir die Syntax ins Deutsche:

\begin{verbatim}
Nimm den Datensatz mariokart *und dann*
  w√§hle die Spalte cond *und dann*
  zeichne ein Balkendiagramm.
\end{verbatim}

\begin{exercise}[Spalten w√§hlen f√ºr das
Balkendiagramm]\protect\hypertarget{exr-de1}{}\label{exr-de1}

H√§tten wir andere Spalten ausgew√§hlt, so w√ºrde das Balkendiagramm die
Verteilung jener Variablen zeigen. Ja, Sie k√∂nnen auch mehrere Variablen
auf einmal ausw√§hlen. Probieren Sie das doch mal aus!

\end{exercise}

\begin{exercise}[]\protect\hypertarget{exr-balken}{}\label{exr-balken}

~

\subsection{Aufgabe}

Visualisieren Sie die Verteilung von \texttt{stock\_photo}!

\subsection{L√∂sung}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart }\SpecialCharTok{|\textgreater{}} 
  \FunctionTok{select}\NormalTok{(stock\_photo) }\SpecialCharTok{|\textgreater{}} 
  \FunctionTok{plot\_bar}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\includegraphics{040-verbildlichen_files/figure-pdf/unnamed-chunk-9-1.pdf}

\end{exercise}

\subsection{Verteilung: quantitative
Variable}\label{verteilung-quantitative-variable}

\subsubsection{Histogramm}\label{histogramm}

Bei einer quantitativen Variablen mit vielen Auspr√§gungen w√§re ein
Balkendiagramm nicht so aussagekr√§ftig, s.
Abbildung~\ref{fig-balken-hist} (links). Es gibt einfach zu viele
Auspr√§gungen.

Die L√∂sung: Wir reduzieren die Anzahl der Auspr√§gungen, in dem wir auf
ganze Dollar runden. Oder, um noch weniger Auspr√§gungen zu bekommen,
k√∂nnen wir einfach Gruppen definieren, z.B.

\begin{itemize}
\tightlist
\item
  Gruppe 1: 0-5 Dollar
\item
  Gruppe 2: 6-10 Dollar
\item
  Gruppe 2: 11-15 Dollar \ldots{}
\end{itemize}

In Abbildung~\ref{fig-balken-hist} (rechts) sind z.B. die Auspr√§gungen
des Verkaufspreis (\texttt{total\_pr}) in in Gruppen der Breite von 5
Dollar aufgeteilt worden. Zus√§tzlich sind noch die einzelnen Werte als
schwarze Punkte gezeigt.

\begin{figure}

\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-balken-hist-1.pdf}

}

\subcaption{\label{fig-balken-hist-1}Balkendiagramm}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-balken-hist-2.pdf}

}

\subcaption{\label{fig-balken-hist-2}Histogramm}

\end{minipage}%

\caption{\label{fig-balken-hist}Balkendiagramm vs.~Histogramm f√ºr den
Gesamtpreis (\texttt{total\_pr})}

\end{figure}%

\begin{definition}[Histogramm]\protect\hypertarget{def-histogramm}{}\label{def-histogramm}

Ein Histogramm ist ein Diagramm zur Darstellung der
H√§ufigkeitsverteilung einer quantitativen Variablen. Die Daten werden in
Gruppen (Klassen) eingeteilt, die dann durch einen Balken (pro Klasse)
dargestellt sind. Die H√∂he der Balken zeigt die H√§ufigkeit der Daten in
dieser Gruppe/in diesem Balken\footnote{bei konstanter Balkenbreite}.

\end{definition}

Es gibt keine klare Regel, in wie viele Balken ein Histogramm gegliedert
sein sollte. Nur: Es sollten nicht sehr viele und nicht sehr wenig sein,
s. Abbildung~\ref{fig-zu-wenig-viele} links bzw.
Abbildung~\ref{fig-zu-wenig-viele}, rechts.

\begin{figure}

\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-zu-wenig-viele-1.pdf}

}

\subcaption{\label{fig-zu-wenig-viele-1}Zu viele Gruppen (Balken)}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-zu-wenig-viele-2.pdf}

}

\subcaption{\label{fig-zu-wenig-viele-2}Zu wenige Gruppen (Balken)}

\end{minipage}%

\caption{\label{fig-zu-wenig-viele}Nicht zu wenig und nicht zu viele
Balken im Balkendiagramm}

\end{figure}%

Zur Erstellung eines Histogramms k√∂nnen Sie die Syntax
Listing~\ref{lst-de2} n√ºtzen, vgl. Abbildung~\ref{fig-de-hist-density},
links.

\begin{codelisting}

\caption{\label{lst-de2}Syntax zur Erstellung eines Histogramms}

\centering{

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{select}\NormalTok{(total\_pr) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{filter}\NormalTok{(total\_pr }\SpecialCharTok{\textless{}} \DecValTok{100}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}  \CommentTok{\# ohne Extremwerte}
  \FunctionTok{plot\_histogram}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

}

\end{codelisting}%

\begin{figure}

\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-de-hist-density-1.pdf}

}

\subcaption{\label{fig-de-hist-density-1}Histogramm}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-de-hist-density-2.pdf}

}

\subcaption{\label{fig-de-hist-density-2}Dichtediagramm}

\end{minipage}%

\caption{\label{fig-de-hist-density}Eine stetige Verteilung
verbildlichen}

\end{figure}%

\begin{exercise}[]\protect\hypertarget{exr-histo-ship-pr}{}\label{exr-histo-ship-pr}

~

\subsection{Aufgabe}

Visualisieren Sie die Verteilung von \texttt{ship\_pr} anhand eines
Histogramms!

\subsection{L√∂sung}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart }\SpecialCharTok{|\textgreater{}} 
  \FunctionTok{select}\NormalTok{(ship\_pr) }\SpecialCharTok{|\textgreater{}} 
  \FunctionTok{plot\_histogram}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\includegraphics{040-verbildlichen_files/figure-pdf/unnamed-chunk-14-1.pdf}

\end{exercise}

\subsubsection{Dichtediagramm}\label{dichtediagramm}

Abbildung~\ref{fig-balken-total-pr-hist-dens} f√ºgt zu
\textbf{?@fig-balken-total-pr-hist} ein \emph{Dichtediagramm} hinzu
(rote Linie). Ein Dichtediagramm √§hnelt einem ``glattgeschmirgeltem''
Histogramm.

\begin{definition}[Dichtediagramm]\protect\hypertarget{def-dichtediagramm}{}\label{def-dichtediagramm}

Ein Dichtediagramm visualisiert die Verteilung einer stetigen Variablen.
Im Gegensatz zum Histogramm wird der Verlauf der Kurve gegl√§ttet, so
kann Rauschen (Zufallsschwankung) besser ausgeblendet werden.\footnote{Mit
  \emph{Dichte} ist die Anzahl der Beobachtungen pro Einheit der
  Variablen auf der X-Achse gemeint.}

\end{definition}

\begin{figure}

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-balken-total-pr-hist-dens-1.pdf}

}

\caption{\label{fig-balken-total-pr-hist-dens}Histogramm (graue Balken)
und Dichtediagramm (orange Linie) f√ºr \texttt{total\_pr}}

\end{figure}%

\begin{exercise}[]\protect\hypertarget{exr-plot-density}{}\label{exr-plot-density}

Erstellen Sie das Diagramm Abbildung~\ref{fig-de-hist-density}, rechtes
Teildiagramm!\footnote{Grob gesagt:
  \texttt{mariokart\ \%\textgreater{}\%\ plot\_density()}.}\(\square\)

\end{exercise}

\subsubsection{Eigenschaften von
Verteilungen}\label{eigenschaften-von-verteilungen}

Verteilungen unterscheiden sich z.B. einerseits in ihrem ``typischen''
oder ``mittleren'' Wert\footnote{vgl. Kapitel~\ref{sec-lage}} und
anderseits in ihrer Streuung\footnote{vgl. Kapitel~\ref{sec-streuung}.}

(Diagramme von) Verteilungen k√∂nnen symmetrisch oder schief (nicht
symmetrisch) sein, s. Abbildung~\ref{fig-symm-schief}.

\begin{figure}

\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-symm-schief-1.pdf}

}

\subcaption{\label{fig-symm-schief-1}Symmetrisch (Normal)}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-symm-schief-2.pdf}

}

\subcaption{\label{fig-symm-schief-2}Schief}

\end{minipage}%

\caption{\label{fig-symm-schief}Symmetrische vs.~schiefe Verteilung,
verbildlicht}

\end{figure}%

Abbildung~\ref{fig-plot-distribs} zeigt verschiedene Formen von
Verteilungen. ``Bimodal'' meint ``zweigipflig'' und ``multimodal''
entsprechend ``mehrgipflig''.\footnote{Quelle: ifes/FOM Hochschule,
  \url{https://github.com/FOM-ifes/VL-Vorlesungsfolien}}

\begin{figure}

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-plot-distribs-1.pdf}

}

\caption{\label{fig-plot-distribs}Verschiedene Verteilungsformen}

\end{figure}%

\begin{exercise}[]\protect\hypertarget{exr-verteilungsform-total-pr}{}\label{exr-verteilungsform-total-pr}

~

\subsection{Aufgabe}

Bennenen Sie die am besten passende Verteilungsform f√ºr die Variable
\texttt{total\_pr}.

\subsection{L√∂sung}

Die Verteilung ist rechtschief.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart }\SpecialCharTok{|\textgreater{}} 
  \FunctionTok{select}\NormalTok{(total\_pr) }\SpecialCharTok{|\textgreater{}} 
  \FunctionTok{plot\_density}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\includegraphics{040-verbildlichen_files/figure-pdf/unnamed-chunk-17-1.pdf}

\end{exercise}

\subsection{Normalverteilung}\label{normalverteilung}

Eine Normalverteilung ist eine bestimmte Art von Verteilung einer
quantitativen Variablen. Aber sie ist besonders wichtig, und ist daher
hier herausgestellt.

Eine Normalverteilung sehen Sie in Abbildung~\ref{fig-symm-schief},
links. Sie hat u.a. folgende Eigenschaften:

\begin{itemize}
\tightlist
\item
  symmetrisch
\item
  glockenf√∂rmig
\item
  stetig
\item
  eingipflig (unimodal)
\item
  Mittelwert, Median und Modus sind identisch
\end{itemize}

\begin{example}[]\protect\hypertarget{exm-norm}{}\label{exm-norm}

Beispiele f√ºr normalverteilte Variablen sind K√∂rpergr√∂√üe von M√§nnern
oder Frauen, IQ-Werte, Pr√ºfungsergebnisse, Messfehler, Lebensdauer von
Gl√ºhbirnen, Gewichte von Brotlaiben, Milchproduktion von K√ºhen,
Brustumfang schottischer Soldaten (Lyon 2014).\(\square\)

\end{example}

Die Normalverteilung ist von hoher Bedeutung, da sich diese Verteilung
unter (recht h√§ufigen) Bedingungen zwangsl√§ufig ergeben muss.

\begin{definition}[Entstehung einer
Normalverteilung]\protect\hypertarget{def-normal}{}\label{def-normal}

Wenn sich eine Variable \(X\) als Summe mehrerer, unabh√§ngiger, etwa
gleich starker Summanden, dann kann man erwarten, dass sich diese
Variable \(X\) tendenziell normalverteilt. \(\square\)

\end{definition}

Dieses Ph√§nomen kann man gut anhand des
\href{https://www.youtube.com/watch?v=3m4bxse2JEQ}{Galton-Bretts}
veranschaulichen.

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-important-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-important-color}{\faExclamation}\hspace{0.5em}{Parameter der Normalverteilung}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-important-color-frame]

Eine Normalverteilung l√§sst sich exakt beschreiben anhand zweier
Parameter: ihres zentralen Werts (Mittelwerts), \(\mu\), und ihrer
Streuung (Standardabweichung), \(\sigma\). \(\square\)

\end{tcolorbox}

Kennt man diese beiden Parameter, so kann man einfach angeben, welcher
Anteil der Fl√§che sich in einem bestimmten Bereich befindet, s.
Abbildung~\ref{fig-norm-perc}.\footnote{Quelle: Ainali -- Own work, CC
  BY-SA 3.0,
  \url{https://commons.wikimedia.org/w/index.php?curid=3141713}}

Davon leitet sich die ``68-95-99-Prozentregel'' ab:

\begin{itemize}
\tightlist
\item
  \(68\,\%\) der Werte im Bereich \(\mu\pm 1 \cdot \sigma\)
\item
  \(95\,\%\) der Werte im Bereich \(\mu\pm 2 \cdot \sigma\)
\item
  \(99{,}7\,\%\) der Werte im Bereich \(\mu\pm 3 \cdot \sigma\)
\end{itemize}

\begin{figure}

\centering{

\includegraphics{img/Standard_deviation_diagram_micro.svg.png}

}

\caption{\label{fig-norm-perc}Die Fl√§cheninhalte
(Wahrscheinlichkeitsmasse) einer Normalverteilung in Abh√§ngigkeit der
SD-Einheiten}

\end{figure}%

\section{Zusammenh√§nge
verbildlichen}\label{zusammenhuxe4nge-verbildlichen}

\subsection{Zusammenhang: nominale
Variablen}\label{zusammenhang-nominale-variablen}

\begin{example}[Beispiele f√ºr Zusammenh√§nge bei nominalen
Variablen]\protect\hypertarget{exm-nom-zshg}{}\label{exm-nom-zshg}

~

\begin{itemize}
\tightlist
\item
  H√§ngt Berufserfolg (F√ºhrungskraft ja/nein) mit dem Geschlecht
  zusammen?
\item
  H√§ngt der Beruf des Vaters mit dem Schulabschluss des Kindes (Abitur,
  Realschule, Mittelschule) zusammen?
\item
  Gibt es einen Zusammenhang zwischen Automarke und politische Pr√§ferenz
  einer Partei? \(\square\)
\end{itemize}

\end{example}

Sagen wir, Sie arbeiten immer noch beim Online-Auktionshaus und Sie
fragen sich, ob ein Produktfoto wohl prim√§r bei neuwertigen Produkten
beiliegt, aber nicht bei gebrauchten? Dazu betrachten Sie wieder die
\texttt{mariokart}-Daten, s. Abbildung~\ref{fig-zshg-nom1}.

\begin{figure}

\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-zshg-nom1-1.pdf}

}

\subcaption{\label{fig-zshg-nom1-1}Es findet sich ein Zusammenhang von
Foto und Zustand in den Daten}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-zshg-nom1-2.pdf}

}

\subcaption{\label{fig-zshg-nom1-2}Es findet sich (fast) kein
Zusammenhang von \texttt{wheel} und Foto in den Daten}

\end{minipage}%

\caption{\label{fig-zshg-nom1}Zusammenhang zwischen nominalskalierten
Variablen verbildlichen}

\end{figure}%

Tats√§chlich: Es findet sich ein Zusammenhang zwischen der Tatsache, ob
dem versteigerten Produkt ein Foto bei lag und ob es neuwertig oder
gebraucht war (Abbildung~\ref{fig-zshg-nom1}, links). Bei neuen Spielen
war fast immer (ca. 90\%) ein Foto dabei; bei gebrauchten Spielen
immerhin bei gut der H√§lfte der F√§lle.

Anders sieht es aus f√ºr die Frage, ob ein (oder mehrere) Lenkr√§der dem
Spiel beilagen (oder nicht) in Zusammenhang mit der Fotofrage Hier gab
es fast keinen Unterschied zwischen neuen und alten Spielen, was die
Frage nach ``Foto des Produkts dabei'' betraf
(Abbildung~\ref{fig-zshg-nom1}, rechts), der Anteil betrug jeweils ca.
70\%. Das zeigt, dass es keinen Zusammenhang zwischen Foto und
Neuwertigkeit des Spiels gibt (laut unseren Daten).

Anders gesagt: Unterscheiden sich die ``F√ºllh√∂he'' in den Diagrammen, so
gibt es einen Unterschied hinsichtlich ``Foto ist dabei'' zwischen den
beiden Gruppen (linker vs.~rechter Balken). Unterscheiden sich die
Anteile in den Gruppen (neuwertige vs.~gebrauchte Spiele), so spielt
z.B. die Variable ``Foto dabei'' offenbar eine Rolle. Dann h√§ngen
Neuwertigkeit und ``Foto dabei'' also zusammen!

So k√∂nnen Sie sich in R ein gef√ºlltes Balkendiagramm ausgeben lassen, s.
Abbildung~\ref{fig-de-bar-filled}. Diese Darstellung eignet sich, um
Zusammenh√§nge zwischen zwei zweistufigen nominal skalierten Variablen zu
verbildlichen. Die verschiedenen Werte der F√ºllfarbe werden den Stufen
der Variablen \texttt{cond} zugewiesen, s. Listing~\ref{lst-plot-bar}.

\begin{codelisting}

\caption{\label{lst-plot-bar}R-Syntax f√ºr ein gef√ºlltes Balkendiagramm}

\centering{

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{select}\NormalTok{(cond, stock\_photo) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{plot\_bar}\NormalTok{(}\AttributeTok{by =} \StringTok{"cond"}\NormalTok{)  }\CommentTok{\# aus dem Paket DataExplorer}
\end{Highlighting}
\end{Shaded}

}

\end{codelisting}%

\begin{figure}[H]

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-de-bar-filled-1.pdf}

}

\caption{\label{fig-de-bar-filled}Ein gef√ºlltes Balkendiagramm zur
Untersuchung eines Zusammenhangs zwischen nominalskalierter Variablen}

\end{figure}%

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

\emph{Gef√ºllte Balkendiagramme} eignen sich zur Analyse eines
Zusammenhangs zwischen nominalskalierten Variablen. Allerdings sollte
eine der beiden Variablen nur zwei Auspr√§gungen aufweisen, sonst sind
die Zusammenh√§nge nicht mehr so gut zu erkennen.\(\square\)

\end{tcolorbox}

\begin{exercise}[]\protect\hypertarget{exr-zsmnhang-cond-wheels}{}\label{exr-zsmnhang-cond-wheels}

~

\subsection{Aufgabe}

Visualisieren Sie den Zusammenhang der beiden nominalen Variablen
\texttt{cond} und \texttt{wheels}!

\subsection{L√∂sung}

\texttt{wheels} ist als metrische Variable (\texttt{int}: Integer, d.h.
Ganzzahl) formatiert im Datensatz \texttt{mariokart}. Wir m√ºssen Sie
zun√§chst als Faktorvariable umformatieren, damit R sie als nominal
skalierte Variable erkennt.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart }\SpecialCharTok{|\textgreater{}} 
  \CommentTok{\# Mache aus einer metrischen eine nominale Variable: }
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{wheels =} \FunctionTok{factor}\NormalTok{(wheels)) }\SpecialCharTok{|\textgreater{}} 
  \FunctionTok{select}\NormalTok{(cond, wheels) }\SpecialCharTok{|\textgreater{}} 
  \FunctionTok{plot\_bar}\NormalTok{(}\AttributeTok{by =} \StringTok{"cond"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{040-verbildlichen_files/figure-pdf/unnamed-chunk-27-1.pdf}

\end{exercise}

\subsection{Zusammenhang: metrisch}\label{sec-zshg-metr}

Den (etwaigen) Zusammenhang zweier metrischer Variablen kann man mit
einem \emph{Streudiagramm} visualisieren (engl. scatterplot).
Abbildung~\ref{fig-streu1} links untersucht den Zusammenhang des
Einstiegpreises (X-Achse) und Abschlusspreises (Y-Achse) von Geboten bei
Versteigerungen des Computerspiels Mariokart. In dem Diagramm ist eine
``Trendgerade'' (Regressionsgerade), um die Art des Zusammenhangs besser
zu verdeutlichen. Die Trendgerade steigt an (von links nach recht).
Daraus kann man schlie√üen: Es handelt sich um einen
\emph{gleichsinnigen} (positiven) Zusammenhang: Je h√∂her der Startpreis,
desto \emph{h√∂her} der Abschlusspreis, zumindest tendenziell. Diese
Gerade liegt ``mittig'' in den Daten (wir definieren dies sp√§ter
genauer). Diese Trendgerade gibt Aufschluss √ºber ``typische'' Werte:
Welcher Y-Wert ist ``typisch'' f√ºr einen bestimmten X-Wert?

Abbildung~\ref{fig-streu1} rechts untersucht den Zusammenhang zwischen
Anzahl der Gebote (X-Achse) und Abschlusspreises (Y-Achse). Es handelt
sich um einen negativen Zusammenhang: Je mehr Gebote, desto
\emph{geringer} der Abschlusspreis. Das erkennt man an der sinkenden
Trendgeraden.

Die Ellipse zeigt an, wie eng die Daten um die Trendgerade streuen.
Daraus kann man ableiten, wie stark der Absolutwert des Zusammenhangs
ist, vgl. Abbildung~\ref{fig-cors}.

\begin{figure}

\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-streu1-1.pdf}

}

\subcaption{\label{fig-streu1-1}positiver, mittelstarker Zusammenhang}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-streu1-2.pdf}

}

\subcaption{\label{fig-streu1-2}negativer, eher schwacher Zusammenhang}

\end{minipage}%

\caption{\label{fig-streu1}Streudiagramm zur Darstellung eines
Zusammenhangs zweier metrischer Variablen}

\end{figure}%

\begin{definition}[Linearer
Zusammenhang]\protect\hypertarget{def-lin-zshg}{}\label{def-lin-zshg}

L√§sst sich die Beziehung zwischen zwei Variablen mit einer Gerade
visualisieren, so spricht man von einem linearen Zusammenhang. √Ñndert
man eine der beiden Variablen um einen bestimmten Wert (z.B. 1), so
√§ndert sich die andere um einen proportionalen Wert (z.B. 0.5).
\(\square\)

\end{definition}

Nat√ºrlich k√∂nnte man auch nicht-lineare Zusammenh√§nge untersuchen, aber
der Einfachheit halber konzentrieren wir uns hier mit linearen;
Beispiele f√ºr nicht-lineare Zusammenh√§nge sind in
Abbildung~\ref{fig-nonlinear} zu sehen.

\begin{figure}

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-nonlinear-1.pdf}

}

\caption{\label{fig-nonlinear}Beispiele nichtlinearer Zusammenh√§nge}

\end{figure}%

\begin{definition}[Richtung und St√§rke eines
Zusammenhang]\protect\hypertarget{def-zshg}{}\label{def-zshg}

\emph{Gleichsinnige} (positive) Zusammenh√§nge erkennt man an
\emph{aufsteigenden} Trendgeraden \(\nearrow\); \emph{gegensinnige}
(negative) Zusammenh√§nge an \emph{absteigenden} Trendgeraden
\(\searrow\)

Starke Zusammenh√§nge erkennt man an schmalen Ellipsen (``Baguette'');
schwache Zusammenh√§nge an breiten Ellipsen (``Torte'')

\(\square\)

\end{definition}

Abbildung~\ref{fig-cors} bietet einen √úberblick √ºber verschiedene
Beispiele von Richtung und St√§rke von Zusammenh√§ngen.\footnote{Quelle:
  Aufbauend auf FOM/ifes, Autor: Norman Markgraf}

\begin{figure}

\centering{

\includegraphics[width=0.75\textwidth,height=\textheight]{040-verbildlichen_files/figure-pdf/fig-cors-1.pdf}

}

\caption{\label{fig-cors}Lineare Zusammenh√§nge verschiedener St√§rke und
Richtung}

\end{figure}%

In Abbildung~\ref{fig-cors} ist f√ºr jedes Teildiagramm eine Zahl
angegeben: der \emph{Korrelationskoeffizient}. Diese Statistik
quantifiziert Richtung und St√§rke des Zusammenhangs (mehr dazu in Kap.
Kapitel~\ref{sec-zusammenhaenge}). Ein positives Vorzeichen steht f√ºr
einen positiven Zusammenhang, ein negatives Vorzeichen f√ºr einen
negativen Zusammenhang. Der (Absolut-)Wert gibt die St√§rke des linearen
Zusammenhangs an (\textbf{cohen\_power\_1992?}):

\begin{itemize}
\tightlist
\item
  ¬±0: Kein Zusammenhang
\item
  ¬±0.1: schwacher Zusammenhang
\item
  ¬±0.3: mittlerer Zusammenhang
\item
  ¬±0.5: starker Zusammenhang
\item
  ¬±1: perfekter Zusammenhang
\end{itemize}

Abbildung~\ref{fig-cors2} hat die gleiche Aussage, ist aber plakativer,
indem \emph{St√§rke} (schwach, stark) und \emph{Richtung} (positiv,
negativ) gegen√ºbergestellt sind.

\begin{figure}

\centering{

\includegraphics[width=0.75\textwidth,height=\textheight]{040-verbildlichen_files/figure-pdf/fig-cors2-1.pdf}

}

\caption{\label{fig-cors2}√úberblick √ºber starke vs.~schwache bzw.
positive vs.~negative Zusammenh√§nge}

\end{figure}%

Man sieht in Abbildung~\ref{fig-cors} und Abbildung~\ref{fig-cors2},
dass ein \emph{negativer} Korrelationskoeffizient mit einer
\emph{absinkenden} Trendgerade\footnote{synonym: Regressionsgerade}
(blaue Linie) einhergeht. Umgekehrt geht ein \emph{positiver} Trend mit
einer \emph{ansteigenden} Trendgerade einher. Zweitens erkennt man, dass
\emph{starke} Zusammenh√§nge mit einer \emph{schmaler} Ellipse
einhergehen und \emph{schwache} Zusammenh√§nge mit einer \emph{breiten}
Ellipse einhergehen.

\begin{example}[]\protect\hypertarget{exm-scatter}{}\label{exm-scatter}

Sie arbeiten nach wie vor bei einem Online-Auktionshaus, und manchmal
geh√∂rt Datenanalyse zu Ihren Aufgaben. Daher interessiert Sie, ob welche
Variablen mit dem Abschlusspreis (\texttt{total\_pr}) im Datensatz
\texttt{mariokart} zusammenh√§ngen. Sie verbildlichen die Daten mit R,
und zwar nutzen Sie das Paket \texttt{DataExplorer}. Starten Sie dieses
Paket, s. Listing~\ref{lst-dataexplorer}. Au√üerdem m√ºssen wir noch die
Daten importieren, falls noch nicht getan, s.
Listing~\ref{lst-mariokart}.

So, jetzt kann die eigentliche Arbeit losgehen. Da Sie sich nur auf
metrische Variablen konzentrieren wollen, w√§hlen Sie (mit
\texttt{select}) nur diese Variablen aus. Dann weisen Sie R an, einen
Scatterplot zu malen (\texttt{plot\_scatterplot}) und zwar jeweils den
Zusammenhang einer der gew√§hlten Variablen mit dem Abschlusspreis
(\texttt{total\_pr}), da das die Variable ist, die Sie prim√§r
interessiert. Das Ergebnis sieht man in
Abbildung~\ref{fig-mario-scatter} bzw. Listing~\ref{lst-scatterplot}.

\begin{codelisting}

\caption{\label{lst-scatterplot}Streudiagramm erstellen mit dem R-Paket
`DataExplorer'}

\centering{

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{select}\NormalTok{(duration, n\_bids, start\_pr,}
\NormalTok{         ship\_pr, total\_pr, }
\NormalTok{         seller\_rate, wheels) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{plot\_scatterplot}\NormalTok{(}\AttributeTok{by =} \StringTok{"total\_pr"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

}

\end{codelisting}%

\begin{figure}[H]

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-mario-scatter-1.pdf}

}

\caption{\label{fig-mario-scatter}Der Zusammenhang metrischer Variablen
mit Abschlusspreis}

\end{figure}%

Aha\ldots{} Was sagt uns das Bild? Hm. Es scheint einige Extremwerte zu
geben, die daf√ºr sorgen, dass der Rest der Daten recht
zusammengequetscht auf dem Bild erscheint. Vielleicht sollten Sie solche
Extremwerte lieber entfernen? Sie entscheiden sich, nur Verk√§ufe mit
einem Abschlusspreis von weniger als 100 Dollar anzuschauen
(\texttt{total\_pr\ \textless{}\ 100}). Das Ergebnis ist in
Abbildung~\ref{fig-mario-scatter2} zu sehen.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart\_no\_extreme }\OtherTok{\textless{}{-}}
\NormalTok{  mariokart }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{filter}\NormalTok{(total\_pr }\SpecialCharTok{\textless{}} \DecValTok{100}\NormalTok{)}

\NormalTok{mariokart\_no\_extreme }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{select}\NormalTok{(duration, n\_bids, start\_pr, }
\NormalTok{         ship\_pr, total\_pr, }
\NormalTok{         seller\_rate, wheels) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{plot\_scatterplot}\NormalTok{(}\AttributeTok{by =} \StringTok{"total\_pr"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-mario-scatter2-1.pdf}

}

\caption{\label{fig-mario-scatter2}Der Zusammenhang metrischer Variablen
mit Abschlusspreis}

\end{figure}%

Ohne Extremwerte sch√§lt sich ein deutlicheres Bild
(Abbildung~\ref{fig-mario-scatter2}) hervor: Startpreis
(\texttt{start\_pr}) und Anzahl der R√§der (\texttt{wheels}) scheinen am
st√§rksten mit dem Abschlusspreis zusammenzuh√§ngen.

Das Argument \texttt{by\ =\ "total\_pr"} bei \texttt{plot\_scatterplot}
weist R an, als Y-Variable stets \texttt{total\_pr} zu verwenden. Alle
√ºbrigen Variablen kommen jeweils einmal als X-Variable vor.\(\square\)

\end{example}

\begin{exercise}[]\protect\hypertarget{exr-zsmnhang-metrisch}{}\label{exr-zsmnhang-metrisch}

~

\subsection{Aufgabe}

Visualisieren Sie den Zusammenhang der beiden metrischen Variablen
\texttt{start\_pr} und \texttt{total\_pr}. Verwenden Sie den Datensatz
ohne Extremwerte wie oben definiert.

\subsection{L√∂sung}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart\_no\_extreme }\SpecialCharTok{|\textgreater{}} 
  \FunctionTok{select}\NormalTok{(start\_pr, total\_pr) }\SpecialCharTok{|\textgreater{}} 
  \FunctionTok{plot\_scatterplot}\NormalTok{(}\AttributeTok{by =} \StringTok{"total\_pr"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{040-verbildlichen_files/figure-pdf/unnamed-chunk-34-1.pdf}

\end{exercise}

\section{Unterschiede verbildlichen}\label{unterschiede-verbildlichen}

\subsection{Unterschied: nominale
Variablen}\label{unterschied-nominale-variablen}

Gute Nachrichten: F√ºr nominale Variablen bieten sich Balkendiagramme
sowohl zur Darstellung von Zusammenh√§ngen als auch von Unterschieden an.
Genau genommen zeigt ja Abbildung~\ref{fig-zshg-nom1} (links) den
\emph{Unterschied} zwischen neuen und gebrauchten Spielen hinsichtlich
der Frage, ob Photos beiliegen. Und wie man in
Abbildung~\ref{fig-zshg-nom1} sieht, ist der Anteil der Spiele mit Foto
bei den neuen Spielen h√∂her als bei gebrauchten Spielen.\footnote{Aber
  Freunde lassen Freunde keine Tortendiagramme verwenden:
  \url{https://github.com/cxli233/FriendsDontLetFriends\#10-friends-dont-let-friends-make-pie-chart}.}

\subsection{Unterschied: quantitative
Variablen}\label{unterschied-quantitative-variablen}

Eine typische Analysefrage ist, ob sich zwei Gruppen hinsichtlich einer
metrischen Zielvariablen deutlich unterscheiden. Genauer gesagt
untersucht man z.B. oft, ob sich die Mittelwerte der beiden Gruppen
zwischen der Zielvariablen deutlich unterscheiden. Das h√∂rt sich
abstrakt an? Am besten wir schauen uns einige Beispiele an, s.
Abbildung~\ref{fig-compare-groups1}.

\begin{figure}

\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-compare-groups1-1.pdf}

}

\subcaption{\label{fig-compare-groups1-1}Histogramm pro Gruppe}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-compare-groups1-2.pdf}

}

\subcaption{\label{fig-compare-groups1-2}Boxplot pro Gruppe}

\end{minipage}%

\caption{\label{fig-compare-groups1}Unterschiede zwischen zwei Gruppen:
Metrische Y-Variable, nominale X-Variable}

\end{figure}%

Das linke Teildiagramm von Abbildung~\ref{fig-compare-groups1} zeigt das
Histogramm von \texttt{total\_pr}, getrennt f√ºr neue und gebrauchte
Spiele, vgl. Abbildung~\ref{fig-de-hist-density}. Das rechte
Teildiagramm zeigt die gleichen Verteilungen, aber mit einer
vereinfachten, groberen Darstellungsfrom, den \emph{Boxplot}.\footnote{√úbrigens:
  Freunde lassen Freunde nicht Balkendiagramme verwenden, um Mittelwerte
  darzustellen:
  \url{https://github.com/cxli233/FriendsDontLetFriends\#1-friends-dont-let-friends-make-bar-plots-for-means-separation}.}

\begin{figure}

\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-compare-groups-1.pdf}

}

\subcaption{\label{fig-compare-groups-1}Y: Abschlusspreis, X: Zustand}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-compare-groups-2.pdf}

}

\subcaption{\label{fig-compare-groups-2}Y: Abschlusspreis, X: Photo
dabei?}

\end{minipage}%

\caption{\label{fig-compare-groups}Unterschiede zwischen zwei Gruppen:
Metrische Y-Variable, nominale X-Variable}

\end{figure}%

Das linke Teildiagramm von Abbildung~\ref{fig-compare-groups} zeigt den
Unterschied in den Verteilungen von \texttt{total\_pr}, einmal f√ºr die
neuen Computerspiele (\texttt{cond\ ==\ new}) und einmal f√ºr gebrauchte
Spiele (\texttt{cond\ ==\ used}).

Was ein ``deutlicher''\footnote{``substanzieller'', ``bedeutsamer'',
  ``relevanter'' oder ``(inhaltlich) signifikanter''} Zusammenhang ist,
ist keine statistische, sondern inhaltliche Frage, die man mit
Sachverstand zum Forschungsgegenstand beantworten muss.

\begin{definition}[Boxplot]\protect\hypertarget{def-boxplot}{}\label{def-boxplot}

Der Boxplot ist eine Vereinfachung bzw. eine Zusammenfassung eines
Histograms.\footnote{Ob der Boxplot horizontal oder vertikal steht, ist
  Ihrem Geschmack √ºberlassen.} Damit stellt der Boxplot auch eine
Verteilung (einer metrischen Variablen) dar.\(\square\)

\end{definition}

In Abbildung~\ref{fig-hist-to-box} sieht man die ``√úbersetzung'' von
Histogramm (oben) zu einem Boxplot (unten).

\begin{figure}

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-hist-to-box-1.pdf}

}

\caption{\label{fig-hist-to-box}√úbersetzung eines Histogramms zu einem
Boxplot}

\end{figure}%

Schauen wir uns die ``Anatomie'' des Boxplots n√§her an:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Der \emph{dicke Strich} in der Box zeigt den Median der Verteilung,
  vgl. Kapitel~\ref{sec-median}.
\item
  Die \emph{Enden der Box} zeigen das 1. Quartil (41) bzw. das 3.
  Quartil (54). Damit zeigt die Breite der Box die Streuung der
  Verteilung an, genauer gesagt die Streuung der inneren 50\% der
  Beobachtungen. Je breiter die Box, desto gr√∂√üer die Streuung. Die
  Breite der Box nennt man auch den \emph{Interquartilsabstand} (IQR).
\item
  Die ``\emph{Antennen}'' des Boxplots zeigen die Streuung in den
  kleinsten 25\% der Werte (linke Antenne) bzw. die Streuung der gr√∂√üten
  25\% der Werte (rechte Antennen). Je l√§nger die Antenne, desto gr√∂√üer
  die Streuung.
\item
  Falls es aber \emph{Extremwerte} gibt, so sollten die lieber einzeln,
  separat, au√üerhalb der Antennen gezeigt werden. Daher ist die
  Antennenl√§nge auf die 1,5-fache L√§nge der Box beschr√§nkt. Werte die
  au√üerhalb dieses Bereichs liegen (also mehr als das 1,5-fache der
  Boxl√§nge von Q3 entfernt sind) werden mittels eines Punktes
  dargestellt.
\item
  Liegt der Median-Strich in der Mitte der Box, so ist die Verteilung
  \emph{symmetrisch} (bezogen auf die inneren 50\% der Werte), liegt der
  Median-Strich nicht in der Mitte der Box, so ist die Verteilung nicht
  symmetrisch (d.h. sie ist \emph{schief}). Gleiches gilt f√ºr die
  Antennenl√§ngen: Sind die Antennen gleich lang, so ist der √§u√üere Teil
  der Verteilung symmetrisch, andernfalls schief.
\end{enumerate}

\begin{example}[]\protect\hypertarget{exm-Boxplots}{}\label{exm-Boxplots}

In einer vorherigen Analyse haben Sie den Zusammenhang von
Abschlusspreis und der Anzahl der Lenkr√§der untersucht. Jetzt m√∂chten
Sie eine sehr √§hnliche Fragestellung betrachten: Wie
\emph{unterscheiden} sich die Verkaufspreise je nach Anzahl der
beigelegten Lenkr√§der? Flink erstellen Sie dazu folgendes Diagramm,
Abbildung~\ref{fig-box-wheels1}, links. Es zeigt die Verteilung des
Abschlusspreises, aufgebrochen nach Anzahl Lenkr√§der
(\texttt{by\ =\ "wheels}). \(\square\)

\end{example}

Aber ganz gl√ºcklich sind Sie mit dem Diagramm nicht: R hat die Variable
\texttt{wheels} komisch aufgeteilt. Es w√§re eigentlich ganz einfach,
wenn R die Gruppen \texttt{0}, \texttt{1}, \texttt{2}, \texttt{3} und
\texttt{4} aufteilen w√ºrde. Aber schaut man sich die Y-Achse (im linken
Teildiagramm von Abbildung~\ref{fig-box-wheels1}) an, so erkennt man,
dass R \texttt{wheels} als stetige Zahl betrachtet und nicht in ganze
Zahlen gruppiert.\footnote{Vielleicht so, dass in jeder Gruppe gleich
  viele Wert sind?} Aber wir m√∂chten jeden einzelnen Wert von
\texttt{wheels} (0, 1, 2, 3, 4) als \emph{Gruppe} verstehen. Mit anderen
Worten, wir m√∂chten \texttt{wheels} als nominale Variable definieren.
Das kann man mit dem Befehle \texttt{factor(wheels)} erreichen (verpackt
in \texttt{mutate}), s. Abbildung~\ref{fig-box-wheels1} rechts.

\begin{Shaded}
\begin{Highlighting}[]

\NormalTok{mariokart\_no\_extreme }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{select}\NormalTok{(total\_pr, wheels) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{plot\_boxplot}\NormalTok{(}\AttributeTok{by =} \StringTok{"wheels"}\NormalTok{)}

\NormalTok{mariokart\_no\_extreme }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{select}\NormalTok{(total\_pr, wheels) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{wheels =} \FunctionTok{factor}\NormalTok{(wheels)) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{plot\_boxplot}\NormalTok{(}\AttributeTok{by =} \StringTok{"wheels"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{figure}

\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-box-wheels1-1.pdf}

}

\subcaption{\label{fig-box-wheels1-1}wheels als metrische Variable}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-box-wheels1-2.pdf}

}

\subcaption{\label{fig-box-wheels1-2}wheels als nominale Variable}

\end{minipage}%

\caption{\label{fig-box-wheels1}Abschlusspreis nach Anzahl von
beigelegten Lenkr√§dern}

\end{figure}%

Sie schlie√üen aus dem Bild, dass Lenkr√§der und Preis (positiv)
zusammenh√§ngen. Allerdings scheint es wenig Daten f√ºr
\texttt{wheels\ ==\ 4} zu geben. Das pr√ºfen Sie nach:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart\_no\_extreme }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{count}\NormalTok{(wheels)}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}rr@{}}
\toprule\noalign{}
wheels & n \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
0 & 36 \\
1 & 52 \\
2 & 50 \\
3 & 2 \\
4 & 1 \\
\end{longtable}

Tats√§chlich gibt es (in \texttt{mariokart\_no\_extreme}) auch f√ºr 3
Lenkr√§der schon wenig Daten, so dass wir die Belastbarkeit dieses
Ergebnisses skeptisch betrachten sollten.

√úbrigens bezeichnet Sie Ihre Chefin nur noch als ``Datengott''.

\begin{example}[]\protect\hypertarget{exm-diff-plot}{}\label{exm-diff-plot}

~

\subsection{Aufgabe}

Visualisieren Sie den Unterschied im Verkaufspreis zwischen gebrauchten
und neuen Spielen.

\subsection{L√∂sung}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart\_no\_extreme }\SpecialCharTok{|\textgreater{}} 
  \FunctionTok{select}\NormalTok{(cond, total\_pr) }\SpecialCharTok{|\textgreater{}} 
  \FunctionTok{plot\_boxplot}\NormalTok{(}\AttributeTok{by =} \StringTok{"cond"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{040-verbildlichen_files/figure-pdf/unnamed-chunk-40-1.pdf}

\end{example}

\begin{example}[]\protect\hypertarget{exm-diff-plot}{}\label{exm-diff-plot}

~

\subsection{Aufgabe}

Visualisieren Sie den Unterschied im Verkaufspreis abh√§ngig von
\texttt{ship\_pr}; betrachten Sie \texttt{ship\_pr} als ein
Gruppierungsvariable. Interpretieren Sie das Ergebnis.

\subsection{L√∂sung}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart\_no\_extreme }\SpecialCharTok{|\textgreater{}} 
  \FunctionTok{select}\NormalTok{(ship\_pr, total\_pr) }\SpecialCharTok{|\textgreater{}} 
  \FunctionTok{plot\_boxplot}\NormalTok{(}\AttributeTok{by =} \StringTok{"ship\_pr"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{040-verbildlichen_files/figure-pdf/unnamed-chunk-41-1.pdf}

\texttt{plot\_boxplot} gruppiert \emph{metrische} Variablen, wie
\texttt{ship\_pr} automatisch in f√ºnf Gruppen (mit gleichen Ranges). Wir
m√ºssen also nichts tun, um die metrische Variable \texttt{ship\_pr} in
eine Gruppierungsvariable (Faktorvariable) umzuwandeln.

Es sieht so aus, als w√ºrde der Median zwischen den Gruppen leicht
steigen, mit Ausnahme der mittleren Gruppe.

\end{example}

\section{So l√ºgt man mit Statistik}\label{so-luxfcgt-man-mit-statistik}

Diagramme werden h√§ufig eingesetzt, um die Wahrheit ``aufzuh√ºbschen''.

\subsection{Achsen manipulieren}\label{achsen-manipulieren}

Achsen zu stauchen ist ein einfacher Trick, s. Abbildung~\ref{fig-lie1}.

\begin{figure}

\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-lie1-1.pdf}

}

\subcaption{\label{fig-lie1-1}Oh nein, dramatischer Einbruch des
Umsatzes!}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-lie1-2.pdf}

}

\subcaption{\label{fig-lie1-2}Kaum der Rede wert, ist nur ein bisschen
Schwankung!}

\end{minipage}%

\caption{\label{fig-lie1}Stauchen der Y-Achse, um mit Statistik zu
l√ºgen}

\end{figure}%

Nat√ºrlich kann man auch durch ``Abschneiden'' der Y-Achse einen
eindrucksvollen Effekt erzielen, s. Abbildung~\ref{fig-lie2}.

\begin{figure}

\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-lie2-1.pdf}

}

\subcaption{\label{fig-lie2-1}Oh nein, dramatischer Einbruch des
Umsatzes!}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-lie2-2.pdf}

}

\subcaption{\label{fig-lie2-2}Kaum der Rede wert, ist nur ein bisschen
Schwankung!}

\end{minipage}%

\caption{\label{fig-lie2}Abschneiden der Y-Achse, um mit Statistik zu
l√ºgen}

\end{figure}%

\subsection{Scheinkorrelation}\label{scheinkorrelation}

Messerli (2012) berichtet von einem Zusammenhang von Schokoladenkonsum
und Anzahl von Nobelpreisen (Beobachtungseinheit: L√§nder), s.
Abbildung~\ref{fig-choc}. Das ist doch ganz klar: Schoki futtern macht
schlau und Nobelpreise! (?)

\begin{figure}

\centering{

\includegraphics[width=0.75\textwidth,height=\textheight]{img/choc.jpeg}

}

\caption{\label{fig-choc}Schokolodenkonsum und Nobelpreise}

\end{figure}%

Leider ist hier von einer \emph{Scheinkorrelation} auszugehen: Auch wenn
die beiden Variablen \emph{Schokoladenkonsum} und \emph{Nobelpreise}
zusammenh√§ngen, hei√üt das \emph{nicht}, dass die Variable die Ursache
und die andere die Wirkung sein muss. So k√∂nnte auch eine Drittvariable
im Hintergrund die gleichzeitige Ursache von Schokoladenkonsum und
Nobelpreise sein, etwa der \emph{allgemeine Entwicklungsstand} des
Landes: In h√∂her entwickelten L√§ndern wird mehr Schokolade konsumiert
und es werden mehr Nobelpreise gewonnen im Vergleich zu L√§ndern mit
geringerem Entwicklungsstand.

\section{Praxisbezug}\label{praxisbezug-3}

Ein, wie ich finde schlagendes Beispiel zur St√§rke von Datendiagrammen
ist Abbildung~\ref{fig-vaccine}. Das Diagramm zeigt die H√§ufigkeit von
Masern, vor und nach der Einf√ºhrung der Impfung. Die Daten und die Idee
zur Visualisierung gehen auf (\textbf{van\_panhuis\_contagious\_2013?})
zur√ºck. Das Diagramm und weitere finden sich in √§hnlicher Form im
\href{http://graphics.wsj.com/infectious-diseases-and-vaccines/}{Wall
Street Journal}.

\begin{figure}

\centering{

\includegraphics[width=0.75\textwidth,height=\textheight]{img/vaccine.jpg}

}

\caption{\label{fig-vaccine}H√§ufigkeit von Masern und Impfung in den
USA, Lizenz: MIT}

\end{figure}%

\href{https://github.com/blmoore/blogR/blob/master/R/measles_incidence_heatmap.R}{Quellcode}\footnote{Datenquelle:
  \url{https://www.tycho.pitt.edu}}

In der ``freien Wildbahn'' findet man h√§ufig sog. ``Tortendiagramme''.
Zwar sind sie beliebt, doch ist
\href{https://www.data-to-viz.com/caveat/pie.html}{von ihrer Verwendung
zumeist abzuraten}; vgl. auch
\href{https://github.com/cxli233/FriendsDontLetFriends\#10-friends-dont-let-friends-make-pie-chart}{hier}.\footnote{\url{https://www.data-to-viz.com/caveat/pie.html};
  \url{https://github.com/cxli233/FriendsDontLetFriends\#10-friends-dont-let-friends-make-pie-chart}}

\section{Vertiefung}\label{vertiefung-4}

Mehr Informationen zu \texttt{\{DataExplorer\}} finden Sie
\href{https://boxuancui.github.io/DataExplorer/index.html}{hier}.

\subsection{Schicke Diagramme}\label{schicke-diagramme}

Ein Teil der Diagramm dieses Kapitels wurden mit dem R-Paket
\href{https://rpkgs.datanovia.com/ggpubr/}{ggpubr} erstellt. Mit diesem
Paket lassen sich einfach ansprechende Datendiagramme erstellen, so
lautet die etwa die Syntax von Abbildung~\ref{fig-compare-groups} wie
folgt.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(ggpubr)  }\CommentTok{\# einmalig instalieren nicht vergessen}
\NormalTok{mariokart }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{filter}\NormalTok{(total\_pr }\SpecialCharTok{\textless{}} \DecValTok{100}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{ggboxplot}\NormalTok{(}\AttributeTok{x =} \StringTok{"cond"}\NormalTok{, }\AttributeTok{y =} \StringTok{"total\_pr"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

M√∂chte man Mittelwerte vergleichen, so sind Boxplots nicht ideal, da
diese ja nicht den Mittelwert, sondern den \emph{Median} heraustellen.
Eine Abhilfe (also eine Darstellung des Mittelwerts) schafft man (z.B.)
mit \texttt{ggpubr}, s. Abbildung~\ref{fig-comp-means-ggpubr}.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggviolin}\NormalTok{(mariokart\_no\_extreme, }
         \AttributeTok{x =} \StringTok{"cond"}\NormalTok{, }
         \AttributeTok{y =} \StringTok{"total\_pr"}\NormalTok{,}
         \AttributeTok{add =} \StringTok{"mean\_sd"}\NormalTok{) }
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-comp-means-ggpubr-1.pdf}

}

\caption{\label{fig-comp-means-ggpubr}Vergleich der Verteilungen zweier
Gruppen mit Mittelwert und Standardabweichung pro Gruppe hervorgehoben}

\end{figure}%

Ein ``Violinenplot'' hat die gleiche Aussage wie ein Dichtediagramm: Je
breiter die ``Violine'', desto mehr Beobachtungen gibt es an dieser
Stelle. Weitere Varianten zum Violinenplot mit \texttt{ggpubr} finden
sich
\href{https://rpkgs.datanovia.com/ggpubr/reference/ggviolin.html}{hier}.\footnote{\url{https://rpkgs.datanovia.com/ggpubr/reference/ggviolin.html}}

√úbrigens sind Modelle -- und Diagramme sind Modelle -- immer eine
Vereinfachung, lassen also Informationen weg. Manchmal auch wichtige
Informationen.
\href{https://www.autodesk.com/research/publications/same-stats-different-graphs}{Dieses
Beispiel} zeigt, wie etwa Histogramme wichtige Informationen unter den
Tisch fallen lassen.\footnote{\url{https://www.autodesk.com/research/publications/same-stats-different-graphs}}

Ein weiteres R-Paket zur Erstellung ansprechender Datenvisualisierung
hei√üt
\href{https://github.com/IndrajeetPatil/ggstatsplot/blob/main/README.md}{\texttt{ggstatsplot}}.\footnote{\url{https://github.com/IndrajeetPatil/ggstatsplot/blob/main/README.md}}

Abbildung~\ref{fig-ggstatsplot} zeigt ein
\href{https://github.com/IndrajeetPatil/ggstatsplot/blob/main/README.md\#gghistostats}{Histogramm},
das mit \texttt{ggstatsplot} erstellt wurde.\footnote{\url{https://github.com/IndrajeetPatil/ggstatsplot/blob/main/README.md\#gghistostats}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(ggstatsplot)}

\FunctionTok{gghistostats}\NormalTok{(}
  \AttributeTok{data       =}\NormalTok{ mariokart\_no\_extreme,}
  \AttributeTok{x          =}\NormalTok{ total\_pr,}
  \AttributeTok{xlab       =} \StringTok{"Verkaufspreis"} 
  \CommentTok{\# results.subtitle = FALSE   \# unterdr√ºckt statist. Details}
\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-ggstatsplot-1.pdf}

}

\caption{\label{fig-ggstatsplot}Ein Histogramm mit ggstatsplot}

\end{figure}%

Die Menge der statistischen Kennzahlen bei \texttt{ggstatsplot} schindet
ordentlich Eindruck. M√∂chte man auf die Kennzahlen verzichten, so nutzt
man den Schalter \texttt{results.subtitle\ =\ FALSE}.\^{}{[}Weitere
Hinweise finden sich {[}auf der Hilfeseite der Funktion:
\url{https://indrajeetpatil.github.io/ggstatsplot/articles/web_only/gghistostats.html}{]}.

\begin{quote}
{\emoji{student}} Ich w√ºrde gerne mal Beispiele von \emph{schlechten}
Datendiagrammen sehen.
\end{quote}

\begin{quote}
{\emoji{teacher}} Auf der Seite von
\href{https://flowingdata.com/category/visualization/ugly-visualization/}{Flowingdata}
findet sich eine nette Liste mit schlechten Datendiagrammen.\footnote{\url{https://flowingdata.com/category/visualization/ugly-visualization/}}
\end{quote}

\subsection{Farbwahl}\label{sec-farbwahl}

Einige √úberlegungen zur Farbwahl findet sich bei Wilke (2019), s.
\href{https://clauswilke.com/dataviz/color-basics.html}{Kap.
4}.\footnote{Siehe auch:
  \url{https://data-se.netlify.app/2023/06/30/farbpaletten/}} Die
Farbpalette von Okabe und Ito ist (vgl. \textbf{ichihara\_color\_2008?})
empfehlenswert, da sie auch bei Schwarz-Wei√ü-Druck und bei Sehschw√§chen
die Farben noch recht gut unterscheiden l√§sst, s.
Abbildung~\ref{fig-okabe}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{filter}\NormalTok{(total\_pr }\SpecialCharTok{\textless{}} \DecValTok{100}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{ggboxplot}\NormalTok{(}\AttributeTok{x =} \StringTok{"cond"}\NormalTok{, }\AttributeTok{y =} \StringTok{"total\_pr"}\NormalTok{, }\AttributeTok{fill =} \StringTok{"cond"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{scale\_fill\_okabeito}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]

\centering{

\includegraphics{040-verbildlichen_files/figure-pdf/fig-okabe-1.pdf}

}

\caption{\label{fig-okabe}Die Farbskala von Okabe und Ito: Geeignet bei
Farbseh-Schw√§chen und f√ºr Schwarz-Wei√ü-Druck. Au√üerdem nett
anzuschauen.}

\end{figure}%

\section{Aufgaben}\label{aufgaben-3}

Die Webseite \href{https://datenwerk.netlify.app}{datenwerk.netlify.app}
stellt eine Reihe von einschl√§gigen √úbungsaufgaben bereit. Sie k√∂nnen
die Suchfunktion der Webseite nutzen, um die Aufgaben mit den folgenden
Namen zu suchen:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \href{https://datenwerk.netlify.app/posts/boxhist/boxhist.html}{boxhist}
\item
  \href{https://datenwerk.netlify.app/posts/max-corr1/max-corr1.html}{max-corr1}
\item
  \href{https://datenwerk.netlify.app/posts/max-corr2/max-corr2.html}{max-corr2}
\item
  \href{https://datenwerk.netlify.app/posts/histogramm-in-boxplot/histogramm-in-boxplot}{Histogramm-in-Boxplot}
\item
  \href{https://datenwerk.netlify.app/posts/diamonds-histogramm-vergleich2/diamonds-histogramm-vergleich2}{Diamonds-Histogramm-Vergleich2}
\item
  \href{https://datenwerk.netlify.app/posts/boxplot-aussagen/boxplot-aussagen}{Boxplot-Aussagen}
\item
  \href{https://datenwerk.netlify.app/posts/boxplots-de1a/boxplots-de1a.html}{boxplots-de1a}
\item
  \href{https://datenwerk.netlify.app/posts/movies-vis1/movies-vis1.html}{movies-vis1}
\item
  \href{https://datenwerk.netlify.app/posts/movies-vis2/movies-vis2.html}{movies-vis2}
\item
  \href{https://datenwerk.netlify.app/posts/vis-gapminder/vis-gapminder}{vis-gapminder}
\item
  \href{https://datenwerk.netlify.app/posts/boxplots-de1a/boxplots-de1a}{boxplots-de1a}
\item
  \href{https://datenwerk.netlify.app/posts/diamonds-histogramm-vergleich/diamonds-histogramm-vergleich}{diamonds-histogramm-vergleich}
\item
  \href{https://datenwerk.netlify.app/posts/wozu-balkendiagramm/wozu-balkendiagramm}{wozu-balkendiagramm}
\item
  \href{https://datenwerk.netlify.app/posts/diamonds-histogram/diamonds-histogram}{diamonds-histogram}
\item
  \href{https://datenwerk.netlify.app/posts/n-vars-diagram/n-vars-diagram}{n-vars-diagram}
\end{enumerate}

Noch mehr Aufgaben zum Thema Datenvisualisierung finden Sie im Datenwerk
unter dem Tag \href{https://datenwerk.netlify.app/\#category=vis}{vis}.

\section{Literaturhinweise}\label{literaturhinweise-3}

Sowohl \texttt{ggpubr} als auch \texttt{DataExplorer} (und viele andere
R-Pakete) bauen auf dem R-Paket \texttt{ggplot2} auf. \texttt{ggplot2}
ist eines der am weitesten ausgearbeiteten Softwarepakete zur Erstellung
von Datendiagrammen. Das Buch zur Software (vom Autor von
\texttt{ggplot2}) ist empfehlenswert (\textbf{wickham\_ggplot2\_2009?}).
Eine neue, gute Einf√ºhrung in Datenvisualisierung findet sich bei Wilke
(2019). Beide B√ºcher sind kostenfrei online lesbar.

Wilke (2019) gibt einen hervorragenden √úberblick √ºber praktische Aspekte
der Datenvisualisierung; gut geeignet, wenn man mit R arbeitet. In
√§hnlicher Richtung geht Fisher und Meyer (2018).
\href{https://www.bing.com/search?pc=OA1&q=introductory\%20books\%20on\%20data\%20visualization\%20with\%20DOI}{Hier}
ist eine Liste von B√ºchern zum Thema; dort k√∂nnen Sie bei Interesse
tiefer suchen.

\section{Literatur}\label{literatur-3}

\chapter{Punktmodelle 1}\label{sec-punktmodelle1}

\section{Lernsteuerung}\label{lernsteuerung-4}

\subsection{Standort im Lernpfad}\label{standort-im-lernpfad-4}

Abbildung~\ref{fig-ueberblick} zeigt den Standort dieses Kapitels im
Lernpfad und gibt damit einen √úberblick √ºber das Thema dieses Kapitels
im Kontext aller Kapitel.

\subsection{Lernziele}\label{lernziele-5}

\begin{itemize}
\tightlist
\item
  Sie k√∂nnen g√§ngige Arten von Lagema√üe definieren.
\item
  Sie k√∂nnen erl√§utern, inwiefern man ein Lagema√ü als ein Modell
  hernehmen kann.
\item
  Sie k√∂nnen Lagema√üe mit R berechnen.
\end{itemize}

\subsection{Ben√∂tigte R-Pakete}\label{benuxf6tigte-r-pakete-3}

In diesem Kapitel ben√∂tigen Sie folgende R-Pakete.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(tidyverse)}
\FunctionTok{library}\NormalTok{(easystats)}
\end{Highlighting}
\end{Shaded}

\[
\definecolor{ycol}{RGB}{230,159,0}
\definecolor{modelcol}{RGB}{86,180,233}
\definecolor{errorcol}{RGB}{0,158,115}
\definecolor{beta0col}{RGB}{213,94,0}
\definecolor{beta1col}{RGB}{0,114,178}
\definecolor{xcol}{RGB}{204,121,167}
\]

\subsection{Ben√∂tigte Daten}\label{benuxf6tigte-daten-3}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart\_path }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(}
  \StringTok{"https://vincentarelbundock.github.io/Rdatasets/"}\NormalTok{,}
  \StringTok{"csv/openintro/mariokart.csv"}\NormalTok{)}

\NormalTok{mariokart }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(mariokart\_path)}
\end{Highlighting}
\end{Shaded}

\section{Mittelwert als Modell}\label{sec-mw}

Der klassische Mittelwert (arithmetisches Mittel) ist ein prototypisches
Beispiel f√ºr ein Modell in der Statistik.

\begin{exercise}[]\protect\hypertarget{exr-mw-md-mod}{}\label{exr-mw-md-mod}

Welche Vorstellung haben Sie, wenn Sie h√∂ren, dass der ``typische
deutsche Mann'' 1,80m gro√ü ist (Roser, Appel, und Ritchie
2013)?\footnote{Ihr Vorstellung updatet sich in Definition~\ref{def-mw}.}

\begin{enumerate}
\def\labelenumi{\alph{enumi})}
\tightlist
\item
  Die H√§lfte der M√§nner ist gr√∂√üer als 1,80m, die andere H√§lfte kleiner.
\item
  Das arithmetische Mittel der M√§nner betr√§gt 1,80m.
\item
  Die meisten M√§nner sind 1,80m gro√ü.
\item
  Etwas anderes.
\item
  Keine Ahnung! \(\square\)
\end{enumerate}

\end{exercise}

\begin{exercise}[]\protect\hypertarget{exr-mw2}{}\label{exr-mw2}

Laut
\href{https://en.wikipedia.org/wiki/Average_human_height_by_country}{dieser
Quelle} betr√§gt der Wert der mittleren Gr√∂√üe deutscher Frauen etwa
1,66m, also 14‚Äâcm weniger als bei M√§nnern.\footnote{\url{https://en.wikipedia.org/wiki/Average_human_height_by_country}}
\(\square\)

\end{exercise}

\subsection{Frage}

Ist das viel?

\begin{enumerate}
\def\labelenumi{\alph{enumi})}
\tightlist
\item
  ja
\item
  nein
\item
  kommt drauf an
\item
  wei√ü nicht \(\square\)
\end{enumerate}

\subsection{Antwort}

Auf dieser Frage gibt es keine Antwort, zumindest nicht ohne weitere
Annahmen. So k√∂nnte man z.B. sagen, ``mehr als 5‚Äâcm sind viel''. So eine
Entscheidung ist aber keine statistische Angelegenheit, sondern eine
inhaltliche.

\begin{example}[Beispiel zum
Mittelwert]\protect\hypertarget{exm-mw}{}\label{exm-mw}

Ein Statistikkurs besteht aus drei Studentinnen: Anna, Berta und Carla.
Sie haben gerade ihre Noten in der Klausur erfahren. Anna hat eine 1,
Berta eine 2 und Carla eine 3. Der Durchschnitt (das arithmetische
Mittel, \(\varnothing\)) betr√§gt: 2. \(\square\)

\end{example}

\begin{quote}
{\emoji{student}} Zu easy!
\end{quote}

\begin{quote}
{\emoji{teacher}} Schon gut! Chill mal. Wird gleich interessanter.
\end{quote}

Die Rechenregel zum Mittelwert lautet:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Addiere alle Werte
\item
  Teile durch die Anzahl der Werte
\item
  Fertig. üòÑ
\end{enumerate}

Etwas abstrakter kann man Beispiel~\ref{exm-mw} in folgendem Schaubild
darstellen, s. Gleichung~\ref{eq-mw}.

\begin{equation}\phantomsection\label{eq-mw}{
\begin{array}{|c|} \hline \\ \\ \square \\ \hline \end{array} + \begin{array}{|c|} \hline \\ \square \\ \square \\ \hline \end{array} + \begin{array}{|c|} \hline \square \\ \square \\ \square \\ \hline \end{array} = 3 \cdot \begin{array}{|c|} \hline \\ \square \\ \square \\ \hline \end{array}
}\end{equation}

Der Nutzen des Mittelwerts liegt darin, dass er uns ein Bild gibt (ein
Modell ist!) f√ºr die ``typische Note'' im Statistikkurs, s.
Gleichung~\ref{eq-mw2}.

\begin{equation}\phantomsection\label{eq-mw2}{\begin{array}{|c|} \hline \\ \\ \square \\ \hline \end{array} + \begin{array}{|c|} \hline \\ \square \\ \square \\ \hline \end{array} + \begin{array}{|c|} \hline \square \\ \square \\ \square \\ \hline \end{array} \qquad \leftrightarrow  \qquad \underbrace{\begin{array}{|c|} \hline \\ \square \\ \square \\ \hline \end{array}}_{\text{"typischer Vertreter"}}}\end{equation}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-important-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-important-color}{\faExclamation}\hspace{0.5em}{Wichtig}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-important-color-frame]

Der Nutzen des Mittelwerts liegt darin, dass er eine Datenreihe zu einen
``typischen Vertreter'' zusammenfasst. Er ist typisch in dem Sinne, als
dass die Werte aller Merkmalstr√§ger in gleichem Ma√üe einflie√üen. Er gibt
uns eine (m√∂gliche) Vorstellung (ein Modell!), wie wir uns die Werte der
Datenreihe vorstellen sollen.

\end{tcolorbox}

Eine n√ºtzliche Anschauung zum Mittelwert ist die Vorstellung des
Mittelwerts als eine ausbalancierte Wippe, s. Abbildung~\ref{fig-wippe}.

\begin{figure}

\centering{

\includegraphics[width=0.7\textwidth,height=\textheight]{img/1280px-Seesaw_with_mean.svg.png}

}

\caption{\label{fig-wippe}Mittelwert als ausbalancierte Wippe mit
Mittelwert 3}

\end{figure}%

\href{https://commons.wikimedia.org/w/index.php?curid=79390659}{Quelle:
Von Maphry - Eigenes Werk, CC BY-SA 4.0}

In ``Mathe-Sprech'' bezeichnet man den Mittelwert h√§ufig mit \(\bar{x}\)
und schreibt die Rechenregel so, s. Gleichung~\ref{eq-mw-formel}.

\begin{equation}\phantomsection\label{eq-mw-formel}{\bar {x} =\frac{1}{n} \sum_{i=1}^{n}{x_{i}}=\frac {x_{1}+x_{2}+\dotsb +x_{n}} {n}}\end{equation}

\begin{definition}[Mittelwert]\protect\hypertarget{def-mw}{}\label{def-mw}

Der Mittelwert (MW, mean) der Variablen \(X\) (pr√§ziser: das
arithmetische Mittel des Merkmal \(X\)) ist definiert als die Summe der
Elemente von \(X\) geteilt durch deren Anzahl, \(n\). Den Mittelwert von
\(X\) bezeichnet man auch mit \(\bar {x}\). \(\square\)

\end{definition}

\begin{example}[]\protect\hypertarget{exm-mw1}{}\label{exm-mw1}

Angenommen wir haben eine Reihe von Noten: 1,2,3. Der Mittelwert der
Noten betr√§gt dann 2: \(\bar{X} = \frac{1}{3}\sum (1+2+3) = 6/3 = 2\).
\(\square\)

\end{example}

Da der Mittelwert eine zentrale Rolle spielt in der Statistik, sollten
wir ihn uns noch etwas genauer anschauen. In s. Abbildung~\ref{fig-mw1}
sehen wir die Noten von (dieses Mal) vier Studentis. Die gestrichelte
horizontale Linie zeigt den Mittelwert der vier Noten. Die schwarzen
Punkte sind die Daten, in dem Fall die einzelnen Noten. Die vertikalen
Linien zeigen die Abweichungen der Noten zum Mittelwert. Bezeichnen wir
die Abweichung -- auch als ``Fehler'', ``Rest'' oder ``Residuum''
bezeichnet -- der \(i\)-ten Person mit \(\color{errorcol}{\text{e}_i}\)
(\emph{e} wie engl. \emph{error}, Fehler) und die \(i\)-te Note mit
\(\color{ycol}{y_i}\), so k√∂nnen wir mit Gleichung~\ref{eq-modell1}
festhalten:

\begin{equation}\phantomsection\label{eq-modell1}{\color{ycol}{\text{y}_i} \color{black}{ = } \color{modelcol}{\;\bar{x}\;} + \color{errorcol}{\;\text{e}_i}}\end{equation}

Anders ausgedr√ºckt (s. Gleichung~\ref{eq-modell2}):

\begin{equation}\phantomsection\label{eq-modell2}{\color{ycol}{\text{Daten}} \color{black}{ = }     \color{modelcol}{\text{Modell}} + 
\color{errorcol}{\text{Rest}}}\end{equation}

Der Mittelwert ist hier unser Modell der Daten. Wie gesagt: Ein Modell
ist eine vereinfachte (zusammengefasste) Beschreibung einer Datenreihe.

Um Modelle darzustellen, wird in der Datenanalyse h√§ufig folgende Art
von Modellgleichung verwendet, s. Gleichung~\ref{eq-sim-mean}.

\begin{equation}\phantomsection\label{eq-sim-mean}{\color{modelcol}{\hat{y}} \sim \color{xcol}{\text{ x}}}\end{equation}

Lies: ``Der Modellwert \(\color{modelcol}{\hat{y}}\) ist eine Funktion
der Variable \(\color{xcol}{\text{x}}\)''. Der Kringel
``\textasciitilde{}''\footnote{Das ``Kringel'' oder die ``Welle''
  ``\textasciitilde{}'' nennt man auch ``Tilde''.} soll also hier hei√üen
``\ldots{} ist eine Funktion von \ldots{}''.

Mit \(\color{modelcol}{\hat{y}}\) ist die vorhergesagte bzw. die zu
erkl√§rende Variable\footnote{AV, Output-Variable, Zielvariable} gemeint.
Das ``Dach'' √ºber dem \(\color{ycol}{\text{y}}\) bedeutet
``vorhergesagter Y-Wert'' oder ``Y-Wert laut dem Modell''. Der
tats√§chliche, beobachtete Wert \(\color{ycol}{\text{y}}\) setzt sich
zusammen aus dem Modellwert \(\color{modelcol}{\text{m}}\) plus einem
Fehler \(\color{errorcol}{\text{e}}\), s. Gleichung~\ref{eq-modell3}.

\begin{equation}\phantomsection\label{eq-modell3}{\color{ycol}{y} \color{black}{ = } \color{modelcol}{\text{m}} + \color{errorcol}{\text{e}}}\end{equation}

Anstelle von \(\color{modelcol}{\text{m}}\) schreibt man auch
\(\color{modelcol}{\hat{y}}\) (``y-Dach''). In diesem Fall ist das
Modell einfach gleich dem Mittelwert (und nicht irgendeiner Funktion des
Mittelwerts), so dass wir mit Gleichung~\ref{eq-modell4} schreiben
k√∂nnen:

\begin{equation}\phantomsection\label{eq-modell4}{\color{ycol}{y}  \color{black}{ = } \color{modelcol}{\bar{x}} + \color{errorcol}{e}}\end{equation}

Die Zielvariable \(\color{ycol}{\text{y}}\) wird also durch ihren
eigenen Mittelwert erkl√§rt, au√üer gehen wir von einem Fehler \(e\) in
unseren Modellvorhersagen aus. Nobody is perfect. In sp√§teren Kapiteln
werden wir andere Variablen heranziehen, um die Zielvariable zu
erkl√§ren. W√ºrden wir z.B. sagen wollen, dass wir
\(\color{ycol}{\text{y}}\) als Funktion einer Variable
\(\color{xcol}{X}\) erkl√§ren, so w√ºrden wir schreiben (s.
Gleichung~\ref{eq-modell5a}):

\begin{equation}\phantomsection\label{eq-modell5a}{\color{modelcol}{\bar{y}} \color{black} \quad { \sim } \color{xcol}{\text{ x}}}\end{equation}

Da wir im Moment aber keine andere Variablen bem√ºhen, um
\(\color{ycol}{\text{y}}\) zu erkl√§ren, schreibt man mit
Gleichung~\ref{eq-modell5} auch:

\begin{equation}\phantomsection\label{eq-modell5}{\color{modelcol}{\bar{y}}\;  \color{black}{\sim \; 1}}\end{equation}

Diese Schreibweise sieht verwirrend aus. Die \(1\) soll aber nur zeigen,
dass wir keine andere Variable zur Erkl√§rung von
\(\color{ycol}{\text{y}}\) verwenden, daher steht hier kein Buchstabe,
sondern eine einfache \(1\).\footnote{Der mathematische Hintergrund
  liegt in der Art, wie man Matrizen multipliziert.}

\begin{example}[Noten, Mittelwert und
Abweichung]\protect\hypertarget{exm-noten}{}\label{exm-noten}

Vier Studentis -- Anna, Berta, Carl, Dani -- haben ihre
Statistik-Klausur zur√ºckbekommen (Schluck). Die Noten sehen Sie in
Abbildung~\ref{fig-mw1}, gar nicht so schlecht ausgefallen. Au√üerdem ist
der Mittelwert (gestrichelte horizontale Linie) sowie die Abweichungen
der einzelnen Noten vom Mittelwert eingezeichnet.\(\square\)

\end{example}

Schauen Sie sich die Abweichungsbalken\footnote{Residuen, Fehler; h√§ufig
  mit \(e\) wie \emph{error} bezeichnet} in Abbildung~\ref{fig-mw1}
einmal genauer an.

\begin{figure}

\centering{

\includegraphics{050-zusammenfassen_files/figure-pdf/fig-mw1-1.pdf}

}

\caption{\label{fig-mw1}Der Mittelwert als horizontale (gestrichelte)
Linie. Die vertikalen Linien zeigen die Abweichungen der einzelnen Werte
zum Mittelwert. Die Abweichungen summieren sich zu Null auf.}

\end{figure}%

Jetzt stellen Sie sich vor, Sie w√ºrden die vom Mittelwert nach
\emph{oben} ragenden Balkenl√§ngen aneinanderlegen (das sind die
gestrichelten. Sehen Sie das vor Ihrem geistigen Auge? Jetzt legen Sie
auch noch die Abweichungsbalken, die nach \emph{unten} ragen, aneinander
(die mit den durchgezogenen Linien). Wer viel Phantasie hat, erkennt
(sieht) jetzt, dass die Gesamtl√§nge der ``Balken nach oben'' identisch
ist zur Gesamtl√§nge der nach ``unten ragenden Balken'', vgl.
Abbildung~\ref{fig-wippe}.

Pr√§ziser ausgedr√ºckt und ohne Ihre Phantasie zu strapazieren
(Gleichung~\ref{eq-summenull}):

\begin{equation}\phantomsection\label{eq-summenull}{\sum_{i=1}^n (x_i-\bar{x})=\sum_{i=1}^n x_i - \sum_{i=1}^n \bar{x} = n\cdot \bar{x} - n\cdot \bar{x}=0}\end{equation}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Die Summe der Abweichungen vom Mittelwert ist Null.

\end{tcolorbox}

\begin{exercise}[]\protect\hypertarget{exr-mw-wealth1}{}\label{exr-mw-wealth1}

Was sch√§tzen Sie, wie hoch das ``mittlere'' Verm√∂gen der Haushalte in
Deutschland in etwa ist?\footnote{Quelle: SI,
  \url{https://www.wsi.de/en/how-is-wealth-distributed-in-germany-14401.html},
  Abruf 2023-04-19}. \(\square\)

\end{exercise}

\subsection{Auswahl}

\begin{enumerate}
\def\labelenumi{\alph{enumi})}
\tightlist
\item
  50.000 Euro
\item
  100.000 Euro
\item
  150.000 Euro
\item
  200.000 Euro
\item
  250.000 Euro
\end{enumerate}

\subsection{Antwort}

\begin{enumerate}
\def\labelenumi{\alph{enumi})}
\tightlist
\item
  \textbf{50.000 Euro}, ca. 60.000 Euro (laut der o.g. Quelle)
\item
  100.000 Euro
\item
  150.000 Euro
\item
  200.000 Euro
\item
  250.000 Euro
\end{enumerate}

\begin{example}[Der reichste Mensch der Welt in Ihrem
H√∂rsaal]\protect\hypertarget{exm-md}{}\label{exm-md}

Kommt der wertvollste Fu√üballspieler der Welt in Ihren H√∂rsaal, sagen
wir, es ist Kylian Mbapp√©\footnote{Quelle:
  \url{https://www.transfermarkt.de/spieler-statistik/wertvollstespieler/marktwertetop},
  Abruf 2023-03-19}. Sein Jahreseinkommen (2023) liegt bei ca. 120
Millionen Euro\footnote{Quelle:
  \url{https://www.einkommenmagazin.de/kylian-mbappe-einkommen/}, Abruf
  2023-03-19}.

\begin{quote}
{\emoji{supervillain}} Hey Leute, wie geht's denn so! Wie viel Kohle
verdient ihr eigentlich so?
\end{quote}

\begin{quote}
{\emoji{student}} √Ñh, wir studieren und verdienen fast nix!
\end{quote}

Die 100 Studis im H√∂rsaal schauen verdattert aus der W√§sche: Was ist das
f√ºr eine komische Frage!? Aber zumindest verteilt der Fu√üballspieler
Autogramme.

\end{example}

\begin{exercise}[Mittleres Einkommen im H√∂rsaal, mit Kylian
Mbapp√©]\protect\hypertarget{exr-elon}{}\label{exr-elon}

Sch√§tzen Sie -- im Kopf -- das mittlere Verm√∂gen im H√∂rsaal, gehen Sie
davon aus, dass alle der 100 Studentis jeweils 1000 Euro im Jahr
verdienen. \(\square\)

\end{exercise}

In R kann man das mittlere Einkommen (pr√§ziser: das arithmetische Mittel
des Einkommens) wie folgt berechnen, s.
Listing~\ref{lst-einkommen}.\footnote{Die Details der Syntax, z.B. der
  Befehl \texttt{rep()}, sind von geringer Bedeutung.}

\begin{codelisting}

\caption{\label{lst-einkommen}Wir simulieren Einkommen von 100 Studis
plus Mbapp√©.}

\centering{

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{set.seed}\NormalTok{(}\DecValTok{42}\NormalTok{)  }\CommentTok{\# Zufallszahlen festlegen, hier nicht so wichtig}
\NormalTok{einkommen\_studis }\OtherTok{\textless{}{-}} \FunctionTok{rep}\NormalTok{(}\AttributeTok{x =} \DecValTok{1000}\NormalTok{, }\AttributeTok{times =} \DecValTok{100}\NormalTok{)  }\CommentTok{\# "rep" wie "repeat": wiederhole 1000 USD 100 Mal}
\NormalTok{einkommen }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(einkommen\_studis, }\DecValTok{120}\SpecialCharTok{*}\FloatTok{1e6}\NormalTok{)  }\CommentTok{\# 100 Studis mit 1000, 1 Mbapp√© mit 120 Mio}
\NormalTok{einkommen\_mw }\OtherTok{\textless{}{-}} \FunctionTok{mean}\NormalTok{(einkommen)}
\NormalTok{einkommen\_mw}
\DocumentationTok{\#\# [1] 1189109}
\end{Highlighting}
\end{Shaded}

}

\end{codelisting}%

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

1 Million hat 6 Nuller hinter der f√ºhrenden Eins: 1000000. In
Taschenrechner- oder Computerschreibweise: 1 Mio = \texttt{1e6}, das
\texttt{1e6} ist zu lesen als ``1 Mal 10 hoch 6, also mit 6 im
\emph{E}xponenten''.

\end{tcolorbox}

Der Mittelwert im H√∂rsaal betr√§gt also 1,189,109 Euro. Ist das ein gutes
Modell f√ºr das ``typische'' Verm√∂gen im H√∂rsaal?

\subsection{Der Mittelwert als lineares
Modell}\label{der-mittelwert-als-lineares-modell}

Man kann den Mittelwert als Gerade einzeichnen, s.
Abbildung~\ref{fig-mw2}, bzw. als Gerade begreifen. Insofern kann man
vom Mittelwert auch als \emph{lineares Modell} sprechen.

\begin{definition}[Lineares
Modell]\protect\hypertarget{def-lm}{}\label{def-lm}

Ein lineares Modell verwendet eine Gerade als Modell der Daten. Es
erkl√§rt die Daten anhand einer Geraden. \(\square\)

\end{definition}

\begin{figure}

\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{050-zusammenfassen_files/figure-pdf/fig-mw2-1.pdf}

}

\subcaption{\label{fig-mw2-1}Mit Extremwerten}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{050-zusammenfassen_files/figure-pdf/fig-mw2-2.pdf}

}

\subcaption{\label{fig-mw2-2}Ohne Extremwerte (\textless100 Euro)}

\end{minipage}%

\caption{\label{fig-mw2}Der mittlere Preis von Mariokart-Spielen als
horizontale Gerade eingezeichnet}

\end{figure}%

Abbildung~\ref{fig-mw2} zeigt den Mittelwert des Verkaufspreises der
Mariokart-Spiele (\texttt{total\_pr}), einmal mit Extremwerte (a) bzw.
einmal ohne Extremwerte (b).

\begin{definition}[Extremwert]\protect\hypertarget{def-extremwert}{}\label{def-extremwert}

Ein Extremwert (engl. \emph{outlier}) ist eine Beobachtung, dessen Wert
deutlich vom Gro√üteil der anderen Beobachtungen im Datensatz abweicht,
z.B. viel gr√∂√üer ist. \(\square\)

\end{definition}

Berechnen wir mal den Mittelwert von \texttt{einkommen} mit R (vgl.
Listing~\ref{lst-einkommen}):

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{lm}\NormalTok{(einkommen }\SpecialCharTok{\textasciitilde{}} \DecValTok{1}\NormalTok{)  }\CommentTok{\# lm wie "lineares Modell" oder engl. "linear modell"}
\DocumentationTok{\#\# }
\DocumentationTok{\#\# Call:}
\DocumentationTok{\#\# lm(formula = einkommen \textasciitilde{} 1)}
\DocumentationTok{\#\# }
\DocumentationTok{\#\# Coefficients:}
\DocumentationTok{\#\# (Intercept)  }
\DocumentationTok{\#\#     1189109}
\end{Highlighting}
\end{Shaded}

Der Befehl gibt als \emph{Koeffizient} einen Wert zur√ºck und zwar den
Mittelwert von \texttt{einkommen}, Listing~\ref{lst-einkommen}. Dieser
Wert wird als Achsenabschnitt (engl. \emph{intercept}) bezeichnet, das
wird verst√§ndlich, wenn man z.B. in Abbildung~\ref{fig-mw2} sieht, dass
die Gerade (des Mittelwerts) genau an diesem Punkt die Y-Achse
schneidet.

Die Syntax des Befehls \texttt{lm()} sieht etwas merkw√ºrdig aus.
Ignorieren Sie das f√ºrs Erste, wir besprechen das sp√§ter
(Kapitel~\ref{sec-gerade1}) ausf√ºhrlich. \texttt{lm} steht √ºbrigens f√ºr
``lineares Modell''.

\section{Median als Modell}\label{sec-median}

\begin{quote}
{\emoji{student}} Hey, der Mittelwert ist doch Quatsch! Das ist gar kein
typischer Wert f√ºr die Menschen im H√∂rsaal. Weder f√ºr den Mbapp√©, noch
f√ºr uns Studis!
\end{quote}

\begin{quote}
{\emoji{teacher}} Ja, da habt ihr Recht.
\end{quote}

\begin{quote}
{\emoji{soccer-ball}} Die Welt ist schon ungerecht!
\end{quote}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-important-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-important-color}{\faExclamation}\hspace{0.5em}{Wichtig}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-important-color-frame]

Bei (sehr) schiefen Verteilungen (s. Abbildung~\ref{fig-mbappe}) ist der
Mittelwert (sehr) wenig aussagekr√§ftig, da er nicht mehr ``typische''
Werte f√ºr die Merkmalstr√§ger beschreibt.

\end{tcolorbox}

Abbildung~\ref{fig-mbappe} stellt die Verteilung des Einkommens einer
mit ``normal'' skalierter Achse und einmal mit logarithmischer
X-Achse.\footnote{Zur Erinnerung: 4.0+e07 bedeutet
  \(4 \cdot 10^{07} = 40000000\), eine 4 gefolgt von 7 Nullern.} Die
logarithmische X-Achse stellt den Unterschied von Mittelwert (MW) und
Median deutlicher heraus als die normale (additive) Achse.

\begin{figure}

\begin{minipage}{\linewidth}

\centering{

\includegraphics{050-zusammenfassen_files/figure-pdf/fig-mbappe-1.pdf}

}

\subcaption{\label{fig-mbappe-1}X-Achse in additiver Form}

\end{minipage}%
\newline
\begin{minipage}{\linewidth}

\centering{

\includegraphics{050-zusammenfassen_files/figure-pdf/fig-mbappe-2.pdf}

}

\subcaption{\label{fig-mbappe-2}X-Achse in multiplikativer Form
(logarithmische Darstellung)}

\end{minipage}%

\caption{\label{fig-mbappe}Die Einkommensverteilung im H√∂rsaal}

\end{figure}%

Der Mittelwert ist H√∂rsaal ist nicht typisch f√ºr die Menschen im
H√∂rsaal: Weder f√ºr Mbapp√©, noch f√ºr die Studis. Genau genommen ist der
Mittelwert in diesem Fall ziemlich nutzlos.

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-important-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-important-color}{\faExclamation}\hspace{0.5em}{Wichtig}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-important-color-frame]

Der Mittelwert ist empf√§nglich f√ºr Extremwerte: Gibt es einen extremen
Wert in einer Datenreihe, so spiegelt der Mittelwert stark diesen Wert
wieder und weniger die Mehrheit der gem√§√üigten Werte. Man sagt, der
Mittelwert ist nicht \emph{robust} (gegen√ºber Extremwerten).

\end{tcolorbox}

\begin{example}[Das Median-Einkommen einiger
Studentinnen]\protect\hypertarget{exm-med}{}\label{exm-med}

F√ºnf Studentinnen tauschen sich √ºber ihr Einkommen aus, s.
Abbildung~\ref{fig-md1}, links. Es handelt sich um eine schiefe
Verteilung.

\begin{figure}

\begin{minipage}{\linewidth}

\centering{

\includegraphics{050-zusammenfassen_files/figure-pdf/fig-md1-1.pdf}

}

\subcaption{\label{fig-md1-1}ID auf der X-Achse, Einkommen auf der
Y-Achse}

\end{minipage}%
\newline
\begin{minipage}{\linewidth}

\centering{

\includegraphics{050-zusammenfassen_files/figure-pdf/fig-md1-2.pdf}

}

\subcaption{\label{fig-md1-2}Einkommen auf der X-Achse, H√§ufigkeit auf
der Y-Achse}

\end{minipage}%

\caption{\label{fig-md1}Das Median-Einkommen einiger Studentinnen sowie
der Mittelwert (MW) ihres Einkommens}

\end{figure}%

Wir k√∂nnten jetzt behaupten, dass Carla das typische Einkommen (f√ºr
diese Datenreihe) aufweist, da es genauso viele Studentinnen gibt, die
mehr verdienen, wie solche, die weniger verdienen. \(\square\)

\end{example}

\begin{definition}[Median]\protect\hypertarget{def-median}{}\label{def-median}

Merkmalsauspr√§gung, die bei (aufsteigend) sortierten Beobachtungen in
der Mitte liegt. \(\square\)

\end{definition}

\begin{exercise}[Alle mal
aufstehen]\protect\hypertarget{exr-aufstellen}{}\label{exr-aufstellen}

Auf Gehei√ü der Lehrkraft stehen jetzt alle Studis bitte auf und
sortieren sich der Gr√∂√üe nach im Raum, sch√∂n in einer Reihe aufgestellt.
Die K√∂rpergr√∂√üe der Person in der Mitte der Reihe, zu der also gleich
viele Personen zu links wie zu rechts stehen, das ist der Medien dieser
Datenreihe, vgl. Abbildung~\ref{fig-median-human}. \(\square\)

\end{exercise}

Der Median ist \emph{robust} (gegen√ºber) Extremwerten: F√ºgt man
Extremwerte zu einer Verteilung hinzu, √§ndert sich der Median zumeist
(deutlich) weniger als der Mittelwert.

Abbildung~\ref{fig-median-human} stellt den Median schematisch dar.

\begin{figure}

\begin{minipage}{0.20\linewidth}

\includegraphics[width=0.1\textwidth,height=\textheight]{img/Human_Silhouette.svg.png}

\subcaption{\label{}1,60m}
\end{minipage}%
%
\begin{minipage}{0.20\linewidth}

\includegraphics[width=0.13\textwidth,height=\textheight]{img/Human_Silhouette.svg.png}

\subcaption{\label{}1,72m}
\end{minipage}%
%
\begin{minipage}{0.20\linewidth}

\includegraphics[width=0.15\textwidth,height=\textheight]{img/human-red.png}

\subcaption{\label{}1,79m: Median!}
\end{minipage}%
%
\begin{minipage}{0.20\linewidth}

\includegraphics[width=0.16\textwidth,height=\textheight]{img/Human_Silhouette.svg.png}

\subcaption{\label{}1,94}
\end{minipage}%
%
\begin{minipage}{0.20\linewidth}

\includegraphics[width=0.2\textwidth,height=\textheight]{img/Human_Silhouette.svg.png}

\subcaption{\label{}2,12m}
\end{minipage}%

\caption{\label{fig-median-human}Der Median als der Wert des
``mittleren'' Objekts, wenn die Objekte aufsteigend sortiert sind. Es
gibt genauso viele Objekte mit kleinerem Wert als der Median wie Objekte
mit gr√∂√üerem Wert als der Median.}

\end{figure}%

Bei geradem \(n\) werden die beiden mittleren Werte betrachtet und das
arithmetische Mittel aus diesen beiden Werten gebildet.

\begin{example}[]\protect\hypertarget{exm-med2}{}\label{exm-med2}

Bei der Messreihe 1, 2, 3, 4, 5, 6, 8, 9 betr√§gt der Median
4.5.\(\square\)

\end{example}

\begin{exercise}[Emma wird
reich]\protect\hypertarget{exr-md2}{}\label{exr-md2}

Durch ein geniales Patent wird Emma steinreich. Ihr Einkommen erh√∂ht
sich um das Hundertfache. Wie ver√§ndert sich der Median?\footnote{Er
  bleibt gleich, ver√§ndert sich also nicht: Der Median ist
  \emph{robust}, er ver√§ndert sich nicht oder kaum, wenn Extremwerte
  vorliegen.} \(\square\)

\end{exercise}

\begin{exercise}[Wer ist mehr ``mittel''? Median oder
Mittelwert?]\protect\hypertarget{exr-mw-md}{}\label{exr-mw-md}

~

\begin{quote}
{\emoji{student}} Das arithmetische Mittel sollte Mittelwert hei√üen,
weil es die Mitte von zwei Messwerten widerspiegelt, also z.B. von 1 und
10 ist die Mitte 5,5 -- also genau beim Mittelwert!
\end{quote}

\begin{quote}
{\emoji{woman}} Moment! Der Median und nur der Median zeigt den
mittleren Messwert! Links und rechts sind gleich viele Messwerte, wenn
man die Werte der Gr√∂√üe nach sortiert. Also liegt der Median genau in
der Mitte!
\end{quote}

Nehmen Sie Stellung zu dieser Diskussion!\(\square\)

\end{exercise}

\begin{example}[Ein ``mittlerer'' Preis f√ºr
Mariokart]\protect\hypertarget{exm-md3}{}\label{exm-md3}

Der Mittelwert (das arithmetische Mittel) und der Median f√ºr das
Start-Gebot (\texttt{start\_pr)} von Mariokart-Spielen sind nicht
gleich, der Mittelwert ist h√∂her als der Median.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(mariokart\_path)  }\CommentTok{\# Der Pfad steht zu Beginn des Kapitels}

\NormalTok{mariokart }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{price\_mw =} \FunctionTok{mean}\NormalTok{(start\_pr),}
            \AttributeTok{price\_md =} \FunctionTok{median}\NormalTok{(start\_pr))}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}rr@{}}
\toprule\noalign{}
price\_mw & price\_md \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
8.777203 & 1 \\
\end{longtable}

Wie man sieht, ist der Mittelwert gr√∂√üer als der Median, s.
Abbildung~\ref{fig-mario-md}.

\begin{figure}

\centering{

\includegraphics{050-zusammenfassen_files/figure-pdf/fig-mario-md-1.pdf}

}

\caption{\label{fig-mario-md}Das Start-Gebot bei Mariokart-Spielen ist
schief verteilt: Median und Mittelwert sind unterschiedlich}

\end{figure}%

\end{example}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Klaffen Mittelwert und Median auseinander, so liegt eine schiefe
Verteilung vor. Ist der Mittelwert gr√∂√üer als der Median, so nennt man
die Verteilung rechtsschief. Bei schiefen Verteilungen ist der Median
dem Mittelwert als Modell f√ºr den ``typischen Wert'' vorzuziehen.

\end{tcolorbox}

\begin{exercise}[Mariokart ohne
Extremwerte]\protect\hypertarget{exr-mw-no-extrem}{}\label{exr-mw-no-extrem}

Im Datensatz \texttt{mariokart} gibt es einige wenige Spiele, die f√ºr
einen vergleichsweise hohen Preis verkauft wurden. Diese Extremwerte
verzerren den mittleren Verkaufspreis m√∂glicherweise √ºber die Geb√ºhr.
\(\square\)

\end{exercise}

\subsection{Aufgabe}

Entfernen Sie diese Werte und berechnen Sie dann Mittelwert und Median
erneut. Vergleichen Sie die Ergebnisse.

\subsection{L√∂sung}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart2 }\OtherTok{\textless{}{-}} 
\NormalTok{mariokart }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{filter}\NormalTok{(total\_pr }\SpecialCharTok{\textless{}} \DecValTok{100}\NormalTok{)}

\CommentTok{\# ohne Extremwerte:}
\NormalTok{mariokart2 }\SpecialCharTok{|\textgreater{}} 
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{total\_pr\_mittelwert =} \FunctionTok{mean}\NormalTok{(total\_pr),}
            \AttributeTok{total\_pr\_median =} \FunctionTok{median}\NormalTok{(total\_pr))}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}rr@{}}
\toprule\noalign{}
total\_pr\_mittelwert & total\_pr\_median \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
47.43191 & 46.03 \\
\end{longtable}

\begin{Shaded}
\begin{Highlighting}[]

\CommentTok{\# mit Extremwerten:}
\NormalTok{mariokart }\SpecialCharTok{|\textgreater{}} 
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{total\_pr\_mittelwert =} \FunctionTok{mean}\NormalTok{(total\_pr),}
            \AttributeTok{total\_pr\_median =} \FunctionTok{median}\NormalTok{(total\_pr))}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}rr@{}}
\toprule\noalign{}
total\_pr\_mittelwert & total\_pr\_median \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
49.88049 & 46.5 \\
\end{longtable}

\begin{exercise}[]\protect\hypertarget{exr-mw-wealthmd}{}\label{exr-mw-wealthmd}

Was sch√§tzen Sie, wie hoch das \emph{mediane} Verm√∂gen des Haushalte in
Deutschland in etwa ist (Stand 2016)?\footnote{Quelle: WSI,
  \url{https://www.wsi.de/en/how-is-wealth-distributed-in-germany-14401.htm},
  Abruf 2023-04-19. Die Antwort lautet: ca. 60 Tsd Euro laut der
  angegebenen Quelle.})

\begin{enumerate}
\def\labelenumi{\alph{enumi})}
\tightlist
\item
  50.000 Euro
\item
  100.000 Euro
\item
  150.000 Euro
\item
  200.000 Euro
\item
  250.000 Euro\(\square\)
\end{enumerate}

\end{exercise}

\begin{exercise}[]\protect\hypertarget{exr-mw-wealthmd}{}\label{exr-mw-wealthmd}

Was sch√§tzen Sie, wie gro√ü der \emph{Unterschied} zwischen medianem und
mittlerem (arithm. Mittel) des Jahreseinkommen deutscher Haushalte
ungef√§hr ist?\footnote{Quelle:
  \href{https://de.wikipedia.org/wiki/Einkommensverteilung_in_Deutschland}{Wikipedia},
  Abruf 2023-04-19, der Unterschied betr√§gt knapp 3000 Euro laut der
  Quelle.})

\begin{enumerate}
\def\labelenumi{\alph{enumi})}
\tightlist
\item
  1.000 Euro
\item
  2.000 Euro
\item
  3.000 Euro
\item
  4.000 Euro
\item
  5.000 Euro\(\square\)
\end{enumerate}

\end{exercise}

\section{Quantile}\label{quantile}

Der Median teilt eine Verteilung in eine untere und ein obere H√§lfte. Er
markiert sozusagen eine ``50-Prozent-Marke'' (der aufsteigend sortierten
Beobachtungen). Betrachten wir einmal nur alle Spiele, die f√ºr weniger
als 100 Euro verkauft wurden (\texttt{total\_pr}, finales
Verkaufsgebot), s. Abbildung~\ref{fig-quantile-mario}. 50\% aller Spiele
wurden f√ºr weniger als ca. 46 Euro verkauft; 50\% aller Spiele f√ºr mehr
als 46 Euro. Der Median betr√§gt als 46 Euro.

Jetzt k√∂nnten wir nur die g√ºnstigere H√§lfte betrachten und wieder nach
dem Median fragen (d.h. \texttt{total\_pr\ \textless{}\ 46}). Dieser
``Median der g√ºnstigeren H√§lfte'' grenzt damit das insgesamt g√ºnstigste
Viertel vom Rest der Verkaufsgebote ab. In unserem Datensatz liegt
dieser Wert bei ca. 41 Euro. Entsprechend kann man nach dem Wert fragen,
der das oberste Viertel vom Rest der Verkaufsgebote abtrennt. Dieser
Wert liegt bei ca. 54 Euro.

\begin{definition}[Quartile]\protect\hypertarget{def-quartile}{}\label{def-quartile}

Sortiert man die Daten aufsteigend, so nennt man den Wert, der das
Viertel mit den kleisten Wert vom Rest der Daten trennt das \emph{erste
Quartil} (Q1, 25\%). Den Median nennt man das \emph{zweite Quartil} (Q2,
50\%). Entsprechend hei√üt der Wert, der die drei Viertel kleinsten Werte
vom oberen Viertel abtrennt, das \emph{dritte Quartil} (Q3,
75\%).\(\square\)

\end{definition}

\begin{example}[Quartile des
Verkaufsgebot]\protect\hypertarget{exm-mario-qs}{}\label{exm-mario-qs}

Abbildung~\ref{fig-quantile-mario} zeigt die Quartile f√ºr das
Verkaufsgebot.\(\square\)

\end{example}

Jetzt k√∂nnte man sagen, hey, warum nur in 25\%-St√ºcke die Verteilung
aufteilen? Warum nicht in 10\%-Schritten?

\begin{definition}[Dezile]\protect\hypertarget{def-dezile}{}\label{def-dezile}

Die neun Quantile \(p= 0.1, 0.2, \ldots, 1\), die die Verteilung in 10
gleiche Teile unterteilen, nennt man Dezile. \(\square\)

\end{definition}

Oder vielleicht in 1\%-Schritten oder in sonstigen Schnitten? Wo die
Quartile in 25\%-Schritten aufteilen, teilt in \emph{Quantil} in
\(p\)-Prozent-Schritten auf.

\begin{definition}[Quantile]\protect\hypertarget{def-quantile}{}\label{def-quantile}

Ein p-Quantil ist der Wert, der von \(p\) Prozent der Werte nicht
√ºberschritten wird.\(\square\)

\end{definition}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Ein Quantil ist ein Oberbegriff f√ºr Quartile, Dezile, etc. \(\square\)

\end{tcolorbox}

Abbildung~\ref{fig-quantile-mario} zeigt das 1. (Q1), das 2. (Median)
und das 3. Quartil f√ºr den Datensatz \texttt{mariokart2}.

\begin{figure}

\centering{

\subsection{Histogramm}

\centering{

\includegraphics{050-zusammenfassen_files/figure-pdf/fig-mario-qs1-1.pdf}

}

\subcaption{\label{fig-mario-qs1}Q1, Q2 und Q3 f√ºr das Schlussgebot (nur
Spiele f√ºr weniger als 100 Euro)}

\subsection{Dichtediagramm}

\centering{

\includegraphics{050-zusammenfassen_files/figure-pdf/fig-mario-qs2-1.pdf}

}

\subcaption{\label{fig-mario-qs2}Q1, Q2 und Q3 f√ºr das Schlussgebot (nur
Spiele f√ºr weniger als 100 Euro)}

}

\caption{\label{fig-quantile-mario}Verschiedene Arten von Quantilen.}

\end{figure}%

\emph{Quantile} kann man in R mit dem Befehl \texttt{quantile()}
berechnen:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mario\_quantile }\OtherTok{\textless{}{-}} 
\NormalTok{mariokart }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{filter}\NormalTok{(total\_pr }\SpecialCharTok{\textless{}} \DecValTok{100}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{q25 =} \FunctionTok{quantile}\NormalTok{(total\_pr, .}\DecValTok{25}\NormalTok{),}
            \AttributeTok{q50 =} \FunctionTok{quantile}\NormalTok{(total\_pr, .}\DecValTok{50}\NormalTok{),}
            \AttributeTok{q75 =} \FunctionTok{quantile}\NormalTok{(total\_pr, .}\DecValTok{75}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

Abbildung~\ref{fig-quantile-mosaic} visualisiert verschiedene Quantile.
Man beachte, dass alle Regionen gleichgro√üe Fl√§chen (d.h.
Wahrscheinlichkeitsmassen) aufweisen.

\begin{figure}

\centering{

\subsection{25\%-Schritte: Quartile}

\includegraphics[width=0.5\textwidth,height=\textheight]{050-zusammenfassen_files/figure-pdf/unnamed-chunk-12-1.pdf}

\subsection{10\%-Schritte: Dezile}

\includegraphics[width=0.5\textwidth,height=\textheight]{050-zusammenfassen_files/figure-pdf/unnamed-chunk-13-1.pdf}

\subsection{1\%-Schritte: Perzentile}

\includegraphics[width=0.5\textwidth,height=\textheight]{050-zusammenfassen_files/figure-pdf/unnamed-chunk-14-1.pdf}

}

\caption{\label{fig-quantile-mosaic}Verschiedene Quantile visualisiert.
In jedem Diagramm sind die Regionen gleich gro√ü, beinhalten also
(ungef√§hr) die gleiche Anzahl von Beobachtungen.}

\end{figure}%

\section{Lagema√üe}\label{sec-lage}

\begin{quote}
{\emoji{student}} Was ist der Oberbegriff f√ºr Median, Mittelwert und so
weiter?
\end{quote}

\begin{quote}
{\emoji{teacher}} Gute Frage! Wie w√ºrden Sie ihn nennen?
\end{quote}

\begin{definition}[Lagema√ü]\protect\hypertarget{def-lage}{}\label{def-lage}

Ein \emph{Lagema√ü} (synonym: Ma√ü der zentralen Tendenz) f√ºr eine
Verteilung gibt einen Vorschlag, welchen Wert der Verteilung wir als
typisch, normal, erwartbar, repr√§sentativ oder ``mittel'' ansehen
sollten.\(\square\)

\end{definition}

\begin{example}[]\protect\hypertarget{exm-lagema√üe}{}\label{exm-lagema√üe}

Gebr√§uchliche Lagema√üe sind:

\begin{itemize}
\tightlist
\item
  Mittelwert (arithmetisches Mittel)
\item
  Median
\item
  Quartile
\item
  Quantile
\item
  Minimum (kleinster Wert)
\item
  Maximum (gr√∂√üter Wert)
\item
  Modus (h√§ufigster Wert) \(\square\)
\end{itemize}

\end{example}

Berechnen wir Lagema√üe f√ºr den Mariokart-Datensatz, s.
Listing~\ref{lst-mario-lage}.\footnote{Es ist √ºbrigens egal, wie sie die
  Variablen benennen, die Sie berechnen: \texttt{mw} oder
  \texttt{mittelwert} oder \texttt{mean} oder
  \texttt{mein\_krasser\_variablenname} -- alles okay!}

\begin{codelisting}

\caption{\label{lst-mario-lage}Syntax zur Berechnung von Lagema√üen}

\centering{

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart\_lagema√üe\_total\_pr }\OtherTok{\textless{}{-}}
\NormalTok{  mariokart }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{mw =} \FunctionTok{mean}\NormalTok{(total\_pr),}
            \AttributeTok{md =} \FunctionTok{median}\NormalTok{(total\_pr),}
            \AttributeTok{q1 =} \FunctionTok{quantile}\NormalTok{(total\_pr, .}\DecValTok{25}\NormalTok{),}
            \AttributeTok{q2 =} \FunctionTok{quantile}\NormalTok{(total\_pr, .}\DecValTok{5}\NormalTok{),}
            \AttributeTok{q3 =} \FunctionTok{quantile}\NormalTok{(total\_pr, .}\DecValTok{75}\NormalTok{),}
            \AttributeTok{min =} \FunctionTok{min}\NormalTok{(total\_pr),}
            \AttributeTok{max =} \FunctionTok{max}\NormalTok{(total\_pr))}
\NormalTok{mariokart\_lagema√üe\_total\_pr}
\end{Highlighting}
\end{Shaded}

\begin{longtable*}[]{@{}rrrrrrr@{}}
\toprule\noalign{}
mw & md & q1 & q2 & q3 & min & max \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
49.88049 & 46.5 & 41.175 & 46.5 & 53.99 & 28.98 & 326.51 \\
\end{longtable*}

}

\end{codelisting}%

\subsection{Gruppierte Lagema√üe}\label{gruppierte-lagemauxdfe}

H√§ufig m√∂chte man Statistiken wie Lagema√üe f√ºr mehrere Teilgruppen --
z.B. Mittlere K√∂rpergr√∂√üe von Frauen vs.~Mittlere K√∂rpergr√∂√üe von M√§nner
-- berechnen und dann vergleichen. Die zugrundeliegende stehende
\emph{Forschungsfrage} k√∂nnte lauten:

\begin{quote}
Unterscheidet sich die mittlere K√∂rpergr√∂√üe von Frauen und M√§nnern?
\end{quote}

Oder vielleicht:

\begin{quote}
Hat das Geschlecht einen Einfluss auf die K√∂rpergr√∂√üe?
\end{quote}

Anders ausgedr√ºckt:

\begin{quote}
K√∂rpergr√∂√üe \(\color{ycol}{\text{y}}\) ist eine Funktion des Geschlechts
\(\color{xcol}{G}\).
\end{quote}

Die \emph{Modellformel} k√∂nnte also lauten:

\[\color{ycol}{y} \; \color{black}{ \sim } \; \color{xcol}{G}\]

Gruppierte Lagema√üe lassen sich in R z.B. so berechnen, s.
Listing~\ref{lst-mario-lage-gruppiert}, also √§hnlich wie in
Listing~\ref{lst-mario-lage}.

\begin{codelisting}

\caption{\label{lst-mario-lage-gruppiert}Gruppierte Lagema√üe}

\centering{

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart\_lagema√üe\_gruppiert }\OtherTok{\textless{}{-}}
\NormalTok{  mariokart }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{group\_by}\NormalTok{(wheels) }\SpecialCharTok{\%\textgreater{}\%}  \CommentTok{\# neue Zeile, der Rest ist gleich!}
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{mw =} \FunctionTok{mean}\NormalTok{(total\_pr))}

\NormalTok{mariokart\_lagema√üe\_gruppiert}
\end{Highlighting}
\end{Shaded}

\begin{longtable*}[]{@{}rr@{}}
\toprule\noalign{}
wheels & mw \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
0 & 41.05973 \\
1 & 44.16885 \\
2 & 61.02745 \\
3 & 69.75000 \\
4 & 65.02000 \\
\end{longtable*}

}

\end{codelisting}%

Abbildung~\ref{fig-mw3} zeigt ein Beispiel f√ºr ungruppierte (links) bzw.
gruppierte (rechts) Mittelwerte; vgl. Abbildung~\ref{fig-mw2}. Wie man
in dem Diagramm sieht, kann das \emph{Residuum kleiner} werden bei einer
Gruppierung (im Vergleich zu einem ungruppierten, ``globalen''
Mittelwert): Innerhalb der Gruppe ohne Lenkr√§der und innerhalb der
Gruppe mit 2 Lenkr√§dern sind die Abweichungen zu ihrem
Gruppen-Mittelwert relativ gering -- im Vergleich zu den Abweichungen
der Preise zum ungruppierten Mittelwert.

\begin{figure}

\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{050-zusammenfassen_files/figure-pdf/fig-mw3-1.pdf}

}

\subcaption{\label{fig-mw3-1}Mittelwert f√ºr Verkaufspreis (ungruppiert)}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{050-zusammenfassen_files/figure-pdf/fig-mw3-2.pdf}

}

\subcaption{\label{fig-mw3-2}Mittelwert f√ºr Verkaufspreis gruppiert nach
Anzahl der Lenkr√§der}

\end{minipage}%

\caption{\label{fig-mw3}Der mittlere Preis von Mariokart-Spielen als
horizontale Gerade eingezeichnet}

\end{figure}%

\begin{definition}[Punktmodell]\protect\hypertarget{def-punktmodell}{}\label{def-punktmodell}

Ein Modell, welches f√ºr alle Beobachtungen ein und denselben Wert
annimmt (vorhersagt), hei√üt ein \emph{Punktmodell}. Anders gesagt fasst
ein Punktmodell eine Wertereihe (h√§ufig ist das eine Tabellenspalte) zu
einer einzelnen Zahl zusammen, einem ``Punkt'' in diesem Sinne, s.
Gleichung~\ref{eq-desk}.\(\square\)

\end{definition}

\begin{equation}\phantomsection\label{eq-desk}{\begin{array}{|c|} \hline \\ \hline \\\\\\ \hline \end{array} \qquad \rightarrow \qquad \begin{array}{|c|} \hline \\ \hline  \hline \end{array}}\end{equation}

Mittelwert, Median und Quartile sind Beispiele f√ºr Punktmodelle: Sie
fassen eine Verteilung zu einem einzelnen Wert zusammen und geben uns
ein ``Bild'' der Daten, machen Sie uns verst√§ndlich - sie sind uns ein
Modell.

\section{Wie man mit Statistik
l√ºgt}\label{wie-man-mit-statistik-luxfcgt-2}

Mit Statistik kann man vortrefflich l√ºgen, hei√üt es. Woran liegt das?
Der Grund ist, dass die Statistik Freiheitsgrade l√§sst: Es gibt nicht
nur einen richtigen Weg, um eine statistische Analyse durchzuf√ºhren.
Viele Wege f√ºhren nach Rom (aber nicht alle). Um Manipulationsversuche
abzuwehren oder einfache Fehler und Unsch√§rfen ohne b√∂se Abwehr
aufzudecken, gibt es ein probates Gegenmittel: \emph{Transparenz}.

\phantomsection\label{callout-important}
Stellen Sie hohe Anforderung an die Transparenz einer statistischen
Analyse. Nur durch Nachpr√ºfbarkeit k√∂nnen Sie sich von der
Stichhaltigkeit der Ergebnisse und deren Interpretation √ºberzeugen.

Hier ist eine (nicht abschlie√üende!) Checkliste, was Sie nachpr√ºfen
sollten, um die Belastbarkeit einer Analyse sicherzustellen
(\textbf{wicherts\_degrees\_2016-1?}):

\begin{longtable*}{rl}
\toprule
Nr & Check \\ 
\midrule\addlinespace[2.5pt]
1 & Wurde die Art und die Zeitdauer der Datenerhebung vorab festgelegt und berichtet? \\ 
2 & Wurden ausreichend Daten gesammelt (z.B. mind. 20 Beobachtungen pro Gruppe)? \\ 
3 & Wurden alle untersuchten Variablen berichtet? \\ 
4 & Wurden alle durchgef√ºhrten Interventionen berichtet? \\ 
5 & Wurden Daten aus der Analyse entfernt? Wenn ja, gibt es eine (stichhaltige) Begr√ºndung? \\ 
\bottomrule
\end{longtable*}

\section{Vertiefung}\label{vertiefung-5}

\begin{example}[Survival-Tipp]\protect\hypertarget{exm-survival1}{}\label{exm-survival1}

Eine Studentin aus dem dem Bachelorstudiengang ``Angewandte Medien- und
Wirtschaftspsychologie'' mit Schwerpunkt \emph{Data Science} berichtet
ihre ``Survival-Tipps'' f√ºr Statistik.

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Wenn man mal nicht weiterkommt, hilft es auch mal ein paar Tage
  Abstand von R und Statistik zu nehmen.
\item
  Es hilft, sich w√§hrend des Semesters neue Begriffe und ihre Erkl√§rung
  zusammenschreiben.
\item
  Gut ist auch, sich mit KommilitonInnen auszutauschen oder in h√∂heren
  Semestern nach Tipps fragen.\(\square\)
\end{enumerate}

\end{example}

\begin{quote}
{\emoji{student}} Irgendwie kann ich mir R-Code so schlecht merken.
\end{quote}

\begin{quote}
{\emoji{teacher}} Frag doch mal ChatGPT, oder einen anderen Chatbot, da
bekommt man auch R-Code ausgegegeben.
\end{quote}

\begin{exercise}[√úbungsfragen vom
Chat-Bot]\protect\hypertarget{exr-chatgpt}{}\label{exr-chatgpt}

Fragen Sie einen Chat-Bot wie ChatGPT nach √úbungsaufgaben.

Sie k√∂nnen sich an folgenden Prompt orientieren. Empfehlenswert ist mit
verschiedenen Prompts zu experimentieren.

\begin{quote}
{\emoji{student}} Ich bin ein Student in einem Bachelor-Studiengang f√ºr
Psychologie. Gerade bereite ich mich auf die Klausur im Fach
``Grundlagen der Statistik'' vor. Bitte schreibe mir Aufgaben, die mir
helfen, mich auf die Pr√ºfung vorzubereiten. Die Fragen sollten folgende
Themen beinhalten: Ma√üe der zentralen Tendenz, Grundlagen von R,
Skalenniveau (z.B. Nominalskala vs.~Intervallskala), Verteilungsformen,
Normalverteilungen, z-Werte. Bitte schreibe die Aufgabe im Stil von
Richtig-Falsch-Aufgaben. Schreibe ca. 10 Aufgaben.
\end{quote}

\(\square\)

\end{exercise}

\section{Aufgaben}\label{aufgaben-4}

Ein Teil der folgenden Aufgaben kann Stoff beinhalten, den Sie noch
nicht kennen, aber sp√§ter kennenlernen. Ignorieren Sie daher
Aufgaben(teile) mit (noch) unbekannte Stoff.

Die Webseite \href{https://datenwerk.netlify.app}{datenwerk.netlify.app}
stellt eine Reihe von einschl√§gigen √úbungsaufgaben bereit. Sie k√∂nnen
die Suchfunktion der Webseite nutzen, um die Aufgaben mit den folgenden
Namen zu suchen:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \href{https://datenwerk.netlify.app/posts/kennwert-robust/kennwert-robust}{Kennwert-robust}
\item
  \href{https://datenwerk.netlify.app/posts/mw-berechnen/mw-berechnen.html}{mw-berechnen}
\item
  \href{https://datenwerk.netlify.app/posts/mariokart-max2/mariokart-max2.html}{mariokart-max2}
\item
  \href{https://datenwerk.netlify.app/posts/nasa01/nasa01.html}{nasa01}
\item
  \href{https://datenwerk.netlify.app/posts/mariokart-mean1/mariokart-mean1.html}{mariokart-mean1}
\item
  \href{https://datenwerk.netlify.app/posts/wrangle10/wrangle10.html}{wrangle10}
\item
  \href{https://datenwerk.netlify.app/posts/summarise01/summarise01.html}{summarise01}
\item
  \href{https://datenwerk.netlify.app/posts/mariokart-max1/mariokart-max1.html}{mariokart-max1}
\item
  \href{https://datenwerk.netlify.app/posts/schiefe1/schiefe1}{Schiefe1}
\item
  \href{https://datenwerk.netlify.app/posts/mariokart-mean2/mariokart-mean2.html}{mariokart-mean2}
\item
  \href{https://datenwerk.netlify.app/posts/summarise03/summarise03.html}{summarise03}
\item
  \href{https://datenwerk.netlify.app/posts/mariokart-mean4/mariokart-mean4.html}{mariokart-mean4}
\item
  \href{https://datenwerk.netlify.app/posts/mariokart-mean3/mariokart-mean3.html}{mariokart-mean3}
\item
  \href{https://datenwerk.netlify.app/posts/summarise02/summarise02.html}{summarise02}
\end{enumerate}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-tip-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-tip-color}{\faLightbulb}\hspace{0.5em}{Tipp}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-tip-color-frame]

Schauen Sie sich auch mal auf
\href{https://datenwerk.netlify.app}{datenwerk.netlify.app} die Aufgaben
zu z.B. dem Tag \href{https://datenwerk.netlify.app/\#category=eda}{EDA}
an. \(\square\)

\end{tcolorbox}

\begin{exercise}[]\protect\hypertarget{exr-datensaetze}{}\label{exr-datensaetze}

Mittlerweile verf√ºgen Sie die wesentlichen Werkzeuge des Datenjudo.
\href{https://data-se.netlify.app/2022/02/23/data-sets-for-for-teaching/}{Hier}
finden Sie einen √úberblick an Datens√§tze, die Sie nach Herzenslust
analysieren k√∂nnen.\footnote{\url{https://data-se.netlify.app/2022/02/23/data-sets-for-for-teaching/}}
\(\square\)

\end{exercise}

\section{Literaturhinweise}\label{literaturhinweise-4}

Es gibt viele Lehrb√ºcher zu den Grundlagen der Statistik; die Inhalte
dieses Kapitels geh√∂ren zu den Grundlagen der Statistik. Vielleicht ist
es am einfachsten, wenn Sie einfach in Ihrer Bibliothek des Vertrauens
nach einem typischen Lehrbuch schauen. Beispiel f√ºr Lehrb√ºcher sind
Mittag und Sch√ºller (2020) oder Oestreich und Romberg (2014); ein
Klassiker ist Bortz und Schuster (2010). Ein Fokus auf R legt
(\textbf{sauer\_moderne\_2019-1?}). Wer vor Englisch nicht
zur√ºckschreckt, ist mit
(\textbf{cetinkaya-rundel\_introduction\_2021-2?}) oder
(\textbf{poldrack\_statistical\_2022-1?}) gut beraten. Beide B√ºcher sind
online verf√ºgbar. Tipp: Mit dem Browser einfach auf Deutsch √ºbersetzen.

\section{Literatur}\label{literatur-4}

\chapter{Modellg√ºte}\label{modellguxfcte}

\section{Lernsteuerung}\label{lernsteuerung-5}

\subsection{Standort im Lernpfad}\label{standort-im-lernpfad-5}

Abbildung~\ref{fig-ueberblick} zeigt den Standort dieses Kapitels im
Lernpfad und gibt damit einen √úberblick √ºber das Thema dieses Kapitels
im Kontext aller Kapitel.

\subsection{Lernziele}\label{lernziele-6}

\begin{itemize}
\tightlist
\item
  Sie kennen g√§ngige Ma√üe der Streuung einer Stichprobe und k√∂nnen diese
  definieren und mit Beispielen erl√§utern.
\item
  Sie k√∂nnen g√§ngige Ma√üe der Streuung einer Stichprobe mit R berechnen.
\item
  Sie k√∂nnen die Bedeutung von Streuung f√ºr die G√ºte eines Modells
  erl√§utern.
\end{itemize}

\subsection{Ben√∂tigte R-Pakete}\label{benuxf6tigte-r-pakete-4}

In diesem Kapitel ben√∂tigen Sie folgende R-Pakete.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(tidyverse)}
\FunctionTok{library}\NormalTok{(easystats)}
\FunctionTok{library}\NormalTok{(DataExplorer)}
\end{Highlighting}
\end{Shaded}

\subsection{Ben√∂tigte Daten}\label{benuxf6tigte-daten-4}

Listing~\ref{lst-mario-path} definiert den Pfad zum Datensatz
\texttt{mariokart} und importiert die zugeh√∂rige CSV-Datei in R, so dass
wir einen Tibble mit Namen \texttt{mariokart} erhalten.

\begin{codelisting}

\caption{\label{lst-mario-path}Pfad zum Datensatz `mariokart'}

\centering{

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart\_path }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(}
  \StringTok{"https://vincentarelbundock.github.io/Rdatasets/"}\NormalTok{,}
  \StringTok{"csv/openintro/mariokart.csv"}\NormalTok{)}

\NormalTok{mariokart }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(mariokart\_path)}
\end{Highlighting}
\end{Shaded}

}

\end{codelisting}%

\subsection{Zum Einstieg}\label{zum-einstieg-1}

\begin{exercise}[Freiwillige
vor!]\protect\hypertarget{exr-streuung-erkennen}{}\label{exr-streuung-erkennen}

F√ºr diese kleine Live-Demonstration brauchen wir einige Freiwillige. Die
Lehrkraft teilt die Freiwilligen in zwei Gruppen, Gruppe
\emph{Gleich-Gro√ü} und Gruppe \emph{Verschieden-Gro√ü}. Erkennen Sie,
dass die \emph{Unterschiedlichkeit} der Gr√∂√üe in Gruppe
\emph{Gleich-Gro√ü} gering ist, aber in Gruppe \emph{Verschieden-Gro√ü}
hoch? \(\square\)

\end{exercise}

\section{Warum Sie die Streuung Ihrer Daten kennen
sollten}\label{warum-sie-die-streuung-ihrer-daten-kennen-sollten}

\subsection{Die Schlankheitspille von
Prof.~Weiss-Ois}\label{sec-weiss-ois}

Prof.~Weiss-Ois hat eine Erfindung gemacht, eine
Schlankheitspille.\footnote{Bilduelle: Icon unter Flaticon licence,
  Autor: iconixar, \url{https://www.flaticon.com/free-icons/professor}}

\begin{figure}

\begin{minipage}{0.45\linewidth}

\subsubsection{Was er sagt}\label{was-er-sagt}

\begin{figure}[H]

{\centering \includegraphics[width=0.25\textwidth,height=\textheight]{img/teacher.png}

}

\subcaption{``Ich habe eine Schlankheitspille entwickelt, die pro
Einnahme das Gewicht im Schnitt um 1kg reduziert!''}

\end{figure}%

\end{minipage}%
%
\begin{minipage}{0.10\linewidth}

\end{minipage}%
%
\begin{minipage}{0.45\linewidth}

\subsubsection{Was er NICHT sagt}\label{was-er-nicht-sagt}

\begin{figure}[H]

{\centering \includegraphics[width=0.25\textwidth,height=\textheight]{img/teacher.png}

}

\subcaption{``Allerdings streuten die Werte der Gewichtsver√§nderung um
10kg um den Mittelwert herum.''}

\end{figure}%

\end{minipage}%

\end{figure}%

W√ºrden Sie die Pille von Prof.~I. Ch. Weiss-Ois nehmen?\footnote{Ich auf
  keinen Fall.}

\begin{enumerate}
\def\labelenumi{\alph{enumi})}
\tightlist
\item
  ja
\item
  nein
\item
  Nur wenn ich 100 Euro bekomme
\item
  Okay, f√ºr 1000 Euro\(\square\)
\end{enumerate}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-important-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-important-color}{\faExclamation}\hspace{0.5em}{Wichtig}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-important-color-frame]

Wie sehr die Werte eines Modells streuen, ist eine wichtige
Information.\(\square\)

\end{tcolorbox}

\subsection{Wie man seine Kuh √ºber den Fluss
bringt}\label{wie-man-seine-kuh-uxfcber-den-fluss-bringt}

Treffen sich zwei Bauern, Fritz Furchenzieher und Karla Kartoffelsack.
Fritz will mit seiner Kuh einen Fluss √ºberqueren, nur kann die Kuh nicht
schwimmen\footnote{ob es Fritz kann, ist nicht √ºberliefert.}.

\begin{quote}
{\emoji{man-farmer}} (Fritz): Sag mal, Karla, ist der Fluss tief?
\end{quote}

\begin{quote}
{\emoji{woman-farmer}} (Karla): N√∂, im Schnitt nur einen Meter.
\end{quote}

Also f√ºhrt Fritz seine Kuh durch den Fluss, leider kam die Kuh nicht am
anderen Ufer an, im Flo√ü ersoffen, s. Abbildung~\ref{fig-fluss-tief}.

\begin{figure}

\centering{

\includegraphics{img/fluss-tief.png}

}

\caption{\label{fig-fluss-tief}Der Fluss ist im Schnitt nur einen Meter
tief, trotzdem ist die Kuh ersoffen.}

\end{figure}%

\begin{quote}
{\emoji{woman-farmer}} (Karla): √úbrigens, Lagema√üe sagen nicht alles,
Fritz.
\end{quote}

\begin{quote}
{\emoji{man-farmer}} (Fritz): L√§uft die Kuh durch den Fluss, kann sie
schwimmen oder 's ist Schluss.
\end{quote}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-important-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-important-color}{\faExclamation}\hspace{0.5em}{Wichtig}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-important-color-frame]

Die Streuung ihrer Daten zu kennen ist eine wesentliche Information.
\(\square\)

\end{tcolorbox}

\section{Woran erkennt man ein gutes
Modell?}\label{woran-erkennt-man-ein-gutes-modell}

Abbildung~\ref{fig-streuung} zeigt ein einfaches Modell (Mittelwert) mit
wenig Streuung (links) vs.~ein einfaches Modell mit viel Streuung
(rechts). Links ist die Streuung der Schlankheitspille
\emph{Dicktableitin} und rechts von der Schlankheitspille
\emph{Pfundafliptan} abgetragen.

\begin{figure}

\centering{

\includegraphics{060-modellguete_files/figure-pdf/fig-streuung-1.pdf}

}

\caption{\label{fig-streuung}Ein Modell mit wenig Streuung (links)
vs.~ein Modell mit viel Streuung (rechts). Die vertikalen grauen Balken
kennzeichnen den (absoluten) Abstand von jeweils einem Datenpunkt zum
Mittelwert (horizontale orange Linie). Je l√§nger die `Abstandsbalken',
desto gr√∂√üer die Streuung.}

\end{figure}%

Bei einem Modell mit \emph{wenig} Streuung liegen die tats√§chlichen,
beobachtete Werte (\(y\)) nah an den Modellwerten (vorhergesagten
Werten, \(\hat{y}\)); die Abweichungen \(e = y - \hat{y}\) sind also
gering (der Modellfehler ist klein). Bei einem Modell mit \emph{viel}
Streuung ist der Modellfehler \(e\) (im Vergleich dazu) gro√ü.

\begin{example}[Daten zur Schlankheitskur von
Prof.~Weiss-Ois]\protect\hypertarget{exm-weiss-ois}{}\label{exm-weiss-ois}

In Abbildung~\ref{fig-streuung} sind die Daten zu der
Gewichtsver√§nderung nach Einnahme von ``Schlankheitspillen'' zweier
verschiedener Pr√§parate. Wie man sieht unterscheidet sich die typische
(vorhergesagte) Gewichtsver√§nderung zwischen den beiden Pr√§paraten kaum.
Die Streuung allerdings schon. Links sieht man die Gewichtsver√§nderungen
nach Einnahme des Pr√§parats ``Dickableibtin extra mild'' (c) und rechts
das Pr√§parat von Prof.~Weiss-Ois ``Pfundafliptan Forte''. Welches
Pr√§parat w√ºrden Sie lieber einnehmen?\(\square\)

\end{example}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-important-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-important-color}{\faExclamation}\hspace{0.5em}{Wichtig}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-important-color-frame]

Wir wollen ein pr√§zises Modell, also kurze Fehlerbalken: Das Modell soll
die Daten gut erkl√§ren, also wenig vom tats√§chlichen Wert abweichen.
Jedes Modell sollte Informationen √ºber die Pr√§zision des Modellwerts
bzw. der Modellwerte (Vorhersagen) angeben. Ein Modell ohne Angaben der
Modellg√ºte, d.h. der Pr√§zision der Sch√§tzung des Modellwerts, ist wenig
n√ºtze.\(\square\)

\end{tcolorbox}

\begin{quote}
{\emoji{student}} Ich frage mich, ob man so ein Modell nicht verbessern
kann?
\end{quote}

\begin{quote}
{\emoji{teacher}} Die Frage ist, was wir mit ``verbessern'' meinen?
\end{quote}

\begin{quote}
{\emoji{student}} Naja, k√ºrzere Fehlerbalken, ist doch klar!
\end{quote}

Da die Anzahl der Lenkr√§der mit dem Verkaufsgebot zusammenh√§ngt, k√∂nnte
es vielleicht sein, dass wir die Lenkr√§der-Anzahl da irgendwie nutzen
k√∂nnten. Das sollten wir ausprobieren.

Abbildung~\ref{fig-fehler-red} zeigt, dass die Fehlerbalken
\emph{k√ºrzer} werden, wenn wir ein (sinnvolles) komplexeres Modell
finden. Innerhalb jeder der beiden Gruppen (mit 2 Lenkr√§dern vs.~mit 0
Lenkr√§dern) sind die Fehlerbalken jeweils im Durchschnitt k√ºrzer
(rechtes Teildiagramm) als im Modell ohne Gruppierung (linkes
Teildiagramm).\footnote{Aus Gr√ºnden der √úbersichtlichkeit wurden nur
  Autos mit Verkaufsgebot von weniger als 100 Euros ber√ºcksichtigt und
  nur Spiele mit 0 oder mit 2 Lenkr√§dern.}

\begin{figure}

\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{060-modellguete_files/figure-pdf/fig-fehler-red-1.pdf}

}

\subcaption{\label{fig-fehler-red-1}Fehlerbalken im einfachen Modell:
Ein Mittelwert; viel Streuung insgesamt}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{060-modellguete_files/figure-pdf/fig-fehler-red-2.pdf}

}

\subcaption{\label{fig-fehler-red-2}Fehlerbalken im komplexen Modell:
Zwei Mittelwerte; weniger Streuung in jeder Gruppe. Das erkennt man
daran, dass die vertikalen, grauen Abstandsbalken im Schnitt k√ºrzer sind
als im einfachen Modell (links)}

\end{minipage}%

\caption{\label{fig-fehler-red}Fehlerbalken in einem einfachen und
komplexeren Modell}

\end{figure}%

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-important-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-important-color}{\faExclamation}\hspace{0.5em}{Wichtig}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-important-color-frame]

Durch sinnvolle, komplexere Modelle sinkt die Fehlerstreuung eines
Modells.\(\square\)

\end{tcolorbox}

\section{Streuungsma√üe}\label{sec-streuung}

\begin{definition}[Streuungsma√üe]\protect\hypertarget{def-streuungsma√üe}{}\label{def-streuungsma√üe}

Ein Streuungsma√ü quantifiziert die Variabilit√§t (Unterschiedlichkeit,
Streuung) eines Merkmals. \(\square\)

\end{definition}

\begin{definition}[]\protect\hypertarget{def-range}{}\label{def-range}

Ein einfaches Streuungsma√ü ist der \emph{Range} \(R\), definiert als
Abstand von gr√∂√ütem und kleinsten Wert eines Merkmals \(X\): \$R =
X\_\{max\} - X\_\{min\}. \(\square\)

\end{definition}

\begin{example}[]\protect\hypertarget{exm-range}{}\label{exm-range}

Angenommen, wir haben einen Datensatz zum Merkmal ``Alter'' mit den
Werte 1, 23, 42, 100. Dann betr√§gt der Range: \(R = 100 - 1 = 99\). Das
bedeutet, dass die Werte des Merkmals √ºber 99 Einheiten (Jahre in diesem
Fall) verteilt sind. \(\square\)

\end{example}

Dieses Mermals ist aber nicht robust (gegen√ºber Extremwerten) und sollte
daher nur mit Einschr√§nkung verwendet werden.

\subsection{Der mittlere
Abweichungsbalken}\label{der-mittlere-abweichungsbalken}

\begin{quote}
{\emoji{student}} Wir m√ºssen jetzt mal pr√§ziser werden! Wie k√∂nnen wir
die Streuung berechnen?
\end{quote}

\begin{quote}
{\emoji{teacher}} Gute Frage! Am einfachsten ist es, wenn wir die
mittlere L√§nge eines Abweichungsbalkens ausrechnen.
\end{quote}

Legen wir (gedanklich) alle Abweichungsbalken \(e\) aneinander und
teilen durch die Anzahl \(n\) der Balken, so erhalten wir wir den
``mittleren Abweichungsbalken'', den wir mit \(\varnothing e\)
bezeichnen k√∂nnten. Diesen Kennwert bezeichnet man als \emph{Mean
Absolute Error} (MAE) bzw. als \emph{Mittlere Absolutabweichung} (MAA).
Er ist so definiert, s. Gleichung~\ref{eq-mae}.

\begin{equation}\phantomsection\label{eq-mae}{{\displaystyle \mathrm {MAE} ={\frac {\sum _{i=1}^{n}\left|y_{i}-\bar{y}\right|}{n}}={\frac {\sum _{i=1}^{n}\left|e_{i}\right|}{n}}.}}\end{equation}

\begin{definition}[Mittlere
Absolutabweichung]\protect\hypertarget{def-mae}{}\label{def-mae}

Die Mittlere Absolutabweichung (MAA, MAE) ist definiert als die Summe
der Absolutwerte der Differenzen eines Messwerts zum Mittelwert, geteilt
durch die Anzahl der Messwerte.\footnote{Wenn man solche S√§tze liest,
  f√ºhlt sich die Formel fast einfacher an.}\(\square\)

\end{definition}

\begin{example}[]\protect\hypertarget{exm-mae}{}\label{exm-mae}

Abbildung~\ref{fig-mae} visualisiert ein einfaches Beispiel zum MAE.
Rechnen wir den MAE f√ºr das Beispiel von Abbildung~\ref{fig-mae} aus:

\(MAE = \frac{1 + |- 3| + 1 + 1}{4} = 6/4 = 1.5\)

\end{example}

\begin{figure}

\centering{

\includegraphics[width=0.5\textwidth,height=\textheight]{060-modellguete_files/figure-pdf/fig-mae-1.pdf}

}

\caption{\label{fig-mae}Abweichungsbalken und der MAE}

\end{figure}%

Nat√ºrlich k√∂nnen wir R auch die Rechenarbeit √ºberlassen.

\begin{quote}
{\emoji{robot}} Loving it!!
\end{quote}

Schauen Sie: Den Mittelwert (s. Abbildung~\ref{fig-mae}) kann man doch
mit Fug und Recht als ein \emph{lineares Modell}, eine Gerade,
betrachten, oder nicht? Schlie√ülich erkl√§ren wir \(y\) anhand einer
Gerade (die parallel zur X-Achse ist).

In R gibt es einen Befehl f√ºr ein \emph{l}ineares \emph{M}odell, er
hei√üt \texttt{lm}.

Die Syntax von \texttt{lm()} lautet:

\texttt{lm(y\ \textasciitilde{}\ 1,\ data\ =\ meine\_daten)}.

In Worten:

\begin{quote}
Hey R, berechne mit ein lineares Modell zur Erkl√§rung von Y. Aber
verwende keine andere Variable zur Erkl√§rung von Y, sondern nimm den
Mittelwert von Y.
\end{quote}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{lm1 }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(y }\SpecialCharTok{\textasciitilde{}} \DecValTok{1}\NormalTok{, }\AttributeTok{data =}\NormalTok{ d)}
\end{Highlighting}
\end{Shaded}

Den MAE k√∂nnen wir uns jetzt so ausgeben lassen:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{mae}\NormalTok{(lm1)}
\DocumentationTok{\#\# [1] 1.5}
\end{Highlighting}
\end{Shaded}

\subsection{Der Interquartilsabstand}\label{der-interquartilsabstand}

Der Interquartilsabstand (IQA; engl. inter quartile range, IQR) ist ein
Streuungsma√ü, das nicht auf dem Mittelwert aufbaut. Der IQR ist robuster
als z.B. der MAA oder die Varianz und die Standardabweichung.

\begin{definition}[Interquartilsabstand]\protect\hypertarget{def-iqr}{}\label{def-iqr}

Der Interquartilsabstand ist definiert als der die (absolute) Differenz
vom 3. Quartil und 1. Quartil.\(\square\)

\end{definition}

\begin{example}[IQR im
H√∂rsaal]\protect\hypertarget{exm-iqr}{}\label{exm-iqr}

In einem Statistikkurs betragen die Quartile der K√∂rpergr√∂√üe: Q1: 1.65m,
Q2 (Median): 1,70m, Q3: 1.75m. Der IQR betr√§gt dann:
\(IQR = Q3-Q1 = 1.75m - 1.65m = 0.10m\), d.h. 10 cm.\(\square\)

\end{example}

Abbildung~\ref{fig-iqr-mario} stellt den IQR (und einige Quantile) f√ºr
den Verkaufspreise von Mariokart-Spielen dar.

\begin{figure}

\centering{

\subsection{Histogramm}

\centering{

\includegraphics{060-modellguete_files/figure-pdf/fig-mario-qs-iqr1-1.pdf}

}

\subcaption{\label{fig-mario-qs-iqr1}IQR, Q1, Q2 und Q3 f√ºr das
Schlussgebot (nur Spiele f√ºr weniger als 100 Euro)}

\subsection{Dichtediagramm}

\centering{

\includegraphics{060-modellguete_files/figure-pdf/fig-mario-iqr2-1.pdf}

}

\subcaption{\label{fig-mario-iqr2}IQR, Q1, Q2 und Q3 f√ºr das
Schlussgebot (nur Spiele f√ºr weniger als 100 Euro)}

}

\caption{\label{fig-iqr-mario}Der IQR f√ºr den Verkaufspreis von
Mariokart-Spielen.}

\end{figure}%

\subsection{Streuungsma√üe f√ºr
Normalverteilungen}\label{streuungsmauxdfe-fuxfcr-normalverteilungen}

Normalverteilungen sind recht h√§ufig anzutreffen in der Praxis der
Datenanalyse. Daher lohnt es sich, zu √ºberlegen, wie man diese
Verteilungen gut zusammenfasst. Man kann zeigen, dass eine
Normalverteilung sich komplett √ºber ihren \emph{Mittelwert} sowie ihre
\emph{Standardabweichung} beschreiben l√§sst. Au√üerdem gilt: Sind Ihre
Daten normalverteilt, dann sind die Abweichungen vom Mittelwert auch
normalverteilt. Denn wenn man eine Konstante zu einer Verteilung addiert
(bzw. subtrahiert), ``verschiebt man den Berg'' ja nur zur Seite, ohne
seine Form zu ver√§ndern, s. Abbildung~\ref{fig-norm-dev}.

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Hat man normalverteilte Variablen/Abweichungen/Residuen, so ist die
\emph{Standardabweichung} (engl. standard deviation, SD, \(\sigma\),
\(s\)) eine komfortable Ma√üeinheit der Streuung, denn damit l√§sst sich
die Streuung (Abweichung vom Mittelwert, Residuen) der Normalverteilung
gut beschreiben.\(\square\)

\end{tcolorbox}

\begin{quote}
{\emoji{student}} Aber wie berechnet man jetzt diese Standardabweichung?
\end{quote}

\begin{quote}
{\emoji{teacher}} Moment, noch ein kurzer Exkurs zur Varianz \ldots{}
\end{quote}

\begin{quote}
{\emoji{student}} (seufzt)
\end{quote}

\subsection{Varianz}\label{varianz}

\subsubsection{Intuition}\label{intuition}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Die Varianz einer Variable (z.B. Verkaufspreis von Mariokart) ist, grob
gesagt, der typische Abstand eines Verkaufspreis vom mittleren
Verkaufspreis.\(\square\)

\end{tcolorbox}

\begin{figure}

\begin{minipage}{0.50\linewidth}
Abbildung~\ref{fig-var} illustriert die Varianz:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Man gehe von der H√§ufigkeitsverteilung der Daten aus.
\item
  Betrachtet man die Daten als Gewichte auf einer Wippe, so ist der
  Schwerpunkt der Wippe der Mittelwert.
\item
  Man bilde Quadrate f√ºr jeden Datenpunkt mit der Kantenl√§nge, die dem
  Abstand des Punktes zum Mittelwert entspricht.
\item
  Die Quadrate quetscht man jetzt wo n√∂tig in rechteckige Formen (ohne
  dass sich die Fl√§che √§ndern darf) und verschiebt sie, bis sich alle
  Formen zu einem Rechteck mit Seitenl√§nge \(n\) und \(\sigma^2\)
  anordnen.
\end{enumerate}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\begin{figure}[H]

\centering{

\includegraphics{img/Variance_visualisation.svg.png}

}

\caption{\label{fig-var}Illustration zur Varianz als ``mittlerer
Quadratfehler''}

\end{figure}%

\href{https://commons.wikimedia.org/w/index.php?curid=39472834}{By
Cmglee - Own work, CC BY-SA 3.0}\end{minipage}%

\end{figure}%

Abbildung~\ref{fig-mse} visualisiert die Varianz f√ºr
Beispiel~\ref{exm-mae}.\footnote{Die Abweichungsquadrate wirken optisch
  nicht quadratisch, da die X-Achse breiter skaliert dargestellt ist als
  die Y-Achse. Trotzdem sind es Quadrate, nur nicht optisch, wenn Sie
  wissen, was ich meine\ldots{}}

Links sind die \emph{Abweichungsquadrate} dargestellt, rechts die
Varianz als ``\emph{typisches Abweichungsquadrat}''.

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Die Varianz ist also ein Ma√ü, das die typische Abweichung der
Beobachtungen vom Mittelwert in eine Zahl fasst.\(\square\)

\end{tcolorbox}

\begin{figure}

\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{060-modellguete_files/figure-pdf/fig-mse-1.pdf}

}

\subcaption{\label{fig-mse-1}Quadrierte Fehlerbalken}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{060-modellguete_files/figure-pdf/fig-mse-2.pdf}

}

\subcaption{\label{fig-mse-2}Varianz als `typischer' Fehlerbalken}

\end{minipage}%

\caption{\label{fig-mse}Sinnbild zur Varianz als typischer Fehlerbalken}

\end{figure}%

\begin{example}[]\protect\hypertarget{exm-var}{}\label{exm-var}

Sie arbeiten immer noch bei einem Online-Auktionshaus und untersuchen
den Verkauf von Videospielen. Nat√ºrlich mit dem Ziel, dass Ihre Firma
mehr von dem Zeug verkaufen kann.

Dazu berechnen Sie die Streuung in den Verkaufspreisen, s.
Listing~\ref{lst-mario-streu}. \(\square\)

\end{example}

\begin{codelisting}

\caption{\label{lst-mario-streu}Berechnung der Streuung des
Verkaufpreises als Indikatoren f√ºr die Modellg√ºte des Mittelwerts.}

\centering{

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart\_no\_extreme }\OtherTok{\textless{}{-}}
\NormalTok{  mariokart }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{filter}\NormalTok{(total\_pr }\SpecialCharTok{\textless{}} \DecValTok{100}\NormalTok{)  }\CommentTok{\# ohne Extremwerte}

\NormalTok{m\_summ }\OtherTok{\textless{}{-}} 
\NormalTok{  mariokart\_no\_extreme }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{summarise}\NormalTok{(}
    \AttributeTok{pr\_mw =} \FunctionTok{mean}\NormalTok{(total\_pr),}
    \AttributeTok{pr\_iqr =} \FunctionTok{IQR}\NormalTok{(total\_pr),}
    \AttributeTok{pr\_maa =} \FunctionTok{mean}\NormalTok{(}\FunctionTok{abs}\NormalTok{(total\_pr }\SpecialCharTok{{-}} \FunctionTok{mean}\NormalTok{(total\_pr))),}
    \AttributeTok{pr\_var =} \FunctionTok{var}\NormalTok{(total\_pr),}
    \AttributeTok{pr\_sd =} \FunctionTok{sd}\NormalTok{(total\_pr))}
\end{Highlighting}
\end{Shaded}

}

\end{codelisting}%

\begin{longtable}[]{@{}lrrrr@{}}
\toprule\noalign{}
pr\_mw & pr\_iqr & pr\_maa & pr\_var & pr\_sd \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
47.43 & 12.99 & 7.20 & 83.06 & 9.11 \\
\end{longtable}

Statistiken sind ja sch√∂n \ldots{} aber Bilder sind auch gut, s.
Abbildung~\ref{fig-var}. Datendiagramme eignen sich gut, um (grob) die
Streuung einer Variable zu erfassen.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart }\SpecialCharTok{\%\textgreater{}\%} 
\NormalTok{  mariokart }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{select}\NormalTok{(total\_pr) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{filter}\NormalTok{(total\_pr }\SpecialCharTok{\textless{}} \DecValTok{100}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}  \CommentTok{\# ohne Extremwerte}
  \FunctionTok{plot\_density}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{figure}

\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{060-modellguete_files/figure-pdf/fig-var-1.pdf}

}

\subcaption{\label{fig-var-1}Dichtediagramm mit MW¬±SD in roter Farbe}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{060-modellguete_files/figure-pdf/fig-var-2.pdf}

}

\subcaption{\label{fig-var-2}Violindiagramm mit MW¬±SD in roter Farbe}

\end{minipage}%

\caption{\label{fig-var}Die Verteilung des Verkaufspreises von
Mariokart-Spielen}

\end{figure}%

Wer sich die Berechnung von Hand f√ºr \texttt{pr\_maa} sparen m√∂chte (s.
Listing~\ref{lst-mario-streu}), kann die
\href{https://rdrr.io/cran/DescTools/man/MeanAD.html}{Funktion
\texttt{MeanAD} aus dem Paket \texttt{DescTools}} nutzen.

\subsubsection{Kochrezept f√ºr die
Varianz}\label{kochrezept-fuxfcr-die-varianz}

Um die Standardabweichung zu berechnen, berechnet man zun√§chst die
\emph{Varianz}, \(s^2\) abgek√ºrzt. Hier ist ein
``Kochrezept''\footnote{Algorithmus} zur Berechnung der Varianz:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  F√ºr alle Datenpunkte \(x_i\): Berechne die Abweichungen vom
  Mittelwert, \(\bar{x}\)
\item
  Quadriere diese Werte
\item
  Summiere dann auf
\item
  Teile durch die Anzahl \(N\) der Werte
\end{enumerate}

Als Formel ausgedr√ºckt, lautet die Definition der Varianz\footnote{sog.
  unkorrigierte Stichprobenvarianz; um anhand einer Stichprobe die
  Varianz der zugeh√∂rigen Population zu sch√§tzen, teilt man nicht durch
  \(N\), sondern durch \(N-1\)} einer Stichprobe wie folgt, s.
Gleichung~\ref{eq-var}.

\begin{equation}\phantomsection\label{eq-var}{{\displaystyle s^{2}={\frac {1}{N}}\sum _{i=1}^{n}\left(y_{i}-{\bar {y}}\right)^{2}={\frac {1}{N}}\sum _{i=1}^{n}e_i^{2}.}}\end{equation}

\begin{definition}[Varianz]\protect\hypertarget{def-var}{}\label{def-var}

Die Varianz (\(s^2, \sigma^2\)) ist definiert als der Mittelwert der
quadrierten Abweichungen, \(e_i^2\), (vom Mittelwert).\(\square\)

\end{definition}

Die Varianz steht im engen Verh√§ltnis zur Kovarianz, s.
Kapitel~\ref{sec-cov}. Die Varianz kann auch verstehen als den
\emph{mittleren Quadratfehler} (Mean Squared Error, MSE) eines Modells,
s. Gleichung~\ref{eq-mse}.

\begin{equation}\phantomsection\label{eq-mse}{{\displaystyle MSE={\frac {1}{N}}\sum _{i=1}^{N}\left(y_{i}-{\hat {y}}\right)^{2}.}}\end{equation}

Im Fall eines Punktmodells ist der Mittelwert der vorhergesagte Wert
eines Modells.

\subsection{Die Standardabweichung}\label{die-standardabweichung}

Kennt man die Varianz, so l√§sst sich die Standardabweichung einfach als
Quadratwurzel der Varianz berechnen.

\begin{definition}[Standardabweichung]\protect\hypertarget{def-sd}{}\label{def-sd}

Die Standardabweichung (SD, s, \(\sigma\)) ist definiert als die
Quadratwurzel der Varianz, s. Gleichung~\ref{eq-sd}.

\begin{equation}\phantomsection\label{eq-sd}{s := \sqrt{s^2} \square}\end{equation}

\end{definition}

Durch das Wurzelziehen besitzt die Standardabweichung wieder \emph{in
etwa} die gleiche Gr√∂√üenordnung wie die Daten (im Gegensatz zur Varianz,
die durch das Quadrieren sehr gro√ü werden kann).

Aus einem Modellierungsblickwinkel kann man die SD definieren als die
Wurzel von MSE. Dann nennt man sie \emph{Root Mean Squared Error}
(RMSE): \(RMSE := \sqrt{MSE}\).

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Die SD ist i.d.R. \emph{un}gleich zur MAE, aber (fast) gleich zur RMSE.
Entsprechend ist die Varianz (fast) gleich zur MSE.\(\square\)

\end{tcolorbox}

\begin{example}[]\protect\hypertarget{exm-sd-mario}{}\label{exm-sd-mario}

Sie arbeiten weiter an Ihrem Mariokart-Projekt. Da Sie heute keine Lust
auf viel Tippen haben, nutzen Sie das R-Paket \texttt{easystats} mit der
Funktion \texttt{describe\_distribution}.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(easystats)}

\NormalTok{mariokart }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{select}\NormalTok{(total\_pr) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{describe\_distribution}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 18\tabcolsep) * \real{0.1154}}
  >{\raggedleft\arraybackslash}p{(\columnwidth - 18\tabcolsep) * \real{0.1154}}
  >{\raggedleft\arraybackslash}p{(\columnwidth - 18\tabcolsep) * \real{0.1154}}
  >{\raggedleft\arraybackslash}p{(\columnwidth - 18\tabcolsep) * \real{0.0769}}
  >{\raggedleft\arraybackslash}p{(\columnwidth - 18\tabcolsep) * \real{0.0769}}
  >{\raggedleft\arraybackslash}p{(\columnwidth - 18\tabcolsep) * \real{0.0897}}
  >{\raggedleft\arraybackslash}p{(\columnwidth - 18\tabcolsep) * \real{0.1154}}
  >{\raggedleft\arraybackslash}p{(\columnwidth - 18\tabcolsep) * \real{0.1154}}
  >{\raggedleft\arraybackslash}p{(\columnwidth - 18\tabcolsep) * \real{0.0513}}
  >{\raggedleft\arraybackslash}p{(\columnwidth - 18\tabcolsep) * \real{0.1282}}@{}}
\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
Variable
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
Mean
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
SD
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
IQR
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
Min
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
Max
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
Skewness
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
Kurtosis
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
n
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedleft
n\_Missing
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
total\_pr & 49.88049 & 25.68856 & 12.99 & 28.98 & 326.51 & 9.035897 &
96.14414 & 143 & 0 \\
\end{longtable}

Ah! Das war einfach. Wird auch langsam Zeit f√ºr Feierabend.\(\square\)

\end{example}

\begin{example}[]\protect\hypertarget{exm-gruppen-mw}{}\label{exm-gruppen-mw}

Ihr Job als Datenanalyst ist anstrengend, aber auch mitunter
interessant. So auch heute. Bevor Sie nach Hause gehen, m√∂chten Sie noch
eine Sache anschauen. In einer fr√ºheren Analyse (s.
Abbildung~\ref{fig-fehler-red}) fanden Sie heraus, dass die Fehlerbalken
k√ºrzer werden, wenn man ein geschickteres und komplexeres Modell findet.
Das wollen Sie nat√ºrlich pr√ºfen. Sie √ºberlegen: ``Okay, ich will ein
einfaches Modell, in dem der Mittelwert das Modell des Verkaufspreis
sein soll.''

Das spezifizieren Sie so:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{lm1 }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(total\_pr }\SpecialCharTok{\textasciitilde{}} \DecValTok{1}\NormalTok{, }\AttributeTok{data =}\NormalTok{ mariokart)}
\FunctionTok{mae}\NormalTok{(lm1)}
\DocumentationTok{\#\# [1] 10.01811}
\end{Highlighting}
\end{Shaded}

Im n√§chsten Schritt spezifizieren Sie ein Modell, in dem der
Verkaufpreis eine Funktion der Anzahl der Lenkr√§der ist (√§hnlich wie in
Abbildung~\ref{fig-fehler-red}):

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{lm2 }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(total\_pr }\SpecialCharTok{\textasciitilde{}}\NormalTok{ wheels, }\AttributeTok{data =}\NormalTok{ mariokart)}
\FunctionTok{mae}\NormalTok{(lm2)}
\DocumentationTok{\#\# [1] 7.375873}
\end{Highlighting}
\end{Shaded}

Ah! Sehr sch√∂n, Sie haben mit \texttt{lm2} ein besseres Modell als
einfach nur den Mittelwert gefunden. Ab nach hause!\(\square\)

\end{example}

\section{Streuung als Modellfehler}\label{streuung-als-modellfehler}

Wenn wir den Mittelwert als Punktmodell des Verkaufpreises auffassen, so
kann man die verschiedenen Kennwerte der Streuung als verschiedene
Kennwerte der Modellg√ºte auffassen.

Definieren wir zun√§chst als Punktmodell auf Errisch:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{lm\_mario1 }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(total\_pr }\SpecialCharTok{\textasciitilde{}} \DecValTok{1}\NormalTok{, }\AttributeTok{data =}\NormalTok{ mariokart)}
\end{Highlighting}
\end{Shaded}

Zur Erinnerung: Wir modellieren \texttt{total\_pr} ohne Pr√§diktoren,
sondern als Punktmodell, und zwar sch√§tzen wir den Mittelwert mit den
Daten \texttt{mariokoart}.

Das (Meta-)Paket \texttt{easystats} bietet komfortable Befehle, um die
Modellg√ºte zu berechnen:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{mae}\NormalTok{(lm\_mario1)  }\CommentTok{\# Mean absolute error}
\DocumentationTok{\#\# [1] 10.01811}
\FunctionTok{mse}\NormalTok{(lm\_mario1)  }\CommentTok{\# Mean squared error}
\DocumentationTok{\#\# [1] 655.2874}
\FunctionTok{rmse}\NormalTok{(lm\_mario1)  }\CommentTok{\# Root mean squared error}
\DocumentationTok{\#\# [1] 25.59858}
\end{Highlighting}
\end{Shaded}

\section{z-Transformation}\label{z-transformation}

Sie arbeiten immer noch als Datenknecht, Moment, \emph{Datenhecht} bei
dem Online-Auktionshaus. Heute untersuchen Sie die Frage, wie gut sich
die Verkaufspreise mit einer einzeigen Zahl, dem mittleren
Verkaufspreis, beschreiben lassen. Einige widerspenstige Werte haben Sie
dabei einfach des Datensatzes verwiesen. Schon ist das Leben leichter,
s. \texttt{mariokart\_no\_extreme}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart\_no\_extreme }\OtherTok{\textless{}{-}} 
\NormalTok{  mariokart }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{filter}\NormalTok{(total\_pr }\SpecialCharTok{\textless{}} \DecValTok{100}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

Abbildung~\ref{fig-mariokart_no_extreme} (links) zeigt, dass es einige
Streuung um den Mittelwert herum gibt.
Abbildung~\ref{fig-mariokart_no_extreme} (rechts) zeigt die (um den
Mittelwert) \emph{zentrierten} Daten.

\begin{figure}

\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{060-modellguete_files/figure-pdf/fig-mariokart_no_extreme-1.pdf}

}

\subcaption{\label{fig-mariokart_no_extreme-1}Wie nah dr√§ngen sich die
Verkaufspreise um ihren Mittelwert?}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{060-modellguete_files/figure-pdf/fig-mariokart_no_extreme-2.pdf}

}

\subcaption{\label{fig-mariokart_no_extreme-2}Abweichungen vom
Mittelwert: zentrierte Daten}

\end{minipage}%

\caption{\label{fig-mariokart_no_extreme}Verteilung von
\texttt{mariokart\_no\_extreme}}

\end{figure}%

Tja, das ist doch etwas Streuung um den Mittelwert herum.

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-important-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-important-color}{\faExclamation}\hspace{0.5em}{Wichtig}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-important-color-frame]

Je weniger Streuung um den Mittelwert (ca. 47 Euro) herum, desto besser
eignet sich der Mittelwert als Modell f√ºr die Daten, bzw. desto h√∂her
die Modellg√ºte.\(\square\)

\end{tcolorbox}

Ja, es ist \emph{etwas} Streuung, aber wie viel? Kann man das genau
angeben? Sie √ºberlegen \ldots{} und √ºberlegen. Da! Eine Idee!

Man k√∂nnte vielleicht angeben, wie viel Euro jedes Spiel vom Mittelwert
entfernt ist. Je gr√∂√üer diese Abweichung, desto schlechter die
Modellg√ºte! Also rechnen Sie diese Abweichung aus.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart\_no\_extreme }\OtherTok{\textless{}{-}}
\NormalTok{  mariokart\_no\_extreme }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{abw =} \FloatTok{47.4} \SpecialCharTok{{-}}\NormalTok{ total\_pr)}
\end{Highlighting}
\end{Shaded}

Anders gesagt: Wir haben die Verkaufspreise \emph{zentriert.}

\begin{definition}[Zentrieren]\protect\hypertarget{def-zentrieren}{}\label{def-zentrieren}

Zentrieren bedeutet, von jedem Wert einer Verteilung \(X\) den
Mittelwert abzuziehen. Daher ist der neue Mittelwert (der zentrierten
Verteilung) gleich Null. \(\square\)

\end{definition}

\begin{figure}

\centering{

\includegraphics{060-modellguete_files/figure-pdf/fig-norm-dev-1.pdf}

}

\caption{\label{fig-norm-dev}Die Abweichungen zum Mittelwert (MW) einer
normalverteilten Variable sind selber normalverteilt}

\end{figure}%

Aber irgendwie sind Sie noch nicht am Ziel Ihrer √úberlegungen: Woher
wei√ü man, ob 10 Euro oder 20 Euro ``viel'' Abweichung vom Verkaufspreis
ist? Man m√ºsste die Abweichung eines Verkaufpreis zu irgendetwas in
Bezug setzen. Wieder! Ein Geistesblitz! Man k√∂nnte doch die jeweilige
Abweichung in Bezug setzen zur \emph{mittleren (absoluten) Abweichung}
(MAA)! Ein alternativer, √§hnlicher Kennwert zur mittlerer absolute
Abweichung ist die SD. Sie haben geh√∂rt, dass die SD gebr√§uchlicher ist
als die MAA. Um sich als Checker zu pr√§sentieren, berechnen Sie also
auch die SD; die beiden Koeffizienten sind ja √§hnlich.

Also: Wenn ein Spiel 10 Euro vom Mittelwert abweicht und die SD 10 Euro
betragen sollte, dann h√§tten wir eine ``standardisierte''\footnote{abgek√ºrzt
  manchmal mit \texttt{std}} Abweichung von 1, weil 10/10=1.

Begeistert √ºber Ihre Schlauheit machen Sie sich ans Werk.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart\_no\_extreme }\OtherTok{\textless{}{-}}
\NormalTok{  mariokart\_no\_extreme }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{abw\_std =}\NormalTok{ abw }\SpecialCharTok{/} \FunctionTok{sd}\NormalTok{(abw),  }\CommentTok{\# std wie "standardisiert"}
         \AttributeTok{abw\_std2 =}\NormalTok{ abw }\SpecialCharTok{/} \FunctionTok{mean}\NormalTok{(}\FunctionTok{abs}\NormalTok{(abw)))  }
\end{Highlighting}
\end{Shaded}

Zufrieden betrachten Sie Ihr Werk, s. Abbildung~\ref{fig-z-transf}. In
Abbildung~\ref{fig-z-transf} sieht man oben die Rohwerte und unten die
transformierten Werte, die wir hier als \emph{standardisiert}
bezeichnen, da wir sie in Bezug zur ``typischen Abweichung'', der SD,
gesetzt haben.

\begin{figure}

\centering{

\includegraphics{060-modellguete_files/figure-pdf/fig-z-transf-1.pdf}

}

\caption{\label{fig-z-transf}Standardisierung von Abweichungswerten bzw.
einer Verteilung; der vertikale Balken zeigt den Mittelwert}

\end{figure}%

Wir fassen die Schritte unserer Umrechnung (``Transformation'') zusammen
wie in einem Kochrezept:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Nimm die Verteilung der Verkaufspreise
\item
  Berechne die Abweichungen vom mittleren Verkaufspreis (Differenz
  Mittelwert und jeweiliger Verkaufspreis)
\item
  Teile die Abweichungen (Schritt 2) durch die SD
\end{enumerate}

Diese Art von Transformation bezeichnet man als \emph{z-Transformation}
und die resultierenden Werte als \emph{z-Werte}.

\begin{definition}[z-Werte]\protect\hypertarget{def-z-werte}{}\label{def-z-werte}

z-Werte sind das Resultat der z-Transformation. F√ºr die Variable \(X\)
berechnet sich der z-Wert der \(i\)-ten Beobachtung so:
\(z_i = \frac{x_i - \bar{x}}{sd_x}.\square\)

\end{definition}

z-Werte sind n√ºtzlich, weil sie die ``relative'' Abweichung einzelner
Beobachtungen vom Mittelwert anzeigen.

Nach einer \emph{Faustregel} spricht man von extremen Abweichungen
(Extremwerten, Ausrei√üern), wenn \(z_i > 2\) oder \(z_i > 3\).

\section{Fazit}\label{fazit-2}

Der ``gesunde Menschenverstand'' w√ºrde spontan den mittleren
Absolutabstand (MAA oder MAE) der Varianz (oder der Standardabweichung,
SD) vorziehen. Das ist vern√ºnftig, denn die MAA ist anschaulicher und
damit n√ºtzlicher als die Varianz und die SD.

Warum sollte man √ºberhaupt ein unanschauliches Ma√ü wie die Varianz
verwenden? Wenn es nur um deskriptive Statistik geht, braucht man die
Varianz (oder die SD) nicht unbedingt. Gr√ºnde, warum Sie die Varianz
(bzw. SD) kennen und nutzen sollten, sind:\footnote{Ich wollte noch
  hinzuf√ºgen, dass die Varianz eng verkn√ºpft mit der linearen Algebra,
  aber ich war nicht sicher, ob das Argument allgemein √ºberzeugen w√ºrde.}

\begin{itemize}
\tightlist
\item
  Die SD ist sehr n√ºtzlich zur Beschreibung der Normalverteilung
\item
  Die Varianz wird h√§ufig verwendet bzw. in Forschungsarbeiten
  berichtet, also m√ºssen Sie die Varianz kennen.
\end{itemize}

Liegen Extremwerte vor, kann es vorteilhafter sein, den IQR vorzuziehen
gegen√ºber Mittelwert basierten Streuungsma√üen (MAA, Varianz, SD).

\section{Aufgaben}\label{aufgaben-5}

\subsection{Datenwerk}\label{datenwerk}

Die Webseite \href{https://datenwerk.netlify.app}{datenwerk.netlify.app}
stellt eine Reihe von einschl√§gigen √úbungsaufgaben bereit. Sie k√∂nnen
die Suchfunktion der Webseite nutzen, um die Aufgaben mit den folgenden
Namen zu suchen:

\begin{itemize}
\tightlist
\item
  \href{https://datenwerk.netlify.app/posts/mariokart-sd2/mariokart-sd2}{mariokart-sd2}
\item
  \href{https://datenwerk.netlify.app/posts/mariokart-sd3/mariokart-sd3}{mariokart-sd3}
\item
  \href{https://datenwerk.netlify.app/posts/kennwert-robust/kennwert-robust}{Kennwert-robust}
\item
  \href{https://datenwerk.netlify.app/posts/summarise04/summarise04}{summarise04}
\item
  \href{https://datenwerk.netlify.app/posts/summarise05/summarise05}{summarise05}
\item
  \href{https://datenwerk.netlify.app/posts/vis-mariokart-variab/vis-mariokart-variab}{vis-mariokart-variab}
\item
  \href{https://datenwerk.netlify.app/posts/sd-vergleich/sd-vergleich}{sd-vergleich}
\item
  \href{https://datenwerk.netlify.app/posts/nasa01/nasa01}{nasa01}
\item
  \href{https://datenwerk.netlify.app/posts/streuung-histogramm/streuung-histogramm}{Streuung-Histogramm}
\item
  \href{https://datenwerk.netlify.app/posts/mariokart-sd1/mariokart-sd1}{mariokart-sd1}
\item
  \href{https://datenwerk.netlify.app/posts/summarise06/summarise06}{summarise06}
\item
  \href{https://datenwerk.netlify.app/posts/mariokart-desk01/mariokart-desk01}{mariokart-desk01}
\end{itemize}

\begin{exercise}[Analysieren Sie den Datensatz zur
Handynutzung]\protect\hypertarget{exr-handy}{}\label{exr-handy}

~

\subsection{Aufgabe}

Sind Sie h√§ndys√ºchtig? Das ist die Forschungsfrage
\href{https://docs.google.com/forms/d/e/1FAIpQLSfM6oDLHX4_lqWq-bXw39drTkdGAvecE6ow2HIKoxdrVygp2A/viewform}{dieser
Umfrage}. Nehmen Sie ggf. an dieser Umfrage teil (sie ist anonym und
dauert drei Minuten). Laden Sie den
\href{https://docs.google.com/spreadsheets/d/1SWMj4rIIIJdAsfsSKQHSg8jHr_OuKLpJx_0XV4LGnH0/edit?usp=sharing}{Datensatz
zur Handynutzung} von Google-Docs herunter.\footnote{\url{https://docs.google.com/spreadsheets/d/1SWMj4rIIIJdAsfsSKQHSg8jHr_OuKLpJx_0XV4LGnH0/edit?usp=sharing}}
Berechnen Sie dann g√§ngige deskriptive Statistiken und visualisieren Sie
sie. \(\square\)

\subsection{L√∂sung: Daten importieren}

Sie k√∂nnen die Daten entweder selber herunterladen oder aber die
folgende Version des Datensatzes verwenden. In beiden F√§llen ist es
n√ºtzlich, den (absoluten oder relativen) Pfad anzugeben:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{data\_path }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(}
  \StringTok{"https://raw.githubusercontent.com/sebastiansauer/"}\NormalTok{,}
  \StringTok{"statistik1/main/daten/Smartphone{-}Nutzung\%20"}\NormalTok{,}
  \StringTok{"(Responses)\%20{-}\%20Form\%20responses\%201.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

Dann k√∂nnen Sie die Daten wie gewohnt importieren:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{smartphone\_raw }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(data\_path)}
\end{Highlighting}
\end{Shaded}

\subsection{L√∂sung: Daten aufbereiten}

Die Spaltennamen sind sehr unsch√∂n. Lassen Sie uns daher die
Spaltennamen umbenennen (aber vorab sichern):

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{item\_labels }\OtherTok{\textless{}{-}} \FunctionTok{names}\NormalTok{(smartphone\_raw)}

\FunctionTok{names}\NormalTok{(smartphone\_raw) }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(}\StringTok{"item"}\NormalTok{,}\DecValTok{1}\SpecialCharTok{:}\FunctionTok{ncol}\NormalTok{(smartphone\_raw))}
\end{Highlighting}
\end{Shaded}

\subsection{Fallstudie zur
Lebenszufriedenheit}\label{fallstudie-zur-lebenszufriedenheit}

Die OECD f√ºhrt eine
\href{https://www.oecd.org/wise/measuring-well-being-and-progress.htm}{weltweite
Studie zur Lebenszufriedenheit} durch.\footnote{https://www.oecd.org/wise/measuring-well-being-and-progress.htm}

Arbeiten Sie die die
\href{https://datenwerk.netlify.app/posts/oecd-yacsda/}{Fallstudie
``OECD Wellbeing''} durch, um ein tieferes Verst√§ndnis f√ºr die
Lebenszufriedenheit in verschiedenen L√§ndern der Welt zu bekommen.

\section{Literaturhinweise}\label{literaturhinweise-5}

Allen Downey (2023) stellt in seinem vergn√ºglich zu lesenden Buch eine
kurzweilige Einf√ºhrung in die Statistik vor; auch Streuungsma√üe haben
dabei einen Auftritt. Wer mehr ``Lehrbuch-Feeling'' sucht, wird bei
(\textbf{cetinkaya-rundel\_introduction\_2021-1?}) f√ºndig (das Buch ist
online frei verf√ºgbar). Es ist kein Geheimnis, dass Streuungsma√üe keine
ganz neuen Themen in der Statistik sind. Aber hey, Oldie is Goldie, ohne
Streuungsma√üe geht's nicht. Jedenfalls werden Sie in jedem
Statistik-Lehrbuch, dass Sie in der Bib (oder sonstwo) aus dem Regal
ziehen, f√ºndig werden zu diesem Thema. Die B√ºcher unterscheiden sich
meist ``nur'' in ihrem Anspruch bzw. der didaktischen Aufmachung; f√ºr
alle ist da was dabei.

\section{Literatur}\label{literatur-5}

\chapter{Punktmodelle 2}\label{sec-zusammenhaenge}

\section{Lernsteuerung}\label{lernsteuerung-6}

\subsection{Standort im Lernpfad}\label{standort-im-lernpfad-6}

Abbildung~\ref{fig-ueberblick} zeigt den Standort dieses Kapitels im
Lernpfad und gibt damit einen √úberblick √ºber das Thema dieses Kapitels
im Kontext aller Kapitel.

\subsection{Lernziele}\label{lernziele-7}

\begin{itemize}
\tightlist
\item
  Sie k√∂nnen die Begriffe Kovarianz und Korrelation definieren und ihren
  Zusammenh√§nge erl√§utern.
\item
  Sie k√∂nnen die St√§rke einer Korrelation einsch√§tzen.
\end{itemize}

\subsection{Ben√∂tigte R-Pakete}\label{benuxf6tigte-r-pakete-5}

In diesem Kapitel ben√∂tigen Sie folgende R-Pakete.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(tidyverse)}
\FunctionTok{library}\NormalTok{(easystats)}
\end{Highlighting}
\end{Shaded}

\subsection{Ben√∂tigte Daten}\label{benuxf6tigte-daten-5}

Listing~\ref{lst-mario-path} definiert den Pfad zum Datensatz
\texttt{mariokart} und importiert die zugeh√∂rige CSV-Datei in R, so dass
wir einen Tibble mit Namen \texttt{mariokart} erhalten.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart\_path }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(}
  \StringTok{"https://vincentarelbundock.github.io/Rdatasets/"}\NormalTok{,}
  \StringTok{"csv/openintro/mariokart.csv"}\NormalTok{)}

\NormalTok{mariokart }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(mariokart\_path)}
\end{Highlighting}
\end{Shaded}

\subsection{Zum Einstieg}\label{zum-einstieg-2}

\begin{example}[]\protect\hypertarget{exm-zsgh-studis}{}\label{exm-zsgh-studis}

~

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Suchen Sie sich eine vertrauenw√ºrdige Partnerin oder einen
  vertrauensw√ºrdigen Partner. Im Zweifel reicht die Person, die neben
  Ihnen sitzt. {üòÅ}
\item
  Nennen Sie zwei Variablen, die wie folgt zusammenh√§ngen:
\end{enumerate}

\begin{itemize}
\tightlist
\item
  gleichsinnig (Viel von dem einen, viel von dem anderen)
\item
  gegensinnig (viel von dem einen, wenig von dem anderen)
\item
  Scheinzusammenhang (h√§ngt zusammen, ist aber nicht ``echt'' bzw.
  kausal)
\end{itemize}

\end{example}

\section{Zusammenfassen zum
Zusammenhang}\label{zusammenfassen-zum-zusammenhang}

In Kapitel~\ref{sec-punktmodelle1} haben wir gelernt, dass das Wesen
eines Punktmodells als Zusammenfassung \emph{einer} Spalte (eines
Vektors) zu einer einzelnen Zahl\footnote{auch Skalar genannt}, zu einem
``Punkt'' sozusagen, zusammengefasst werden kann.

In diesem Kapitel fassen wir \emph{zwei} Spalten zusammen, wieder zu
\emph{einer} Zahl, s. Gleichung~\ref{eq-desk2}.

\begin{equation}\phantomsection\label{eq-desk2}{\begin{array}{|c|} \hline \\ \hline \\\\\\ \hline \end{array} + \begin{array}{|c|} \hline \\ \hline \\\\\\ \hline \end{array} \qquad \rightarrow \qquad \begin{array}{|c|} \hline \\ \hline  \hline \end{array}}\end{equation}

Wo wir in Kapitel~\ref{sec-punktmodelle1} eine Variable mit Hilfe eines
Lagema√ües beschrieben (bzw. dargestellt, zusammengefasst, modelliert)
haben, tun wir hier das Gleiche f√ºr zwei Variablen. Beschreibt man aber
zwei Variablen, so geht es um die Frage, was die beiden Variablen
miteinander zu tun haben: Wie die beiden Variablen von einander
\emph{abh√§ngen} bzw. miteinander (irgendwie) \emph{zusammenh√§ngen.} Wir
begrenzen auf \emph{metrische} Variablen.

\subsection{Beispiele f√ºr
Zusammenh√§nge}\label{beispiele-fuxfcr-zusammenhuxe4nge}

\begin{itemize}
\tightlist
\item
  Lernzeit und Klausurerfolg
\item
  K√∂rpergr√∂√üe und Schuhgr√∂√üe
\item
  Verbrauchtes Benzin und zur√ºckgelegte Strecke
\item
  Produktionsmenge und Produktionskosten
\item
  Bildschirmzeit und Schlafqualit√§t
\item
  Umweltschutz und Biodiversifit√§t \(\square\)
\end{itemize}

Die Verbildlichung\footnote{Visualisierung} zweier metrischer Variablen
haben wir bereits in Kapitel~\ref{sec-zshg-metr} kennengelernt. Zur
Verdeutlichung, wie ein Zusammenhang zweier metrischer Variablen
aussehen kann, helfe noch einmal Abbildung~\ref{fig-zshg}.

\begin{figure}

\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{070-zusammenhaenge_files/figure-pdf/fig-zshg-1.pdf}

}

\subcaption{\label{fig-zshg-1}Streudiagramm mit Trendlinie (und Ellipse
zur Verdeutlichung)}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{070-zusammenhaenge_files/figure-pdf/fig-zshg-2.pdf}

}

\subcaption{\label{fig-zshg-2}`Verwackeltes' Streudiagramm, um die
einzelnen Punkte besser zu erkennen}

\end{minipage}%

\caption{\label{fig-zshg}Visualisierung des Zusammenhangs von wheels und
total\_pr}

\end{figure}%

\section{Abweichungsrechtecke}\label{sec-cov}

Die St√§rke des linearen Zusammenhangs zweier metrischer Variablen kann
man gut mithilfe von Abweichungsrechtecken veranschaulichen. Los geht's!

\subsection{Noten und
Abweichungsrechtecke}\label{noten-und-abweichungsrechtecke}

\begin{example}[Wieder
Statistiknoten]\protect\hypertarget{exm-noten2}{}\label{exm-noten2}

Anton, Bert, Carl und Daniel haben ihre Statistikklausur zur√ºckbekommen.
Die Lernzeit \(X\) scheint mit der erreichten Punktzahl \(Y\) (0-100, je
mehr desto besser) zusammenzuh√§ngen.\footnote{\textgreater{} Typisches
  Lehrerbeispiel!!} Gar nicht so schlecht ausgefallen wie gedacht
\ldots, s. Tabelle~\ref{tbl-noten2}.\(\square\)

\end{example}

\begin{longtable}[]{@{}rrr@{}}

\caption{\label{tbl-noten2}Punkte in der Statistikklausur (0-100) und
Lernzeit (0-100)}

\tabularnewline

\toprule\noalign{}
id & y & x \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
1 & 72 & 70 \\
2 & 44 & 40 \\
3 & 39 & 35 \\
4 & 50 & 67 \\

\end{longtable}

Zeichnen wir uns die Daten als Streudiagramm, s.
Abbildung~\ref{fig-delta-rect}. Dabei zeichnen wir noch
\emph{Abweichungsrechtecke} ein.

\begin{definition}[Abweichungsrechteck]\protect\hypertarget{def-abweichungsrechteck}{}\label{def-abweichungsrechteck}

Im zweidimensionalen Fall spannt sich ein Abweichungsrechteck vom
Mittelwert \(\bar{x}\) bis zum Messwert \(x_i\) und genauso f√ºr \(Y\).
Wir bezeichnen mit \(dx_i\) die Distanz (Abweichung) vom Mittelwert
\(\bar{x}\) bis zum Messwert \(x_i\) (und analog \(dy_i\)), also
\(dx_i = x_i - \bar{x}\).\\
Die Fl√§che des Abweichungsrechtecks ist dann das Produkt der
Abweichungen: \(dx_i \cdot dy_i\).\(\square\)

\end{definition}

\begin{figure}

\centering{

\includegraphics{070-zusammenhaenge_files/figure-pdf/fig-delta-rect-1.pdf}

}

\caption{\label{fig-delta-rect}Die Kovarianz als mittleres
Abweichungsrechteck. In jedem der vier Quadranten (Q1, Q2, Q3, Q4) ist
das Vorzeichen der Abweichungsrechtecke dargestellt. Die Farben der
Abweichungsrechtecke spiegeln das Vorzeichen wider.}

\end{figure}%

Stellen Sie sich vor, wir legen alle Rechtecke zusammen aus
Abbildung~\ref{fig-delta-rect}. Nennen wir das resultierende Rechteck
das ``Summenrechteck''. Ja, ich wei√ü, ich strapaziere mal wieder Ihre
Phantasie\footnote{hoffentlich nicht Ihre Geduld}. Jetzt kommt's: Je
gr√∂√üer die Fl√§che des Summenrechtecks, desto st√§rker der (lineare)
Zusammenhang. Beachten Sie, dass die Fl√§chen Vorzeichen haben, positiv
oder negativ (Plus oder Minus), je nach dem, in welchem der vier
Quadranten sie stehen. Die F√ºllfarben der Rechtecke verdeutlichen dies,
s. Abbildung~\ref{fig-delta-rect}. Das \emph{Vorzeichen} der Summe zeigt
an, ob der Zusammenhang positiv (gleichsinnig, ansteigende Trendlinie)
oder negativ (gegensinnig, absinkende Trendl‚â•inie) ist. So zeigt
Abbildung~\ref{fig-kov} links eine positive Summe der
Abweichungsrechtecke und rechts eine negative Summe. Man sieht im linken
Diagramme, dass die Summe der Rechtecke mit positivem Vorzeigen (rot)
√ºberwiegt; im rechten Diagramm ist es umgekehrt (blau, negativ
√ºberwiegt).

\begin{figure}

\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{070-zusammenhaenge_files/figure-pdf/fig-kov-1.pdf}

}

\subcaption{\label{fig-kov-1}Positive Vorzeichen (Quadranten 1 und 3)
√ºberwiegen, was in einer positiven Kovarianz resultiert - Negative
Vorzeichen (Quadranten 2 und 4) √ºberwiegen, was in einer negativen
Kovarianz resultiert}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{070-zusammenhaenge_files/figure-pdf/fig-kov-2.pdf}

}

\subcaption{\label{fig-kov-2}Positive Vorzeichen (Quadranten 1 und 3)
√ºberwiegen, was in einer positiven Kovarianz resultiert - Negative
Vorzeichen (Quadranten 2 und 4) √ºberwiegen, was in einer negativen
Kovarianz resultiert}

\end{minipage}%

\caption{\label{fig-kov}Positive und negative Kovarianz: Einmal
resultiert eine positive Summe, einmal eine negative Summe, wenn man die
Fl√§chen der Abweichungsrechtecke addiert.}

\end{figure}%

Wir k√∂nnen das Summenrechteck noch durch die Anzahl der Datenpunkte
teilen, das √§ndert nichts an der Aussage, aber der Mittelwert hat
gegen√ºber der Summe den Vorteil, dass er unabh√§ngig ist in seiner
Aussage von der Anzahl der eingegangenen Datenpunkte. Das resultierende
Rechteck nennen wir das \emph{mittlere Abweichungsrechteck}.

Ein Ma√ü f√ºr den Zusammenhang von Lernzeit und Klausurpunkte ist also die
\emph{Fl√§che des mittleren Abweichungsrechtecks}, s.
Abbildung~\ref{fig-cov2}.

\begin{figure}

\centering{

\includegraphics{img/p_cov2.png}

}

\caption{\label{fig-cov2}Die Kovarianz als mittleres
Abweichungsrechteck. Die Fl√§che der Rechtecks entspricht dem Wert der
Kovarianz.}

\end{figure}%

\subsection{Kovarianz}\label{sec-kov}

\begin{definition}[Kovarianz]\protect\hypertarget{def-kov}{}\label{def-kov}

Die Kovarianz ist definiert als die Fl√§che des mittleren
Abweichungsrechtecks. Sie ist ein Ma√ü f√ºr die St√§rke und Richtung des
linearen Zusammenhangs zweier metrischer Variablen, s.
Abbildung~\ref{fig-cov2}.\(\square\)

\end{definition}

\begin{quote}
{\emoji{student}} Zu viele Bilder! Ich brauch Zahlen.
\end{quote}

\begin{quote}
{\emoji{teacher}} Kommen gleich!
\end{quote}

Tabelle~\ref{tbl-kov2} zeigt die Werte f√ºr die X- und Y-Abweichung und
die resultierenden Fl√§chen der Abweichungsrechtecke. Wenn Sie die Werte
selber nachrechnen wollen, finden Sie den Noten-Datensatz in der Datei
\href{https://raw.githubusercontent.com/sebastiansauer/statistik1/main/daten/noten.csv}{noten.csv}\footnote{\url{https://raw.githubusercontent.com/sebastiansauer/statistik1/main/daten/noten.csv}}.

\begin{longtable}[]{@{}rrrrrrrrr@{}}

\caption{\label{tbl-kov2}Werte der Abweichungsrechtecke. avg: average
(Mittelwert), cov\_sign: Vorzeichen der Kovarianz,\_pos: positiver Wert
auf der entsprechenden Achse (x/y)?, xy\_area: Produkt von x\_delta und
y\_delta}

\tabularnewline

\toprule\noalign{}
id & y & x & x\_avg & y\_avg & x\_delta & y\_delta & cov\_sign &
xy\_area \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
1 & 72 & 70 & 53 & 51.25 & 17 & 20.75 & 1 & 352.75 \\
2 & 44 & 40 & 53 & 51.25 & -13 & -7.25 & 1 & 94.25 \\
3 & 39 & 35 & 53 & 51.25 & -18 & -12.25 & 1 & 220.50 \\
4 & 50 & 67 & 53 & 51.25 & 14 & -1.25 & -1 & -17.50 \\

\end{longtable}

Berechnen wir als n√§chstes das mittlere Abweichungsrechteck, die
Kovarianz:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{d }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{kovarianz =} \FunctionTok{mean}\NormalTok{(xy\_area))}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}r@{}}
\toprule\noalign{}
kovarianz \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
162.5 \\
\end{longtable}

Die Formel der Kovarianz lautet, s. Gleichung~\ref{eq-cov4}:

\begin{equation}\phantomsection\label{eq-cov4}{\text{cov(xy)} = s_{xy}:=\frac{1}{n}\sum_{i=1}^n (x_i-\bar{x})(y_i-\bar{y}) = \frac{1}{n}\sum_{i=1}^n dx_i\cdot dy_i}\end{equation}

Gleichung~\ref{eq-cov4} in Worten ausgedr√ºckt:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Rechne f√ºr jedes \(x_i\) die Abweichung vom Mittelwert, \(\bar{x}\),
  aus, \(dx_i\).
\item
  Rechne f√ºr jedes \(y_i\) die Abweichung vom Mittelwert, \(\bar{y}\),
  aus, \(dy_i\).
\item
  Multipliziere f√ºr alle \(i\) \(dx_i\) mit \(xy_i\), um die
  Abweichungsrechtecke \(dx_i dy_i\) zu erhalten.
\item
  Addiere die Fl√§chen der Abweichungsrechtecke.
\item
  Teile durch die Anzahl der Beobachtungen \(n\).
\end{enumerate}

\begin{example}[Variablen mit positiver
Kovarianz]\protect\hypertarget{exm-pos-kov}{}\label{exm-pos-kov}

~

\begin{itemize}
\tightlist
\item
  Gr√∂√üe und Gewicht
\item
  Lernzeit und Klausurerfolg
\item
  Distanz zum Ziel und Reisezeit
\item
  Temperatur und Eisverkauf\(\square\)
\end{itemize}

\end{example}

\begin{example}[Variablen mit negativer
Kovarianz]\protect\hypertarget{exm-neg-kov}{}\label{exm-neg-kov}

~

\begin{itemize}
\tightlist
\item
  Lernzeit und Freizeit
\item
  Alter und Restlebenszeit
\item
  Temperatur und Schneemenge
\item
  Lebenszufriedenheit und Depressivit√§t\(\square\)
\end{itemize}

\end{example}

Drei Extrembeispiele f√ºr Kovarianz-Werte sind in
Abbildung~\ref{fig-demos-cov} dargestellt.

\begin{figure}

\begin{minipage}{0.33\linewidth}

\centering{

\includegraphics{070-zusammenhaenge_files/figure-pdf/fig-demos-cov-1.pdf}

}

\subcaption{\label{fig-demos-cov-1}kein Zusammenhang}

\end{minipage}%
%
\begin{minipage}{0.33\linewidth}

\centering{

\includegraphics{070-zusammenhaenge_files/figure-pdf/fig-demos-cov-2.pdf}

}

\subcaption{\label{fig-demos-cov-2}perfekter (positiver) Zusammenhang}

\end{minipage}%
%
\begin{minipage}{0.33\linewidth}

\centering{

\includegraphics{070-zusammenhaenge_files/figure-pdf/fig-demos-cov-3.pdf}

}

\subcaption{\label{fig-demos-cov-3}negativer Zusammenhang}

\end{minipage}%

\caption{\label{fig-demos-cov}Verschiedene Werte der Kovarianz}

\end{figure}%

Bei einer Kovarianz von (ungef√§hr) 0 ist die Gesamt-Fl√§che der
Abweichungsrechtecke\footnote{Bei der Varianz waren es Quadrate, bei der
  Kovarianz sind es Rechtecke.}, wenn man sie pro \emph{Quadrant}
aufsummiert, ungef√§hr gleich gro√ü, s. Abbildung~\ref{fig-covnull}.
Addiert man die Abweichungsrechtecke (unter Beachtung der Vorzeichen:
rot = positiv; blau = negativ), so betr√§gt die Summe in etwa (oder
genau) Null.

Damit ist die Kovarianz in diesem Fall etwa (bzw. genau) Null, s.
Gleichung~\ref{eq-cov-is-zero}: Wenn die Summe der Aweichungsrechtecke
Null ist, dann ist auch ihr Mittelwert (MW) Null. Damit ist die
Kovarianz Null.

\begin{equation}\phantomsection\label{eq-cov-is-zero}{\begin{aligned}
\sum \left(dX \cdot dY \right) &= 0\\
\Leftrightarrow \text{MW} \left(dX \cdot dY \right) &= 0\\
\Leftrightarrow \text{cov}(X, Y) &= 0
\end{aligned}}\end{equation}

\begin{figure}

\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{070-zusammenhaenge_files/figure-pdf/fig-covnull-1.pdf}

}

\subcaption{\label{fig-covnull-1}4 Abweichungsrechtecke, deren Fl√§che
sich zu 0 addiert}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{070-zusammenhaenge_files/figure-pdf/fig-covnull-2.pdf}

}

\subcaption{\label{fig-covnull-2}200 Abweichungsrechtecke, deren Fl√§che
sich zu 0 addiert}

\end{minipage}%

\caption{\label{fig-covnull}Wenn die Kovarianz 0 ist, gleichen sich die
Abweichungsrechtecke auf 0 aus}

\end{figure}%

\subsection{Die Kovarianz ist schwer zu
interpretieren}\label{die-kovarianz-ist-schwer-zu-interpretieren}

Die Kovarianz hat den Nachteil, dass sie abh√§ngig ist von der
Skalierung. So steigt die Kovarianz z.B. um den Faktor 100, wenn man
eine Variable (z.B. Einkommen) anstelle von Euro in Cent bemisst. Das
ist nicht w√ºnschenswert, denn der Zusammenhang zwischen z.B. Einkommen
und Lebenszufriedenheit ist unabh√§ngig davon, ob man Einkommen in Euro,
Cent oder Dollar misst. Au√üerdem hat die Kovarianz keinen Maximalwert,
der einen perfekten Zusammenhang anzeigt. Insgesamt ist die Kovarianz
schwer zu interpretieren und wird in der praktischen Anwendung nur wenig
verwendet.

\section{Korrelation}\label{korrelation}

\subsection{Korrelation als mittleres
z-Produkt}\label{korrelation-als-mittleres-z-produkt}

Der Korrelationskoeffizient \(r\) nach Karl Pearson l√∂st das Problem,
dass die Kovarianz schwer interpretierbar ist. Der Wertebereich von
\(r\) reicht von -1 (perfekte negative lineare Korrelation) bis +1
(perfekte positive lineare Korrelation). Eine Korrelation von \(r = 0\)
bedeutet \emph{kein linearer} Zusammenhang.

Die Korrelation berechnet sich wie folgt:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Teile alle \(x_i\) durch ihre Standardabweichung, \(s_x\)
\item
  Teile alle \(y_i\) durch ihre Standardabweichung, \(s_y\)
\item
  Berechne mit diesen Werten die Kovarianz
\end{enumerate}

Teilt man n√§mlich alle \(x_i\) bzw. \(y_i\) durch ihre
Standardabweichung, so f√ºhrt man mit \(X\) bzw. \(Y\) eine
z-Transformation durch. Daher kann man den Korrelationskoeffizienten
\(r\) so definieren:

\begin{definition}[Korrelationskoeffizient
r]\protect\hypertarget{def-r}{}\label{def-r}

Der Korrelationskoeffizient \(r\) (nach Pearson) ist definiert als das
mittlere Produkt der z-Wert-Paare, s. Gleichung~\ref{eq-r-def}, vgl.
Cohen u.~a. (2003). Er ist ein Ma√ü des linearen Zusammenhangs zweier
metrischer Variablen. Der Wertebereich ist \([-1;1]\), wobei 0 keinen
Zusammenhang anzeigt und \(|r|=1\) perfekten Zusammenhang.
\(\quad \square\)

\end{definition}

\begin{equation}\phantomsection\label{eq-r-def}{r_{xy}=\frac{1}{n}\sum_{i=1}^n z_{x_i} z_{y_i}}\end{equation}

Man beachte, dass eine Korrelation (genauso wie eine Kovarianz) nur f√ºr
metrische Variablen definiert ist.

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Aus dem Korrelationskoeffizienten k√∂nnen Sie zwei Informationen
ableiten:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \emph{Vorzeichen}: Ein positives Vorzeichen bedeutet positiver
  (gleichsinniger) linearer Zusammenhang (und umgekehrt: negatives
  Vorzeichen, negativer, also gegensinniger linearer Zusammenhang).
\item
  \emph{Absolutwert} der Korrelation: Der Absolutwert\footnotemark{} des
  Korrelationskoeffizienten gibt die St√§rke des linearen Zusammenhangs
  an. Je n√§her der Wert bei 1 liegt desto st√§rker der Zusammenhang.
\end{enumerate}

\begin{itemize}
\tightlist
\item
  \(r = 0\): kein linearer Zusammenhang
\item
  \(r = 1\): perfekter linearer Zusammenhang\(\square\)
\end{itemize}

\end{tcolorbox}

\footnotetext{Betrag}

Eine Zuordnung des Korrelationskoeffizienten zum Profil des
Streudiagramms zeigt Abbildung~\ref{fig-corr-wiki}.

\begin{figure}

\centering{

\includegraphics{index_files/mediabag/img/Correlation_examples2.pdf}

}

\caption{\label{fig-corr-wiki}Verschiedene Streudiagramme, die sich in
ihrem Korrelationskoeffizienten unterscheiden. Quelle: Wikipedia, By
DenisBoigelot, original uploader was Imagecreator, CC0,
https://commons.wikimedia.org/w/index.php?curid=15165296 CC0}

\end{figure}%

Die untere Zeile von Abbildung~\ref{fig-corr-wiki} zeigt Beispiele f√ºr
nicht-lineare Zusammenh√§nge. Wie man sieht, liegt in diesen Beispielen
kein linearer Zusammenhang vor (\(r=0\)), obwohl ein starker
\emph{nicht}-linearer Zusammhang besteht.

\begin{exercise}[Korrelationsspiel]\protect\hypertarget{exr-corrgame}{}\label{exr-corrgame}

Spielen Sie das
\href{https://gallery.shinyapps.io/correlation_game/}{Korrelationsspiel}:
Sie Sehen ein Streudiagramm und m√ºssen den richtigen
Korrelationskoeffizienten eingeben.\(\square\)

\end{exercise}

\begin{exercise}[Interaktive Visualisierung der
Korrelation]\protect\hypertarget{exr-corrvis}{}\label{exr-corrvis}

Auf der Seite von
\href{https://rpsychologist.com/correlation/}{RPsychologist} findet sich
eine ansprechende dynamische Visualisierung der Korrelation. Nutzen Sie
sie, um Ihr Gef√ºhl f√ºr die St√§rke des Korrelationskoeffizienten zu
entwickeln.\(\square\)

\end{exercise}

\subsection{Korrelation mit R
berechnen}\label{korrelation-mit-r-berechnen}

Ob der Verkaufspreis (\texttt{total\_pr}) wohl mit der Dauer der Auktion
(\texttt{duration}) oder mit der Anzahl der Gebote (\texttt{n\_bids)}
(linear) zusammenh√§ngt? Schauen wir nach! Die Funktion
\texttt{correlation()} (aus dem Paket \texttt{\{easystats\}}) erledigt
das Rechnen f√ºr uns, s. \textbf{?@tbl-mario-corr1}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart }\SpecialCharTok{|\textgreater{}} 
  \FunctionTok{select}\NormalTok{(total\_pr, duration, n\_bids) }\SpecialCharTok{|\textgreater{}} 
  \FunctionTok{correlation}\NormalTok{()  }\SpecialCharTok{|\textgreater{}}  \CommentTok{\# aus \textasciigrave{}easystats\textasciigrave{}}
  \FunctionTok{summary}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}lcc@{}}
\caption{Korrelation berechnen mittels der Funktion \texttt{correlation}
aus \texttt{easystats}}\tabularnewline
\toprule\noalign{}
Parameter & n\_bids & duration \\
\midrule\noalign{}
\endfirsthead
\toprule\noalign{}
Parameter & n\_bids & duration \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
total\_pr & 0.13 & -0.04 \\
duration & -0.12 & \\
\end{longtable}

p-value adjustment method: Holm (1979)

Sie k√∂nnen auch auf die letzte Zeile, also dem Befehl \texttt{summary()}
verzichten. Dann ist die Ausgabe ausf√ºhrlicher.

\subsection{Korrelation ‚â† Kausation}\label{korrelation-kausation}

Eine Studie fand eine starke Korrelation, zwischen der (H√∂he des)
Schokoladenkonsums eines Landes und (Anzahl der) Nobelpreise eines
Landes (Messerli 2012), s. Abbildung~\ref{fig-schoki}.

\begin{figure}

\centering{

\includegraphics[width=0.75\textwidth,height=\textheight]{img/correlation_550.png}

}

\caption{\label{fig-schoki}Schoki futtern macht schlau?}

\end{figure}%

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-caution-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-caution-color}{\faFire}\hspace{0.5em}{Vorsicht}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-caution-color-frame]

Korrelation (bzw. Zusammenhang) ungleich Kausation! Korrelation kann
bedeuten, dass eine Kausation vorliegt, aber es muss auch nicht sein,
dass Kausation vorliegt. Liegt Korrelation ohne Kausation vor, so
spricht man von einer Scheinkorrelation.

\end{tcolorbox}

\subsection{Korrelation misst nur linearen
Zusammenhang}\label{korrelation-misst-nur-linearen-zusammenhang}

\begin{example}[Scheinkorrelation]\protect\hypertarget{exm-scheinkorr}{}\label{exm-scheinkorr}

\emph{St√∂rche und Babies}: Eine Urban Myth besagt: Die Anzahl der
St√∂rche pro Landkreis korreliert mit der Anzahl der Babies in diesem
Landkreis.

Eine Erkl√§rung f√ºr dieses (nur scheinbare) Paradoxon ist, dass die
``Naturbelassenheit'' des Landkreises die gemeinsame Ursache f√ºr St√∂rche
ist (St√∂rche lieben Natur) und f√ºr Babies ist (die dortige Kultur
beg√ºnstigt, mehr Kinder pro Frau).

\emph{Corona und Glatze}:

Macht die Glatze krank? M√§nner mit Glatze bekommen h√§ufiger Corona
(Goren u.~a. 2020).

\begin{quote}
Bald men at higher risk of severe case of Covid-19, research
finds\footnote{\url{https://www.telegraph.co.uk/global-health/science-and-disease/bald-men-higher-risk-severe-case-covid-19-research-finds/},
  Abruf 2023-03-24}
\end{quote}

Eine Erkl√§rung lautet, dass Alter einen Effekt hat auf Glatze (je √§lter
ein Mann, desto wahrscheinlicher ist es, dass er eine Glatz hat) und auf
die Schwere des Corona-Verlaufs (√§ltere Menschen haben deutlich
schwerere Corona-Verl√§ufe). \(\square\)

\end{example}

\section{Wie man mit Statistik
l√ºgt}\label{wie-man-mit-statistik-luxfcgt-3}

\subsection{Range-Restriktion}\label{range-restriktion}

Durch (nicht-randomisierte) Einschr√§nkung (Restriktion) des Ranges einer
(oder beider) Variablen sinkt die St√§rke (der Absolutwert) einer
Korrelation, vgl. Cohen u.~a. (2003) und Abbildung~\ref{fig-corr-range}.

Erstellen wir uns dazu zwei Datens√§tze mit je zwei Variablen, \(X\) und
\(Y\) der Gr√∂√üe \(n=100\). Ein Datensatz ist ohne Einschr√§nkung des
Ranges und einer mit. \(X\) und \(Y\) seien normalverteilt mit \(\mu=0\)
(Mittelwert) und \(\sigma=1\) (Streuung); s. Datensatz \texttt{d} in
Listing~\ref{lst-corr-range}. Wir schr√§nken dann den Range von \(X\) ein
auf, sagen wir, den Bereich von \([-0.5, .5]\) (Datensatz
\texttt{d\_filtered}).

\begin{codelisting}

\caption{\label{lst-corr-range}}

\centering{

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{set.seed}\NormalTok{(}\DecValTok{42}\NormalTok{)}
\NormalTok{n }\OtherTok{\textless{}{-}} \FloatTok{1e2}
\NormalTok{d }\OtherTok{\textless{}{-}}
  \FunctionTok{tibble}\NormalTok{(}\AttributeTok{x =} \FunctionTok{rnorm}\NormalTok{(}\AttributeTok{n =}\NormalTok{ n, }\AttributeTok{mean =} \DecValTok{0}\NormalTok{, }\AttributeTok{sd =} \DecValTok{1}\NormalTok{),}
         \AttributeTok{e =} \FunctionTok{rnorm}\NormalTok{(}\AttributeTok{n =}\NormalTok{ n, }\AttributeTok{mean =} \DecValTok{0}\NormalTok{, }\AttributeTok{sd =}\NormalTok{ .}\DecValTok{5}\NormalTok{),}
         \AttributeTok{y =}\NormalTok{ x }\SpecialCharTok{+}\NormalTok{ e)}

\NormalTok{x\_min }\OtherTok{\textless{}{-}} \SpecialCharTok{{-}}\FloatTok{0.5}
\NormalTok{x\_max }\OtherTok{\textless{}{-}} \FloatTok{0.5}

\NormalTok{d\_filtered }\OtherTok{\textless{}{-}}
\NormalTok{d }\SpecialCharTok{|\textgreater{}} 
  \FunctionTok{filter}\NormalTok{(}\FunctionTok{between}\NormalTok{(x, x\_min, x\_max))}
\end{Highlighting}
\end{Shaded}

}

\end{codelisting}%

\begin{figure}

\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{070-zusammenhaenge_files/figure-pdf/fig-corr-range-1.pdf}

}

\subcaption{\label{fig-corr-range-1}Ohne Einschr√§nkung des Range: Starke
Korrelation}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{070-zusammenhaenge_files/figure-pdf/fig-corr-range-2.pdf}

}

\subcaption{\label{fig-corr-range-2}Mit Einschr√§nkung des Range:
Schw√§chere Korrelation}

\end{minipage}%

\caption{\label{fig-corr-range}Schr√§nkt man den Range einer (oder
beider) Variablen ein, so sinkt die St√§rke der Korrelation}

\end{figure}%

\begin{exercise}[Berechnen Sie die
Korrelation]\protect\hypertarget{exr-corr-range}{}\label{exr-corr-range}

Glauben Sie nicht, pr√ºfen Sie nach! Berechnen Sie die Korrelation von
\(X\) und \(Y\) im Datensatz \texttt{d} und \texttt{d\_filtered}!
\(\square\)

\end{exercise}

\section{Fallbeispiel}\label{fallbeispiel}

In Ihrer Arbeit beim Online-Auktionshaus analysieren Sie, welche
Variablen mit dem Verkaufspreis von Computerspielen zusammenh√§ngen.

Falls der Datensatz auf Ihrem Computer (am besten in Ihrem
Projektverzeichnis in RStudio) abgelegt ist, k√∂nnen Sie die Daten so (in
mittlerweile gewohnter Manier) importieren:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{"mariokart.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

Falls der Datensatz im Unterordner mit Namen ``Mein\_Unterordner''
liegt, so w√ºrden Sie folgenden Pfad eingeben:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{"Mein\_Unterordner/mariokart.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

Man beachte, dass solche sog. relativen Pfade (relativ zu Ihrem
Arbeitsverzeichnis, d.h. Ihr Projektverzeichnis in R-Studio)
\emph{nicht} mit einem Schr√§gstrich (Slash) beginnen.

Falls Sie die Daten nicht auf Ihrem Computer haben, k√∂nnen Sie sie
komfortable von z.B. der Webseite von
\href{https://vincentarelbundock.github.io/Rdatasets}{Vincent
Arel-Bundock} herunterladen:

Den Pfad hatten wir in Listing~\ref{lst-mario-path} definiert.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(mariokart\_path)}
\end{Highlighting}
\end{Shaded}

Sie w√§hlen die Variablen von \texttt{mariokart}, die Sie in diesem Fall
interessieren -- nat√ºrlich nur die metrischen -- und lassen sich mit
\texttt{cor} die Korrelation aller Variablen untereinander ausgeben:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart }\SpecialCharTok{\%\textgreater{}\%}  
\NormalTok{  dplyr}\SpecialCharTok{::}\FunctionTok{select}\NormalTok{(start\_pr, ship\_pr, total\_pr) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{cor}\NormalTok{() }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{round}\NormalTok{(}\DecValTok{2}\NormalTok{) }\CommentTok{\# Runden auf zwei Dezimalen}
\DocumentationTok{\#\#          start\_pr ship\_pr total\_pr}
\DocumentationTok{\#\# start\_pr     1.00    0.03     0.07}
\DocumentationTok{\#\# ship\_pr      0.03    1.00     0.54}
\DocumentationTok{\#\# total\_pr     0.07    0.54     1.00}
\end{Highlighting}
\end{Shaded}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-caution-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-caution-color}{\faFire}\hspace{0.5em}{Namensverwechslung (name clash)}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-caution-color-frame]

Es kann vorkommen, dass Sie zwei R-Pakete geladen haben, in denen es
jeweils z.B. eine Funktion mit Namen \texttt{select} gibt. R wird in dem
Fall diejenige Funktion verwenden, deren Paket Sie als letztes gestartet
haben. Das kann dann das falsche \texttt{select} sein, wie es mir oben
in der Syntax passiert ist. In dem Fall resultiert eine verwirrende
Fehlermeldung, die sinngem√§√ü sagt: ``Hey Mensch, du hast Argumente in
der Funktion verwendet, die du gar nicht verwenden darfst, da es sie
nicht gibt.'' Auf Errisch:
\texttt{Error\ in\ select(.,\ duration,\ n\_bids,\ start\_pr,\ ship\_pr,\ total\_pr,\ seller\_rate,\ \ :\ unused\ arguments\ (duration,\ n\_bids,\ start\_pr,\ ship\_pr,\ total\_pr,\ seller\_rate,\ wheels)}.
Eine einfache Abhilfe ist es, R zu sagen: ``Hey R, nimm gef√§lligst
\texttt{select} aus dem Paket \texttt{dplyr}, dort''wohnt'' n√§mlich
\texttt{select}. Auf Errisch spricht sich das so:
\texttt{dplyr::select(...)}.\(\square\)

\end{tcolorbox}

Etwas sch√∂ner sieht die Ausgabe mit dem Befehl \texttt{correlation} aus
\texttt{\{easystats\}} aus, s. Tabelle~\ref{tbl-mario-corr-pdf}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart }\SpecialCharTok{\%\textgreater{}\%} 
\NormalTok{  dplyr}\SpecialCharTok{::}\FunctionTok{select}\NormalTok{(start\_pr, ship\_pr, total\_pr) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{correlation}\NormalTok{() }\SpecialCharTok{|\textgreater{}} 
  \FunctionTok{summary}\NormalTok{() }\SpecialCharTok{|\textgreater{}} 
  \FunctionTok{print\_md}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}lcc@{}}

\caption{\label{tbl-mario-corr-pdf}Korrelationstabelle (tidy) im
Datensatz mariokart}

\tabularnewline

\caption{Correlation Matrix (pearson-method)}\tabularnewline
\toprule\noalign{}
Parameter & total\_pr & ship\_pr \\
\midrule\noalign{}
\endfirsthead
\toprule\noalign{}
Parameter & total\_pr & ship\_pr \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
start\_pr & 0.07 & 0.03 \\
ship\_pr & 0.54*** & \\

\end{longtable}

p-value adjustment method: Holm (1979)

Neben einigen Statistiken, die wir einfach geflissentlich ausblenden
(\texttt{t} und \texttt{p}) beinhaltet die Tabelle eine interessante
Information: den Sch√§tzbereich f√ºr die Korrelation, gekennzeichnet als
\texttt{95\%\ CI}. \emph{Grob} gesagt k√∂nnen wir diese Information so
interpretieren: ``Mit 95\% Wahrscheinlichkeit liegt der echte Wert der
Korrelation in folgendem Bereich.''\footnote{Bayesianische
  Interpretation}

M√∂chte man nur einzelne Korrelationskoeffizienten ausrechnen, k√∂nnen wir
die Idee des Zusammenfassens, s. Gleichung~\ref{eq-desk2}, nutzen:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{cor\_super\_wichtig =} \FunctionTok{cor}\NormalTok{(total\_pr, wheels))}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}r@{}}
\toprule\noalign{}
cor\_super\_wichtig \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
0.3299838 \\
\end{longtable}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-caution-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-caution-color}{\faFire}\hspace{0.5em}{Vorsicht}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-caution-color-frame]

Im Falle von fehlenden Werte m√ºssen Sie den Befehl \texttt{cor()} aus
seiner sch√ºchternen Vorsicht befreien und ermutigen, trotz fehlender
Werte einen Korrelationskoeffizienten auszugeben. Das geht mit dem
Argument \texttt{use\ =\ "complete.obs"} in \texttt{cor}.

\end{tcolorbox}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{cor\_super\_wichtig =} \FunctionTok{cor}\NormalTok{(total\_pr, wheels, }\AttributeTok{use =} \StringTok{"complete.obs"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}r@{}}
\toprule\noalign{}
cor\_super\_wichtig \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
0.3299838 \\
\end{longtable}

\begin{quote}
{\emoji{student}} Immer so viele Zahlen! Ich brauch Bilder.
\end{quote}

Mit dem Befehl \texttt{plot\_correlation} aus dem R-Paket
\texttt{\{dataExplorer\}} bekommt man eine ansehnliche Heatmap zur
Verdeutlichung der Korrelationswerte, s.
Abbildung~\ref{fig-mario-corr-pdf}.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(DataExplorer)}

\NormalTok{mariokart }\SpecialCharTok{\%\textgreater{}\%} 
\NormalTok{  dplyr}\SpecialCharTok{::}\FunctionTok{select}\NormalTok{(start\_pr, ship\_pr, total\_pr) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{plot\_correlation}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]

\centering{

\includegraphics{070-zusammenhaenge_files/figure-pdf/fig-mario-corr-pdf-1.pdf}

}

\caption{\label{fig-mario-corr-pdf}Heatmap zu den Korrelationen im
Datensatz mariokart.}

\end{figure}%

\section{Vertiefung}\label{vertiefung-6}

Dieser \href{https://www.youtube.com/watch?v=8B271L3NtAw}{TED-Vortrag}
informiert zum Thema Scheinkorrelation.
\href{https://scheinkorrelation.jimdofree.com/}{Hier} finden Sie weitere
Beispiele f√ºr Scheinkorrelationen.

\section{Aufgaben}\label{aufgaben-6}

Schauen Sie sich auch mal auf der Webseite \emph{Datenwerk}\footnote{\url{https://datenwerk.netlify.app/}}
die Aufgaben zu dem Tag
\href{https://datenwerk.netlify.app/\#category=association}{association}
an.

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \href{https://datenwerk.netlify.app/posts/nasa02/nasa02.html}{nasa02}
\item
  \href{https://datenwerk.netlify.app/posts/mariokart-korr1/mariokart-korr1.html}{mariokart-korr1}
\item
  \href{https://datenwerk.netlify.app/posts/mariokart-korr2/mariokart-korr2.html}{mariokart-korr2}
\item
  \href{https://datenwerk.netlify.app/posts/mariokart-korr3/mariokart-korr3.html}{mariokart-korr3}
\item
  \href{https://datenwerk.netlify.app/posts/mariokart-korr4/mariokart-korr4.html}{mariokart-korr4}
\item
  \href{https://datenwerk.netlify.app/posts/korr01/korr01.html}{korr01}
\item
  \href{https://datenwerk.netlify.app/posts/korr02/korr02.html}{korr02}
\end{enumerate}

\section{Halbzeitquiz}\label{halbzeitquiz}

Testen Sie Ihr Wissen mit
\href{https://forms.gle/w7eTW3ftKy8Hv3nw8}{diesem Quiz} zur deskriptiven
Statistik (Ma√üe der zentralen Tendenz, Variabilit√§t, Verteilungsformen,
Normalverteilung, Korrelation).\footnote{\url{https://forms.gle/w7eTW3ftKy8Hv3nw8}}

\section{Fallstudien}\label{fallstudien-1}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \href{https://datenwerk.netlify.app/posts/flights-yacsda-eda/}{YACSDA:
  EDA zu Flugversp√§tungen}\footnote{\url{https://datenwerk.netlify.app/posts/flights-yacsda-eda}}
\end{enumerate}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Einige der Fallstudien oder √úbungsaufgaben k√∂nnen theoretische Inhalte
(Konzepte der Statistik) oder praktische Inhalte (R-Befehle) enthalten,
die Sie (noch) nicht kennen. In dem Fall: Einfach ignorieren. Oder Sie
suchen nach einer L√∂sung anhand von Konzepten bzw. R-Befehlen, die Sie
kennen.\(\square\)

\end{tcolorbox}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{1}
\tightlist
\item
  \href{https://data-se.netlify.app/2021/02/11/yacda-topgear/}{YACSDA:
  Topgear}\footnote{\url{https://data-se.netlify.app/2021/02/11/yacda-topgear/}}
\item
  \href{https://data-se.netlify.app/2021/05/27/datensatz-flights-finde-den-tag-mit-den-meisten-abfl\%C3\%BCgen/}{Datensatz
  flights: Finde den Tag mit den meisten Abfl√ºgen}\footnote{\url{https://data-se.netlify.app/2021/05/27/datensatz-flights-finde-den-tag-mit-den-meisten-abfl\%C3\%BCgen/}}
\item
  \href{https://www.njtierney.com/post/2017/11/07/tidyverse-billboard/}{Tidyverse
  Case Study: Exploring the Billboard Charts}\footnote{\url{https://www.njtierney.com/post/2017/11/07/tidyverse-billboard/}}
\end{enumerate}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Bitte verstehen Sie die folgende Auswahl an Fallstudien als Auswahl. Es
ist nicht n√∂tig, dass Sie alle Fallstudien bearbeiten. Sehen Sie die
Fallstudien eher als Angebot zur selektiven Vertiefung und √úbung, dort,
wo Sie es n√∂tig haben.\(\square\)

\end{tcolorbox}

\section{Literaturhinweise}\label{literaturhinweise-6}

Auch die Korrelation ist ein Allzeit-Favorit in der Statistik;
entsprechend wird Ihnen jedes typische Statistik-Buch die Grundlagen
erl√§utern. Schauen Sie doch mal, was Ihre Bibliothek Ihnen zu bieten
hat. Wer eine unorthodoxe (geometrische!) Herangehensweise an die
Korrelation (und Regression) sucht, darf sich auf eine Menge Aha-Momente
bei Kaplan (2009) freuen. Ein sch√∂nes, modernes Statistikbuch bietet der
Psychologie-Prof Russel Poldrack von der Princeton University (2023);
auch dieses Buch ist frei online verf√ºgbar. Tipp: Nutzen Sie die
√úbersetzungfunktion Ihres Browsers, wenn Sie das Buch nicht in Englisch
lesen wollen. Ein Klassiker, wenn auch nicht mehr ganz frisch, ist Cohen
u.~a. (2003); immer noch sehr empfehlenswert, aber etwas h√∂heren
Anspruchs.

\section{Literatur}\label{literatur-6}

\chapter{Geradenmodelle 1}\label{sec-gerade1}

\section{Lernsteuerung}\label{lernsteuerung-7}

\subsection{Standort im Lernpfad}\label{standort-im-lernpfad-7}

Abb. Abbildung~\ref{fig-ueberblick} zeigt den Standort dieses Kapitels
im Lernpfad und gibt damit einen √úberblick √ºber das Thema dieses
Kapitels im Kontext aller Kapitel.

\subsection{Lernziele}\label{lernziele-8}

\begin{itemize}
\tightlist
\item
  Sie k√∂nnen ein Punktmodell von einem Geradenmodell begrifflich
  unterscheiden.
\item
  Sie k√∂nnen die Bestandteile eines Geradenmodells aufz√§hlen und
  erl√§utern.
\item
  Sie k√∂nnen die G√ºte eines Geradenmodells anhand von Kennzahlen
  bestimmen.
\item
  Sie k√∂nnen Geradenmodelle sowie ihre Modellg√ºte in R berechnen.
\end{itemize}

\subsection{Ben√∂tigte R-Pakete}\label{benuxf6tigte-r-pakete-6}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(tidyverse)}
\FunctionTok{library}\NormalTok{(easystats)}
\end{Highlighting}
\end{Shaded}

\[
\definecolor{ycol}{RGB}{230,159,0}
\definecolor{modelcol}{RGB}{86,180,233}
\definecolor{errorcol}{RGB}{0,158,115}
\definecolor{beta0col}{RGB}{213,94,0}
\definecolor{beta1col}{RGB}{0,114,178}
\definecolor{xcol}{RGB}{204,121,167}
\]

\subsection{Ben√∂tigte Daten}\label{benuxf6tigte-daten-6}

Listing~\ref{lst-mario-path} definiert den Pfad zum Datensatz
\texttt{mariokart} und importiert die zugeh√∂rige CSV-Datei in R, so dass
wir einen Tibble mit Namen \texttt{mariokart} erhalten.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart\_path }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(}
  \StringTok{"https://vincentarelbundock.github.io/Rdatasets/"}\NormalTok{,}
  \StringTok{"csv/openintro/mariokart.csv"}\NormalTok{)}

\NormalTok{mariokart }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(mariokart\_path)}
\end{Highlighting}
\end{Shaded}

\section{Vorhersagen}\label{vorhersagen}

Vorhersagen sind eine n√ºtzliche Sache, unter (mindestens) folgenden
Voraussetzungen:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Sie sind pr√§zise
\item
  Wir kennen die Pr√§zision
\item
  Jemand interessiert sich f√ºr die Vorhersage
\end{enumerate}

Die Methode des Vorhersagens, die wir hier betrachten, nennt man auch
\emph{lineare Regression}.

\subsection{Vorhersagen ohne
Pr√§diktor}\label{vorhersagen-ohne-pruxe4diktor}

\begin{example}[]\protect\hypertarget{exm-noten-prognose}{}\label{exm-noten-prognose}

Nach intensiver Besch√§ftigung mit Statistik sind Sie allgemein als
Checker bekannt. Viele j√ºngere Studentis fragen Sie um Rat. eines Tages
kommt ei Studenti, Toni, und fragt: ``Welche Statistiknote kann ich in
der Klausur erwarten?'' Sie entgegnen: ``Wie viel hast du denn
gelernt?''. Die Antwort: ``Sag ich nicht.''

Nach kurzem √úberlegen geben sie den Notenschnitt der letzten Klausur als
Prognose f√ºr diese Person. Dazu rechnen Sie schnell den Notenschnitt
(Mittelwert) aus.

Zuerst importieren Sie die Daten der letzten Klausur\footnote{Diese
  Syntax wird bei Ihnen nur funktionieren, wenn auf \emph{Ihrem
  Computer} dieser Ordner mit dieser Datei existiert. Andernfalls m√ºssen
  Sie die Daten erst herunterladen:
  \url{https://raw.githubusercontent.com/sebastiansauer/statistik1/main/daten/noten.csv}.}:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{noten2 }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{"daten/noten2.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

Dann rechnen Sie den Mittelwert aus:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{noten2 }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{mw =} \FunctionTok{mean}\NormalTok{(y))  }\CommentTok{\# y ist der Punktwert in der Klausur}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}r@{}}
\toprule\noalign{}
mw \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
71.07968 \\
\end{longtable}

Ihre Antwort lautet also: ``Im Schnitt haben die Studis bei der letzten
Klausur gut 70\% der Punkte erzielt. Diesen Wert kannst du erwarten.
Solange ich keine genaueren Infos habe, z.B. wieviel du gelernt hast,
kann ich dir keine genauere Vorhersage machen, sorry!''\(\square\)

\end{example}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Ohne Kenntnis eines Pr√§diktors (UV) (wie z.B. Lernzeit) ist der
Mittelwert ein geeigneter Vorhersagewert f√ºr jede Beobachtung, s.
Abbildung~\ref{fig-noten3}. Wir nutzen den Mittelwert als Punktmodell
f√ºr den Klausurerfolg.\(\square\)

\end{tcolorbox}

\begin{figure}

\centering{

\includegraphics[width=0.75\textwidth,height=\textheight]{080-regression1_files/figure-pdf/fig-noten3-1.pdf}

}

\caption{\label{fig-noten3}Mittelwert als Vorhersagewert, bzw.
Mittelwert als Punktmodell}

\end{figure}%

\subsection{Nullmodell (Punktmodell)}\label{nullmodell-punktmodell}

Modelle ohne Pr√§diktor, Punktmodelle also, kann man so bezeichnen:
\texttt{y\ \textasciitilde{}\ 1}. Da das Modell null Pr√§diktoren hat,
nennt man es auch manchmal ``Nullmodell''.

Auf Errisch kann man dieses Nullmodell so spezifizieren:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{lm0 }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(y }\SpecialCharTok{\textasciitilde{}} \DecValTok{1}\NormalTok{, }\AttributeTok{data =}\NormalTok{ noten2)}
\NormalTok{lm0}
\DocumentationTok{\#\# }
\DocumentationTok{\#\# Call:}
\DocumentationTok{\#\# lm(formula = y \textasciitilde{} 1, data = noten2)}
\DocumentationTok{\#\# }
\DocumentationTok{\#\# Coefficients:}
\DocumentationTok{\#\# (Intercept)  }
\DocumentationTok{\#\#       71.08}
\end{Highlighting}
\end{Shaded}

\texttt{lm} steht f√ºr ``lineares Modell'', die \texttt{1} sagt, dass es
keine Pr√§diktoren gibt. In dem Fall wird der Mittelwert als Gerade
verwendet. Der zur√ºckgemeldete Koeffizient \texttt{(Intercept)} ist hier
der Modell des Punktmodells. Da es ein Punktmodell ist, sagt es f√ºr alle
Beobachtungen (hier Studentis) den gleichen Wert vorher.

Die Regressionsgleichung lautet demnach: \texttt{y\_pred\ =\ 71.08}. In
Worten: ``Wir sagen f√ºr jede Beobachtung einen Wert von ca. 71 vorher''.

\subsection{Vorhersagen mit
Pr√§diktor}\label{vorhersagen-mit-pruxe4diktor}

\begin{example}[Toni verr√§t die
Lernzeit]\protect\hypertarget{exm-noten3}{}\label{exm-noten3}

Toni entschlie√üt sich dann doch noch, die Lernzeit zu verraten: ``Okay,
also ich hab insgesamt 42 Stunden gelernt, insgesamt.'' Jetzt m√ºssen Sie
erstmal nachdenken: ``Wie viele Klausurpunkte sag ich vorher, wenn Toni
42 Stunden gelernt hat?''

Sie visualisieren sich zur Hilfe die vorliegenden Daten, s.
Abbildung~\ref{fig-noten4}, a).\footnote{Die Daten stehen
  \href{https://raw.githubusercontent.com/sebastiansauer/statistik1/main/daten/noten2.csv}{hier}
  zum Download bereit.}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(DataExplorer)}
\NormalTok{noten2 }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{plot\_scatterplot}\NormalTok{(}\AttributeTok{by =} \StringTok{"y"}\NormalTok{)  }\CommentTok{\# Y{-}Variable muss angegeben werden}
\end{Highlighting}
\end{Shaded}

Auf dieser Basis antworten Sie Toni: ``Bei 42 Stunden Lernzeit solltest
du so 46 Punkte bekommen. K√∂nnte mit dem Bestehen eng werden.'' Toni ist
nicht begeistert von Ihrer Prognose und zieht von dannen.\(\square\)

\end{example}

Der Trend (im Sinne eines linearen Zusammenhangs) von \emph{Lernzeit}
und \emph{Klausurpunkte} ist deutlich zu erkennen. Mit einem Lineal
k√∂nnte man eine entsprechende Gerade in das Streudiagramm einzeichnen,
s. Abbildung~\ref{fig-noten4}, b).

\begin{figure}

\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{080-regression1_files/figure-pdf/fig-noten4-1.pdf}

}

\subcaption{\label{fig-noten4-1}Gemeinsame Verteilung (Zusammenhang) von
Lernzeit (X) und Noten (Y)}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{080-regression1_files/figure-pdf/fig-noten4-2.pdf}

}

\subcaption{\label{fig-noten4-2}Eine `Trendgerade' (blau) im Datensatz
noten2. Mittelwerte sind mit gestrichelten Linien eingezeichnet. Tonis
Vorhersage ist mit einem roten Punkt gekennzeichnet.}

\end{minipage}%

\caption{\label{fig-noten4}Noten und Lernzeit: Rohdaten und Modell}

\end{figure}%

Eine Gerade eignet sich, um einen linearen Trend zusammenzufassen.

\section{Geradenmodelle}\label{geradenmodelle}

\subsection{Achsenabschnitt und Steigung definieren eine
Gerade}\label{achsenabschnitt-und-steigung-definieren-eine-gerade}

Wir verwenden eine Gerade als Modell f√ºr die Daten, s.
Abbildung~\ref{fig-noten4}, rechts. Anders gesagt: Wir modellieren die
Daten (bzw. deren Zusammenhang) mit einer Geraden.

Ein \emph{Geradenmodell} ist eine Verallgemeinerung des Punktmodells:
Ein Punktmodell sagt f√ºr alle Beobachtungen den gleichen Wert vorher.
Abbildung~\ref{fig-noten3} und Abbildung~\ref{fig-noten4} stellen ein
Punktmodell einem Geradenmodell gegen√ºber.

In einem Geradenmodell wird nicht mehr (notwendig) f√ºr jede Beobachtung
die gleiche Vorhersage \(\hat{y}\) gemacht (wie das bei einem
Punktmodell der Fall ist).

\begin{definition}[Gerade]\protect\hypertarget{def-gerade}{}\label{def-gerade}

Eine Gerade ist das, was man bekommt, wenn man eine lineare Funktion in
ein Koordinatensystem einzeichnet. Man kann sie durch durch zwei
\emph{Koeffizienten} festlegen: Achsenabschnitt (engl.
\emph{intercept}), und Steigung (engl. \emph{slope}). H√§ufig wird (z.B.
im Schulunterricht) der Achsenabschnitt mit \(t\) und die Steigung mit
\(m\) bezeichnet:
\(f(\color{xcol}{x})=\color{ycol}{y}=\color{beta1col}{m} \color{xcol}{x} + \color{beta0col}{t}\).

In der Statistik wird folgende Nomenklatur bevorzugt:
\(f(\color{xcol}{x})=\color{ycol}{\hat{y}}=\color{beta0col}{\beta_0} + \color{beta1col}{\beta_1} \color{xcol}{x}\)
oder
\(f(\color{xcol}{x})=\color{ycol}{\hat{y}}= \color{beta0col}{b_0} + \color{beta1col}{b_1} \color{xcol}{x}\)
.\footnote{Die Nomenklatur mit \(b_0, b_1\) hat den Vorteil, dass man
  das Modell einfach erweitern kann: \(b_2, b_3, ...\). Anstelle von
  \(b\) liest man auch oft \(\beta\). Griechische Buchstaben werden
  meist verwendet, um zu zeigen, dass man an einer Aussage √ºber eine
  Population, nicht nur √ºber eine Stichprobe, machen m√∂chte.}

Das ``Dach'' √ºber y, \(\color{modelcol}{\hat{y}}\), dr√ºckt aus, dass es
sich den den gesch√§tzten, bzw. vom Modell vorhergesagten
(``modellierten'') Wert f√ºr \(\color{ycol}{y}\) handelt, nicht das
tats√§chliche (empirische, beobachtete) \(\color{ycol}{y}\). \(\square\)

\end{definition}

Abbildung~\ref{fig-regrtex} skizziert die Elemente einer
Regression.\footnote{Bildquelle: Basierend auf einem Diagramm von Henri
  Menke, \url{https://texample.net/tikz/examples/linear-regression/}}

\begin{figure}

\centering{

\includegraphics[width=0.7\textwidth,height=\textheight]{img/regr.png}

}

\caption{\label{fig-regrtex}Achsenabschnitt und Steigung einer
Regressionsgeraden}

\end{figure}%

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-important-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-important-color}{\faExclamation}\hspace{0.5em}{Das einfache lineare Modell}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-important-color-frame]

Das einfache lineare Modell nimmt den Wert einer {abh√§ngigen metrischen
Variablen, y} als lineare Funktion von {unabh√§ngigen Variablen, x} an,
plus einem {Fehlerterm, e}. \(\square\)

\end{tcolorbox}

\[\begin{aligned}
\color{ycol}{y} &= f(\color{xcol}{x}) + \color{errorcol}{\epsilon} \\
\color{ycol}{y_i} &= \color{beta0col}{\beta_0} + \color{beta1col}{\beta_1} \cdot \color{modelcol}{x_i} + \color{errorcol}{\epsilon_i} \square
\end{aligned}\]

Mit:

\begin{itemize}
\tightlist
\item
  \(\color{beta0col}{\beta_0}\): gesch√§tzter y-Achsenabschnitt laut
  Modell
\item
  \(\color{beta1col}{\beta_1}\): gesch√§tzte Steigung laut Modell
\item
  \(\color{errorcol}{\epsilon}\): Fehler des Modells
\end{itemize}

Je nach Datenlage k√∂nnen sich Regressionsgerade in Steigung oder
Achsenabschnitt unterscheiden, s. Abbildung~\ref{fig-regr-div}.

\begin{figure}

\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{080-regression1_files/figure-pdf/fig-regr-div-1.pdf}

}

\subcaption{\label{fig-regr-div-1}Datensatz 1}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{080-regression1_files/figure-pdf/fig-regr-div-2.pdf}

}

\subcaption{\label{fig-regr-div-2}Datensatz 2}

\end{minipage}%

\caption{\label{fig-regr-div}Regressionsanalysen mit verschiedenen
Koeffizienten, aber gleicher Modellg√ºte}

\end{figure}%

\begin{example}[Toni will es genau
wissen]\protect\hypertarget{exm-noten5}{}\label{exm-noten5}

Da Toni Sie als Statistik-Profi abgespeichert hat, w erden Sie wieder
konsultiert. ``Okay, ich hab noch zwei Fragen. Erstens: Wie viele Punkte
bekomme ich, wenn ich gar nicht lerne? Zweitens, wie viele Punkte
bekomme ich pro gelernte Stunde? Ist immerhin meine Lebenszeit, krieg
ich nicht zur√ºck!''

Das sind gute Fragen. Den \(\color{ycol}{Y}\)-Wert (Klausurpunkte) bei
\(\color{xcol}{X}=0\) gibt der Achsenabschnitt zur√ºck. Schnell
skizzieren Sie dazu ein Diagramm, s. Abbildung~\ref{fig-beta0}. Puh, die
Antwort wird Toni nicht gefallen \ldots{}\(\square\)

\end{example}

\begin{figure}

\centering{

\includegraphics{080-regression1_files/figure-pdf/fig-beta0-1.pdf}

}

\caption{\label{fig-beta0}Der Achsenabschnitt: Wie viele Punkt kann Toni
erwarten bei 0 Lernstunden? (roter Punkt bei x=0)}

\end{figure}%

Anstelle auf Abbildung~\ref{fig-beta0} zu schauen, k√∂nnen Sie sich auch
von R Tonis Klausurerfolg vorhersagen (to predict) lassen:

\begin{quote}
{\emoji{teacher}} Hey R, predicte mir mal auf Basis vom Modell ``lm1''
den Lernerfolg f√ºr Toni, wenn der x=0 Stunden lernt.
\end{quote}

\begin{quote}
{\emoji{robot}} Okay, ich predicte mit Modell ``lm1'' und nehme als neue
Datentabelle Tonis Lernzeit (x=0)!
\end{quote}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{tonis\_lernzeit }\OtherTok{\textless{}{-}} \FunctionTok{tibble}\NormalTok{(}\AttributeTok{x =} \DecValTok{0}\NormalTok{)  }\CommentTok{\# \textasciigrave{}tibble\textasciigrave{} erstellt eine Tabelle}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{predict}\NormalTok{(lm1, }\AttributeTok{newdata =}\NormalTok{ tonis\_lernzeit)}
\DocumentationTok{\#\#        1 }
\DocumentationTok{\#\# 8.603032}
\end{Highlighting}
\end{Shaded}

\subsection{Spezifikation eines
Geradenmodells}\label{spezifikation-eines-geradenmodells}

Ein Geradenmodell kann man im einfachsten Fall so spezifizieren, s.
Gleichung~\ref{eq-mod1} :

\begin{equation}\phantomsection\label{eq-mod1}{\color{ycol}{\hat{y}} \sim \color{xcol}{\text{x}}}\end{equation}

Lies: ``Laut meinem Modell ist mein (gesch√§tztes)
\(\color{ycol}{\hat{y}}\) irgendeine Funktion von
\(\color{xcol}{\text{x}}\)''.

Wir erinnern uns, dass \(\color{ycol}{Y}\) die \(\color{ycol}{AV}\) und
\(\color{xcol}{X}\) die \(\color{xcol}{UV}\) ist:

\begin{equation}\phantomsection\label{eq-mod1}{\color{ycol}{AV} \sim \color{xcol}{UV}}\end{equation}

Wir werden als Funktion (erstmal) nur Geraden verwenden. Die genauen
Werte der Gerade lassen wir uns (erstmal) vom Computer ausrechnen.

Gleichung~\ref{eq-mod1} k√∂nnen Sie so ins Errische √ºbersetzen:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{lm}\NormalTok{(y }\SpecialCharTok{\textasciitilde{}}\NormalTok{ x, }\AttributeTok{data =}\NormalTok{ meine\_daten)}
\end{Highlighting}
\end{Shaded}

\texttt{lm} steht f√ºr ``lineares Modell'', also eine Gerade als Modell.
Die Gerade nennt man auch \emph{Regressionsgerade}\footnote{an anderer
  Stelle in diesem Buch unscharf als ``Trendgerade'' bezeichnet.}.

\begin{example}[Zahlen f√ºr
Toni]\protect\hypertarget{exm-noten5}{}\label{exm-noten5}

Toni ist nicht zufrieden mit Ihren Vorhersagen: ``Jetzt h√∂r mal auf mit
deinem Lineal hier herum zu malen. Ich will es genau wissen, sag mir
pr√§zise Zahlen!''.

\end{example}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{lm1 }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(y }\SpecialCharTok{\textasciitilde{}}\NormalTok{ x, }\AttributeTok{data =}\NormalTok{ noten2)}
\NormalTok{lm1}
\DocumentationTok{\#\# }
\DocumentationTok{\#\# Call:}
\DocumentationTok{\#\# lm(formula = y \textasciitilde{} x, data = noten2)}
\DocumentationTok{\#\# }
\DocumentationTok{\#\# Coefficients:}
\DocumentationTok{\#\# (Intercept)            x  }
\DocumentationTok{\#\#      8.6030       0.8794}
\end{Highlighting}
\end{Shaded}

R gibt Ihnen die beiden Koeffizienten f√ºr die Gerade aus. Den Namen des
Objekts k√∂nnen Sie frei aussuchen, z.B. \texttt{mein\_erstes\_lm}.

Die Regressionsgleichung lautet demnach:
\texttt{y\_pred\ =\ 8.6\ +\ 0.88*x}

\texttt{8.6} ist der Achsenabschnitt, d.h. der Wert von
\(\color{ycol}{Y}\) wenn \(\color{xcol}{x}=0\). \texttt{0.88} ist das
Regressionsgewicht, d.h. die Steigung der Regressionsgeraden: F√ºr jede
Stunde Lernzeit steigt der vorhergesagte Klausurerfolg um \texttt{0.88}
Punkte.

Mit Kenntnis der beiden Koeffizienten kann man beliebige
\(\color{ycol}{Y}\)-Werte ausrechnen gegeben bestimmte
\(\color{xcol}{X}\)-Werte. Hat jemand zum Beispiel 10 Stunden gelernt,
w√ºrden wir folgendes Klausurergebnis vorhersagen:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{lernzeit }\OtherTok{\textless{}{-}} \DecValTok{10}
\NormalTok{y\_pred }\OtherTok{\textless{}{-}} \FloatTok{8.6} \SpecialCharTok{+} \FloatTok{0.88}\SpecialCharTok{*}\NormalTok{lernzeit}
\NormalTok{y\_pred}
\DocumentationTok{\#\# [1] 17.4}
\end{Highlighting}
\end{Shaded}

\begin{example}[Vorhersage f√ºr Klausurerfolg, n√§chster
Versuch]\protect\hypertarget{exm-noten6}{}\label{exm-noten6}

Sie versuchen, noch etwas Gutes f√ºr Toni zu tun. R hilft Ihnen dabei und
rechnet die erwartete Punktzahl aus, wenn Toni 73 Stunden lernt. Sie
d√ºrfen es aber auch selber rechnen, wenn Ihnen das lieber ist.

\end{example}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{tonis\_lernzeit2 }\OtherTok{\textless{}{-}} \FunctionTok{tibble}\NormalTok{(}\AttributeTok{x =} \DecValTok{73}\NormalTok{)  }\CommentTok{\# Der Befehl \textasciigrave{}tibble\textasciigrave{} erstellt eine Tabelle in R.}
\end{Highlighting}
\end{Shaded}

\texttt{tonis\_lernzeit2} ist eine Tabelle mit einer Zeile und einer
Spalte:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{tonis\_lernzeit2}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}r@{}}
\toprule\noalign{}
x \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
73 \\
\end{longtable}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{predict}\NormalTok{(lm1, }\AttributeTok{newdata =}\NormalTok{ tonis\_lernzeit2)}
\DocumentationTok{\#\#       1 }
\DocumentationTok{\#\# 72.7999}
\end{Highlighting}
\end{Shaded}

Die Syntax von \texttt{predict} lautet:

\begin{verbatim}
predict(name_des_objekts, newdata = tabelle_mit_pr√§diktorwerten)
\end{verbatim}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Mit \texttt{predict} bekommt man eine Vorhersage; im Standard eine
``Punkt-Vorhersage'', eine einzelne Zahl.\(\square\)

\end{tcolorbox}

\subsection{Vorhersagefehler}\label{vorhersagefehler}

Die Differenz zwischen vorhergesagten Wert f√ºr eine (neue) Beobachtung,
\(\color{modelcol}{\hat{y_0}}\) und ihrem tats√§chlichen Wert nennt man
Vorhersagefehler (error, \(e_i\)) oder \emph{Residuum}:
\(\color{errorcol}{e_i} = \color{ycol}{y_i} - \color{modelcol}{\hat{y}_i}\).

\begin{figure}

\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{080-regression1_files/figure-pdf/fig-resid-1.pdf}

}

\subcaption{\label{fig-resid-1}Residuen beim Geradenmodell (lm1)}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{080-regression1_files/figure-pdf/fig-resid-2.pdf}

}

\subcaption{\label{fig-resid-2}Residuen beim Punktmodell (lm0)}

\end{minipage}%

\caption{\label{fig-resid}Vorhersagefehler als Abweichungsbalken}

\end{figure}%

Wie ist es mit den Vorhersagefehlern von beiden Modellen bestellt?

Lassen wir uns von R die Streuung (Residuen) in Form der mittleren
Absolutabweichung (MAE) ausgeben\footnote{aus dem Paket
  \texttt{easystats}}:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{mae}\NormalTok{(lm0)}
\DocumentationTok{\#\# [1] 11.18385}
\FunctionTok{mae}\NormalTok{(lm1)}
\DocumentationTok{\#\# [1] 7.954085}
\end{Highlighting}
\end{Shaded}

Vergleichen wir MAE im Nullmodell mit MAE in \texttt{lm1}:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{verhaeltnis\_fehler\_mae }\OtherTok{\textless{}{-}} \FunctionTok{mae}\NormalTok{(lm1) }\SpecialCharTok{/} \FunctionTok{mae}\NormalTok{(lm0)}
\NormalTok{verhaeltnis\_fehler\_mae}
\DocumentationTok{\#\# [1] 0.7112118}
\end{Highlighting}
\end{Shaded}

Ah! Das Geradenmodell ist viel besser: Von \texttt{lm0} zu \texttt{lm1}
haben die mittlere (Absolut-)L√§nge des Fehlerbalkens auf 71 Prozent
verbessert. Nicht schlecht!

\begin{definition}[Fehlerstreuung]\protect\hypertarget{def-fehlerstreung}{}\label{def-fehlerstreung}

Als Fehlerstreuung bezeichnen wir die Gesamtheit der Abweichungen der
beobachteten Werte (\(y_i\)) vom vorhergesagten Wert
(\(\hat{y}_i\)).\(\square\)

\end{definition}

Zur Berechnung der Fehlerstreuung gibt es mehrere Kenngr√∂√üen wie MAE
oder MSE.

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Ein Geradenmodell ist immer besser als ein Punktmodell (im Hinblick auf
die Verringerung der Fehlerstreuung), solange X mit Y korreliert
ist.\(\square\)

\end{tcolorbox}

Nat√ºrlich k√∂nnen wir - in Analogie zur Varianz - auch den mittleren
Quadratfehlerbalken (Mean Squared Error, MSE) berechnen\footnote{Wer
  mag, kann den MSE auch von Hand berechnen:
  \texttt{mean((noten2\$y-mean(noten2\$y))\^{}2)}}.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{mse}\NormalTok{(lm0)}
\DocumentationTok{\#\# [1] 192.7863}
\FunctionTok{mse}\NormalTok{(lm1)}
\DocumentationTok{\#\# [1] 106.4519}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{verhaeltnis\_fehler\_mse }\OtherTok{\textless{}{-}} \FunctionTok{mse}\NormalTok{(lm1)}\SpecialCharTok{/}\FunctionTok{mse}\NormalTok{(lm0)}
\NormalTok{verhaeltnis\_fehler\_mse}
\DocumentationTok{\#\# [1] 0.5521755}
\end{Highlighting}
\end{Shaded}

\subsection{Berechnung der
Modellkoeffizienten}\label{berechnung-der-modellkoeffizienten}

Aber wie legt man die Regressionsgerade in das Streudiagramm, bildlich
gesprochen?

Die Regressionskoeffizienten\footnote{hier synonym: Modellparameter} b0
und b1 w√§hlt man so, dass die \emph{Residuen} \emph{minimal} sind,

Genauer gesagt wird die Summe der quadrierten {Residuen} minimiert, s.
Gleichung~\ref{eq-min}.

\begin{equation}\phantomsection\label{eq-min}{\text{min}\sum_i \color{errorcol}{e_i}^2}\end{equation}

Es gibt verschiedene M√∂glichkeiten, um die Koeffizienten zu
berechnen\footnote{die sind aber nicht in diesem Buch zu finden}. Eine
sch√∂ne Darstellung dazu findet sich bei Kaplan (2009).

``Von Hand'' k√∂nnen Sie die Optimierung von b0 und b1 in dieser App der
FOM-Hochschule\footnote{\url{https://fomshinyapps.shinyapps.io/KleinsteQuadrate/}}
ausprobieren.

\section{R-Quadrat als Ma√ü der
Modellg√ºte}\label{r-quadrat-als-mauxdf-der-modellguxfcte}

Anders gesagt, wir haben uns um \(1 - 0.55\) verbessert:

\begin{Shaded}
\begin{Highlighting}[]
\DecValTok{1} \SpecialCharTok{{-}}\NormalTok{ verhaeltnis\_fehler\_mse}
\DocumentationTok{\#\# [1] 0.4478245}
\end{Highlighting}
\end{Shaded}

\begin{definition}[R-Quadrat]\protect\hypertarget{def-r2}{}\label{def-r2}

Die Verringerung (als Anteil) der Fehlerstreuung der Zielvariablen von
\texttt{lm0} zum gerade untersuchten Modell nennt man \emph{R-Quadrat}
(\(R^2\)). R-Quadrat (\(R^2\)) e ines Modells \(m\) ist definiert als
die Verringerung der Streuung, wenn man das Modell \(m\) mit dem
Nullmodell \(m_0\) vergleicht:
\(R^2 =1-  \frac{\text{MSE}_{m}}{\text{MSE}_{m0}}\). R-Quadrat ist ein
Ma√ü der \emph{Modellg√ºte}: Je gr√∂√üer \(R^2\), desto besser die
Vorhersage. Da es ein Anteilsma√ü\footnote{Prozentzahl} ist, liegt der
Wertebereich zwischen 0 uns 1. Im Nullmodell liegt R-Quadrat per
Definition bei 0. Im Fall von Modellen des Typs \(y\sim x\) gilt:
\(R^2 = r_{xy}^2\). \(\square\)

\end{definition}

Einfach gesagt: \(R^2\) gibt an, wie gut (zu welchem Anteil) ein Modell
die Zielvariable erkl√§rt.

Wir k√∂nnen R-Quadrat (\(R^2\)) uns von R z.B. so ausgeben lassen:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{r2}\NormalTok{(lm1)}
\DocumentationTok{\#\# \# R2 for Linear Regression}
\DocumentationTok{\#\#        R2: 0.448}
\DocumentationTok{\#\#   adj. R2: 0.442}
\end{Highlighting}
\end{Shaded}

Bei einer perfekten Korrelation ist \(r=1\), daher ist dann auch
\(R^2 = 1\)\footnote{Bei Modellen mit einem Pr√§diktor; gibt es mehrere
  Pr√§diktoren gilt die Beziehung nur wenn die Pr√§diktoren alle paarweise
  unabh√§ngig sind.}, s. Abbildung~\ref{fig-r2-extreme}.

\begin{figure}

\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{080-regression1_files/figure-pdf/fig-r2-extreme-1.pdf}

}

\subcaption{\label{fig-r2-extreme-1}Keine Korrelation, r ‚âÖ 0 und R2 ‚âÖ 0.
Prognose durch Mittelwert; die Regressionsgerade ist (ungef√§hr) parallel
zur X-Achse}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{080-regression1_files/figure-pdf/fig-r2-extreme-2.pdf}

}

\subcaption{\label{fig-r2-extreme-2}Perfekte Korrelation, r = 1 und R2 =
1. Prognose gleich beobachtetem Wert}

\end{minipage}%

\caption{\label{fig-r2-extreme}Extremf√§lle von R-Quadrat: 0 und 1}

\end{figure}%

Bei einer perfekten Korrelation \(R^2=1\) liegen die Punkte auf der
Geraden. Im gegenteiligen Extremfall von \(R^2=0\) ist die Vorhersage
genauso gut, wie wenn man f√ºr jedes \(y\) den Mittelwert,
\(\color{ycol}{\bar{y}}\), vorhersagen w√ºrde.

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Je gr√∂√üer R-Quadrat, desto besser erkl√§rt das Modell die Daten (desto
besser der ``Fit'', sagt man).

\end{tcolorbox}

\href{https://fomshinyapps.shinyapps.io/Variationszerlegung/}{Diese App
der FOM-Hochschule} erlaubt es Ihnen mit der Gr√∂√üe der Residuen eines
linearen Modells zu spielen.

\section{Interpretation eines
Regressionsmodells}\label{sec-interpret-reg-mod}

\subsection{Modellg√ºte}\label{modellguxfcte-1}

Die Residuen (Vorhersagefehler) bestimmen die Modellg√ºte: Sind die
Residuen im Schnitt gro√ü, so ist die Modellg√ºte gering (schlecht), und
umgekehrt. Verschiedenen Koeffizienten stehen zur Verf√ºgung: R-Quadrat,
r\footnote{als Korrelation von tats√§chlichem \(y\) und vorhergesagten
  \(\hat{y}\)}, MSE, RMSE, MAE, \ldots{}

\subsection{Koeffizienten}\label{koeffizienten}

Die Modellkoeffizienten, also Achsenabschnitt (\(\beta_0\)\footnote{lies:
  ``beta Null''}) und Steigung (\(beta_1\)) sind nur eingeschr√§nkt zu
interpretieren, wenn man die zugrundeliegenden kausalen Abh√§ngigkeiten
nicht kennt. Nur aufgrund eines statistischen Zusammenhangs darf man
keine kausalen Abh√§ngigkeiten annehmen. Ohne eine guten Grund f√ºr eine
Kausalbehauptung kann man kann nur \emph{deskriptiv} argumentieren. Oder
sich mit der Modellg√ºte und den Vorhersagen begn√ºgen. Was auch was wert
ist.

\subsubsection{Achsenabschnitt (b0)}\label{achsenabschnitt-b0}

``Im Modell \texttt{lm1} liegt der Achsenabschnitt bei
\(\textcolor{ycol}{y}=8.6\). Beobachtungen mit \(\color{xcol}{x}=0\)
k√∂nnen also diesen \(\textcolor{ycol}{Y}\)-Wert erwarten.'' Leider ist
es h√§ufig so, dass Pr√§diktorwerte von 0 in der Praxis nicht realistisch
sind, so dass der Achsenabschnitt dann wenig n√ºtzt.

\begin{example}[Regression Gr√∂√üe und
Gewicht]\protect\hypertarget{exm-groesse}{}\label{exm-groesse}

Nutzt man K√∂rpergr√∂√üe und das Gewicht von Menschen vorherzusagen, ist
der Achsenabschnitt von K√∂rpergr√∂√üe wenig n√ºtzlich, da es keine Menschen
gibt der Gr√∂√üe 0.\(\square\)

\end{example}

\subsubsection{Geradensteigung (b1)}\label{geradensteigung-b1}

``Im Modell \texttt{lm1} betr√§gt der Regressionskoeffizient \texttt{b1}
\(0.88\). Zwei Studenti, deren Lernzeit sich um eine Stunde
unterscheidet, unterscheiden sich \emph{laut Modell} um den Wert von
b1.''

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-caution-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-caution-color}{\faFire}\hspace{0.5em}{Vorsicht}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-caution-color-frame]

H√§ufig liest man, der ``Effekt des Pr√§diktors'' auf die AV betrage z.B.
\(0.88\). ``Effekt'' ist aber ein Wort, dass man kausal verstehen kann.
Ohne weitere Absicherung kann man aber Regressionskoeffizienten nicht
kausal verstehen. Daher sollte man das Wort ``Effekt'' mit Vorsicht
genie√üen. Manche sprechen daher auch von einem ``statistischen
Effekt''.\(\square\).

\end{tcolorbox}

\section{Wie man mit Statistik
l√ºgt}\label{wie-man-mit-statistik-luxfcgt-4}

Der Unterschied in Modellg√ºte zwischen, sagen wir, \(r=.1\) und \(r=.2\)
ist \emph{viel kleiner} als zwischen \(r=.7\) und \(r=.8\). \(R^2\) ist
ein (lineares) Ma√ü der Modellg√ºte und da \(r = \sqrt{R^2}\), darf \(r\)
nicht wie \(R^2\) als Ma√ü der Modellg√ºte interpretiert werden.
Abbildung~\ref{fig-r-r2} zeigt den Zusammenhang von \(r\) und \(R^2\).

\begin{figure}

\centering{

\includegraphics{080-regression1_files/figure-pdf/fig-r-r2-1.pdf}

}

\caption{\label{fig-r-r2}Zusammenhang von r und R-Quadrat}

\end{figure}%

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-caution-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-caution-color}{\faFire}\hspace{0.5em}{Vorsicht}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-caution-color-frame]

Unterschiede zwischen Korrelationsdifferenzen d√ºrfen nicht linear
interpretiert werden. \(\square\)

\end{tcolorbox}

\section{Fallbeispiel Mariokart}\label{fallbeispiel-mariokart}

\subsection{Der Datenwahrsager legt
los}\label{der-datenwahrsager-legt-los}

Als mittlerweile anerkannter Extrem-Datenanalyst in dem
Online-Auktionshaus, in dem Sie arbeiten, haben Sie sich neue Ziele
gesetzt. Sie m√∂chten eine genaue Vorhersage von Verkaufspreisen
erzielen. Als Sie von diesem Plan berichteten, leuchteten die Augen
Ihrer Chefin. Genaue Vorhersagen, das ist etwas von hoher
betriebswirtschaftlicher Relevanz. Auf geht's!

Daten laden:\footnote{Und die √ºblichen Pakete starten, nicht vergessen.}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(mariokart\_path)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{lm2 }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(total\_pr }\SpecialCharTok{\textasciitilde{}}\NormalTok{ start\_pr, }\AttributeTok{data =}\NormalTok{ mariokart)}
\FunctionTok{r2}\NormalTok{(lm2)}
\DocumentationTok{\#\# \# R2 for Linear Regression}
\DocumentationTok{\#\#        R2: 0.005}
\DocumentationTok{\#\#   adj. R2: {-}0.002}
\end{Highlighting}
\end{Shaded}

Oh nein! Unterirdisch schlecht. Anstelle von blo√üem Rumprobieren
√ºberlegen Sie und schauen dann in \textbf{?@fig-mario-corr} nach, welche
Variable am st√§rksten korreliert mit \texttt{total\_pr}; es resultiert
\texttt{lm3}:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{lm3 }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(total\_pr }\SpecialCharTok{\textasciitilde{}}\NormalTok{ ship\_pr, }\AttributeTok{data =}\NormalTok{ mariokart)}
\FunctionTok{parameters}\NormalTok{(lm3)}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}lccccc@{}}

\caption{\label{tbl-lm3}Modellparameter von lm3}

\tabularnewline

\toprule\noalign{}
Parameter & Coefficient & SE & 95\% CI & t(141) & p \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
(Intercept) & 36.25 & 2.54 & (31.23, 41.26) & 14.28 & \textless{}
.001 \\
ship pr & 4.34 & 0.57 & (3.22, 5.46) & 7.67 & \textless{} .001 \\

\end{longtable}

Der Achsenabschnitt liegt bei ca. 36 Euro, wie man in
Tabelle~\ref{tbl-lm3} sieht: Ein Spiel, das mit Null Euro Preis startet,
kann laut \texttt{lm3} etwa 36 Euro finaler Verkaufspreis erwarten.
\emph{Pro Euro an Versandkosten} (\texttt{ship\_pr}) steigt der zu
erwartende finale Verkaufspreis um ca. 4 Euro.\footnote{Die Spalte
  \texttt{95\ CI} gibt einen Sch√§tzbereich f√ºr den jeweiligen
  Modellkoeffizienten an, denn es handelt sich bei den Koeffizienten um
  Sch√§tzwerte; der wahre Wert in der Population ist unbekannt. Wir
  kennen schlie√ülich nur eine Stichprobe der Gr√∂√üe \(n=143\).}.

Die Regressionsgleichung von \texttt{lm3} lautet demnach:

\texttt{total\_pr\_pred\ =\ 36.25\ +\ 4.34*ship\_pr}.

In Worten:

\begin{quote}
Der vorhergesagte Gesamptreis eines Spiels liegt bei 36.25‚Ç¨
``Sockelbetrag'' plus 4.34 mal die Versandkosten.
\end{quote}

\subsection{Vertiefung}\label{vertiefung-7}

Man kann sich die erwarteten Werte (``expectations'') des
Verkaufspreises in Abh√§ngigkeit vom Wert der UV (\texttt{ship\_pr}) auch
sch√§tzen (``to estimate'') lassen, und zwar so\footnote{Die Funktion
  stammt aus easystats}:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{estimate\_expectation}\NormalTok{(lm3) }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{head}\NormalTok{()  }\CommentTok{\# nur die ersten paar vorhergesagten Werte}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}lrllr@{}}
\caption{Model-based Expectation}\tabularnewline
\toprule\noalign{}
ship\_pr & Predicted & SE & 95\% CI & Residuals \\
\midrule\noalign{}
\endfirsthead
\toprule\noalign{}
ship\_pr & Predicted & SE & 95\% CI & Residuals \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
4.00 & 53.59 & 1.87 & (49.89, 57.30) & -2.04 \\
3.99 & 53.55 & 1.87 & (49.85, 57.25) & -16.51 \\
3.50 & 51.43 & 1.82 & (47.82, 55.03) & -5.93 \\
0.00 & 36.25 & 2.54 & (31.23, 41.26) & 7.75 \\
0.00 & 36.25 & 2.54 & (31.23, 41.26) & 34.75 \\
4.00 & 53.59 & 1.87 & (49.89, 57.30) & -8.59 \\
\end{longtable}

Variable predicted: total\_pr

Ah, bei 4 Euro Versandkosten ist laut dem Modell knapp 54 Euro
Verkaufspreis zu erwarten, fassen Sie sich die Ausgabe zusammen.

\begin{quote}
{\emoji{robot}} Das sieht man in der Spalte \texttt{Predicted}, dort
steht der vorhersagte Wert f√ºr \texttt{total\_pr} f√ºr einen bestimmten
Wert von \texttt{ship\_pr}.
\end{quote}

\begin{quote}
{\emoji{student}} Kann ich auch \texttt{predict} benutzen? Ich w√ºrde
gerne den Verkaufspreis wissen, wenn die Versandkosten bei 1 und bei 4
Euro liegen.
\end{quote}

\begin{quote}
{\emoji{robot}} Ja, klar!
\end{quote}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{neue\_daten }\OtherTok{\textless{}{-}} \FunctionTok{tibble}\NormalTok{(}
  \AttributeTok{ship\_pr =} \FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{4}\NormalTok{)) }\CommentTok{\# zwei Werte zum Vorhersagen}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{predict}\NormalTok{(lm3, }\AttributeTok{newdata =}\NormalTok{ neue\_daten)}
\DocumentationTok{\#\#        1        2 }
\DocumentationTok{\#\# 40.58276 53.59442}
\end{Highlighting}
\end{Shaded}

Aber n√ºtzlich w√§re noch, das Modell (bzw. die Sch√§tzung der erwarteten
Werte) als Diagramm zu bekommen. Das erreicht man z.B. so, s.
Abbildung~\ref{fig-lm3}.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{estimate\_expectation}\NormalTok{(lm3) }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{plot}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]

\centering{

\includegraphics{080-regression1_files/figure-pdf/fig-lm3-1.pdf}

}

\caption{\label{fig-lm3}Verbildlichung der erwarteteten Werte laut lm3}

\end{figure}%

\texttt{estimate\_expectation} hei√üt sinngem√§√ü ``sch√§tze den zu
erwartenden Wert''. Kurz gesagt: Wir wollen eine Vorhersage von R.

Am wichtigsten ist Ihnen aber im Moment die Frage, wie ``gut'' das
Modell ist, spricht wie lang oder kurz die (absoluten)
Vorhersagefehler-Balken sind:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{mae}\NormalTok{(lm3)}
\DocumentationTok{\#\# [1] 13.0632}
\end{Highlighting}
\end{Shaded}

Das Modell erkl√§rt einen Anteil von ca. 0.29 der Gesamtstreuung.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{r2}\NormalTok{(lm3)}
\DocumentationTok{\#\# \# R2 for Linear Regression}
\DocumentationTok{\#\#        R2: 0.294}
\DocumentationTok{\#\#   adj. R2: 0.289}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{mae}\NormalTok{(lm3)}
\DocumentationTok{\#\# [1] 13.0632}
\end{Highlighting}
\end{Shaded}

Im n√§chsten Meeting erz√§hlen Sie Ihrem Chef ``Ich kann den Verkaufspreis
von Mariokart-Spielen im Schnitt auf 13 Dollar genau vorhersagen!''.
H√∂rt sich gut an. Allerdings h√§tte ihr Chef es gerne genauer. Kann man
da noch was machen?

\section{Fallstudie Immobilienpreise}\label{fallstudie-immobilienpreise}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-caution-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-caution-color}{\faFire}\hspace{0.5em}{Vorsicht}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-caution-color-frame]

Diese Fallstudie stellt die Pr√ºfungsleistung ``Prognosewettbewerb''
einf√ºhrend dar. Es empfiehlt sich f√ºr Sie, diese Fallstudie sorgsam zu
bearbeiten.\(\square\)

\end{tcolorbox}

\subsection{Hintergrund}\label{hintergrund}

In dieser Fallstudie geht es darum, die Preise von Immobilien
vorherzusagen. Kurz gesagt: Sagen Sie die Hauspreise vorher, und reichen
Sie Ihre Vorhersagen als CSV bei \href{https://www.kaggle.com/}{Kaggle}
ein.

Kaggle ist eine Webseite, die Prognosewettbewerbe veranstaltet.

In dieser Fallstudie nehmen Sie teil an der Kaggle-Competition
\href{https://www.kaggle.com/competitions/house-prices-advanced-regression-techniques/overview}{Ames
House Prices}.\footnote{\url{https://www.kaggle.com/competitions/house-prices-advanced-regression-techniques/overview}}

\begin{itemize}
\tightlist
\item
  \href{https://www.kaggle.com/competitions/house-prices-advanced-regression-techniques/overview/description}{Beschreibung}\footnote{\url{https://www.kaggle.com/competitions/house-prices-advanced-regression-techniques/overview/description}}
\item
  \href{https://www.kaggle.com/competitions/house-prices-advanced-regression-techniques/overview/evaluation}{Ziel/Aufgabe}\footnote{\url{https://www.kaggle.com/competitions/house-prices-advanced-regression-techniques/overview/evaluation}}
\item
  \href{https://www.kaggle.com/competitions/house-prices-advanced-regression-techniques/rules}{Spielregeln}\footnote{\url{https://www.kaggle.com/competitions/house-prices-advanced-regression-techniques/rules}}
\end{itemize}

\subsection{Ben√∂tigte R-Pakete}\label{benuxf6tigte-r-pakete-7}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(tidyverse)}
\FunctionTok{library}\NormalTok{(easystats)}
\end{Highlighting}
\end{Shaded}

\subsection{Daten}\label{daten}

Wenn Sie sich nicht bei Kaggle einloggen m√∂chten, k√∂nnen Sie die Daten
von Kaggle herunterladen und zwar
\href{https://www.kaggle.com/competitions/house-prices-advanced-regression-techniques/data}{hier}.

Im Einzelnen m√ºssen Sie folgende Dateien herunterladen:

\begin{itemize}
\tightlist
\item
  \emph{Data\_description.txt}: Code book, d.h. Beschreibung der
  Variablen im Datensatz
\item
  \emph{train.csv}: Daten von H√§usern, die Sie nutzen, um Modelle zu
  erstellen
\item
  \emph{test.csv}: Daten von H√§usern, von denen Sie den Kaufpreis
  vorhersagen sollen
\item
  \emph{sample\_submission.csv}: Beispielhafte Prognosedatei, die Datei
  also, mit der Sie Ihre Vorhersagen einreichen
\end{itemize}

Sie k√∂nnen auch so auf die Daten zugreifen:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{d\_train\_path\_online }\OtherTok{\textless{}{-}} \StringTok{"https://raw.githubusercontent.com/sebastiansauer/Lehre/main/data/ames{-}kaggle/train.csv"}
\NormalTok{d\_test\_path\_online }\OtherTok{\textless{}{-}} \StringTok{"https://raw.githubusercontent.com/sebastiansauer/Lehre/main/data/ames{-}kaggle/test.csv"}

\NormalTok{d\_train }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(d\_train\_path\_online)}
\NormalTok{d\_test }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(d\_test\_path\_online)}
\end{Highlighting}
\end{Shaded}

Laden Sie diese Daten am besten herunter und speichern Sie sie in einem
passenden Unterverzeichnis (Ihres Projektordners in RStudio) ab.

Das Code Book k√∂nnen Sie
\href{https://github.com/sebastiansauer/Lehre/blob/main/data/ames-kaggle/data_description.txt}{hier
einsehen und herunterladen}.\footnote{\textless ttps://github.com/sebastiansauer/Lehre/blob/main/data/ames-kaggle/data\_description.txt\textgreater{}}

\subsection{Prognosedatei}\label{prognosedatei}

Die Prognosedatei ist die Datei, die Ihre Vorhersagen (Prognosen)
enth√§lt. Sie soll prinzipiell so aussehen wie in Tabelle~\ref{tbl-subm}
dargestellt.

\begin{longtable}{rr}

\caption{\label{tbl-subm}Beispiel den Aufbau der Prognose-Datei}

\tabularnewline

\toprule
id & SalePrice \\ 
\midrule\addlinespace[2.5pt]
1461 & 169277.1 \\ 
1462 & 187758.4 \\ 
1463 & 183583.7 \\ 
\bottomrule

\end{longtable}

Die Prognosedatei besteht also aus zwei Spalten: der Spalte \texttt{id}
und der Spalte \texttt{Saleprice}. Die Spalte \texttt{id} gibt an,
welches Haus in einer bestimmten Zeile Ihrer Prognosedatei gemeint ist -
f√ºr welches Haus Sie also gerade einen Kaufpreis vorhersagen. die Spalte
\texttt{SalePrice} ist Ihre Vorhersage f√ºr den Kaufpreis das Hauses mit
der Id, die in der betreffenden Zeile steht. Insgesamt soll die
Prognosedatei genau so viele Zeilen haben wie der Test-Datensatz, also
die Tabelle, die die vorherzusagenden Werte angibt.

Alles klar?

Los geht's!

\subsection{Daten importieren von der
Festplatte}\label{daten-importieren-von-der-festplatte}

Wir k√∂nnen die Daten auch von der Festplatte importieren; oft m√ºssen wir
das auch - wenn die Daten n√§mlich nicht √∂ffentlich zugreifbar auf einem
Server liegen.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{d\_train\_path }\OtherTok{\textless{}{-}} \StringTok{"daten/ames{-}kaggle/train.csv"}
\NormalTok{d\_test\_path }\OtherTok{\textless{}{-}} \StringTok{"daten/ames{-}kaggle/test.csv"}
\NormalTok{d\_train }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(d\_train\_path)}
\NormalTok{d\_test }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(d\_test\_path)}
\end{Highlighting}
\end{Shaded}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

In diesem Beispiel gehen wir davon aus, dass die Dateien
\texttt{train.csv} und \texttt{test.csv} in einem Unterordner namens
\texttt{daten/ames-kaggle} liegen. Sie m√ºssen sie dort abspeichern.
Dieser Ordner muss ein Unterordner Ihres aktuellen R-Projekts
sein.\(\square\)

\end{tcolorbox}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-caution-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-caution-color}{\faFire}\hspace{0.5em}{Vorsicht}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-caution-color-frame]

Wenn das Importieren von der Festplatte nicht klappt \ldots{} Es ist
hilfreich, wenn man Daten von der eigenen Festplatte importieren kann.
Aber f√ºrs Erste k√∂nnen Sie die Daten auch von oben angegeben Online-Pfad
importieren.\(\square\)

\end{tcolorbox}

\subsection{Ein erster Blick in die
Daten}\label{ein-erster-blick-in-die-daten}

Schauen wir uns einmal die Verteilung der metrischen Variablen an,
\textbf{?@tbl-ames1}.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{describe\_distribution}\NormalTok{(d\_train)}
\end{Highlighting}
\end{Shaded}

\subsection{Ein erstes
Vorhersagemodell}\label{ein-erstes-vorhersagemodell}

\subsubsection{Welche Variablen eignen sich zur
Vorhersage?}\label{welche-variablen-eignen-sich-zur-vorhersage}

Eine einfache Antwort auf die Frage, welche Variablen sich zur
Vorhersage eignen, ist, die Korrelation aller Pr√§diktoren mit der
abh√§ngigen Variablen\footnote{die vorherzusagende Variable, auch Ziel-
  oder Outcome-Variable genannt} zu berechnen, s.
Tabelle~\ref{tbl-d_train_corr} und Listing~\ref{lst-get-high-corrs}.

\begin{codelisting}

\caption{\label{lst-get-high-corrs}Welche Variablen korrelieren st√§rker
als .3?}

\centering{

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{d\_train }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{select}\NormalTok{(}\SpecialCharTok{{-}}\NormalTok{Id) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{correlation}\NormalTok{() }\SpecialCharTok{\%\textgreater{}\%}  \CommentTok{\# berechne Korrelationen}
  \FunctionTok{filter}\NormalTok{(Parameter2 }\SpecialCharTok{==} \StringTok{"SalePrice"}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}   \CommentTok{\# aber nur, wo die zweite Variable "SalesPrice" ist}
  \FunctionTok{arrange}\NormalTok{(}\SpecialCharTok{{-}}\FunctionTok{abs}\NormalTok{(r)) }\SpecialCharTok{\%\textgreater{}\%}   \CommentTok{\# sortiere absteigend nach der H√∂he des Korrelationskoeffizienten r}
  \FunctionTok{filter}\NormalTok{(}\FunctionTok{abs}\NormalTok{(r) }\SpecialCharTok{\textgreater{}}\NormalTok{ .}\DecValTok{3}\NormalTok{)  }\CommentTok{\# nur |r| \textgreater{} .3}
\end{Highlighting}
\end{Shaded}

}

\end{codelisting}%

Aha! Ein Menge Information.\footnote{Wenn Sie Teile der Ausgabe der
  Tabelle nicht verstehen: Im Zweifel einfach ignorieren. Wenn Sie die
  R-Syntax nicht verstehen: F√ºhren Sie die Syntax schrittweise aus.
  Zuerst \texttt{d\_train} ausf√ºhren und das Ergebnis betrachten. Dann
  \texttt{d\_train\ \%\textgreater{}\%\ select(-Id)} ausf√ºhren, wieder
  die Ausgabe betrachten, usw.}

Diese Variablen sind einigerma√üen stark mit unserer Zielvariablen
\texttt{SalePrice} korreliert. Nutzen wir also diese Variablen (oder
einige von ihnen) zur Vorhersage.

\subsubsection{Modell 1}\label{modell-1}

Im ersten Modell gehen wir davon aus, dass der Verkaufspreis im Gro√üen
und Ganzen durch den Zustand der Immobilie (\texttt{OverallQual})
vorhergesagt werden kann. Diese Variable ist am st√§rksten mit der
Zielvariable korreliert und ist daher ein guter Kandidat f√ºr die
Vorhersage.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{m1 }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(SalePrice }\SpecialCharTok{\textasciitilde{}}\NormalTok{ OverallQual, }\AttributeTok{data =}\NormalTok{ d\_train)}
\FunctionTok{parameters}\NormalTok{(m1)  }\CommentTok{\# aus easystats}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1600}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1733}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1200}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.3200}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1200}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1067}}@{}}
\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
Parameter
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Coefficient
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
SE
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
95\% CI
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
t(1458)
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
p
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
(Intercept) & -96206.08 & 5756.41 & (-1.07e+05, -84914.35) & -16.71 &
\textless{} .001 \\
OverallQual & 45435.80 & 920.43 & (43630.29, 47241.31) & 49.36 &
\textless{} .001 \\
\end{longtable}

Wie gut ist das Modell?

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{rmse}\NormalTok{(m1)  }\CommentTok{\# aus easystats}
\DocumentationTok{\#\# [1] 48589.45}
\end{Highlighting}
\end{Shaded}

Im Schnitt liegen wir \ensuremath{4.54\times 10^{4}} Dollar daneben. Ob
das viel oder weniger ist, wird sich im Vergleich mit anderen Modellen
zeigen.

R-Quadrat liefert einen anderen Blick auf die Modellg√ºte:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{r2}\NormalTok{(m1)  }\CommentTok{\# aus easystats}
\DocumentationTok{\#\# \# R2 for Linear Regression}
\DocumentationTok{\#\#        R2: 0.626}
\DocumentationTok{\#\#   adj. R2: 0.625}
\end{Highlighting}
\end{Shaded}

\subsubsection{Model 2}\label{model-2}

Berechnen wir als n√§chstes ein Modell mit mehreren UV, \texttt{m2}.

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Mann kann mehrere UV (Pr√§diktorvariablen) in ein Regressionsmodell
aufnehmen. Dazu trennt man sie mit einem Pluszeichen in \texttt{lm()}:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mein\_modell }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(av }\SpecialCharTok{\textasciitilde{}}\NormalTok{ uv1 }\SpecialCharTok{+}\NormalTok{ uv2 }\SpecialCharTok{+}\NormalTok{ ... }\SpecialCharTok{+}\NormalTok{ uv\_n, }\AttributeTok{data =}\NormalTok{ meine\_daten)}
\end{Highlighting}
\end{Shaded}

Dabei ist das Pluszeichen kein arithmetischer Operator, sondern sagt nur
``als UV nimm UV1 und UV2 und \ldots{}''. \(\square\)

\end{tcolorbox}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{m2 }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(SalePrice }\SpecialCharTok{\textasciitilde{}}\NormalTok{ OverallQual }\SpecialCharTok{+}\NormalTok{ GrLivArea }\SpecialCharTok{+}\NormalTok{ GarageCars, }\AttributeTok{data =}\NormalTok{ d\_train)}
\FunctionTok{parameters}\NormalTok{(m2)}
\end{Highlighting}
\end{Shaded}

Tabelle~\ref{tbl-m2-params} zeigt die Koeffizienten von \texttt{m2}.

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1600}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1733}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1200}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.3200}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1200}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1067}}@{}}

\caption{\label{tbl-m2-params}Modellparameter von m1}

\tabularnewline

\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
Parameter
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Coefficient
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
SE
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
95\% CI
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
t(1456)
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
p
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
(Intercept) & -98832.49 & 4842.90 & (-1.08e+05, -89332.69) & -20.41 &
\textless{} .001 \\
OverallQual & 27104.83 & 1072.18 & (25001.64, 29208.01) & 25.28 &
\textless{} .001 \\
GrLivArea & 50.67 & 2.55 & (45.67, 55.68) & 19.86 & \textless{} .001 \\
GarageCars & 21298.96 & 1807.06 & (17754.23, 24843.69) & 11.79 &
\textless{} .001 \\

\end{longtable}

Wie gut sind die Vorhersagen des Modells \texttt{m2} f√ºr die Daten von
\texttt{d\_train}?

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{rmse}\NormalTok{(m2)}
\DocumentationTok{\#\# [1] 40566.42}
\end{Highlighting}
\end{Shaded}

Im Schnitt liegen unsere Vorhersagen \ensuremath{2.71\times 10^{4}}
Dollar daneben. Ist das gut?

Betrachten wir noch \(R^2\):

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{r2}\NormalTok{(m2)}
\DocumentationTok{\#\# \# R2 for Linear Regression}
\DocumentationTok{\#\#        R2: 0.739}
\DocumentationTok{\#\#   adj. R2: 0.739}
\end{Highlighting}
\end{Shaded}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Ob die Modellg√ºte (R-Quadrat, RMSE, etc.) ``gut'' oder ``hoch'' ist,
beantwortet man am besten \emph{relativ}, also im Vergleich zu anderen
Modellen. \(\square\)

\end{tcolorbox}

\subsubsection{Nullmodell}\label{nullmodell}

Zum Vergleich berechnen wir das maximal einfache Modell: ohne
Pr√§diktoren. Man nennt es das ``Nullmodell''. In diesem Modell sagen wir
f√ºr jedes Haus einfach den mittleren Preis aller H√§user vorher.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{m0 }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(SalePrice }\SpecialCharTok{\textasciitilde{}} \DecValTok{1}\NormalTok{, }\AttributeTok{data =}\NormalTok{ d\_train)}
\end{Highlighting}
\end{Shaded}

Wie gut ist die Vorhersage des Nullnomdells?

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{rmse}\NormalTok{(m0)}
\DocumentationTok{\#\# [1] 79415.29}
\end{Highlighting}
\end{Shaded}

Beim Nullmodell liegen wir ca. 80 Tausend Dollar daneben.

Das R-Quadrat der Nullmodells ist per Definition Null:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{r2}\NormalTok{(m0)}
\DocumentationTok{\#\# \# R2 for Linear Regression}
\DocumentationTok{\#\#        R2: 0.000}
\DocumentationTok{\#\#   adj. R2: 0.000}
\end{Highlighting}
\end{Shaded}

\subsection{\texorpdfstring{Vorhersagen im Test-Datensatz mit
\texttt{m2}}{Vorhersagen im Test-Datensatz mit m2}}\label{vorhersagen-im-test-datensatz-mit-m2}

Wir haben jetzt unseren Champion, \texttt{m2}. Alle Hoffnung ruht auf
diesem Modell. Ob die Vorhersagen im Test-Sample pr√§zise sein werden?
Oder himmelweit daneben? Entt√§usche uns nicht!

Hier sind die Vorhersagen:

\phantomsection\label{annotated-cell-165}%
\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{m2\_pred }\OtherTok{\textless{}{-}} \FunctionTok{predict}\NormalTok{(m2, }\AttributeTok{newdata =}\NormalTok{ d\_test) }\hspace*{\fill}\NormalTok{\circled{1}}
\FunctionTok{head}\NormalTok{(m2\_pred) }\hspace*{\fill}\NormalTok{\circled{2}}
\DocumentationTok{\#\#        1        2        3        4        5        6 }
\DocumentationTok{\#\# 103394.7 152441.4 161837.8 187675.8 225467.0 190260.2}
\end{Highlighting}
\end{Shaded}

\begin{description}
\tightlist
\item[\circled{1}]
predicte anhand der Regressionsgerade von m1 und zwar anhand der Daten
aus \texttt{d\_test}
\item[\circled{2}]
zeige den ``Kopf'' der Vorhersagen (\texttt{m1\_pred}), d.h. die ersten
paar Vorhersagen
\end{description}

Die Vohersagen f√ºgen wir jetzt dem Test-Sample hinzu:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{d\_test }\OtherTok{\textless{}{-}} 
\NormalTok{  d\_test }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{SalePrice =}\NormalTok{ m2\_pred)}
\end{Highlighting}
\end{Shaded}

\subsection{Einreichen!}\label{einreichen}

\subsubsection{\texorpdfstring{Wir brauchen zwei Spalten: \texttt{Id}
und
\texttt{SalePrice}}{Wir brauchen zwei Spalten: Id und SalePrice}}\label{wir-brauchen-zwei-spalten-id-und-saleprice}

So, wir haben unsere Vorhersagen! Jetzt reichen wir diese Vorhersagen
ein.

F√ºr die Prognosedatei (submission file) zum Einreichen brauchen wir nur
die Spalten \texttt{id} und \texttt{SalePrice}:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{m2\_subm }\OtherTok{\textless{}{-}}
\NormalTok{  d\_test }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{select}\NormalTok{(Id, SalePrice)}
\end{Highlighting}
\end{Shaded}

Kaggle m√∂chte keine fehlenden Werten in den Vorhersagen, also pr√ºfen wir
das mal:

\phantomsection\label{annotated-cell-168}%
\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{m2\_subm }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{drop\_na}\NormalTok{() }\SpecialCharTok{\%\textgreater{}\%} \hspace*{\fill}\NormalTok{\circled{1}}
  \FunctionTok{nrow}\NormalTok{() }\hspace*{\fill}\NormalTok{\circled{2}}
\DocumentationTok{\#\# [1] 1458}
\end{Highlighting}
\end{Shaded}

\begin{description}
\tightlist
\item[\circled{1}]
Lass alle Zeilen mit NAs (fehlenden Werten in irgendeiner Spalte)
fallen, filtere diese Zeilen also raus
\item[\circled{2}]
z√§hle die Anzahl der Zeilen (die noch verbleiben)
\end{description}

Die Anzahl der Zeilen, die wir hier erhalten, ist gleich zu den Anzahl
der Zeilen von \texttt{d\_test}. Es gibt also keine fehlenden Werte.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{nrow}\NormalTok{(d\_test)}
\DocumentationTok{\#\# [1] 1459}
\end{Highlighting}
\end{Shaded}

\subsubsection{Hochladen}\label{hochladen}

Diesen Tibble speichern wir als CSV-Datei an geeigneter Stelle
ab.\footnote{Es bietet sich an \texttt{write\_csv} zu verwenden, da
  \texttt{write.csv} automatisch (ungefragt) noch eine Id-Spalte ohne
  Namen einf√ºgt (mit den Zeilennummern), das mag aber Kaggle nicht.
  Kaggle erwartet exakt zwei Spalten und zwar mit den Namen \texttt{Id}
  und \texttt{SalePrice}.}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{write\_csv}\NormalTok{(m2\_subm, }\StringTok{"daten/ames{-}kaggle/m1{-}subm.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

Und dann laden Sie diese Datei, \texttt{m1\_subm.csv} bei Kaggle hoch
und hoffen auf einen Hauptgewinn.

Das Modell erzielte einen Score von \emph{0.55521}.

\subsection{Fazit}\label{fazit-3}

Diese Fallstudie hat ein einfaches Prognosemodell vorgestellt.
Sicherlich gibt es viele Ans√§tze, dieses Modell zu verbessern.

Hier sind einige Fragen, die Sie sich dazu stellen k√∂nnen:

\begin{itemize}
\tightlist
\item
  Welche Pr√§diktoren sollte ich in das Modell aufnehmen?
\item
  Wie gehe ich mit fehlenden Werten um?
\item
  Wenn ein Pr√§diktor schief ist, sollte ich ihn dann log-transformieren?
\item
  Vielleicht sollte man manche Pr√§diktoren quadrieren?
\item
  Wie gehe ich mit nominalskalierten Variablen um, wenn diese viele
  Stufen haben?
\item
  \ldots{}
\end{itemize}

Viel Spielraum f√ºr Ihre Kreativit√§t!

\section{Aufgaben}\label{aufgaben-7}

Eine Aufgabe, die eine Einf√ºhrung zum
\href{https://www.kaggle.com/competitions/house-prices-advanced-regression-techniques/overview}{Kaggle-Wettbewerb
Ames House Prices} bietet\footnote{\url{https://www.kaggle.com/competitions/house-prices-advanced-regression-techniques/overview}},
finden Sie
\href{https://datenwerk.netlify.app/posts/ames-kaggle1/ames-kaggle1.html}{im
Datenwerk}.\footnote{\url{https://datenwerk.netlify.app/posts/ames-kaggle1/ames-kaggle1.html}}

Die Webseite \href{https://datenwerk.netlify.app}{datenwerk.netlify.app}
stellt eine Reihe von einschl√§gigen √úbungsaufgaben bereit. Sie k√∂nnen
die Suchfunktion der Webseite nutzen, um die Aufgaben mit den folgenden
Namen zu suchen:

\begin{itemize}
\tightlist
\item
  Aussagen-einfache-Regr
\item
  interpret-koeff-lm
\item
  korr-als-regr
\item
  Linearitaet1a
\item
  lm1
\item
  mtcars-regr01
\item
  nichtlineare-regr1
\item
  penguins-regr02
\item
  regression1
\item
  regression1b
\item
  Regression3
\item
  Regression4
\item
  Regression5
\item
  Regression6
\end{itemize}

Schauen Sie sich die Aufgaben beim
\href{https://datenwerk.netlify.app/}{Datenwerk} an, vor allem die Tags
\href{https://datenwerk.netlify.app/\#category=regression}{regression}
und \href{https://datenwerk.netlify.app/\#category=lm}{lm}.

\emph{Nicht alle Aufgaben} aus dieser Sammlung passen zum Stoff;
vielleicht k√∂nnen Sie einige Aufgaben nicht l√∂sen. Ignorieren Sie
einfach diese Aufgaben.

Beachten Sie die \href{https://datenwerk.netlify.app/hinweise}{Hinweise
zu den Aufgaben}.\footnote{\url{https://datenwerk.netlify.app/hinweise}}

\section{Literaturhinweise}\label{literaturhinweise-7}

Gelman, Hill, und Vehtari (2021a) liefert eine deutlich umfassendere
Einf√ºhrung in die Regressionsanalyse als dieses Kapitel es tut. Eine
moderne, R-orientierte Einf√ºhrung in Statistik inklusive der
Regressionsanalyse findet sich bei
(\textbf{cetinkaya-rundel\_introduction\_2021-2?}). Ein Klassiker mit
viel Aha-Potenzial ist (\textbf{cohen2003?}).

\section{Literatur}\label{literatur-7}

\chapter{Geradenmodelle 2}\label{geradenmodelle-2}

\section{Lernsteuerung}\label{lernsteuerung-8}

\subsection{Standort im Lernpfad}\label{standort-im-lernpfad-8}

Abb. Abbildung~\ref{fig-ueberblick} zeigt den Standort dieses Kapitels
im Lernpfad und gibt damit einen √úberblick √ºber das Thema dieses
Kapitels im Kontext aller Kapitel.

\subsection{Lernziele}\label{lernziele-9}

\begin{itemize}
\tightlist
\item
  Sie k√∂nnen Regressionsmodelle f√ºr Forschungsfragen mit bin√§rer,
  nominaler und metrischer UV erl√§utern und in R anwenden.
\item
  Sie k√∂nnen Interaktionseffekte in Regressionsmodellen erl√§utern und in
  R anwenden.
\item
  Sie k√∂nnen den Anwendungszweck von Zentrieren und z-Transformationen
  zur besseren Interpretation von Regressionsmodellen erl√§utern und in R
  anwenden.
\item
  Sie k√∂nnen Modelle nutzen, um Vorhersagen anhand neuer Daten zu
  erstellen.
\end{itemize}

\subsection{Ben√∂tigte R-Pakete}\label{benuxf6tigte-r-pakete-8}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(tidyverse)}
\FunctionTok{library}\NormalTok{(yardstick)  }\CommentTok{\# f√ºr Modellg√ºte im Test{-}Sample}
\FunctionTok{library}\NormalTok{(easystats)}
\FunctionTok{library}\NormalTok{(ggpubr)  }\CommentTok{\# Daten visualisieren}
\FunctionTok{library}\NormalTok{(openintro)  }\CommentTok{\# dataset mariokart}
\end{Highlighting}
\end{Shaded}

\[
\definecolor{ycol}{RGB}{230,159,0}
\definecolor{modelcol}{RGB}{86,180,233}
\definecolor{errorcol}{RGB}{0,158,115}
\definecolor{beta0col}{RGB}{213,94,0}
\definecolor{beta1col}{RGB}{0,114,178}
\definecolor{xcol}{RGB}{204,121,167}
\]

\subsection{Ben√∂tigte Daten}\label{benuxf6tigte-daten-7}

Listing~\ref{lst-mario-path} definiert den Pfad zum Datensatz
\texttt{mariokart} und importiert die zugeh√∂rige CSV-Datei in R, so dass
wir einen Tibble mit Namen \texttt{mariokart} erhalten.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart\_path }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(}
  \StringTok{"https://vincentarelbundock.github.io/Rdatasets/"}\NormalTok{,}
  \StringTok{"csv/openintro/mariokart.csv"}\NormalTok{)}
\NormalTok{mariokart }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(mariokart\_path)}

\NormalTok{wetter\_path }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{( }\StringTok{"https://raw.githubusercontent.com/sebastiansauer/"}\NormalTok{,}
\StringTok{"Lehre/main/data/wetter{-}dwd/precip\_temp\_DWD.csv"}\NormalTok{)}
\NormalTok{wetter }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(wetter\_path)}
\end{Highlighting}
\end{Shaded}

Die Wetterdaten stammen vom
\href{https://opendata.dwd.de/}{DWD}.\footnote{Lizenzhinweis:
  Datenbasis: Deutscher Wetterdienst, eigene Elemente erg√§nzt.}

\section{Forschungsbezug: Gl√§serne
Kunden}\label{forschungsbezug-gluxe4serne-kunden}

Lineare Modelle\footnote{synonym: Regressionsanalysen} sind ein altes,
aber m√§chtiges Werkzeug. Sie geh√∂ren immernoch zum Standard-Repertoire
moderner Analystis.

\begin{example}[Wie gut kann man Ihre Pers√∂nlchkeit auf Basis des
Facebook-Profils
vorhersagen?]\protect\hypertarget{exm-kosinski}{}\label{exm-kosinski}

In einer Studie mit viel Medienresonanz untersuchten
(\textbf{Kosinski2013?}), wie gut Pers√∂nlichkeitsz√ºge durch
Facebook-Daten (Likes etc.) vorhergesagt werden k√∂nnen. Die Autoren
res√ºmieren:

\begin{quote}
We show that easily accessible digital records of behavior, Facebook
Likes, can be used to automatically and accurately predict a range of
highly sensitive personal attributes including: sexual orientation,
ethnicity, religious and political views, personality traits,
intelligence, happiness, use of addictive substances, parental
separation, age, and gender.
\end{quote}

Die Autoren berichten √ºber hohe Modellg√ºte (\(r\)) zwischen den
tats√§chlichen pers√∂nlichen Attributen und den vorhergesagten Werten
Ihres Modells, s. Abbildung~\ref{fig-pnas1}. Das eingesetzte
statistische Modell beruht auf einem linearen Modell, also √§hnlich zu
dem in diesem Kapitel vorgestellten Methoden.

Neben der analytischen St√§rke der Regressionsanalyse zeigt das Beispiel
auch, wie gl√§sern Konsument:innen im Internet sind.\(\square\)

\end{example}

\begin{figure}

\centering{

\includegraphics[width=0.33\textwidth,height=\textheight]{img/pnas.kosinski.1218772110fig03.jpeg}

}

\caption{\label{fig-pnas1}Prediction accuracy of regression for numeric
attributes and traits expressed by the Pearson correlation coefficient
between predicted and actual attribute values}

\end{figure}%

\section{Wetter in Deutschland}\label{wetter-in-deutschland}

\begin{example}[Wetterdaten]\protect\hypertarget{exm-wetterdaten}{}\label{exm-wetterdaten}

Nachdem Sie einige Zeit als Datenanalyst bei dem Online-Auktionshaus
gearbeitet haben, stand Ihnen der Sinn nach ewtas Abwechslung. Viel Geld
verdienen und Ruhm und Anerkennung sind ja schon ganz nett, aber dann
fiel Ihnen ein, dass Sie ja zu Generation Z geh√∂ren, und daher den
schn√∂den Mammon nicht so hoch sch√§tzen sollten. Sie entschlie√üen sich,
Ihre hochgesch√§tzten Analyse-Skills f√ºr etwas einzusetzen, das Ihnen
sinnvoll erscheint: Die Analyse des Klimawandels.

Beim \href{https://www.dwd.de/DE/Home/home_node.html}{Deutschen
Wetterdienst, DWD} haben Sie sich Wetterdaten von Deutschland
heruntergeladen. Nach etwas
\href{https://data-se.netlify.app/2022/07/24/preparing-german-weather-data/}{Datenjudo,
auf das wir hier nicht eingehen wollen} resultiert ein sch√∂ner
Datensatz, den Sie jetzt analysieren wollen\footnote{Temperatur: Grad
  Celcius, Niederschlag (\texttt{precip}) mm Niederschlag pro
  Quadratmeter}:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{wetter\_path }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(}
  \StringTok{"https://raw.githubusercontent.com/sebastiansauer/"}\NormalTok{,}
  \StringTok{"Lehre/main/data/wetter{-}dwd/precip\_temp\_DWD.csv"}\NormalTok{)}

\NormalTok{wetter }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(wetter\_path)}
\end{Highlighting}
\end{Shaded}

Ein \emph{Data-Dictionary} f√ºr den Datensatz k√∂nnen Sie
\href{https://raw.githubusercontent.com/sebastiansauer/Lehre/main/data/wetter-dwd/wetter-dwd-data-dict.md}{hier}
herunterladen.\footnote{\url{https://raw.githubusercontent.com/sebastiansauer/Lehre/main/data/wetter-dwd/wetter-dwd-data-dict.md}}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Ein \emph{Data-Dictionary} (Codebook) erkl√§rt einen Datensatz. Oft
bedeutet das, das f√ºr jede Spalte der Datentabelle erkl√§rt wird, was die
Spalte bedeutet.\(\square\)

\end{tcolorbox}

Hervorragend! An die Arbeit!

\end{example}

\subsection{metrische UV}\label{metrische-uv}

\subsubsection{Modell Wetter1}\label{modell-wetter1}

Sie stellen sich nun folgende Forschungsfrage:

\begin{quote}
{\emoji{teacher}} Um wieviel ist die Temperatur in Deutschland pro Jahr
gestiegen, wenn man die letzten ca. 100 Jahre betrachtet?
\end{quote}

Die Modellparameter von \texttt{lm\_wetter1} sind in
Tabelle~\ref{tbl-lm-wetter1} zu sehen.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{lm\_wetter1 }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(temp }\SpecialCharTok{\textasciitilde{}}\NormalTok{ year, }\AttributeTok{data =}\NormalTok{ wetter)}
\FunctionTok{parameters}\NormalTok{(lm\_wetter1)}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1690}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1831}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1408}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.2535}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1408}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1127}}@{}}

\caption{\label{tbl-lm-wetter1}Modellparameter von lm\_wetter1}

\tabularnewline

\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
Parameter
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Coefficient
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
SE
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
95\% CI
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
t(28864)
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
p
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
(Intercept) & -14.25 & 1.85 & (-17.87, -10.63) & -7.71 & \textless{}
.001 \\
year & 0.01 & 9.47e-04 & (9.80e-03, 0.01) & 12.30 & \textless{} .001 \\

\end{longtable}

Laut Ihrem Modell wurde es pro Jahr um 0.01 Grad w√§rmer, pro Jahrzehnt
also 0.1 und pro Jahrhundert 1 Grad.

\begin{quote}
{\emoji{student}} Das ist sicherlich nicht linear! Vermutlich ist die
Temperatur bis 1950 konstant geblieben und jetzt knallt sie durch die
Decke!
\end{quote}

\begin{quote}
{\emoji{teacher}} Mit der Ruhe, das schauen Sie sich sp√§ter an.
\end{quote}

\subsubsection{Punkt-
vs.~Bereichssch√§tzung}\label{punkt--vs.-bereichsschuxe4tzung}

In tbl-lm-wetter1 finden sich zwei Arten von Information f√ºr den Wert
des Achsenabschnitts (b0) und des Regressionsgewichts von
\texttt{year}(b1):

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  \emph{Punktsch√§tzungen} In der Spalte \texttt{Coefficient} sehen Sie
  den ``Best-Guess'' f√ºr den entsprechenden Koeffizienten in der
  Population. Das is sozusagen der Wert f√ºr den sich das Modell
  festlegen w√ºrde, wenn es sonst nichts sagen d√ºrfte.
\item
  \emph{Bereichsch√§tzungen} Cleverer als Punktsch√§tzungen sind
  Bereichssch√§tzungen (Intervallsch√§tzungen): Hier wird ein Bereich
  plausibler Werte f√ºr den entsprechenden Wert angegeben. Der ``Bereich
  plausibler Werte'' wird auch als Konfidenzintervall (engl. confidence
  intervall, CI) bezeichnet. Entsprechend gibt \texttt{CI\_low} die
  Untergrenze des Bereichs plausibler Werte und \texttt{CI\_high} die
  Obergrenze aus. So k√∂nnen wir ablesen, dass das Regressionsgewicht von
  \texttt{year} irgendwo zwischen praktisch Null (0.009) und ca. 0.01
  Grad gesch√§tzt wird.
\end{enumerate}

üí° Merke: Je schmaler das Konfidenzintervall, desto genauer wird der
Effekt gesch√§tzt.

\subsubsection{Modell Wetter1a}\label{modell-wetter1a}

Das Modell \texttt{lm\_wetter1}, bzw. die Sch√§tzungen zu den erwarteten
Werten, kann mich sich so ausgeben lassen, s.
Abbildung~\ref{fig-wetter1}, links. Allerdings sind das zu viele
Datenpunkte. Wir sollten es vielleicht anders visualisieren, s.
Abbildung~\ref{fig-wetter1}, rechts. Dazu aggregieren wir die Messwerte
eines Jahres zu jeweils einem Mittelwert.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{wetter\_summ }\OtherTok{\textless{}{-}}
\NormalTok{  wetter }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{group\_by}\NormalTok{(year) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{temp =} \FunctionTok{mean}\NormalTok{(temp),}
            \AttributeTok{precip =} \FunctionTok{mean}\NormalTok{(precip))  }\CommentTok{\# precipitation: engl. f√ºr Niederschlag}
\end{Highlighting}
\end{Shaded}

Auf dieser Basis erstellen wir ein neues lineares Modell, s.
Tabelle~\ref{tbl-lm-wetter1a}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{lm\_wetter1a }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(temp }\SpecialCharTok{\textasciitilde{}}\NormalTok{ year, }\AttributeTok{data =}\NormalTok{ wetter\_summ)}
\FunctionTok{parameters}\NormalTok{(lm\_wetter1a)}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1739}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1884}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1449}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.2609}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1159}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1159}}@{}}

\caption{\label{tbl-lm-wetter1a}Modellparameter von lm\_wetter1a}

\tabularnewline

\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
Parameter
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Coefficient
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
SE
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
95\% CI
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
t(140)
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
p
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
(Intercept) & -14.14 & 2.70 & (-19.48, -8.79) & -5.23 & \textless{}
.001 \\
year & 0.01 & 1.38e-03 & (8.86e-03, 0.01) & 8.38 & \textless{} .001 \\

\end{longtable}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{plot}\NormalTok{(}\FunctionTok{estimate\_relation}\NormalTok{(lm\_wetter1)) }
\FunctionTok{plot}\NormalTok{(}\FunctionTok{estimate\_relation}\NormalTok{(lm\_wetter1a))}
\end{Highlighting}
\end{Shaded}

\begin{figure}

\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{090-regression2_files/figure-pdf/fig-wetter1-1.pdf}

}

\subcaption{\label{fig-wetter1-1}Jeder Punkt ist ein Tag (viel
Overplotting, wenig n√ºtzlich)}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{090-regression2_files/figure-pdf/fig-wetter1-2.pdf}

}

\subcaption{\label{fig-wetter1-2}Jeder Punkt ist ein Jahr
(wetter\_summ)}

\end{minipage}%

\caption{\label{fig-wetter1}Die Ver√§nderung der mittleren Temperatur in
Deutschland im Zeitverlauf (Datenquelle: DWD)}

\end{figure}%

\begin{quote}
{\emoji{student}} Moment mal, der Achsenabschnitt liegt bei -15 Grad!
Was soll das bitte bedeuten?
\end{quote}

\subsection{UV zentrieren}\label{uv-zentrieren}

Zur Erinnerung: Der Achsenabschnitt (\(\beta_0\); engl.
\emph{intercept}) ist definiert als der Y-Wert an der Stelle X=0, s.
Kapitel~\ref{sec-interpret-reg-mod}.

In den Wetterdaten w√§re Jahr=0 Christi Geburt. Da unsere
Wetteraufzeichnung gerade mal ca. 150 Jahre in die Vergangenheit reicht,
ist es vollkommen vermessen, dass Modell 2000 Jahre in die Vergangenheit
zu extraplieren, ganz ohne dass wir daf√ºr Daten haben, s.
Abbildung~\ref{fig-extrapolation}.

\begin{figure}

\centering{

\includegraphics[width=0.75\textwidth,height=\textheight]{img/extrapolating.png}

}

\caption{\label{fig-extrapolation}Du sollst nicht ein Modell weit
au√üerhalb seines Datenbereichs extrapolieren}

\end{figure}%

Sinnvoller ist es da, z.B. einen \emph{Referenzwert} festzulegen, etwa
1950. Wenn wir dann von allen Jahren 1950 abziehen, wird das Jahr 1950
zum neuen Jahr Null. Damit bez√∂ge sich der Achsenabschnitt auf das Jahr
1950, was Sinn macht, denn f√ºr dieses Jahr haben wir Daten.

Hat man nicht einen bestimmten Wert, der sich als Referenzwert anbietet,
so ist es √ºblich, z.B. den Mittelwert (der UV) als Referenzwert zu
nehmen. Diese Transformation bezeichnet man als \emph{Zentrierung}
(engl. centering) der Daten.

So zentriert man eine Verteilung:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{wetter }\OtherTok{\textless{}{-}}
\NormalTok{  wetter }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{year\_c =}\NormalTok{ year }\SpecialCharTok{{-}} \FunctionTok{mean}\NormalTok{(year))  }\CommentTok{\# "c" wie centered}
\end{Highlighting}
\end{Shaded}

Das mittlere Jahr in unserer Messwertereihe ist √ºbrigens 1951:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{wetter }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{summarise}\NormalTok{(}\FunctionTok{mean}\NormalTok{(year))}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}r@{}}
\toprule\noalign{}
mean(year) \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
1951.251 \\
\end{longtable}

Die Steigung (d.h. der Regressionskoeffizient f√ºr \texttt{year\_c})
bleibt unver√§ndert, nur der Achsenabschnitt √§ndert sich, s.
Tabelle~\ref{tbl-lm_wetter1_zentriert}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{lm\_wetter1\_zentriert }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(temp }\SpecialCharTok{\textasciitilde{}}\NormalTok{ year\_c, }\AttributeTok{data =}\NormalTok{ wetter)}
\FunctionTok{parameters}\NormalTok{(lm\_wetter1\_zentriert)}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1690}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1831}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1408}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.2535}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1408}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1127}}@{}}

\caption{\label{tbl-lm_wetter1_zentriert}Modellparameter von
lm\_wetter1\_zentriert}

\tabularnewline

\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
Parameter
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Coefficient
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
SE
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
95\% CI
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
t(28864)
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
p
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
(Intercept) & 8.49 & 0.04 & (8.42, 8.57) & 219.43 & \textless{} .001 \\
year c & 0.01 & 9.47e-04 & (9.80e-03, 0.01) & 12.30 & \textless{}
.001 \\

\end{longtable}

Jetzt ist die Interpretation des Achsenabschnitts komfortabel: Im Jahr
1951 (x=0) lag die mittlere Temperatur in Deutschland (laut DWD) bei ca.
8.5 Grad Celcius. Die Regressionsgleichung lautet:
\texttt{temp\_pred\ =\ 8.49\ +\ 0.01*year\_c}. In Worten: Wir sagen eine
Temperatur vorher, die sich als Summe von 8.49 Grad plus 0.01 mal das
Jahr (in zentrierter Form) berechnet.

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-important-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-important-color}{\faExclamation}\hspace{0.5em}{Referenzwert entspricht Null}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-important-color-frame]

Der Referenzwert bzw. der Wert der Referenzgruppe entspricht dem Y-Wert
bei x=0 im Regressionsmodell.\(\square\)

\end{tcolorbox}

Wie gut erkl√§rt unser Modell die Daten?

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{r2}\NormalTok{(lm\_wetter1\_zentriert)  }\CommentTok{\# aus \textasciigrave{}\{easystats\}\textasciigrave{}}
\DocumentationTok{\#\# \# R2 for Linear Regression}
\DocumentationTok{\#\#        R2: 0.005}
\DocumentationTok{\#\#   adj. R2: 0.005}
\end{Highlighting}
\end{Shaded}

Viel Varianz des Wetters erkl√§rt das Modell mit
\texttt{year\_c}\footnote{\texttt{year} und \texttt{year\_c} sind gleich
  stark mit \texttt{temp} korreliert, daher wird sich die Modellg√ºte
  nicht unterscheiden.} aber nicht. Macht auch Sinn: Abgesehen von der
Jahreszahl spielt z.B. die Jahreszeit eine gro√üe Rolle f√ºr die
Temperatur. Das haben wir nicht ber√ºcksichtigt.

\begin{quote}
{\emoji{student}} Wie warm ist es laut unserem Modell dann im Jahr 2051?
\end{quote}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{predict}\NormalTok{(lm\_wetter1\_zentriert, }\AttributeTok{newdata =} \FunctionTok{tibble}\NormalTok{(}\AttributeTok{year\_c =} \DecValTok{100}\NormalTok{))}
\DocumentationTok{\#\#       1 }
\DocumentationTok{\#\# 9.65775}
\end{Highlighting}
\end{Shaded}

\begin{quote}
{\emoji{student}} Moment! Die Vorhersage ist doch Quatsch! Schon im Jahr
2022 lag die Durchschnittstemperatur bei 10,5¬∞ Celcius.\footnote{\href{https://www.umweltbundesamt.de/daten/klima/trends-der-lufttemperatur\#steigende-durchschnittstemperaturen-weltweit}{Quelle:
  Umweltbundesamt}}
\end{quote}

\begin{quote}
{\emoji{teacher}} Wir brauchen ein besseres Modell! Zum Gl√ºck haben wir
ambitionierte Nachwuchs-Wissenschaftler:innen.
\end{quote}

\subsection{Bin√§re UV}\label{binuxe4re-uv}

\begin{definition}[Bin√§re
Variable]\protect\hypertarget{def-binvar}{}\label{def-binvar}

Eine \emph{bin√§re} UV, auch \emph{Indikatorvariable} oder
\emph{Dummyvariable} genannt, hat nur zwei Auspr√§gungen: 0 und
1.\(\square\)

\end{definition}

\begin{example}[Bin√§re
Variablen]\protect\hypertarget{exm-bin}{}\label{exm-bin}

Das sind zum Beispiel \emph{weiblich} mit den Auspr√§gungen \texttt{0}
(nein) und \texttt{1} (ja) oder \emph{before\_1950} mit \texttt{1} f√ºr
Jahre fr√ºher als 1950 und \texttt{0} ansonsten.\(\square\)

\end{example}

\begin{example}[]\protect\hypertarget{exm-binuv}{}\label{exm-binuv}

Hier interessiert Sie folgende Forschungsfrage:

\begin{quote}
{\emoji{student}} Ob es in der zweiten H√§lfte des 20. Jahrhunderts wohl
w√§rmer warm, im Durchschnitt, als vorher?\(\square\)
\end{quote}

\end{example}

Aber wie erstellen Sie eine Variable \texttt{after\_1950}, um die zweite
H√§lfte des 20. Jahrhunderts (und danach) zu fassen? Nach einigem
√úberlegen kommen Sie auf die Idee, das vektorisierte Rechnen von R (s.
Kapitel~\ref{sec-veccalc}) auszunutzen:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{year }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{1940}\NormalTok{, }\DecValTok{1950}\NormalTok{, }\DecValTok{1960}\NormalTok{)}
\NormalTok{after\_1950 }\OtherTok{\textless{}{-}}\NormalTok{ year }\SpecialCharTok{\textgreater{}} \DecValTok{1950}  \CommentTok{\# pr√ºfe ob as Jahr gr√∂√üer als 1950 ist}
\NormalTok{after\_1950}
\DocumentationTok{\#\# [1] FALSE FALSE  TRUE}
\end{Highlighting}
\end{Shaded}

Die ersten zwei Jahre von \texttt{year} sind nicht gr√∂√üer als 1950, das
dritte schon.

Ja, so k√∂nnte das klappen! Diese Syntax √ºbertragen Sie auf Ihre
\texttt{wetter}-Daten:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{wetter }\OtherTok{\textless{}{-}}
\NormalTok{  wetter }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{after\_1950 =}\NormalTok{ year }\SpecialCharTok{\textgreater{}} \DecValTok{1950}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{filter}\NormalTok{(region }\SpecialCharTok{!=} \StringTok{"Deutschland"}\NormalTok{)  }\CommentTok{\# ohne Daten f√ºr Gesamt{-}Deutschland}
\end{Highlighting}
\end{Shaded}

Scheint zu klappen!

Jetzt ein lineares Modell dazu berechnen:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{lm\_wetter\_bin\_uv }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(temp }\SpecialCharTok{\textasciitilde{}}\NormalTok{ after\_1950, }\AttributeTok{data =}\NormalTok{ wetter)}
\end{Highlighting}
\end{Shaded}

Die Parameter des Modells lassen darauf schlie√üen, dass es tats√§chlich
w√§rmer war nach 1950, und zwar im Schnitt offenbar ein gutes halbes
Grad, s. Abbildung~\ref{fig-wetter2}.

\begin{figure}

\begin{minipage}{0.50\linewidth}

\includegraphics{img/fig-lm-wetter-bin-uv.png}

\subcaption{\label{}Der Sch√§tzbereich f√ºr den Parameter reicht von ca.
0.5 bis 0.8 Grad Unterschied}
\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\includegraphics{img/fig-temp-after1950.png}

\subcaption{\label{}Wie man sieht, √ºberlappen die Temperaturen dennoch
betr√§chtlich; aufgrund des starken Overplotting ist dieses Diagramm
alles andere als ideal}
\end{minipage}%

\caption{\label{fig-wetter2}Modell
\texttt{temp\ \textasciitilde{}\ after\_1950}}

\end{figure}%

Leider zeigt ein Blick zum \texttt{r2}, dass die Vorhersageg√ºte des
Modells zu w√ºnschen √ºbrig l√§sst\footnote{\texttt{r2(lm\_wetter\_bin\_uv)}}.
\(\square\)

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-important-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-important-color}{\faExclamation}\hspace{0.5em}{Lineare Modelle verkraften nur metrische Variablen}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-important-color-frame]

Um die Koeffizienten eines linearen Modells auszurechnen, ben√∂tigt man
eine metrische X- und eine metrische Y-Variable. Hier haben wir aber
keine richtige metrische X-Variable\footnotemark{}, sondern eine
\emph{logische} Variable mit den Werten \texttt{TRUE} und
\texttt{FALSE}.\(\square\)

\end{tcolorbox}

\footnotetext{UV}

Um die X-Variable in eine metrische Variable umzuwandeln, gibt es einen
einfachen Trick, den R f√ºr uns ohne viel Ank√ºndigung durchf√ºhrt:
Umwandling in mehrere bin√§re Variablen.

Hat ein nominaler Pr√§diktor zwei Stufen, so √ºberf√ºhrt\footnote{synonym:
  transformiert} \texttt{lm()} diese Variable in eine bin√§re Variable.
Da eine bin√§re Variable metrisch ist, kann die Regression in gewohnter
Weise durchgef√ºhrt werden. Wenn Sie die Ausgabe der Parameter
betrachten, so sehen Sie die neu erstellte bin√§re Variable. Man beachte,
dass der urspr√ºngliche Datensatz nicht ge√§ndert wird, nur w√§hrend der
Analyse von \texttt{lm} wird die Umwandlung der Variable \footnote{Transformation}
durchgef√ºhrt.

\begin{quote}
{\emoji{robot}} Eine \texttt{1} kannst du als ``Ja! Richtig!'' verstehen
und eine\texttt{0} als ``Nein! Falsch!''
\end{quote}

\texttt{after\_1950} wird in eine Indikatorvariable umgewandelt:

\begin{figure}

\begin{minipage}{0.40\linewidth}

\begin{longtable}[]{@{}rl@{}}
\toprule\noalign{}
id & after\_1950 \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
1 & TRUE \\
2 & FALSE \\
\end{longtable}

\end{minipage}%
%
\begin{minipage}{0.20\linewidth}
\(\qquad \rightarrow\)\end{minipage}%
%
\begin{minipage}{0.40\linewidth}

\begin{longtable}[]{@{}rr@{}}
\toprule\noalign{}
id & after\_1950TRUE \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
1 & 1 \\
2 & 0 \\
\end{longtable}

\end{minipage}%

\end{figure}%

\begin{example}[Beispiel: `Geschlecht' in eine bin√§re Variable
umwandeln.]\protect\hypertarget{exm-bin-trans}{}\label{exm-bin-trans}

Angenommen wir haben eine Variable \texttt{geschlecht} mit den zwei
Stufen \texttt{Frau} und \texttt{Mann} und wollen diese in eine
Indikatorvariable umwandeln. Da ``Frau'' alphabetisch vor ``Mann''
kommt, nimmt R ``Frau'' als \emph{erste} Stufe bzw. als
\emph{Referenzgruppe}. ``Mann'' ist dann die zweite Stufe, die in der
Regression dann in Bezug zur Referenzgruppe gesetzt wird. \texttt{lm}
wandelt uns diese Variable in \texttt{geschlechtMann} um mit den zwei
Stufen \texttt{0} (kein Mann, also Frau) und \texttt{1}
(Mann).\(\square\)

\end{example}

\begin{figure}

\begin{minipage}{0.40\linewidth}

\begin{longtable}[]{@{}rl@{}}
\toprule\noalign{}
id & geschlecht \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
1 & Mann \\
2 & Frau \\
\end{longtable}

\end{minipage}%
%
\begin{minipage}{0.20\linewidth}
\(\qquad \rightarrow\)\end{minipage}%
%
\begin{minipage}{0.40\linewidth}

\begin{longtable}[]{@{}rr@{}}
\toprule\noalign{}
id & geschlechtMann \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
1 & 1 \\
2 & 0 \\
\end{longtable}

\end{minipage}%

\end{figure}%

Ein lineares Modell mit bin√§rer UV ist nichts anderes die Differenz der
Gruppenmittelwerte zu berechnen:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{wetter }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{group\_by}\NormalTok{(after\_1950) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{temp\_mean =} \FunctionTok{mean}\NormalTok{(temp))}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}lr@{}}
\toprule\noalign{}
after\_1950 & temp\_mean \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
FALSE & 8.175287 \\
TRUE & 8.816761 \\
\end{longtable}

Die Interpretation eines linearen Modells mit bin√§rer UV veranschaulicht
Abbildung~\ref{fig-binvar}: Der Achsenabschnitt (b0) entspricht dem
Mittelwert der 1. Gruppe. Der Mittelwert der 2. Gruppe entspricht der
\emph{Summe} aus Achsenabschnitt und dem Koeffizienten der zweiten
Gruppe. (Abbildung~\ref{fig-binvar} zeigt nur die Daten f√ºr den Monat
Juli im Bundesland Bayern, der Einfachheit und √úbersichtlichkeit
halber.)

\begin{figure}

\centering{

\includegraphics{090-regression2_files/figure-pdf/fig-binvar-1.pdf}

}

\caption{\label{fig-binvar}Sinnbild zur Interpretation eines linearen
Modells mit bin√§rer UV (reingezoomt, um den Mittelwertsunterschied
hervorzuheben)}

\end{figure}%

Fassen wir die Interpretation der Koeffizienten f√ºr das Modell mit
bin√§rer UV zusammen:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Mittelwert der 1. Gruppe (bis 1950): {Achsenabschnitt (b0)}
\item
  Mittelwert der 2. Gruppe (nach 1950): {Achsenabschnitt (b0)} +
  {Steigung der Regressionsgeraden (b1)}
\end{enumerate}

F√ºr die Modellwerte \(\color{modelcol}{\hat{y}}\) gilt also:

\begin{itemize}
\item
  Temperatur laut Modell bis 1950:
  \(\color{modelcol}{\hat{y}} = \color{beta0col}{\beta_0} = 17.7\)
\item
  Temperatur laut Modell bis 1950:
  \(\color{modelcol}{\hat{y}} = \color{beta0col}{\beta_0} +  \color{beta1col}{\beta_1}= \color{beta0col}{17.7} + \color{beta1col}{0.6} = 18.3\)
\end{itemize}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Bei \emph{nominalen} (und auch bei \emph{bin√§ren}) Variablen ist
\(\color{beta1col}{\beta_1}\) ein \emph{Schalter}; bei \emph{metrischen}
Variablen ein \emph{Dimmer}.\footnotemark{} \(\square\)

\end{tcolorbox}

\footnotetext{Ich danke Karsten L√ºbke f√ºr diese Idee.}

\subsection{Nominale UV}\label{nominale-uv}

In diesem Abschnitt betrachten wir ein lineare Modell\footnote{f√ºr uns
  synonym: Regressionsmodell} mit einer mehrstufigen\footnote{drei oder
  mehr Stufen bzw. Auspr√§gungen} (nominalskalierten) UV.\footnote{So ein
  Modell ist von den Ergebnissen her praktisch identisch zu einer
  einfachen \emph{Varianzanalyse}.}

\begin{example}[]\protect\hypertarget{exm-wetter2}{}\label{exm-wetter2}

Ob es wohl substanzielle\footnote{wie k√∂nnte man dieses Wort eigentlich
  definieren?} Temperaturunterschiede zwischen den Bundesl√§ndern gibt?

\end{example}

Befragen wir dazu ein lineares Modell, s.
Tabelle~\ref{tbl-lm_wetter_region}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{lm\_wetter\_region }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(temp }\SpecialCharTok{\textasciitilde{}}\NormalTok{ region, }\AttributeTok{data =}\NormalTok{ wetter)}
\FunctionTok{parameters}\NormalTok{(lm\_wetter\_region)}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.4176}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1429}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0659}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1758}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1099}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0879}}@{}}

\caption{\label{tbl-lm_wetter_region}Modellparameter f√ºr
lm\_wetter\_region}

\tabularnewline

\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
Parameter
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Coefficient
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
SE
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
95\% CI
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
t(27152)
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
p
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
(Intercept) & 8.25 & 0.16 & (7.93, 8.56) & 51.62 & \textless{} .001 \\
region (Bayern) & -0.63 & 0.23 & (-1.07, -0.19) & -2.79 & 0.005 \\
region (Brandenburg) & 0.57 & 0.23 & (0.13, 1.02) & 2.53 & 0.011 \\
region (Brandenburg/Berlin) & 0.58 & 0.23 & (0.14, 1.03) & 2.59 &
0.010 \\
region (Hessen) & 0.11 & 0.23 & (-0.33, 0.56) & 0.51 & 0.612 \\
region (Mecklenburg-Vorpommern) & 0.08 & 0.23 & (-0.37, 0.52) & 0.34 &
0.732 \\
region (Niedersachsen) & 0.52 & 0.23 & (0.07, 0.96) & 2.29 & 0.022 \\
region (Niedersachsen/Hamburg/Bremen) & 0.52 & 0.23 & (0.08, 0.96) &
2.31 & 0.021 \\
region (Nordrhein-Westfalen) & 0.80 & 0.23 & (0.35, 1.24) & 3.53 &
\textless{} .001 \\
region (Rheinland-Pfalz) & 0.46 & 0.23 & (0.02, 0.90) & 2.03 & 0.042 \\
region (Saarland) & 0.71 & 0.23 & (0.27, 1.16) & 3.16 & 0.002 \\
region (Sachsen) & -0.04 & 0.23 & (-0.48, 0.40) & -0.18 & 0.853 \\
region (Sachsen-Anhalt) & 0.55 & 0.23 & (0.11, 1.00) & 2.45 & 0.014 \\
region (Schleswig-Holstein) & 0.17 & 0.23 & (-0.27, 0.62) & 0.76 &
0.446 \\
region (Thueringen) & -0.48 & 0.23 & (-0.92, -0.03) & -2.11 & 0.035 \\
region (Thueringen/Sachsen-Anhalt) & 0.10 & 0.23 & (-0.34, 0.54) & 0.43
& 0.664 \\

\end{longtable}

Hat die nominalskalierte UV mehr als zwei Stufen, so transformiert
\texttt{lm} sie in mehr als eine Indikatorvariablen um. Genauer gesagt
ist es immer eine Indikatorvariablen weniger als es Stufen in der
nominalskalierten Variablen gibt.

Betrachten wir ein einfaches Beispiel, eine Tabelle mit der Spalte
\texttt{Bundesland} -- aus Gr√ºnden der Einfachheit hier nur mit
\emph{drei} Bundesl√§ndern. Damit \texttt{lm} arbeiten kann, wird
\texttt{Bundesland} in \emph{zwei} Indikatorvariablen umgewandelt:

\begin{figure}

\begin{minipage}{0.40\linewidth}

\begin{longtable}[]{@{}rl@{}}
\toprule\noalign{}
id & Bundesland \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
1 & BaW√º \\
2 & Bayern \\
3 & Brandenburg \\
\end{longtable}

\end{minipage}%
%
\begin{minipage}{0.20\linewidth}
\(\qquad \rightarrow\)\end{minipage}%
%
\begin{minipage}{0.40\linewidth}

\begin{longtable}[]{@{}rrr@{}}
\toprule\noalign{}
id & BL\_Bayern & BL\_Bra \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
1 & 0 & 0 \\
2 & 1 & 0 \\
3 & 0 & 1 \\
\end{longtable}

\end{minipage}%

\end{figure}%

Auch im Fall mehrerer Auspr√§gungen einer nominalen Variablen gilt die
gleiche Logik der Interpretation wie bei bin√§ren Variablen:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Mittelwert der 1. Gruppe: Achsenabschnitt (b0)
\item
  Mittelwert der 2. Gruppe: Achsenabschnitt (b0) + Steigung der 1.
  Regressionsgeraden (b1)
\item
  Mittelwert der 2. Gruppe: Achsenabschnitt (b0) + Steigung der 2.
  Regressionsgeraden (b2)
\item
  usw.
\end{enumerate}

Es kann nervig sein, dass das Bundesland, welches als
\emph{Referenzgruppe} (sprich als Gruppe des Achsenabschnitts ausgew√§hlt
wurde) nicht explizit in der Ausgabe angegeben ist. Der Wert der
Referenzgruppe findet seinen Niederschlag im Achsenabschnitt.

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Bei einer Variable vom Typ \texttt{character} w√§hlt R den alphabetisch
ersten Wert als Referenzgruppe f√ºr ein lineares Modell aus. Bei einer
Variable vom Typ \texttt{factor} ist die Reihenfolge bereits festgelegt,
vgl. Kapitel~\ref{sec-faktorvar}. Der Mittelwert dieser Gruppe
entspricht dem Achsenabschnitt. \(\square\)

\end{tcolorbox}

\begin{example}[Achsenabschnitt in
wetter\_lm2]\protect\hypertarget{exm-baw√º}{}\label{exm-baw√º}

Da Baden-W√ºrttemberg das alphabetisch erste Bundesland ist, wird es von
R als Referenzgruppe ausgew√§hlt, dessen Mittelwert als Achsenabschnitt
im linearen Modell hergenommen wird.\(\square\)

\end{example}

Am einfachsten verdeutlicht sich \texttt{lm\_wetter\_region} vielleicht
mit einem Diagramm, s. Abbildung~\ref{fig-bin-nom}.

\begin{figure}

\centering{

\includegraphics{090-regression2_files/figure-pdf/fig-bin-nom-1.pdf}

}

\caption{\label{fig-bin-nom}Sinnbild zur Interpretation eines linearen
Modells mit nominaler UV (reingezoomt, um den Mittelwertsunterschied
hervorzuheben). Die Achsen wurden um 90¬∞ gedreht, damit man die Namen
der Bundesl√§nder besser lessen kann.}

\end{figure}%

\begin{example}[Niederschlagsmenge im Vergleich der
Monate]\protect\hypertarget{exm-months}{}\label{exm-months}

Eine weitere Forschungsfrage, die Sie nicht au√üer acht lassen wollen,
ist die Frage nach den jahreszeitlichen Unterschieden im Niederschlag
(engl. precipitation). Los R, rechnen!

\begin{quote}
{\emoji{robot}} Endlich geht's weiter! Ergebnisse in
Tabelle~\ref{tbl-lm_wetter-month}! \(\square\)
\end{quote}

\end{example}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{lm\_wetter\_month }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(precip }\SpecialCharTok{\textasciitilde{}}\NormalTok{ month, }\AttributeTok{data =}\NormalTok{ wetter)}
\FunctionTok{parameters}\NormalTok{(lm\_wetter\_month)}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}lccccc@{}}

\caption{\label{tbl-lm_wetter-month}Modellparameter f√ºr
lm\_wetter\_month}

\tabularnewline

\toprule\noalign{}
Parameter & Coefficient & SE & 95\% CI & t(27166) & p \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
(Intercept) & 53.27 & 0.41 & (52.46, 54.08) & 128.76 & \textless{}
.001 \\
month & 1.14 & 0.06 & (1.03, 1.25) & 20.29 & \textless{} .001 \\

\end{longtable}

Ja, da scheint es deutliche Unterschied im Niederschlag zu geben. Wir
brauchen ein Diagramm zur Verdeutlichung, s.
Abbildung~\ref{fig-wetter-month}, links.\footnote{\texttt{plot(estimate\_expectation(lm\_wetter\_month)}}
Oh nein: R betrachtet \texttt{month} als numerische Variable! Aber
``Monat'' bzw. ``Jahreszeit'' sollte nominal sein.

\begin{quote}
{\emoji{robot}} Aber \texttt{month} ist als Zahl in der Tabelle
hinterlegt. Jede ehrliche Maschine verarbeitet eine Zahl als Zahl, ist
doch klar!
\end{quote}

\begin{quote}
{\emoji{woman}} Okay, R, wir m√ºssen \texttt{month} in eine nominale Zahl
transformieren. Wie geht das?
\end{quote}

\begin{quote}
{\emoji{robot}} Dazu kannst du den Befehl \texttt{factor} nehmen. Damit
wandelst du eine numerische Variable in eine nominalskalierte Variable
(Faktorvariable) um. Faktisch hei√üt das, dass dann eine Zahl als Text
gesehen wird.
\end{quote}

\begin{example}[]\protect\hypertarget{exm-factor}{}\label{exm-factor}

Transformiert man \texttt{42} mit \texttt{factor}, so wird aus
\texttt{42} \texttt{"42"}. Aus der Zahl wird ein Text. Alle metrischen
Eigenschaften gehen verloren; die Variable ist jetzt auf nominalen
Niveau.\(\square\)

\end{example}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{wetter }\OtherTok{\textless{}{-}}
\NormalTok{  wetter }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{month\_factor =} \FunctionTok{factor}\NormalTok{(month))}
\end{Highlighting}
\end{Shaded}

Jetzt berechnen wir mit der faktorisierten Variablen ein lineares
Modell, s. Tabelle~\ref{tbl-lm_wetter_month_factor}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{lm\_wetter\_month\_factor }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(precip }\SpecialCharTok{\textasciitilde{}}\NormalTok{ month\_factor, }\AttributeTok{data =}\NormalTok{ wetter)}
\FunctionTok{parameters}\NormalTok{(lm\_wetter\_month\_factor)}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.2500}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1806}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0833}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.2361}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1389}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1111}}@{}}

\caption{\label{tbl-lm_wetter_month_factor}Modellparameter von
lm\_wetter\_month\_factor}

\tabularnewline

\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
Parameter
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Coefficient
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
SE
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
95\% CI
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
t(27156)
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
p
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
(Intercept) & 56.95 & 0.64 & (55.68, 58.21) & 88.56 & \textless{}
.001 \\
month factor (2) & -9.95 & 0.91 & (-11.73, -8.17) & -10.94 & \textless{}
.001 \\
month factor (3) & -7.78 & 0.91 & (-9.56, -6.00) & -8.56 & \textless{}
.001 \\
month factor (4) & -8.49 & 0.91 & (-10.27, -6.71) & -9.34 & \textless{}
.001 \\
month factor (5) & 4.74 & 0.91 & (2.96, 6.53) & 5.22 & \textless{}
.001 \\
month factor (6) & 14.34 & 0.91 & (12.56, 16.12) & 15.77 & \textless{}
.001 \\
month factor (7) & 24.36 & 0.91 & (22.57, 26.14) & 26.74 & \textless{}
.001 \\
month factor (8) & 17.52 & 0.91 & (15.74, 19.31) & 19.24 & \textless{}
.001 \\
month factor (9) & 1.93 & 0.91 & (0.15, 3.72) & 2.12 & 0.034 \\
month factor (10) & 2.29 & 0.91 & (0.51, 4.08) & 2.52 & 0.012 \\
month factor (11) & 0.89 & 0.91 & (-0.89, 2.68) & 0.98 & 0.327 \\
month factor (12) & 5.20 & 0.91 & (3.42, 6.99) & 5.71 & \textless{}
.001 \\

\end{longtable}

Sehr sch√∂n! Jetzt haben wir eine Referenzgruppe (Monat 1, d.h. Januar)
und 11 Unterschiede zum Januar, s. Abbildung~\ref{fig-wetter-month},
rechts.

\begin{figure}

\begin{minipage}{0.50\linewidth}

\includegraphics{img/fig-precip-month-num.png}

\subcaption{\label{}\texttt{lm\_wetter\_month}, Monat f√§lschlich als
metrische Variable}
\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\includegraphics{img/fig-precip-month.png}

\subcaption{\label{}\texttt{lm\_wetter\_month\_text}, Monat korrekt als
nominale Variable (aber mit viel Overplotting, das m√ºsste man besser
machen)}
\end{minipage}%

\caption{\label{fig-wetter-month}Niederschlagsunterschiede pro Monat
(ein Punkt ist ein Jahr); aufgrund der vielen Datenpunkte ist das
Diagramm wenig √ºbersichtlich (Overplotting).}

\end{figure}%

M√∂chte man die Referenzgruppe eines Faktors √§ndern, kann man dies mit
\texttt{relevel} tun:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{wetter }\OtherTok{\textless{}{-}}
\NormalTok{  wetter }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{month\_factor =} \FunctionTok{relevel}\NormalTok{(month\_factor, }\AttributeTok{ref =} \StringTok{"7"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

So sieht dann die ge√§nderte Reihenfolge aus:\footnote{Zum
  Dollar-Operator s. Kapitel~\ref{sec-dollar-op}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{levels}\NormalTok{(wetter}\SpecialCharTok{$}\NormalTok{month\_factor)}
\DocumentationTok{\#\#  [1] "7"  "1"  "2"  "3"  "4"  "5"  "6"  "8"  "9"  "10" "11"}
\DocumentationTok{\#\# [12] "12"}
\end{Highlighting}
\end{Shaded}

\subsection{Bin√§re plus metrische UV}\label{sec-faktorvar}

In diesem Abschnitt untersuchen wir ein lineares Modell mit zwei UV:
einer \emph{zweistufigen} (bin√§ren) UV plus einer \emph{metrischen}
UV.\footnote{So ein Modell kann auch als \emph{Kovarianzanalyse} (engl.
  analysis of covariance, ancova) bezeichnet werden.}

\begin{example}[]\protect\hypertarget{exm-rain1}{}\label{exm-rain1}

Ob sich die Niederschlagsmenge wohl unterschiedlich zwischen den Monaten
entwickelt hat in den letzten gut 100 Jahren? Der Einfachheit halber
greifen Sie sich nur zwei Monate heraus (Januar und Juli).

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{wetter\_month\_1\_7 }\OtherTok{\textless{}{-}}
\NormalTok{  wetter }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{filter}\NormalTok{(month }\SpecialCharTok{==} \DecValTok{1}  \SpecialCharTok{|}\NormalTok{ month }\SpecialCharTok{==} \DecValTok{7}\NormalTok{) }
\end{Highlighting}
\end{Shaded}

\begin{quote}
{\emoji{teacher}} Ich muss mal kurz auf eine Sache hinweisen\ldots{}
\end{quote}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Faktorvariable}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Eine Faktorvariable ist einer der beiden Datentypen in R, die sich f√ºr
nominalskalierte Variablen anbieten: Textvariablen (\texttt{character})
und Faktor-Variablen (\texttt{factor}). Ein wichtiger Unterschied ist,
dass die erlaubten Auspr√§gungen (``Faktorstufen'') bei einer
Faktor-Variable mitgespeichert werden, bei der Text-Variable nicht.

Das kann praktisch sein, denn bei einer Faktorvariable ist immer klar,
welche Auspr√§gungen in Ihrer Variable m√∂glich sind.\(\square\)

\end{tcolorbox}

\begin{example}[Beispiel f√ºr eine
Faktorvariable]\protect\hypertarget{exm-factor1}{}\label{exm-factor1}

~

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{geschlecht }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"f"}\NormalTok{, }\StringTok{"f"}\NormalTok{, }\StringTok{"m"}\NormalTok{)}
\NormalTok{geschlecht\_factor }\OtherTok{\textless{}{-}} \FunctionTok{factor}\NormalTok{(geschlecht)}
\NormalTok{geschlecht\_factor}
\DocumentationTok{\#\# [1] f f m}
\DocumentationTok{\#\# Levels: f m}
\end{Highlighting}
\end{Shaded}

\end{example}

\begin{example}[Filtern ver√§ndert die Faktorstufen
nicht]\protect\hypertarget{exm-factor2}{}\label{exm-factor2}

Wenn Sie von der Faktorvariablen\footnote{synonym: nominalskalierte
  Variable} \texttt{geschlecht} das 3. Element (\texttt{"m"})
herausfiltern, so dass z.B. nur die ersten beiden Elemente √ºbrig bleiben
mit allein der Auspr√§gung \texttt{"f"}, merkt sich R trotzdem, dass es
\emph{zwei} Faktorstufen gibt (\texttt{"f"} und \texttt{"m"}).

Genaus so ist es, wenn Sie aus \texttt{wetter} nur die Monate
\texttt{"1"} und \texttt{"7"} herausfiltern: R merkt sich, dass es 12
Faktorstufen gibt. M√∂chten Sie die herausgefilterten Faktorstufen
``l√∂schen'', so k√∂nnen Sie einfach die Faktorvariable neu berechnen (mit
\texttt{factor}).\(\square\)

\end{example}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{wetter\_month\_1\_7 }\OtherTok{\textless{}{-}}
\NormalTok{  wetter }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{filter}\NormalTok{(month }\SpecialCharTok{==} \DecValTok{1}  \SpecialCharTok{|}\NormalTok{ month }\SpecialCharTok{==} \DecValTok{7}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%} 
  \CommentTok{\# Faktor (und damit die Faktorstufen) neu berechnen:}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{month\_factor =} \FunctionTok{factor}\NormalTok{(month))}
\end{Highlighting}
\end{Shaded}

Okay. Wie spezifiziert man jetzt das lineare Modell?\(\square\)

\end{example}

Hat man mehrere (``multiple'') X-Variablen\footnote{Pr√§diktoren,
  unabh√§ngige Variablen, X-Variablen}, so trennt man sich mit einem
Plus-Zeichen in der Regressionsformel, z.B.
\texttt{temp\ \textasciitilde{}\ year\_c\ +\ month}.

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-important-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-important-color}{\faExclamation}\hspace{0.5em}{Multiple Regression}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-important-color-frame]

Eine multiple Regression beinhaltet mehr als eine X-Variable. Die
Modellformel spezifiziert man so:

\(y ~ x_1 + x_2 + \ldots + x_n \qquad \square\)

\end{tcolorbox}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Modellgleichung}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Das Pluszeichen hat in der Modellgleichung\footnotemark{} \emph{keine}
arithmetische Funktion. Es wird nichts addiert. In der Modellgleichung
sagt das Pluszeichen nur ``und noch folgende UV\ldots{}''.\(\square\)

\end{tcolorbox}

\footnotetext{synonym: Regressionsformel}

Die obige Modellgleichung liest sich also so:

\begin{quote}
Temperatur ist eine Funktion von der (zentrierten) Jahreszahl und des
Monats
\end{quote}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{lm\_year\_month }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(precip }\SpecialCharTok{\textasciitilde{}}\NormalTok{ year\_c }\SpecialCharTok{+}\NormalTok{ month\_factor, }\AttributeTok{data =}\NormalTok{ wetter\_month\_1\_7)}
\end{Highlighting}
\end{Shaded}

Die Modellparameter sind in Tabelle~\ref{tbl-lm_year_month} zu sehen.

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.2394}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1831}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0845}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.2535}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1268}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1127}}@{}}

\caption{\label{tbl-lm_year_month}Modellparameter von lm\_year\_month}

\tabularnewline

\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
Parameter
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Coefficient
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
SE
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
95\% CI
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
t(4525)
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
p
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
(Intercept) & 56.94 & 0.68 & (55.60, 58.27) & 83.57 & \textless{}
.001 \\
year c & 0.03 & 0.01 & (5.59e-03, 0.05) & 2.43 & 0.015 \\
month factor (7) & 24.37 & 0.97 & (22.48, 26.27) & 25.25 & \textless{}
.001 \\

\end{longtable}

Die Modellkoeffizienten sind so zu interpretieren:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Achsenabschnitt (b0, \texttt{(Intercept})): Im Referenzjahr (1951) im
  \emph{Referenzmonat Januar} lag die Niederschlagsmenge bei 57 mm pro
  Quadratmeter.
\item
  Regressionskoeffizient f√ºr Jahr (b1, \texttt{year\_c}): Pro Jahr ist
  die Niederschlagsmenge im Schnitt um 0.02 mm an (im Referenzmonat).
\item
  Regressionskoeffizient f√ºr Monat (b2, \texttt{month\ {[}7{]}}) Im
  Monat \texttt{7} (Juli) lag die mittlere Niederschlagsmenge (im
  Referenzjahr) knapp 25 mm √ºber dem mittleren Wert des Referenzmonats
  (Januar).
\end{enumerate}

Die Regressiongleichung von \texttt{lm\_year\_month} lautet:
\texttt{precip\_pred\ =\ 56.94\ +\ 0.03*year\_c\ +\ 24.37*month\_factor\_7}.

Im Monat Juli ist \texttt{month\_factor\_7\ =\ 1}, ansonsten (Januar)
ist \texttt{month\_factor\ =\ 0}.

\begin{quote}
{\emoji{student}} Puh, kompliziert!
\end{quote}

\begin{quote}
{\emoji{teacher}} Es gibt einen Trick, man kann sich von R einfach einen
beliebigen Y-Wert berechnen lassen, s. Beispiel~\ref{exm-niederschlag1}.
\end{quote}

\begin{example}[Niederschlag laut Modell Im Juli
2020?]\protect\hypertarget{exm-niederschlag1}{}\label{exm-niederschlag1}

Hey R, berechne uns anhand neuer Daten den laut Modell zu erwartenden
Niederschlag f√ºr Januar im Jahr 2020!

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{neue\_daten }\OtherTok{\textless{}{-}} \FunctionTok{tibble}\NormalTok{(}\AttributeTok{year\_c =} \DecValTok{2020{-}1951}\NormalTok{,}
                     \AttributeTok{month\_factor =} \FunctionTok{factor}\NormalTok{(}\StringTok{"1"}\NormalTok{))}
\FunctionTok{predict}\NormalTok{(lm\_year\_month, }\AttributeTok{newdata =}\NormalTok{ neue\_daten)}
\DocumentationTok{\#\#        1 }
\DocumentationTok{\#\# 58.92171}
\end{Highlighting}
\end{Shaded}

\end{example}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Alle Regressionskoeffizienten beziehen sich auf den Y-Wert \emph{unter
der Annahme, dass alle √ºbrigen Pr√§diktoren den Wert Null (bzw.
Referenzwert) aufweisen}.\(\square\)

\end{tcolorbox}

Visualisieren wir uns die gesch√§tzten Erwartungswert pro Pr√§diktorwert,
s. Abbildung~\ref{fig-lm3}:
\texttt{plot(estimate\_expectation(lm\_year\_month))}

\begin{figure}

\centering{

\includegraphics{090-regression2_files/figure-pdf/fig-lm3-1.pdf}

}

\caption{\label{fig-lm3}Temperaturverlauf √ºber die Jahre f√ºr zwei
Monate. Man beachte, dass die Regressionsgeraden \emph{parallel} sind.}

\end{figure}%

Mit \texttt{scale\_color\_okabeito} haben wir die Standard-Farbpalette
durch die von (Okabe und Ito 2023) ersetzt\footnote{s. Hinweise hier:
  \url{https://malcolmbarrett.github.io/ggokabeito/reference/palette_okabe_ito.html}}.
Das ist nicht unbedingt n√∂tig, aber robuster bei Schwarz-Wei√ü-Druck und
bei Sehschw√§chen, vgl. Kapitel~\ref{sec-farbwahl}.

Die erkl√§rte Varianz von \texttt{lm\_year\_month} liegt bei:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{r2}\NormalTok{(lm\_year\_month)}
\DocumentationTok{\#\# \# R2 for Linear Regression}
\DocumentationTok{\#\#        R2: 0.124}
\DocumentationTok{\#\#   adj. R2: 0.124}
\end{Highlighting}
\end{Shaded}

\subsection{Interaktion}\label{interaktion}

Eine Modellgleichung der Form
\texttt{temp\ \textasciitilde{}\ year\ +\ month} zwingt die
Regressionsgeraden dazu, parallel zu verlaufen. Aber vielleicht w√ºrden
sie besser in die Punktewolken passen, wenn wir ihnen erlauben, auch
\emph{nicht} parallel verlaufen zu d√ºrfen?

Nicht-parallele Regressionsgeraden erlauben wir, indem wir das
Regressionsmodell wie folgt spezifizieren und visualisieren, s.
Listing~\ref{lst-lm-interact}.

\begin{codelisting}

\caption{\label{lst-lm-interact}Ein Interaktionsmodell spezifiziert man
in dieser Art: y \textasciitilde{} x1 + x2 + x1:x2}

\centering{

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{lm\_year\_month\_interaktion }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(}
\NormalTok{  precip }\SpecialCharTok{\textasciitilde{}}\NormalTok{ year\_c }\SpecialCharTok{+}\NormalTok{ month\_factor }\SpecialCharTok{+}\NormalTok{ year\_c}\SpecialCharTok{:}\NormalTok{month\_factor, }
  \AttributeTok{data =}\NormalTok{ wetter\_month\_1\_7)}
\end{Highlighting}
\end{Shaded}

}

\end{codelisting}%

Visualisiert ist das Modell in Abbildung~\ref{fig-wetter-interakt}.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{plot}\NormalTok{(}\FunctionTok{estimate\_expectation}\NormalTok{(lm\_year\_month\_interaktion)) }\SpecialCharTok{+}
  \FunctionTok{scale\_color\_okabeito}\NormalTok{()  }\CommentTok{\# sch√∂nes Farbschema}
\end{Highlighting}
\end{Shaded}

\begin{figure}

\centering{

\includegraphics{090-regression2_files/figure-pdf/fig-wetter-interakt-1.pdf}

}

\caption{\label{fig-wetter-interakt}Niederschlag im Jahresverlauf und
Monatsvergleich mit Interaktionseffekt: Die Ver√§nderung im Verlauf der
Jahre ist unterschiedlich f√ºr die Monate (Janur vs.~Juli). Die beiden
Regressionsgeraden sind \emph{nicht} parallel.}

\end{figure}%

Der \emph{Doppelpunkt-Operator} (\texttt{:}) f√ºgt der
Regressionsgleichung einen \emph{Interaktionseffekt} hinzu, in diesem
Fall die Interaktion von Jahr (\texttt{year\_c}) und Monat
(\texttt{month\_factor}):

\texttt{precip\ \textasciitilde{}\ year\_c\ +\ month\_factor\ +\ year\_c:month\_factor}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-important-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-important-color}{\faExclamation}\hspace{0.5em}{Wichtig}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-important-color-frame]

Einen Interaktionseffekt von x1 und x2 kennzeichnet man in R mit dem
Doppelpunkt-Operator, \texttt{x1:x2}:

\texttt{y\ \textasciitilde{}\ x1\ +\ x2\ +\ x1:x2} \(\square\)

\end{tcolorbox}

In Worten:

\begin{quote}
y wird modelliert als eine Funktion von x1 und x2 und dem
Interaktionseffekt von x1 mit x2.
\end{quote}

Wie man in Abbildung~\ref{fig-wetter-interakt} sieht, sind die beiden
Regressionsgeraden \emph{nicht parallel}.

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Hinweis}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Sind die Regressionsgeraden von zwei (oder mehr) Gruppen nicht parallel,
so liegt ein Interaktionseffekt vor.\(\square\)

\end{tcolorbox}

\begin{example}[Interaktionseffekt von Niederschlag und
Monat]\protect\hypertarget{exm-interakt-precip}{}\label{exm-interakt-precip}

Wie ist die Ver√§nderung der Niederschlagsmenge (Y-Achse) im Verlauf der
Jahre (X-Achse)? \emph{Das kommt darauf an, welchen Monat man
betrachtet}. Der Effekt der Zeit ist \emph{unterschiedlich} f√ºr die
Monate: Im Juli nahm der Niederschlag ab, im Januar zu.\(\square\)

\end{example}

Liegt ein Interaktionseffekt vor, kann man nicht mehr von ``dem''
(statistischen) Effekt eines Pr√§diktors (afu die Y-Variable) sprechen.
Vielmehr muss man unterscheiden: Je nach Gruppe (z.B. Monat)
unterscheidet der Effekt.\footnote{Effekt ist hier immer statistisch,
  nie kausal gemeint.}

Betrachten wir die Parameterwerte des Interaktionsmodells, s.
Tabelle~\ref{tbl-lm_year_month_interaktion}.

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.3333}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1667}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0769}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.2051}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1154}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1026}}@{}}

\caption{\label{tbl-lm_year_month_interaktion}Modellparameter von
lm\_year\_month\_interaktion}

\tabularnewline

\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
Parameter
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Coefficient
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
SE
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
95\% CI
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
t(4524)
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
p
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
(Intercept) & 56.91 & 0.68 & (55.59, 58.24) & 84.21 & \textless{}
.001 \\
year c & 0.13 & 0.02 & (0.10, 0.16) & 7.80 & \textless{} .001 \\
month factor (7) & 24.37 & 0.96 & (22.50, 26.25) & 25.45 & \textless{}
.001 \\
year c √ó month factor (7) & -0.20 & 0.02 & (-0.25, -0.16) & -8.62 &
\textless{} .001 \\

\end{longtable}

Neu bei der Ausgabe zu diesem Modell ist die Zeile
\texttt{year\ c\ √ó\ month\ factor\ {[}7{]}}. Sie gibt die St√§rke des
Interaktionseffekts an. Die Zeile zeigt, wie unterschiedlich sich die
die Niederschlagsmenge zwischen den beiden Monaten im Verlauf der Jahre
√§ndert: Im Monat \texttt{"7"} ist der Effekt von \texttt{year\_c} um
0.20 mm geringer: Die Regressionsgerade neigt sich mehr nach ``unten''
im Monat Juli, da der Koeffizient kleiner als Null ist.

Die Regressionsgleichung lautet:
\texttt{precip\_pred\ =\ 56.91\ +\ 0.13*year\_c\ +\ 24.37*month\_factor\_7\ -\ 0.20*year\_c:month\_factor\_7}.

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-important-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-important-color}{\faExclamation}\hspace{0.5em}{Wichtig}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-important-color-frame]

Der Achsenabschnitt gibt den Wert f√ºr Y an unter der Annahme, dass alle
Pr√§diktoren den Wert Null aufweisen. In diesem Fall gibt der
Achsenabschnitt also den Niederschlag f√ºr den Janur des Jahres 1951 an.
Die Regressionskoeffizienten geben die Zunahme in Y an, wenn der
jeweilige Pr√§diktorwert um 1 steigt, die √ºbrigen Pr√§diktoren aber den
Wert 0 aufweisen.\(\square\)

\end{tcolorbox}

Das R-Quadrat von \texttt{lm\_year\_month\_interaktion} betr√§gt √ºbrigens
nur geringf√ºgig mehr als im Modell ohne Interaktion:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{r2}\NormalTok{(lm\_year\_month\_interaktion)  }\CommentTok{\# aus \textasciigrave{}\{easystats\}\textasciigrave{}}
\DocumentationTok{\#\# \# R2 for Linear Regression}
\DocumentationTok{\#\#        R2: 0.139}
\DocumentationTok{\#\#   adj. R2: 0.138}
\end{Highlighting}
\end{Shaded}

\section{Modelle mit vielen UV}\label{modelle-mit-vielen-uv}

\subsection{Zwei metrische UV}\label{zwei-metrische-uv}

Ein Modell mit zwei metrischen UV kann man sich im 3D-Raum
visualisieren, s. Abbildung~\ref{fig-3d-regr-statisch}, oder im 2D-Raum,
s. Abbildung~\ref{fig-3d-regr-2d}. Im 3D-Raum wird die Regressionsgerade
zu einer \emph{Regressionsebene.}

\begin{figure}

\begin{minipage}{0.33\linewidth}

\includegraphics{img/3d_scatter1.png}

\subcaption{\label{}Winkel 1}
\end{minipage}%
%
\begin{minipage}{0.33\linewidth}

\includegraphics{img/3d_scatter2.png}

\subcaption{\label{}Winkel 2}
\end{minipage}%
%
\begin{minipage}{0.33\linewidth}

\includegraphics{img/3d_scatter3.png}

\subcaption{\label{}Winkel 3}
\end{minipage}%

\caption{\label{fig-3d-regr-statisch}Ein lineares Modell,
\texttt{y\ \textasciitilde{}\ x1\ +\ x2} mit zwei Pr√§diktoren im
3D-Raum.}

\end{figure}%

\begin{figure}

\centering{

\includegraphics{090-regression2_files/figure-pdf/fig-3d-regr-2d-1.pdf}

}

\caption{\label{fig-3d-regr-2d}2D-Diagramm f√ºr 3D-Modell}

\end{figure}%

Grunds√§tzlich kann man viele Pr√§diktoren in ein (lineares) Modell
aufnehmen. Betrachten wir z.‚ÄâB. folgendes lineares Modell mit zwei
metrischen UV.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{lm\_mario\_2uv }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(total\_pr }\SpecialCharTok{\textasciitilde{}}\NormalTok{ start\_pr }\SpecialCharTok{+}\NormalTok{ ship\_pr, }\AttributeTok{data =}\NormalTok{ mariokart }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(total\_pr }\SpecialCharTok{\textless{}} \DecValTok{100}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\textbf{?@fig-mario-2uv} visualisiert das Modell \texttt{lm\_mario2v} in
einem 3D-Diagramm (betrachtet aus verschiedenen Winkeln).

\begin{figure}

\begin{minipage}{0.33\linewidth}

\includegraphics{img/3d_scatter_mario1.png}

\subcaption{\label{}Winkel 1}
\end{minipage}%
%
\begin{minipage}{0.33\linewidth}

\includegraphics{img/3d_scatter_mario2.png}

\subcaption{\label{}Winkel 2}
\end{minipage}%
%
\begin{minipage}{0.33\linewidth}

\includegraphics{img/3d_scatter_mario3.png}

\subcaption{\label{}Winkel 3}
\end{minipage}%

\caption{\label{fig-3d-regr-statisch}Das Modell \texttt{lm\_mario2v} mit
2 metrischen UV (und 1 metrische AV) als 3D-Diagramm}

\end{figure}%

\subsection{Viele UV ins Modell?}\label{viele-uv-ins-modell}

Wir k√∂nnten im Prinzip alle Variablen unserer Datentabelle als
Pr√§diktoren in das Regressionsmodell aufnehmen. Die Frage ist nur: Macht
das Sinn?

Hier sind einige Richtlinien, die helfen, welche Pr√§diktoren (und wie
viele) man in ein Modell aufnehmen sollte (Gelman, Hill, und Vehtari
2021b), s. S. 199:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Man sollte alle Pr√§diktoren aufnehmen, von denen anzunehmen ist, dass
  Sie Ursachen f√ºr die Zielvariablen sind
\item
  Bei Pr√§diktoren mit starken (absoluten) Effekten kann es Sinn machen,
  ihre Interaktionseffekte auch mit in das Modell aufzunehmen
\item
  Pr√§diktoren mit kleinem Sch√§tzbereich (\texttt{95\ CI}) sollten
  tendenziell im Modell belassen werden, da sie die Modellg√ºte
  verbessern
\end{enumerate}

\section{Fallbeispiel zur Prognose}\label{fallbeispiel-zur-prognose}

\begin{example}[Prognose des
Verkaufspreis]\protect\hypertarget{exm-prognose}{}\label{exm-prognose}

Ganz k√∂nnen Sie von Business-Welt und ihren Gratifikationen nicht
lassen, trotz Ihrer wissenschaftlichen Ambitionen. Sie haben den Auftrag
bekommen, den Verkaufspreis von Mariokart-Spielen m√∂glichst exakt
vorherzusagen. Also gut, das Honorar ist phantastisch, Sie sind jung und
brauchen das Geld.\(\square\)

\end{example}

\subsection{Modell ``all-in''}\label{modell-all-in}

Um die G√ºte Ihrer Vorhersagen zu pr√ºfen, teilt Ihr Chef den Datensatz in
zwei zuf√§llige Teile.

\begin{quote}
üßî‚Äç‚ôÇÔ∏è Ich teile den Datensatz \texttt{mariokart} zuf√§llig in zwei Teile.
Den ersten Teil kannst du nutzehn, um Modelle zu berechnen
(``trainieren'') und ihre G√ºte zu pr√ºfen. Den Teil nenne ich
``Trainingssample'', h√∂rt sich cool an, oder? Im Train-Sample ist ein
Anteil (\texttt{frac}tion) von 70\% der Daten, okay? Die restlichen
Daten behalte ich. Wenn du ein gutes Modell hast, kommst du und wir
berechnen die G√ºte deiner Vorhersagen in dem verbleibenden Teil, die
√ºbrigen 30\% der Daten. Diesen Teil nennen wir Test-Sample, alles klar?
\end{quote}

Wenn die Daten auf Ihrer Festplatte liegen, z.B. im Unterordner
\texttt{daten}, dann k√∂nne Sie sie von dort importieren:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart\_train }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{"daten/mariokart\_train.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

Alternativ k√∂nnen Sie sie auch von diesem Pfad von einem Rechner in der
Cloud herunterladen:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart\_train\_path }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{( }\StringTok{"https://raw.githubusercontent.com/sebastiansauer/"}\NormalTok{,}
\StringTok{"statistik1/main/daten/mariokart\_train.csv"}\NormalTok{)}

\NormalTok{mariokart\_train }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(mariokart\_train\_path)}
\end{Highlighting}
\end{Shaded}

Dann importieren wir auf gleiche Weise Test-Sample in R:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart\_test\_path }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(}
 \StringTok{"https://raw.githubusercontent.com/sebastiansauer/"}\NormalTok{,}
 \StringTok{"statistik1/main/daten/mariokart\_test.csv"}\NormalTok{)}

\NormalTok{mariokart\_test }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(mariokart\_test\_path)}
\end{Highlighting}
\end{Shaded}

Also los. Sie probieren mal die ``All-in-Strategie'': Alle Variablen
rein in das Modell. Viel hilft viel, oder nicht?

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{lm\_allin }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(total\_pr }\SpecialCharTok{\textasciitilde{}}\NormalTok{ ., }\AttributeTok{data =}\NormalTok{ mariokart\_train)}
\FunctionTok{r2}\NormalTok{(lm\_allin)  }\CommentTok{\# aus easystats}
\DocumentationTok{\#\# \# R2 for Linear Regression}
\DocumentationTok{\#\#        R2: 0.994}
\DocumentationTok{\#\#   adj. R2: 0.979}
\end{Highlighting}
\end{Shaded}

Der Punkt in \texttt{total\_pr\ \textasciitilde{}\ .} hei√üt ``alle
Variablen in der Tabelle (au√üer \texttt{total\_pr})''.

\begin{quote}
{\emoji{old-man}} Hey! Das ist ja fast perfekte Modellg√ºte!
\end{quote}

\begin{quote}
{\emoji{woman-supervillain}}Ô∏è Vorsicht: Wenn ein Angebot aussieht wie
``too good to be true'', dann ist es meist auch too good to be true.
\end{quote}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Overfitting}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Der Grund f√ºr den fast perfekten Modellfit ist die Spalte
\texttt{Title}. Unser Modell hat einfach den Titel jeder Auktion
auswendig gelernt. Wei√ü man, welcher Titel zu welcher Auktion geh√∂rt,
kann man perfekt die Auktion aufsagen bzw. das Verkaufsgebot perfekt
vorhersagen. Leider n√ºtzen die Titel der Auktionen im Train-Sample
\emph{nichts} f√ºr andere Auktionen. Im Test-Sample werden unsere
Vorhersagen also grottenschlecht sein, wenn wir uns auf die Titel der
Auktionen im Test-Sample st√ºtzen. Merke: H√∂chst idiografische
Informationen wie Namen, Titel etc. sind nicht n√ºtzlich, um allgemeine
Muster zu erkennen und damit exakte Prognosen zu erstellen.\(\square\)

\end{tcolorbox}

Probieren wir also die Vorhersage im Test-Sample:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{predict}\NormalTok{(lm\_allin, }\AttributeTok{newdata =}\NormalTok{ mariokart\_test)}
\DocumentationTok{\#\# Error in eval(predvars, data, env): object \textquotesingle{}V1\textquotesingle{} not found}
\end{Highlighting}
\end{Shaded}

Oh nein! Was ist los!? Eine Fehlermeldung!

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-caution-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-caution-color}{\faFire}\hspace{0.5em}{Vorsicht}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-caution-color-frame]

Nominalskalierte Pr√§diktorvariablen mit vielen Auspr√§gungen, wie
\texttt{title} sind problematisch. Kommt eine Auspr√§gung von
\texttt{title} im Test-Sample vor, die es \emph{nicht} im Train-Sample
gab, so resultiert ein Fehler beim \texttt{predict}en. H√§ufig ist es
sinnvoll, auf diese Variable zu verzichten, da diese Variablen oft zu
Overfitting f√ºhren.\(\square\)

\end{tcolorbox}

\subsection{Modell ``all-in'', ohne
Titelspalte}\label{modell-all-in-ohne-titelspalte}

Okay, also auf die Titelspalte sollten wir vielleicht besser verzichten.
N√§chster Versuch.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart\_train2 }\OtherTok{\textless{}{-}}
\NormalTok{  mariokart\_train }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{select}\NormalTok{(}\SpecialCharTok{{-}}\FunctionTok{c}\NormalTok{(title, V1, id))}
\end{Highlighting}
\end{Shaded}

Wir entfernen auch die Spalte \texttt{V1} und \texttt{id}, da sie
ebenfalls keine Informationen bergen.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{lm\_allin\_no\_title }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(total\_pr }\SpecialCharTok{\textasciitilde{}}\NormalTok{ ., }\AttributeTok{data =}\NormalTok{ mariokart\_train2)}
\FunctionTok{r2}\NormalTok{(lm\_allin\_no\_title) }
\DocumentationTok{\#\# \# R2 for Linear Regression}
\DocumentationTok{\#\#        R2: 0.521}
\DocumentationTok{\#\#   adj. R2: 0.441}
\end{Highlighting}
\end{Shaded}

Das R-Quadrat ist ja durchaus ordentlich. Schauen wir uns noch den
\texttt{rmse} (die SD der Vorhersagefehler) an\footnote{der Befehl wohnt
  im Paket \texttt{performance}, Teil des Metapakets \texttt{easystats}}:

\begin{quote}
{\emoji{robot}} Gut gemacht!
\end{quote}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{performance}\SpecialCharTok{::}\FunctionTok{rmse}\NormalTok{(lm\_allin\_no\_title)}
\DocumentationTok{\#\# [1] 20.22998}
\end{Highlighting}
\end{Shaded}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-caution-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-caution-color}{\faFire}\hspace{0.5em}{Name Clash}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-caution-color-frame]

Im Paket \texttt{yardstick} gibt es eine Funktion namens \texttt{rmse}
und im Paket \texttt{performance}, Teil des Meta-Pakets
\texttt{easystats} ebenfalls. Da sind Probleme vorprogrammiert. Das ist
so als w√ºrde die Lehrerin rufen: ``Schorsch, komm her!''. Dabei gibt es
zwei Schorsche in der Klasse: Den M√ºllers Schorsch und den Meiers
Schorsch. Sonst kommen beide, was die Lehrerin nicht will. Die Lehrerin
m√ºsste also rufen: ``M√ºller Schorsch, komm her!''. Genau dasselbe machen
wir, wenn wir das R-Paket eines Befehls mitschreiben, sozusagen den
``Nachnamen'' des Befehls: \texttt{paketname::funktion} ist wie
\texttt{M√ºller::Schorsch}. In unserem Fall also:
\texttt{performance::rmse} Endlich wei√ü R wieder, was zu tun
ist!\(\square\)

\end{tcolorbox}

Sie rennen zu Ihrem Chef, der jetzt die G√ºte Ihrer Vorhersagen in den
\emph{restlichen} Daten bestimmen soll.

\begin{quote}
{\emoji{old-man}} Da wir dein Modell in diesem Teil des
Komplett-Datensatzes \emph{testen}, nennen wir diesen Teil das
``Test-Sample''.
\end{quote}

Ihr Chef schaut sich die Verkaufspreise im Test-Sample an:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart\_test }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{select}\NormalTok{(id, total\_pr) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{head}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}rr@{}}
\toprule\noalign{}
id & total\_pr \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
120477729093 & 37.02 \\
290355805215 & 54.99 \\
180415462166 & 56.01 \\
180415244903 & 56.00 \\
350261958546 & 64.95 \\
110443013258 & 46.50 \\
\end{longtable}

\begin{quote}
{\emoji{old-man}}Ô∏è Okay, hier sind die ersten paar echten Verkaufspreise.
Jetzt mach mal deine Vorhersagen auf Basis deines besten Modells!
\end{quote}

Hier sind Ihre Vorhersagen\footnote{engl. predictions; to predict:
  vorhersagen}:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{lm\_allin\_predictions }\OtherTok{\textless{}{-}} \FunctionTok{predict}\NormalTok{(lm\_allin\_no\_title, }\AttributeTok{newdata =}\NormalTok{ mariokart\_test)}
\end{Highlighting}
\end{Shaded}

Hier sind Ihre ersten paar Vorhersagen:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(lm\_allin\_predictions)}
\DocumentationTok{\#\#        1        2        3        4        5        6 }
\DocumentationTok{\#\# 28.62826 53.85885 53.28035 54.03619 41.75512 46.57713}
\end{Highlighting}
\end{Shaded}

Dies Vorhersagen f√ºgen wir noch der Ordnung halber in die Tabelle mit
den Test-Daten:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart\_test }\OtherTok{\textless{}{-}}
\NormalTok{  mariokart\_test }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{lm\_allin\_predictions =} \FunctionTok{predict}\NormalTok{(lm\_allin\_no\_title, }\AttributeTok{newdata =}\NormalTok{ mariokart\_test))}
\end{Highlighting}
\end{Shaded}

Okay, was ist jetzt der mittlere Vorhersagefehler?

Um die Vorhersageg√ºte im Test-Sample auszurechnen\footnote{wir verwenden
  dazu die Funktionen \texttt{mae} und \texttt{rsq}}, nutzen wir die
Funktionen des R-Paketes \texttt{yardstick}\footnote{welches Sie
  vielleicht noch installieren m√ºssen.}:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(yardstick)}

\NormalTok{yardstick}\SpecialCharTok{::}\FunctionTok{mae}\NormalTok{(}\AttributeTok{data =}\NormalTok{ mariokart\_test,}
               \AttributeTok{truth =}\NormalTok{ total\_pr,  }\CommentTok{\# echter Verkaufspreis}
               \AttributeTok{estimate =}\NormalTok{ lm\_allin\_predictions)  }\CommentTok{\# Ihre Vorhersage}
\NormalTok{yardstick}\SpecialCharTok{::}\FunctionTok{rmse}\NormalTok{(}\AttributeTok{data =}\NormalTok{ mariokart\_test,}
               \AttributeTok{truth =}\NormalTok{ total\_pr,  }\CommentTok{\# echter Verkaufspreis}
               \AttributeTok{estimate =}\NormalTok{ lm\_allin\_predictions)  }\CommentTok{\# Ihre Vorhersage}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}llr@{}}
\toprule\noalign{}
.metric & .estimator & .estimate \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
mae & standard & 10.01509 \\
\end{longtable}

\begin{longtable}[]{@{}llr@{}}
\toprule\noalign{}
.metric & .estimator & .estimate \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
rmse & standard & 13.45659 \\
\end{longtable}

Ihr mittlerer Vorhersagefehler (RMSE) liegt bei ca. 13 Euro.\^{}{[}Wir
haben hier \texttt{yardstick::rmse} geschrieben und nicht nur
\texttt{rmse}, da es sowohl im Paket \texttt{performance} ( Teil des
Metapakets \texttt{easystats}) als auch im Paket \texttt{yardstick}
(Teil des Metapakets \texttt{tidymodels}) einen Befehl des Namens
\texttt{rmse} gibt. Name-Clash-Alarm! R k√∂nnte daher den anderen `rmse``
meinen als Sie, was garantiert zu Verwirrung f√ºhrt.\footnote{Entweder
  bei R oder bei Ihnen.}

\begin{quote}
{\emoji{old-man}} Ganz okay.
\end{quote}

Wie ist es um das R-Quadrat Ihrer Vorhersagen bestellt?

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# \textasciigrave{}rsq \textasciigrave{} ist auch aus dem Paket yardstick:}
\FunctionTok{rsq}\NormalTok{(}\AttributeTok{data =}\NormalTok{ mariokart\_test,}
    \AttributeTok{truth =}\NormalTok{ total\_pr,  }\CommentTok{\# echter Verkaufspreis}
    \AttributeTok{estimate =}\NormalTok{ lm\_allin\_predictions)  }\CommentTok{\# Ihre Vorhersage}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}llr@{}}
\toprule\noalign{}
.metric & .estimator & .estimate \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
rsq & standard & 0.1741705 \\
\end{longtable}

\begin{quote}
{\emoji{old-man}}Ô∏è 17\%, nicht berauschend, aber immerhin!
\end{quote}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-note-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-note-color}{\faInfo}\hspace{0.5em}{Modellg√ºte im Test-Sample meist geringer als im Train-Sample}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-note-color-frame]

Wie das Beispiel zeigt, ist die Modellg√ºte im Test-Sample (leider) oft
\emph{geringer} als im Train-Sample. Die Modellg√ºte im Train-Sample ist
mitunter √ºberm√§√üig optimistisch. Dieses Ph√§nomen bezeichnet man als
\emph{Overfitting}.\(\square\)

\end{tcolorbox}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-tip-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-tip-color}{\faLightbulb}\hspace{0.5em}{Tipp}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-tip-color-frame]

Bevor man Vorhersagen eines Modells einreicht, bietet es sich, die
Modellg√ºte in einem neuen Datensatz, als einem Test-Sample, zu
√ºberpr√ºfen.\(\square\)

\end{tcolorbox}

\section{Vertiefung: Das Aufteilen Ihrer
Daten}\label{vertiefung-das-aufteilen-ihrer-daten}

\subsection{Analyse- und
Assessment-Sample}\label{analyse--und-assessment-sample}

Wenn Sie eine robuste Sch√§tzung der G√ºte Ihres Modells erfahren m√∂chten,
bietet sich folgendes Vorgehen an (vgl.
Abbildung~\ref{fig-sample-types}):

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Teilen Sie Ihren Datensatz (das Train-Sample) in zwei Teile: Das sog.
  Validation-Sample und das sog. Assessment-Sample.
\item
  Berechnen Sie Ihr Modell im ersten Teil Ihres Datensatzes (dem
  \emph{Validation-Sample}).
\item
  Pr√ºfen Sie die Modellg√ºte im zweiten Teil Ihres Datensatzes (dem
  \emph{Assessment-Sample})
\end{enumerate}

Diese Aufteilung Ihres Datensatzatzes in diese zwei Teile nennt man auch
\emph{Validierungsaufteilung} (validation split); Sie k√∂nnen sie z.B. so
bewerkstelligen:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(rsample)}
\NormalTok{mariokart }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"daten/mariokart.csv"}\NormalTok{)  }\CommentTok{\# Wenn die CSV{-}Datei in einem Unterordner mit Namen "daten" liegt}

\NormalTok{meine\_aufteilung }\OtherTok{\textless{}{-}} \FunctionTok{initial\_split}\NormalTok{(mariokart, }\AttributeTok{strata =}\NormalTok{ total\_pr)}
\end{Highlighting}
\end{Shaded}

\texttt{initial\_split} \emph{bestimmt} f√ºr jede Zeile (Beobachtung)
zuf√§llig aus, ob diese Zeile in das Analyse- oder in das
Assessment-Sample kommen soll. Im Standard werden 75\% der Daten in das
Analyse- und 25\% in das Assessment-Sample eingeteilt\footnote{vgl.
  \texttt{help(initial\_split)}}; das ist eine sinnvolle Aufteilung. Das
Argument \texttt{strata} sorgt daf√ºr, dass die Verteilung der AV in
beiden Stichproben gleich ist. Es w√§re n√§mlich bl√∂d f√ºr Ihr Modell, wenn
im Train-Sample z.B. nur die teuren, und im Test-Sample nur die
g√ºnstigen Spiele landen w√ºrde.\footnote{Anderes Beispiel: In den ersten
  Zeilen stehen nur Kunden aus Land A und in den unteren Zeilen nur aus
  Land B.} In so einem Fall w√ºrde sich Ihr Modell unn√∂tig schwer tun.

Im n√§chsten Schritt k√∂nnen Sie anhand anhand der von
\texttt{initial\_split} bestimmten Aufteilung die Daten tats√§chlich
aufteilen.\footnote{initial\_split sagt nur, welche Zeile in welche der
  beiden Stichproben kommen \emph{soll}. Die eigentliche Aufteilung wird
  aber noch nicht durchgef√ºhrt.}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mariokart\_train }\OtherTok{\textless{}{-}} \FunctionTok{training}\NormalTok{(meine\_aufteilung)  }\CommentTok{\# Analyse{-}Sample}
\NormalTok{mariokart\_test }\OtherTok{\textless{}{-}} \FunctionTok{testing}\NormalTok{(meine\_aufteilung)  }\CommentTok{\# Assessment{-}Sample}
\end{Highlighting}
\end{Shaded}

Ich pers√∂nliche nenne die Tabelle mit den Daten gerne
\texttt{d\_analysis} bzw. \texttt{d\_assess}, das ist k√ºrzer zu tippen
und einheitlich. Sie k√∂nnen aber auch ein eigenes Namens-Schema nutzen;
was aber hilfreich ist, ist Konsistenz in der Benamung, au√üerdem K√ºrze
und aussagekr√§ftige Namen.

\subsection{Train- vs.~Test-Sample}\label{train--vs.-test-sample}

\begin{definition}[Train-Sample]\protect\hypertarget{def-trainsample}{}\label{def-trainsample}

Den Datensatz, f√ºr die Sie sowohl UV \emph{als auch AV} vorliegen haben,
nennt man Train-Sample. \(\square\)

\end{definition}

Das Train-Sample stellt die bekannten Daten dar; aus denen k√∂nnen wir
lernen, d.h. unser Modell berechnen.

\begin{definition}[Test-Sample]\protect\hypertarget{def-testsample}{}\label{def-testsample}

Den Datensatz, f√ºr den Sie \emph{nur} Daten der UV, aber nicht zu der AV
vorliegen haben, nennt man \emph{Test-Sample}. \(\square\)

\end{definition}

Das Test-Sample stellt das Problem der wirklichen Welt dar: Neue
Beobachtungen, von denen man (noch) nicht wei√ü, was der Wert der AV ist.

Der Zusammenhang dieser verschiedenen, aber zusammengeh√∂rigen Arten von
Stichproben ist in Abbildung~\ref{fig-sample-types} dargestellt.

\begin{figure}

\centering{

\includegraphics[width=3.96in,height=2.26in]{090-regression2_files/figure-latex/mermaid-figure-1.png}

}

\caption{\label{fig-sample-types}Verschiedene Arten von
zusammengeh√∂rigen Stichprobenarten im Rahmen einer Prognosemodellierung}

\end{figure}%

\section{Praxisbezug}\label{praxisbezug-4}

Ein Anwendungsbezug von moderner Datenanalyse ist es vorherzusagen,
welche Kunden ``abwanderungsgef√§hrdet'' sind, also vielleicht in Zukunft
bald nicht mehr unsere Kunden sind (``customer churn''). Es gibt eine
ganze Reihe von Untersuchungen dazu, z.B. die von
(\textbf{lalwani\_customer\_2022?}). Die Forschis versuchen anhand von
Daten und u.a. auch der linearen Regression vorherzusagen, welche Kunden
abgewandert sein werden. Die Autoren berichten von einer Genauigkeit von
√ºber 80\% in Ihrem (besten) Vorhersagemodell.

\section{Wie man mit Statistik
l√ºgt}\label{wie-man-mit-statistik-luxfcgt-5}

\subsection{Pinguine drehen durch}\label{pinguine-drehen-durch}

Ein Forscher-Team untersucht Pinguine von der
\href{https://pallter.marine.rutgers.edu/}{Palmer Station, Antarktis}.
Das Team ist am Zusammenhang von Schnabell√§nge (\emph{bill length}) und
Schnabeltiefe (\emph{bill depth}) interessiert, s.
Abbildung~\ref{fig-peng-bill}.

\begin{figure}

\centering{

\includegraphics[width=0.5\textwidth,height=\textheight]{index_files/mediabag/culmen_depth.png}

}

\caption{\label{fig-peng-bill}Schnabell√§nge und Schnabeltiefe}

\end{figure}%

Das Team hat in \st{schwei√ütreibender} eiszapfentreibender Arbeit
\(n=344\) Tiere vermessen bei antarktischen Temperaturen. Hier sind die
Daten:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{penguins\_path }\OtherTok{\textless{}{-}} \FunctionTok{paste0}\NormalTok{(}
  \StringTok{"https://vincentarelbundock.github.io/"}\NormalTok{,}
  \StringTok{"Rdatasets/csv/palmerpenguins/penguins.csv"}\NormalTok{)}

\NormalTok{penguins }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(penguins\_path)}
\end{Highlighting}
\end{Shaded}

\subsection{Analyse 1: Gesamtdaten}\label{analyse-1-gesamtdaten}

Man untersucht, rechnet und √ºberlegt. Ah! Jetzt haben wir es! Klarer
Fall: Ein \emph{negativer} Zusammenhang von Schnabell√§nge und
Schnabeltiefe. Das k√∂nnte einen Nobelpreis wert sein. Schnell
publizieren!

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggscatter}\NormalTok{(penguins, }\AttributeTok{x =} \StringTok{"bill\_length\_mm"}\NormalTok{, }\AttributeTok{y =} \StringTok{"bill\_depth\_mm"}\NormalTok{, }
          \AttributeTok{add =} \StringTok{"reg.line"}\NormalTok{)  }\CommentTok{\# aus \textasciigrave{}ggpubr\textasciigrave{}}
\end{Highlighting}
\end{Shaded}

\includegraphics{090-regression2_files/figure-pdf/unnamed-chunk-61-1.pdf}

Hier sind die statistischen Details, s. Tabelle~\ref{tbl-peng-simpson1}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{lm1 }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(bill\_depth\_mm }\SpecialCharTok{\textasciitilde{}}\NormalTok{ bill\_length\_mm, }\AttributeTok{data =}\NormalTok{ penguins)}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.2273}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1970}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0909}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.2424}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1212}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1212}}@{}}

\caption{\label{tbl-peng-simpson1}Koeffizienten des Modells 1: Negativer
Effekt von bill\_length\_mm}

\tabularnewline

\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
Parameter
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Coefficient
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
SE
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
95\% CI
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
t(340)
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
p
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
(Intercept) & 20.89 & 0.84 & (19.23, 22.55) & 24.75 & \textless{}
.001 \\
bill length mm & -0.09 & 0.02 & (-0.12, -0.05) & -4.46 & \textless{}
.001 \\

\end{longtable}

\subsection{Analyse 2: Aufteilung in Arten
(Gruppen)}\label{analyse-2-aufteilung-in-arten-gruppen}

Kurz darauf ver√∂ffentlicht eine verfeindete Forscherin auch einen
Aufsatz zum gleichen Thema. Gleiche Daten. Aber mit \emph{gegenteiligem}
Ergebnis: Bei \emph{jeder Rasse} von (untersuchten) Pinguinen gilt: Es
gibt einen \emph{positiven} Zusammenhang von Schnabelll√§nge und
Schnabeltiefe.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggscatter}\NormalTok{(penguins, }\AttributeTok{x =} \StringTok{"bill\_length\_mm"}\NormalTok{, }\AttributeTok{y =} \StringTok{"bill\_depth\_mm"}\NormalTok{, }
          \AttributeTok{add =} \StringTok{"reg.line"}\NormalTok{, }\AttributeTok{color =} \StringTok{"species"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{090-regression2_files/figure-pdf/unnamed-chunk-64-1.pdf}

Oh nein! Was ist hier nur los? Daten l√ºgen nicht, oder doch?

Hier sind die statistischen Details der zweiten Analyse, s.
Tabelle~\ref{tbl-peng-simpson2}. Im zweiten Modell kam \texttt{species}
als zweiter Pr√§diktor neu ins Modell (zus√§tlzich zur Schnabell√§nge).

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{lm2 }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(bill\_depth\_mm }\SpecialCharTok{\textasciitilde{}}\NormalTok{ bill\_length\_mm }\SpecialCharTok{+}\NormalTok{ species, }\AttributeTok{data =}\NormalTok{ penguins)}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.2817}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1831}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0845}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.2254}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1127}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1127}}@{}}

\caption{\label{tbl-peng-simpson2}Koeffizienten des Modells 2: Positiver
Effekt von bill\_length\_mm}

\tabularnewline

\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
Parameter
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Coefficient
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
SE
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
95\% CI
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
t(338)
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
p
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
(Intercept) & 10.59 & 0.68 & (9.25, 11.94) & 15.51 & \textless{} .001 \\
bill length mm & 0.20 & 0.02 & (0.17, 0.23) & 11.43 & \textless{}
.001 \\
species (Chinstrap) & -1.93 & 0.22 & (-2.37, -1.49) & -8.62 &
\textless{} .001 \\
species (Gentoo) & -5.11 & 0.19 & (-5.48, -4.73) & -26.67 & \textless{}
.001 \\

\end{longtable}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-caution-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-caution-color}{\faFire}\hspace{0.5em}{Daten alleine reichen nicht}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-caution-color-frame]

Ohne Hintergrundwissen oder ohne weitere Analysen kann \emph{nicht}
entschieden werden, welche Analyse -- Gesamtdaten oder Subgruppen -- die
richtige ist. Nicht-exprimentelle Studien k√∂nnen zu grundverschiedenen
Ergebnissen f√ºhren, je nachdem ob Pr√§diktoren dem Modell hinzugef√ºgt
oder weggenommen werden. \(\square\)

\end{tcolorbox}

\subsection{Vorsicht bei der Interpretation von
Regressionskoeffizienten}\label{vorsicht-bei-der-interpretation-von-regressionskoeffizienten}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-important-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-important-color}{\faExclamation}\hspace{0.5em}{Wichtig}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-important-color-frame]

Interpretiere nie Modellkoeffizienten kausal ohne ein
Kausalmodell.\(\square\)

\end{tcolorbox}

Nur wenn man die Ursache-Wirkungs-Beziehungen in einem System kennt,
macht es Sinn, die Modellkoeffizienten kausal zu interpretieren.
Andernfalls l√§sst man besser die Finger von der Interpretation der
Modellkoeffizienten und begn√ºgt sich mit der Beschreibung der Modellg√ºte
und mit Vorhersage\footnote{synonym: Prognose}. Wer das nicht glaubt,
der betrachte Abbildung~\ref{fig-confounder}, links.\footnote{\href{https://data-se.netlify.app/2021/12/01/simulation-on-controlling-confounders/}{Quelle}}
Ei Forschi stellt das Modell \texttt{m1:\ y\ \textasciitilde{}\ x} auf
und interpretiert dann \texttt{b1}: ``Ist ja klar, X hat einen starken
positiven Effekt auf Y!''.

In der n√§chsten Studie nimmt dis Forschi dann eine zweite Variable,
\texttt{group} (z.B. Geschlecht) in das Modell auf:
\texttt{m2:\ y\ \textasciitilde{}\ x\ +\ g}. Oh Schreck! Jetzt ist
\texttt{b1} auf einmal nicht mehr stark positiv, sondern praktisch Null,
und zwar in jeder Gruppe, s. Abbildung~\ref{fig-confounder}, rechts!

Dieses Umschwenken der Regressionskoeffizienten kann \emph{nicht}
passieren, wenn der Effekt ``echt'', also kausal, ist. Handelt es sich
aber um ``nicht echte'', also nicht-kausale Zusammenh√§nge, um
Scheinzusammenh√§nge also, so k√∂nnen sich die Modellkoeffizienten
dramatisch ver√§ndern (sogar das Vorzeichen kann wechseln\footnote{das
  nennt man dann \emph{Simpsons Paradox}}), wenn man das Modell
ver√§ndert, also Variablen hinzuf√ºgt oder aus dem Modell entfernt.

Wenn man die kausalen Abh√§ngigkeiten nicht kennt, wei√ü man also nicht,
ob die Zusammenh√§nge kausal oder nicht-kausal sind. Man wei√ü also nicht,
ob die Modellkoeffizienten belastbar, robust, stichhaltig sind oder
nicht.

\begin{figure}

\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{090-regression2_files/figure-pdf/fig-confounder-1.pdf}

}

\subcaption{\label{fig-confounder-1}Modell:
\texttt{y\ \textasciitilde{}\ x}, starker Zusammenhang; b1 ist stark
positiv}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{090-regression2_files/figure-pdf/fig-confounder-2.pdf}

}

\subcaption{\label{fig-confounder-2}Modell:
\texttt{y\ \textasciitilde{}\ x\ +\ g}, in jeder der beiden Gruppen ist
der Zusammenhang praktisch Null, b1 = 0}

\end{minipage}%

\caption{\label{fig-confounder}F√ºgt man in ein Modell eine Variable
hinzu, k√∂nnen sich die Koeffizienten massiv √§ndern. In beiden Diagrammen
wurden die gleichen Daten verwendet.}

\end{figure}%

Man k√∂nnte h√∂chstens sagen, dass man (wenn man die Kausalstruktur nicht
kennt) die Modellkoeffizienten nur \emph{deskriptiv} interpretiert, z.B.
``Dort wo es viele St√∂rche gibt, gibt es auch viele Babies''.\footnote{Das
  St√∂rche-Babies-Beispiel passt auch zu Abbildung~\ref{fig-confounder}.}
Leider ist unser Gehirn auf kausale Zusammenh√§nge gepr√§gt: Es f√§llt uns
schwer, Zusammenh√§nge nicht kausal zu interpretieren. Daher werden
deskriptive Befunde immer wieder unzul√§ssig kausal interpretiert -- von
Laien und Wissenschaftlern auch.

\section{Fazit}\label{fazit-4}

In diesem Kapitel haben Sie lineare Modelle gelernt, die √ºber einfache
Modelle der Art \texttt{y\ \textasciitilde{}\ x} hinausgehen. Dazu
geh√∂ren multiple Modelle, das sind Modelle mit mehr als einer UV
(Pr√§diktor) und auch Interaktionsmodelle. Au√üerdem haben Sie sich mit
einem Datensatz von gesamtgesellschaftlichen Nutzen besch√§ftigt -- sehr
sch√∂n. Das Fallbeispiel zum Schluss war vielleicht erhellend insofern,
als dass ein gutes Modell im Train-Sample nicht (notwendig) zu guten
Vorhersagen im Test-Sample f√ºhrt.

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-important-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-important-color}{\faExclamation}\hspace{0.5em}{Wichtig}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-important-color-frame]

Wenn Sie dran bleiben an der Statistik, wird der Erfolg sich einstellen,
s. Abbildung~\ref{fig-dranbleiben}. \(\square\)

\end{tcolorbox}

\begin{figure}

\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{img/meme-stat1.jpg}

}

\subcaption{\label{fig-gestern}So ging es Ihnen gestern}

\end{minipage}%
%
\begin{minipage}{0.50\linewidth}

\centering{

\includegraphics{img/meme-stat2.jpg}

}

\subcaption{\label{fig-morgen}So wird es Ihnen morgen ergehen, wenn Sie
dran bleiben}

\end{minipage}%

\caption[\label{fig-dranbleiben}Statistik, Sie und Party: Gestern und
(vielleicht) morgen.]{\label{fig-dranbleiben}Statistik, Sie und Party: Gestern und
(vielleicht) morgen.\footnotemark{}}

\end{figure}%
\footnotetext{Quelle: imgflip,
  \url{https://imgflip.com/memegenerator/Distracted-Boyfriend}}

\section{Fallstudien}\label{fallstudien-2}

Die folgenden Fallstudien zeigen auf recht anspruchsvollem Niveau
(bezogen auf diesen Kurs) beispielhalft zwei ausf√ºhrlichere
Entwicklungen eines Prognosemodells.

Nutzen Sie diese Fallstudien, um sich intensiver mit der Entwicklung
eines Prognosemodells auseinander zu setzen.

\subsection{New Yorker Flugversp√§tungen
2023}\label{new-yorker-flugverspuxe4tungen-2023}

\href{https://datenwerk.netlify.app/posts/flights-delay-simplified//}{Vorhersage
von Flugversp√§tungen}

\subsection{Filmerl√∂se}\label{filmerluxf6se}

\href{https://data-se.netlify.app/2020/11/13/fallstudie-zur-regressionsanalyse-ggplot2movies/}{Vorhersagen
von Filmerl√∂sen}

\section{Vertiefung}\label{vertiefung-8}

\href{https://allisonhorst.com/linear-regression-dragons}{Allison Horst}
erkl√§rt die lineare Regression mit Hilfe von Drachen. Sehenswert.

\section{Aufgaben}\label{aufgaben-8}

Die Webseite
\href{https://datenwerk.netlify.app}{datenwerk.netlify.app}\footnote{\url{https://datenwerk.netlify.app}}
stellt eine Reihe von einschl√§gigen √úbungsaufgaben bereit. Sie k√∂nnen
die Suchfunktion der Webseite nutzen, um die Aufgaben mit den folgenden
Namen zu suchen:

\begin{itemize}
\tightlist
\item
  \href{https://datenwerk.netlify.app/posts/interpret-koeff-lm/interpret-koeff-lm.html}{interpret-koeff-lm}
\item
  \href{https://datenwerk.netlify.app/posts/aussagen-einfache-regr/aussagen-einfache-regr}{Aussagen-einfache-Regr}
\item
  \href{https://datenwerk.netlify.app/posts/interpret-koeff/interpret-koeff.html}{interpret-koeff}
\item
  \href{https://datenwerk.netlify.app/posts/regression1b/regression1b.html}{regression1b}
\item
  \href{https://datenwerk.netlify.app/posts/mtcars-regr01/mtcars-regr01.html}{mtcars-regr01}
\item
  \href{https://datenwerk.netlify.app/posts/regression1a/regression1a.html}{regression1a}
\item
  \href{https://datenwerk.netlify.app/posts/lm1/lm1.html}{lm1}
\item
  \href{https://datenwerk.netlify.app/posts/regression5/regression5}{Regression5}
\item
  \href{https://datenwerk.netlify.app/posts/regression6/regression6}{Regression6}
\item
  \href{https://datenwerk.netlify.app/posts/lm-mario1/lm-mario1.html}{lm-mario1}
\item
  \href{https://datenwerk.netlify.app/posts/lm-mario2/lm-mario2.html}{lm-mario2}
\item
  \href{https://datenwerk.netlify.app/posts/lm-mario3/lm-mario3.html}{lm-mario3}
\item
  \href{https://datenwerk.netlify.app/posts/ausreisser1/ausreisser1.html}{ausreisser1}
\item
  \href{https://datenwerk.netlify.app/posts/mario-compare-models/}{mario-compare-models}
\end{itemize}

\section{Literaturhinweise}\label{literaturhinweise-8}

Wenn es ein Standardwerk f√ºr Regressionsanalyse geben k√∂nnte, dann
vielleicht das neueste Buch von Andrew Gelman, ein bekannter Statistiker
(Gelman, Hill, und Vehtari 2021b). Sein Buch ist f√ºr
Sozialwissenschaftler geschrieben, also nicht f√ºr typische Nerds, hat
aber deutlich mehr Anspruch als dieses Kapitel.

\section{Literatur}\label{literatur-8}

\part{Abschluss}

\chapter{Abschluss}\label{abschluss-1}

\section{Lernsteuerung}\label{lernsteuerung-9}

\subsection{Standort im Lernpfad}\label{standort-im-lernpfad-9}

Abb. Abbildung~\ref{fig-ueberblick} den Standort dieses Kapitels im
Lernpfad und gibt damit einen √úberblick √ºber das Thema dieses Kapitels
im Kontext aller Kapitel.

\subsection{Lernziele}\label{lernziele-10}

\emph{kein neuer Stoff}

Ziel dieses Kapitels ist es, den Stoff des Moduls zu wiederholen und zu
konsolidieren.

\subsection{Ben√∂tigte R-Pakete}\label{benuxf6tigte-r-pakete-9}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(tidyverse)}
\FunctionTok{library}\NormalTok{(easystats)}
\end{Highlighting}
\end{Shaded}

\subsection{Ben√∂tigte Daten}\label{benuxf6tigte-daten-8}

\begin{Shaded}
\begin{Highlighting}[]

\FunctionTok{data}\NormalTok{(mtcars)}
\end{Highlighting}
\end{Shaded}

\section{Herzlichen Gl√ºckw√ºnsch!}\label{herzlichen-gluxfcckwuxfcnsch}

\faIcon{award}

Herzlichen Gl√ºckwunsch - Sie haben diesen Kurs abgeschlossen! Es sei
denn, Sie haben nur ein bisschen durchgeschaut. Dann war es hoffentlich
zumindest interessant.

\section{Wie geht's weiter?}\label{wie-gehts-weiter}

Es gibt viele weiterf√ºhrende B√ºcher und Kurse. Ein logischer n√§chster
Schritt ist es, sich mit Inferenzstatistik zu besch√§ftigen. Dazu bietet
sich z.B. der Kurs \href{https://start-bayes.netlify.app/}{Start:Bayes!}
an, zuf√§lligerweise aus der Feder des gleichen Autors\ldots{}

Wenn Sie sich breiter (nicht tiefer) mit Data Literacy besch√§ftigen
wollen, bietet sich der Online-Kurs des
\href{https://learn.ki-campus.org/courses/dali-basis-THK2021}{KI-Campus}
an.\footnote{\url{https://learn.ki-campus.org/courses/dali-basis-THK2021}}
Es gibt viele Online-Kurse, die sich anbieten, wenn Sie im Thema moderne
Datenanalyse fit werden wollen. Schauen Sie doch mal z.B. bei Anbietern
wie
\href{https://www.coursera.org/specializations/data-science}{Coursera}
oder √§hnlichen Anbietern vorbei.\footnote{\url{https://www.coursera.org/specializations/data-science}}

\section{Aufgabensammlungen}\label{aufgabensammlungen}

Auf dem \href{https://datenwerk.netlify.app/}{Datenwerk} finden Sie
reichlich Aufgaben zur Pr√ºfungsvorbereitung.\footnote{\url{https://datenwerk.netlify.app/}}

U.a. folgende Tags sind f√ºr diesen Kurs relevant:

\begin{itemize}
\tightlist
\item
  \href{https://datenwerk.netlify.app/\#category=R}{R}
\item
  \href{https://datenwerk.netlify.app/\#category=association}{association}
\item
  \href{https://datenwerk.netlify.app/\#category=datawrangling}{datawrangling}
\item
  \href{https://datenwerk.netlify.app/\#category=dplyr}{dplyr}
\item
  \href{https://datenwerk.netlify.app/\#category=lagema\%C3\%9Fe}{lagema√üe}
\item
  \href{https://datenwerk.netlify.app/\#category=streuungsma\%C3\%9F}{streuungsma√ü}
\item
  \href{https://datenwerk.netlify.app/\#category=variable-levels}{variablelevles}
\item
  \href{https://datenwerk.netlify.app/\#category=yacsda}{yacsda}
\end{itemize}

\section{Quizze}\label{quizze}

\href{https://forms.gle/w7eTW3ftKy8Hv3nw8}{Hier} geht's zu einem Quiz
zur deskriptiven Statistik (Ma√üe der zentralen Tendenz, Variabilit√§t,
Verteilungsformen, Normalverteilung, Korrelation).\footnote{\url{https://forms.gle/w7eTW3ftKy8Hv3nw8}}

\href{https://datenwerk.netlify.app/\#category=Verteilungen-Quiz}{Hier}
geht's zu einem Quiz zum Thema Verteilungen.\footnote{Datenwerk:
  \texttt{Verteilungen-Quiz}}

\section{Fallstudien}\label{fallstudien-3}

\begin{tcolorbox}[enhanced jigsaw, colbacktitle=quarto-callout-important-color!10!white, bottomtitle=1mm, coltitle=black, left=2mm, titlerule=0mm, colback=white, breakable, leftrule=.75mm, bottomrule=.15mm, toptitle=1mm, title=\textcolor{quarto-callout-important-color}{\faExclamation}\hspace{0.5em}{Wichtig}, opacityback=0, arc=.35mm, opacitybacktitle=0.6, rightrule=.15mm, toprule=.15mm, colframe=quarto-callout-important-color-frame]

Wenn Sie mit Aufgaben ``in der Wildnis'' der freien Datenanalyse zu tun
haben, wird es immer wieder passieren, dass Sie auf bisher unbekannte
Probleme, Methoden und L√∂sungen sto√üen. Das kann weh tun, weil man das
Gef√ºhl hat, man kennt sich nicht gut aus. Aber lassen Sie sich nicht ins
Boxhorn jagen! Auf etwas Unbekanntes zu sto√üen, bedeutet nichts anderes
als der Beweis, dass man lernt! Es ist also eine gute Nachricht. Denn
vergessen Sie nicht: Sie machen die Fallstudien nur aus einem Grund --
um zu lernen, um ihre Grenzen zu erweitern, zu wachsen, schlauer zu
werden, ein Handwerk zu lernen, ihre Pers√∂nlichkeit zu entfalten. Let's
grow! \(\square\)

\end{tcolorbox}

\subsection{Datenvisualisierung}\label{datenvisualisierung}

\textbf{Fallstudien -- NUR Datenvisualisierung}

\begin{itemize}
\item
  \href{https://datenwerk.netlify.app/posts/vis-gapminder/vis-gapminder}{vis-gapminder}
\item
  \href{https://datenwerk.netlify.app/posts/vis-penguins/vis-penguins}{vis-penguins}
\item
  \href{https://datenwerk.netlify.app/posts/vis-mtcars/vis-mtcars}{vis-mtcars}
\item
  \href{https://data-se.netlify.app/2020/12/07/ex-visualizing-diamonds/}{Aufgabe
  zur Datenvisualisierung des Diamantenpreises}
\end{itemize}

\subsection{Explorative Datenanalyse}\label{explorative-datenanalyse}

In diesem Abschnitt sind Fallstudien, die Methoden der deskriptiven
Statistik verwenden, aufgef√ºhrt. Datenvisualisierung und Datenjudo
spielt dabei auch eine (zum Teil wichtige) Rolle.

\textbf{FALLSTUDIEN - NUR EXPLORATIVE DATENANALYSE}

\begin{itemize}
\item
  \href{https://lsinks.github.io/posts/2023-05-02-portal-project/portal.html}{Louise
  E. Sinks: TidyTuesday Week 18: Portal Project}
\item
  \href{https://lsinks.github.io/posts/2023-04-25-tidytuesday-marathon/marathon.html}{Louise
  E. Sinks: TidyTuesday Week 17: London Marathon}
\item
  \href{https://lsinks.github.io/posts/2023-04-18-tidytuesday-founder-crops/founder-crops.html}{Louise
  E. Sinks: TidyTuesday Week 16: Neolithic Founder Crops}
\item
  \href{https://allisonhorst.shinyapps.io/dplyr-learnr/\#section-welcome}{Datenjudo
  mit Pinguinen}
\item
  \href{https://data-se.netlify.app/2021/02/24/exercises-to-data-wrangling-with-the-tidyverse/}{Data-Wrangling-Aufgaben
  zur Lebenserwartung}
\item
  \href{https://data-se.netlify.app/2021/02/24/case-study-data-vizualization-on-flight-delays-using-tidyverse-tools/}{Case
  study: data vizualization on flight delays using tidyverse tools}
\item
  \href{https://data-se.netlify.app/2021/03/08/eda-zu-flugversp\%C3\%A4tungen/}{Fallstudie
  Flugversp√§tungen - EDA}
\item
  \href{https://data-se.netlify.app/2021/02/11/yacda-topgear/}{Fallstudie
  zur EDA: Top-Gear}
\item
  \href{https://data-se.netlify.app/2021/02/11/explorative-datenanalyse-zum-datensatz-oecd-wellbeing/}{Fallstudie
  zur EDA: OECD-Wellbeing-Studie}
\item
  \href{https://minimaxir.com/2018/07/imdb-data-analysis/}{Fallstudie
  zur EDA: Movie Rating}
\item
  \href{https://github.com/saghirb/WiP-tidyverse/blob/master/doc/WiP-tidyverse.pdf}{Fallstudie
  zur EDA: Women in Parliament}
\item
  \href{https://data-se.netlify.app/2021/05/27/datensatz-flights-finde-den-tag-mit-den-meisten-abfl\%C3\%BCgen/}{Finde
  den Tag mit den meisten Flugversp√§tungen, Datensatz `nycflights13'}
\item
  \href{http://varianceexplained.org/r/tidy-genomics/}{Cleaning and
  visualizing genomic data: a case study in tidy analysis}
\item
  \href{https://www.njtierney.com/post/2017/11/07/tidyverse-billboard/}{Tidyverse
  Case Study: Exploring the Billboard Charts}
\item
  \href{https://data-se.netlify.app/2021/11/27/analyse-der-rki-coronadaten/}{Analyse
  einiger RKI-Coronadaten: Eine reproduzierbare Fallstudie}
\item
  \href{https://www.opencasestudies.org/casestudies/ocs-healthexpenditure.html}{OpenCaseStudies
  - Health Expenditure}
\item
  \href{https://www.opencasestudies.org/ocs-bp-school-shootings-dashboard/\#Motivation}{Open
  Case Studies: School Shootings in the United States} - includes
  dashboards
\item
  \href{https://www.opencasestudies.org/ocs-bp-youth-disconnection/}{Open
  Case Studies: Disparities in Youth Disconnection}
\item
  \href{https://data-se.netlify.app/2021/05/28/yacsda-seitenspr\%C3\%BCnge/}{YACSDA
  Seitenspr√ºnge}
\item
  \href{https://www.opencasestudies.org/}{The Open Case Study Search}
  provides a nice collection of helpful case studies.
\item
  \href{https://fallstudien.netlify.app/}{ifes@FOM Fallstudienseite}
\end{itemize}

\subsection{Lineare Modelle}\label{lineare-modelle}

\textbf{FALLSTUDIEN - NUR LINEARE MODELLE}

\begin{itemize}
\item
  \href{https://youtu.be/5pBTHrnRIZY}{Beispiel f√ºr Prognosemodellierung
  1, grundlegender Anspruch, Video}
\item
  \href{https://data-se.netlify.app/2020/11/13/fallstudie-zur-regressionsanalyse-ggplot2movies/}{Beispiel
  f√ºr Ihre Prognosemodellierung 2, mittlerer Anspruch}
\item
  \href{https://data-se.netlify.app/2021/03/10/fallstudie-modellierung-von-flugversp\%C3\%A4tungen/}{Beispiel
  f√ºr Ihre Prognosemodellierung 3, hoher Anspruch}
\item
  \href{https://datenwerk.netlify.app/posts/flights-delay/}{Fallstudie:
  Modellierung von Flugversp√§tungen 2023 (mittlerer Anspruch)}
\item
  \href{https://datenwerk.netlify.app/posts/flights-delay/}{Fallstudie:
  Modellierung von Flugversp√§tungen 2023 (h√∂herer Anspruch)}
\item
  \href{https://data-se.netlify.app/2021/03/10/fallstudie-modellierung-von-flugversp\%C3\%A4tungen/}{Fallstudie:
  Modellierung von Flugversp√§tungen 2013}
\item
  \href{https://data-se.netlify.app/2021/02/24/modelling-movie-successes-linear-regression/}{Modelling
  movie successes: linear regression}
\item
  \href{https://data-se.netlify.app/2020/11/13/fallstudie-zur-regressionsanalyse-ggplot2movies/}{Movies}
\item
  \href{https://www.kaggle.com/code/ssauer/tmdb-simple-regression-beginners}{Fallstudie
  Einfache lineare Regression in Base-R, Anf√§ngerniveau,
  Kaggle-Competition TMDB}
\item
  \href{https://data-se.netlify.app/2022/05/02/fallstudie-spritverbrauch/}{Fallstudie
  Sprit sparen}
\item
  \href{https://www.kaggle.com/code/saikatkumardey/linear-regression-case-study/notebook}{Fallstudie
  zum Beitrag verschiedener Werbeformate zum Umsatz}; eine Fallstudie in
  Python, aber mit etwas Erfahrung wird man den Code einfach in R
  umsetzen k√∂nnen (wenn man nicht in Python schreiben will)
\item
  \href{https://www.linkedin.com/pulse/practical-linear-regression-r-case-study-diamond-prices-valdeleon/?trk=public_profile_article_view}{Practical
  Linear Regression with R: A case study on diamond prices}
\item
  \href{https://stat-ata-asu.github.io/MultipleAndLogisticRegression/case-study-italian-restaurants-in-nyc.html}{Case
  Study: Italian restaurants in NYC}
\item
  \href{https://data-se.netlify.app/2021/05/19/vohrersgage-modellierung-des-preises-von-diamanten/}{Vorhersage-Modellierung
  des Preises von Diamanten}
\item
  \href{https://data-se.netlify.app/2021/05/25/modellierung-diamantenpreis-2/}{Modellierung
  Diamantenpreis 2}
\item
  \href{https://data-se.netlify.app/2021/05/28/yacsda-seitenspr\%C3\%BCnge/}{YACSDA
  Seitenspr√ºnge}
\end{itemize}

\section{FAQ}\label{faq}

Werfen Sie auch einen Blick in \hyperref[sec-r-faq]{typische R-Fragen}.

\subsection{SD berechnen}\label{sd-berechnen}

FRAGE: Macht es einen Unterschied, ob man daf√ºr den Befehlt summary()
oder den Befehl sd() verwendet? Bei mir kommen da n√§mlich
unterschiedliche Zahlen raus.

ANTWORT: \texttt{summary()} gibt nicht SD aus, sondern nur den IQR (IQR
= Q3-Q1).

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{data}\NormalTok{(mtcars)}
\FunctionTok{sd}\NormalTok{(mtcars}\SpecialCharTok{$}\NormalTok{mpg)}
\DocumentationTok{\#\# [1] 6.026948}
\FunctionTok{summary}\NormalTok{(mtcars}\SpecialCharTok{$}\NormalTok{mpg)}
\DocumentationTok{\#\#    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. }
\DocumentationTok{\#\#   10.40   15.43   19.20   20.09   22.80   33.90}
\end{Highlighting}
\end{Shaded}

\subsection{count vs.~filter}\label{count-vs.-filter}

FRAGE: Wann benutzt man count() und wann filter()?

ANTWORT: Mit \texttt{filter} plus dem Z√§hlen der √ºbrig gebliebenen
Zeilen erreicht man etwas √Ñhnliches wie mit \texttt{count}:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mtcars }\SpecialCharTok{|\textgreater{}} 
  \FunctionTok{filter}\NormalTok{(am }\SpecialCharTok{==} \DecValTok{0}\NormalTok{) }\SpecialCharTok{|\textgreater{}} 
  \FunctionTok{nrow}\NormalTok{()}
\DocumentationTok{\#\# [1] 19}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mtcars }\SpecialCharTok{|\textgreater{}} 
  \FunctionTok{count}\NormalTok{(am)}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}rr@{}}
\toprule\noalign{}
am & n \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
0 & 19 \\
1 & 13 \\
\end{longtable}

\subsection{1000}\label{section-1}

FRAGE: gibt es einen Unterschied zwischen 10\^{}3 und 1e3? Es kommen
n√§mlich unterschiedliche Ergebnisse raus.

ANTWORT: Nein, beide Schreibweisen meinen das Gleiche, n√§mlich die Zahl
1000.

\begin{Shaded}
\begin{Highlighting}[]
\DecValTok{10}\SpecialCharTok{\^{}}\DecValTok{3} \SpecialCharTok{==} \DecValTok{1000} 
\DocumentationTok{\#\# [1] TRUE}
\FloatTok{1e3} \SpecialCharTok{==} \DecValTok{1000}
\DocumentationTok{\#\# [1] TRUE}
\end{Highlighting}
\end{Shaded}

\section{Literaturhinweise}\label{literaturhinweise-9}

Diese
\href{https://www.zotero.org/groups/4583286/intro-stats/library}{Literaturliste}
empfiehlt Ihnen Lehrb√ºcher zu grundlegenden Themen der Datenanalyse (mit
R).\footnote{\url{https://www.zotero.org/groups/4583286/intro-stats/library}}

\chapter{Definitionen}\label{definitionen}

\begin{itemize}
\item
  \textbf{Abweichungsrechteck}: Definition~\ref{def-abweichungsrechteck}
\item
  \textbf{Argumente einer Funktion}: Definition~\ref{def-args}
\item
  \textbf{Auspr√§gung}: Definition~\ref{def-auspraegung}
\item
  \textbf{Balkendiagramm}: Definition~\ref{def-balken}
\item
  \textbf{Beobachtungseinheit}: Definition~\ref{def-beobeinheit}
\item
  \textbf{Bin√§re Variable}: Definition~\ref{def-binvar}
\item
  \textbf{Boxplot}: Definition~\ref{def-boxplot}
\item
  \textbf{Data-Dictionary}: Definition~\ref{def-datadict}
\item
  \textbf{Dataframe}: Definition~\ref{def-dataframe}
\item
  \textbf{Hallo, Daten}: Definition~\ref{def-daten}
\item
  \textbf{Datenjudo}: Definition~\ref{def-datenjudo}
\item
  \textbf{Dezile}: Definition~\ref{def-dezile}
\item
  \textbf{Dichtediagramm}: Definition~\ref{def-dichtediagramm}
\item
  \textbf{Extremwert}: Definition~\ref{def-extremwert}
\item
  \textbf{Fehlerstreuung}: Definition~\ref{def-fehlerstreung}
\item
  \textbf{Funktion}: Definition~\ref{def-fun}
\item
  \textbf{Gerade}: Definition~\ref{def-gerade}
\item
  \textbf{\# Histogramm}: Definition~\ref{def-histogramm}
\item
  \textbf{Interquartilsabstand}: Definition~\ref{def-iqr}
\item
  \textbf{Kovarianz}: Definition~\ref{def-kov}
\item
  \textbf{Lagema√ü}: Definition~\ref{def-lage}
\item
  \textbf{Linearer Zusammenhang}: Definition~\ref{def-lin-zshg}
\item
  \textbf{Lineares Modell}: Definition~\ref{def-lm}
\item
  \textbf{Mittlere Absolutabweichung}: Definition~\ref{def-mae}
\item
  \textbf{Median}: Definition~\ref{def-median}
\item
  \textbf{\#\# Modelle}: Definition~\ref{def-modelle}
\item
  \textbf{Mittelwert}: Definition~\ref{def-mw}
\item
  \textbf{Entstehung einer Normalverteilung}:
  Definition~\ref{def-normal}
\item
  \textbf{Pfeife}: Definition~\ref{def-pipe}
\item
  \textbf{Punktmodell}: Definition~\ref{def-punktmodell}
\item
  \textbf{Quantile}: Definition~\ref{def-quantile}
\item
  \textbf{Quartile}: Definition~\ref{def-quartile}
\item
  \textbf{Korrelationskoeffizient r}: Definition~\ref{def-r}
\item
  \textbf{R-Quadrat}: Definition~\ref{def-r2}
\item
  \textbf{Reproduzierbarkeit}: Definition~\ref{def-repro}
\item
  \textbf{Residuum}: Definition~\ref{def-residuum}
\item
  \textbf{Standardabweichung}: Definition~\ref{def-sd}
\item
  \textbf{Skalenniveau}: Definition~\ref{def-skalenniveau}
\item
  \textbf{Statistik}: Definition~\ref{def-statistik}
\item
  \textbf{Streuungsma√üe}: Definition~\ref{def-streuungsma√üe}
\item
  \textbf{Test-Sample}: Definition~\ref{def-testsample}
\item
  \textbf{Tidy Data}: Definition~\ref{def-tidy}
\item
  \textbf{Train-Sample}: Definition~\ref{def-trainsample}
\item
  \textbf{Variable}: Definition~\ref{def-var}
\item
  \textbf{Varianz}: Definition~\ref{def-var}
\item
  \textbf{Vektorielles Rechnen}: Definition~\ref{def-veccalc}
\item
  \textbf{Vektor}: Definition~\ref{def-vektor}
\item
  \textbf{Verteilung}: Definition~\ref{def-verteilung}
\item
  \textbf{Wert}: Definition~\ref{def-wert}
\item
  \textbf{z-Werte}: Definition~\ref{def-z-werte}
\item
  \textbf{Zentrieren }: Definition~\ref{def-zentrieren}
\item
  \textbf{Richtig und St√§rke eines Zusammenhang}:
  Definition~\ref{def-zshg}
\end{itemize}

\chapter*{Literatur}\label{literatur-9}
\addcontentsline{toc}{chapter}{Literatur}

\markboth{Literatur}{Literatur}

\phantomsection\label{refs}
\begin{CSLReferences}{1}{0}
\bibitem[\citeproctext]{ref-bortz_statistik_2010}
Bortz, J√ºrgen, und Christof Schuster. 2010. \emph{Statistik F√ºr {Human-}
Und {Sozialwissenschaftler}}. Springer-{Lehrbuch}. Berlin, Heidelberg:
Springer Berlin Heidelberg.
\url{https://doi.org/10.1007/978-3-642-12770-0}.

\bibitem[\citeproctext]{ref-bowne-anderson_what_2018}
Bowne-Anderson, Hugo. 2018. {‚ÄûWhat {Data Scientists Really Do},
{According} to 35 {Data Scientists}``}. \emph{Harvard Business Review},
15. August 2018.
\url{https://hbr.org/2018/08/what-data-scientists-really-do-according-to-35-data-scientists}.

\bibitem[\citeproctext]{ref-broman_data_2018}
Broman, Karl W., und Kara H. Woo. 2018. {‚ÄûData {Organization} in
{Spreadsheets}``}. \emph{The American Statistician} 72 (1): 2--10.
\url{https://doi.org/10.1080/00031305.2017.1375989}.

\bibitem[\citeproctext]{ref-cetinkaya-rundel_introduction_2021}
Cetinkaya-Rundel, Mine, und Johanna Hardin. 2021. \emph{Introduction to
{Modern Statistics}}. \url{https://openintro-ims.netlify.app/}.

\bibitem[\citeproctext]{ref-cohen_applied_2003}
Cohen, Jacob, Patricia Cohen, Stephen G. West, und Leona S. Aiken. 2003.
\emph{Applied Multiple Regression/Correlation Analysis for the
Behavioral Sciences, 3rd Ed}. Applied Multiple Regression/Correlation
Analysis for the Behavioral Sciences, 3rd Ed. Mahwah, NJ, US: Lawrence
Erlbaum Associates Publishers.

\bibitem[\citeproctext]{ref-downey_probably_2023}
Downey, Allen. 2023. \emph{Probably Overthinking It: How to Use Data to
Answer Questions, Avoid Statistical Traps, and Make Better Decisions}.
Chicago ; London: The University of Chicago Press.

\bibitem[\citeproctext]{ref-fisher_making_2018}
Fisher, Danyel, und Miriah Meyer. 2018. \emph{Making Data Visual: A
Practical Guide to Using Visualization for Insight}. First edition.
Beijing, {[}China{]}: O'Reilly.

\bibitem[\citeproctext]{ref-world_economic_forum_future_2020}
Forum, World Economic. 2020. {‚ÄûThe {Future} of {Jobs Report} 2020``}.
CH-1223 Cologny/Geneva Switzerland: World Economic Forum.
\url{https://www3.weforum.org/docs/WEF_Future_of_Jobs_2020.pdf}.

\bibitem[\citeproctext]{ref-gelman_regression_2021-1}
Gelman, Andrew, Jennifer Hill, und Aki Vehtari. 2021a. \emph{Regression
and Other Stories}. Analytical Methods for Social Research. Cambridge:
Cambridge University Press.

\bibitem[\citeproctext]{ref-gelman_regression_2021}
---------. 2021b. \emph{Regression and Other Stories}. Analytical
Methods for Social Research. Cambridge: Cambridge University Press.

\bibitem[\citeproctext]{ref-goren_preliminary_2020}
Goren, Andy, Sergio Va√±o-Galv√°n, Carlos Gustavo Wambier, John McCoy,
Alba Gomez-Zubiaur, Oscar M. Moreno-Arrones, Jerry Shapiro, u.~a. 2020.
{‚ÄûA Preliminary Observation: {Male} Pattern Hair Loss Among Hospitalized
{COVID-19} Patients in {Spain} -- {A} Potential Clue to the Role of
Androgens in {COVID-19} Severity``}. \emph{Journal of Cosmetic
Dermatology} 19 (7): 1545--47. \url{https://doi.org/10.1111/jocd.13443}.

\bibitem[\citeproctext]{ref-haug_smartphone_2015}
Haug, Severin, Raquel Paz Castro, Min Kwon, Andreas Filler, Tobias
Kowatsch, und Michael P. Schaub. 2015. {‚ÄûSmartphone Use and Smartphone
Addiction among Young People in {Switzerland}``}. \emph{Journal of
Behavioral Addictions} 4 (4): 299--307.
\url{https://doi.org/10.1556/2006.4.2015.037}.

\bibitem[\citeproctext]{ref-ismay_statistical_2020}
Ismay, Chester, und Albert Young-Sun Kim. 2020. \emph{Statistical
Inference via Data Science: A {ModernDive} into {R} and the
{Tidyverse}}. Chapman \& {Hall}/{CRC} the {R Series}. Boca Raton: CRC
Press / Taylor \& Francis Group. \url{https://moderndive.com/}.

\bibitem[\citeproctext]{ref-kaplan_statistical_2009}
Kaplan, Daniel T. 2009. \emph{Statistical Modeling: A Fresh Approach}.
Scotts Valley, Calif.: CreateSpace.
\url{https://dtkaplan.github.io/SM2-bookdown/}.

\bibitem[\citeproctext]{ref-kwon_smartphone_2013}
Kwon, Min, Dai-Jin Kim, Hyun Cho, und Soo Yang. 2013. {‚ÄûThe Smartphone
Addiction Scale: Development and Validation of a Short Version for
Adolescents``}. \emph{PloS One} 8 (12): e83558.
\url{https://doi.org/10.1371/journal.pone.0083558}.

\bibitem[\citeproctext]{ref-lyon_why_2014}
Lyon, Aidan. 2014. {‚ÄûWhy Are {Normal Distributions Normal}?``} \emph{The
British Journal for the Philosophy of Science} 65 (3): 621--49.
\url{https://doi.org/10.1093/bjps/axs046}.

\bibitem[\citeproctext]{ref-mackay_scientific_2000}
MacKay, R. J., und R. W. Oldford. 2000. {‚ÄûScientific {Method},
{Statistical Method} and the {Speed} of {Light}``}. \emph{Statistical
Science} 15 (3): 254--78. \url{https://doi.org/10.1214/ss/1009212817}.

\bibitem[\citeproctext]{ref-messerli_chocolate_2012}
Messerli, Franz H. 2012. {‚ÄûChocolate {Consumption}, {Cognitive
Function}, and {Nobel Laureates}``}. \emph{New England Journal of
Medicine} 367 (16): 1562--64.
\url{https://doi.org/10.1056/NEJMon1211064}.

\bibitem[\citeproctext]{ref-mittag_statistik_2020}
Mittag, Hans-Joachim, und Katharina Sch√ºller. 2020. \emph{Statistik:
Eine Einf√ºhrung mit interaktiven Elementen}. Berlin, Heidelberg:
Springer Berlin Heidelberg.
\url{https://doi.org/10.1007/978-3-662-61912-4}.

\bibitem[\citeproctext]{ref-mulukom_psychological_2020}
Mulukom, Valerie van, Barbara Muzzulini, Bastiaan Rutjens, Caspar J. van
Lissa, und Miguel Farias. 2020. {‚ÄûPsychological Impact of {COVID-19}
Pandemic``}, M√§rz. \url{https://doi.org/10.17605/OSF.IO/TSJNB}.

\bibitem[\citeproctext]{ref-obels_analysis_2020}
Obels, Pepijn, Dani√´l Lakens, Nicholas A. Coles, Jaroslav Gottfried, und
Seth A. Green. 2020. {‚ÄûAnalysis of {Open Data} and {Computational
Reproducibility} in {Registered Reports} in {Psychology}``}.
\emph{Advances in Methods and Practices in Psychological Science} 3 (2):
229--37. \url{https://doi.org/10.1177/2515245920918872}.

\bibitem[\citeproctext]{ref-oestreich_keine_2014}
Oestreich, Markus, und Oliver Romberg. 2014. \emph{Keine Panik vor
Statistik!: Erfolg und Spa√ü im Horrorfach nichttechnischer
Studieng√§nge}. Wiesbaden: Springer Fachmedien Wiesbaden.
\url{https://doi.org/10.1007/978-3-658-04605-7}.

\bibitem[\citeproctext]{ref-okabeito}
Okabe, Masataka, und Kei Ito. 2023. {‚ÄûColor {Universal Design} ({CUD}) /
{Colorblind Barrier Free}``}. 2023.
\url{https://jfly.uni-koeln.de/color/}.

\bibitem[\citeproctext]{ref-plesser_reproducibility_2018}
Plesser, Hans E. 2018. {‚ÄûReproducibility vs. {Replicability}: {A Brief
History} of a {Confused Terminology}``}. \emph{Frontiers in
Neuroinformatics} 11 (Januar): 76.
\url{https://doi.org/10.3389/fninf.2017.00076}.

\bibitem[\citeproctext]{ref-poldrack_statistical_2023}
Poldrack, Russell A. 2023. \emph{Statistical Thinking: Analyzing Data in
an Uncertain World}. Princeton: Princeton University Press.
\url{https://statsthinking21.github.io/statsthinking21-core-site/}.

\bibitem[\citeproctext]{ref-owidhumanheight}
Roser, Max, Cameron Appel, und Hannah Ritchie. 2013. {‚ÄûHuman Height``}.
\emph{Our World in Data}. \url{https://ourworldindata.org/human-height}.

\bibitem[\citeproctext]{ref-rothstein_publication_2014}
Rothstein, Hannah R. 2014. {‚ÄûPublication {Bias}``}. In \emph{Wiley
{StatsRef}: {Statistics Reference Online}}. John Wiley \& Sons, Ltd.
\url{https://doi.org/10.1002/9781118445112.stat07071}.

\bibitem[\citeproctext]{ref-sauer_moderne_2019}
Sauer, Sebastian. 2019. \emph{Moderne Datenanalyse mit R: Daten
einlesen, aufbereiten, visualisieren und modellieren}. 1. Auflage 2019.
FOM-Edition. Wiesbaden: Springer.
\url{https://www.springer.com/de/book/9783658215866}.

\bibitem[\citeproctext]{ref-schwaiger_impact_2022}
Schwaiger, Elizabeth, und Rameen Tahir. 2022. {‚ÄûThe Impact of Nomophobia
and Smartphone Presence on Fluid Intelligence and Attention``}.
\emph{Cyberpsychology: Journal of Psychosocial Research on Cyberspace}
16 (1). \url{https://doi.org/10.5817/CP2022-1-5}.

\bibitem[\citeproctext]{ref-simmons_false-positive_2011}
Simmons, Joseph P., Leif D. Nelson, und Uri Simonsohn. 2011.
{‚ÄûFalse-{Positive Psychology}: {Undisclosed Flexibility} in {Data
Collection} and {Analysis Allows Presenting Anything} as
{Significant}``}. \emph{Psychological Science} 22 (11): 1359--66.
\url{https://doi.org/10.1177/0956797611417632}.

\bibitem[\citeproctext]{ref-stigler_seven_2016}
Stigler, Stephen M. 2016. \emph{The Seven Pillars of Statistical
Wisdom}. Cambridge, Massachusetts: Harvard University Press.

\bibitem[\citeproctext]{ref-wickham_r_2018}
Wickham, Hadley, und Garrett Grolemund. 2018. \emph{R f√ºr Data Science:
Daten importieren, bereinigen, umformen, modellieren und visualisieren}.
√úbersetzt von Frank Langenau. 1. Auflage. Heidelberg: O'Reilly.
\url{https://r4ds.had.co.nz/index.html}.

\bibitem[\citeproctext]{ref-wilke_fundamentals_2019}
Wilke, C. 2019. \emph{Fundamentals of Data Visualization: A Primer on
Making Informative and Compelling Figures}. First edition. Sebastopol,
CA: O'Reilly Media. \url{https://clauswilke.com/dataviz/}.

\end{CSLReferences}

\end{exercise}




\end{document}
