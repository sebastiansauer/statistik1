<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="de-DE" xml:lang="de-DE"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="keywords" content="Statistik, Prognose, Modellierung, R, Datenanalyse, Regression">
<meta name="description" content="Einführung in die Statistik mit einem Schwerpunkt auf Prognosemodellierung">
<title>4&nbsp; Daten umformen – Statistik1</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./040-verbildlichen.html" rel="next">
<link href="./020-R.html" rel="prev">
<link href="./img/statistik1_icon.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-79bb3942e891885f9f7af119cd221462.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-37bb72f48501692975d9c066fdeb097b.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-5f93c088b16614dfb72f019f425a56e3.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Keine Treffer",
    "search-matching-documents-text": "Treffer",
    "search-copy-link-title": "Link in die Suche kopieren",
    "search-hide-matches-text": "Zusätzliche Treffer verbergen",
    "search-more-match-text": "weitere Treffer in diesem Dokument",
    "search-more-matches-text": "weitere Treffer in diesem Dokument",
    "search-clear-button-title": "Zurücksetzen",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Abbrechen",
    "search-submit-button-title": "Abschicken",
    "search-label": "Suchen"
  }
}</script><script type="module" src="site_libs/quarto-ojs/quarto-ojs-runtime.js"></script><link href="site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
<meta name="mermaid-theme" content="default">
<script src="site_libs/quarto-diagram/mermaid.min.js"></script><script src="site_libs/quarto-diagram/mermaid-init.js"></script><link href="site_libs/quarto-diagram/mermaid.css" rel="stylesheet">
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script><script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script><link rel="stylesheet" href="styles.css">
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./010-rahmen.html">Vorbereiten</a></li><li class="breadcrumb-item"><a href="./030-aufbereiten.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Daten umformen</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Suchen" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./img/statistik1_icon.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none"></a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Statistik1</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/sebastiansauer/statistik1" title="Quellcode" class="quarto-navigation-tool px-1" aria-label="Quellcode"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Dunkelmodus umschalten"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Suchen"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Willkommen!</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./001-vorwort.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Vorwort</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./005-orga.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Organisatorisches</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Vorbereiten</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./010-rahmen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Rahmen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./020-R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Daten einlesen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./030-aufbereiten.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Daten umformen</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Modellieren</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./040-verbildlichen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Daten verbildlichen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./050-zusammenfassen.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Punktmodelle 1</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./060-modellguete.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Modellgüte</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./070-zusammenhaenge.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Punktmodelle 2</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./080-regression1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Geradenmodelle 1</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./090-regression2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Geradenmodelle 2</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Abschluss</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./100-abschluss.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Abschluss</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Literatur</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Anhang</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./110-definitions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Definitionen</span></span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Inhaltsverzeichnis</h2>
   
  <ul>
<li>
<a href="#lernsteuerung" id="toc-lernsteuerung" class="nav-link active" data-scroll-target="#lernsteuerung"><span class="header-section-number">4.1</span> Lernsteuerung</a>
  <ul class="collapse">
<li><a href="#lernziele" id="toc-lernziele" class="nav-link" data-scroll-target="#lernziele"><span class="header-section-number">4.1.1</span> Lernziele</a></li>
  <li><a href="#ben%C3%B6tigte-r-pakete" id="toc-benötigte-r-pakete" class="nav-link" data-scroll-target="#ben%C3%B6tigte-r-pakete"><span class="header-section-number">4.1.2</span> Benötigte R-Pakete</a></li>
  <li><a href="#ben%C3%B6tigte-daten" id="toc-benötigte-daten" class="nav-link" data-scroll-target="#ben%C3%B6tigte-daten"><span class="header-section-number">4.1.3</span> Benötigte Daten</a></li>
  <li><a href="#r-code-zum-copy-pasten" id="toc-r-code-zum-copy-pasten" class="nav-link" data-scroll-target="#r-code-zum-copy-pasten"><span class="header-section-number">4.1.4</span> R-Code zum Copy-Pasten</a></li>
  <li><a href="#frag-den-bot" id="toc-frag-den-bot" class="nav-link" data-scroll-target="#frag-den-bot"><span class="header-section-number">4.1.5</span> Frag den Bot</a></li>
  <li><a href="#zum-einstieg" id="toc-zum-einstieg" class="nav-link" data-scroll-target="#zum-einstieg"><span class="header-section-number">4.1.6</span> Zum Einstieg</a></li>
  </ul>
</li>
  <li>
<a href="#datenjudo" id="toc-datenjudo" class="nav-link" data-scroll-target="#datenjudo"><span class="header-section-number">4.2</span> Datenjudo</a>
  <ul class="collapse">
<li><a href="#die-wahrheit-%C3%BCber-data-science" id="toc-die-wahrheit-über-data-science" class="nav-link" data-scroll-target="#die-wahrheit-%C3%BCber-data-science"><span class="header-section-number">4.2.1</span> Die Wahrheit über Data Science</a></li>
  <li><a href="#praxisbezug-aus-dem-alltag-des-data-scientisten" id="toc-praxisbezug-aus-dem-alltag-des-data-scientisten" class="nav-link" data-scroll-target="#praxisbezug-aus-dem-alltag-des-data-scientisten"><span class="header-section-number">4.2.2</span> Praxisbezug: Aus dem Alltag des Data Scientisten</a></li>
  <li><a href="#machs-einfach" id="toc-machs-einfach" class="nav-link" data-scroll-target="#machs-einfach"><span class="header-section-number">4.2.3</span> Mach’s einfach</a></li>
  </ul>
</li>
  <li>
<a href="#die-verben-des-datenjudos" id="toc-die-verben-des-datenjudos" class="nav-link" data-scroll-target="#die-verben-des-datenjudos"><span class="header-section-number">4.3</span> Die Verben des Datenjudos</a>
  <ul class="collapse">
<li><a href="#tabelle-sortieren-arrange" id="toc-tabelle-sortieren-arrange" class="nav-link" data-scroll-target="#tabelle-sortieren-arrange"><span class="header-section-number">4.3.1</span> Tabelle sortieren: <code>arrange</code></a></li>
  <li><a href="#zeilen-filtern-filter" id="toc-zeilen-filtern-filter" class="nav-link" data-scroll-target="#zeilen-filtern-filter"><span class="header-section-number">4.3.2</span> Zeilen filtern: <code>filter</code></a></li>
  <li><a href="#spalten-ausw%C3%A4hlen-mit-select" id="toc-spalten-auswählen-mit-select" class="nav-link" data-scroll-target="#spalten-ausw%C3%A4hlen-mit-select"><span class="header-section-number">4.3.3</span> Spalten auswählen mit <code>select</code></a></li>
  <li><a href="#spalten-zu-einer-zahl-zusammenfassen-mit-summarise" id="toc-spalten-zu-einer-zahl-zusammenfassen-mit-summarise" class="nav-link" data-scroll-target="#spalten-zu-einer-zahl-zusammenfassen-mit-summarise"><span class="header-section-number">4.3.4</span> Spalten zu einer Zahl zusammenfassen mit <code>summarise</code></a></li>
  <li><a href="#tabelle-gruppieren" id="toc-tabelle-gruppieren" class="nav-link" data-scroll-target="#tabelle-gruppieren"><span class="header-section-number">4.3.5</span> Tabelle gruppieren</a></li>
  <li><a href="#spalten-ver%C3%A4ndern-mit-mutate" id="toc-spalten-verändern-mit-mutate" class="nav-link" data-scroll-target="#spalten-ver%C3%A4ndern-mit-mutate"><span class="header-section-number">4.3.6</span> Spalten verändern mit <code>mutate</code></a></li>
  <li><a href="#zeilen-z%C3%A4hlen-mit-count" id="toc-zeilen-zählen-mit-count" class="nav-link" data-scroll-target="#zeilen-z%C3%A4hlen-mit-count"><span class="header-section-number">4.3.7</span> Zeilen zählen mit <code>count</code></a></li>
  <li><a href="#fazit-verben-am-flie%C3%9Fband" id="toc-fazit-verben-am-fließband" class="nav-link" data-scroll-target="#fazit-verben-am-flie%C3%9Fband"><span class="header-section-number">4.3.8</span> Fazit: Verben am Fließband</a></li>
  </ul>
</li>
  <li>
<a href="#sec-pipe" id="toc-sec-pipe" class="nav-link" data-scroll-target="#sec-pipe"><span class="header-section-number">4.4</span> Die Pfeife</a>
  <ul class="collapse">
<li><a href="#russische-puppen" id="toc-russische-puppen" class="nav-link" data-scroll-target="#russische-puppen"><span class="header-section-number">4.4.1</span> Russische Puppen</a></li>
  <li><a href="#die-pfeife-zur-rettung" id="toc-die-pfeife-zur-rettung" class="nav-link" data-scroll-target="#die-pfeife-zur-rettung"><span class="header-section-number">4.4.2</span> Die Pfeife zur Rettung</a></li>
  </ul>
</li>
  <li><a href="#beispiele-f%C3%BCr-forschungsfragen" id="toc-beispiele-für-forschungsfragen" class="nav-link" data-scroll-target="#beispiele-f%C3%BCr-forschungsfragen"><span class="header-section-number">4.5</span> Beispiele für Forschungsfragen</a></li>
  <li><a href="#praxisbezug" id="toc-praxisbezug" class="nav-link" data-scroll-target="#praxisbezug"><span class="header-section-number">4.6</span> Praxisbezug</a></li>
  <li><a href="#wie-man-mit-statistik-l%C3%BCgt" id="toc-wie-man-mit-statistik-lügt" class="nav-link" data-scroll-target="#wie-man-mit-statistik-l%C3%BCgt"><span class="header-section-number">4.7</span> Wie man mit Statistik lügt</a></li>
  <li>
<a href="#fallstudien" id="toc-fallstudien" class="nav-link" data-scroll-target="#fallstudien"><span class="header-section-number">4.8</span> Fallstudien</a>
  <ul class="collapse">
<li><a href="#die-pinguine" id="toc-die-pinguine" class="nav-link" data-scroll-target="#die-pinguine"><span class="header-section-number">4.8.1</span> Die Pinguine</a></li>
  <li><a href="#weitere-fallstudien" id="toc-weitere-fallstudien" class="nav-link" data-scroll-target="#weitere-fallstudien"><span class="header-section-number">4.8.2</span> Weitere Fallstudien</a></li>
  </ul>
</li>
  <li><a href="#aufgaben" id="toc-aufgaben" class="nav-link" data-scroll-target="#aufgaben"><span class="header-section-number">4.9</span> Aufgaben</a></li>
  <li>
<a href="#vertiefung" id="toc-vertiefung" class="nav-link" data-scroll-target="#vertiefung"><span class="header-section-number">4.10</span> Vertiefung</a>
  <ul class="collapse">
<li><a href="#tidydatatutor" id="toc-tidydatatutor" class="nav-link" data-scroll-target="#tidydatatutor"><span class="header-section-number">4.10.1</span> Tidydatatutor</a></li>
  <li><a href="#fortgeschrittenes-r" id="toc-fortgeschrittenes-r" class="nav-link" data-scroll-target="#fortgeschrittenes-r"><span class="header-section-number">4.10.2</span> Fortgeschrittenes R</a></li>
  <li><a href="#sec-erbie" id="toc-sec-erbie" class="nav-link" data-scroll-target="#sec-erbie"><span class="header-section-number">4.10.3</span> Hilfe?! Erbie!</a></li>
  <li><a href="#zertifikate-und-online-kurse" id="toc-zertifikate-und-online-kurse" class="nav-link" data-scroll-target="#zertifikate-und-online-kurse"><span class="header-section-number">4.10.4</span> Zertifikate und Online-Kurse</a></li>
  </ul>
</li>
  <li><a href="#exkurs" id="toc-exkurs" class="nav-link" data-scroll-target="#exkurs"><span class="header-section-number">4.11</span> Exkurs</a></li>
  <li><a href="#literaturhinweise" id="toc-literaturhinweise" class="nav-link" data-scroll-target="#literaturhinweise"><span class="header-section-number">4.12</span> Literaturhinweise</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./010-rahmen.html">Vorbereiten</a></li><li class="breadcrumb-item"><a href="./030-aufbereiten.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Daten umformen</span></a></li></ol></nav><div class="quarto-title">
<h1 class="title">
<span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Daten umformen</span>
</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

<div>
  <div class="keywords">
    <div class="block-title">Schlüsselwörter</div>
    <p>Statistik, Prognose, Modellierung, R, Datenanalyse, Regression</p>
  </div>
</div>

</header><style>
q {
  quotes: '„' '“';
}
</style>
<section id="lernsteuerung" class="level2" data-number="4.1"><h2 data-number="4.1" class="anchored" data-anchor-id="lernsteuerung">
<span class="header-section-number">4.1</span> Lernsteuerung</h2>
<p>Abb. <a href="005-orga.html#fig-ueberblick" class="quarto-xref">Abbildung&nbsp;<span>1.3</span></a> zeigt den Standort dieses Kapitels im Lernpfad und gibt damit einen Überblick über das Thema dieses Kapitels im Kontext aller Kapitel.</p>
<section id="lernziele" class="level3" data-number="4.1.1"><h3 data-number="4.1.1" class="anchored" data-anchor-id="lernziele">
<span class="header-section-number">4.1.1</span> Lernziele</h3>
<ul>
<li>Sie können folgende Verben des Datenjudo anwenden: <code>arrange</code>, <code>filter</code>, <code>select</code>, <code>summarise</code>, <code>group_by</code>, <code>mutate</code>.</li>
<li>Sie können R-Befehle mit der “Pfeife” verketten.</li>
</ul></section><section id="benötigte-r-pakete" class="level3" data-number="4.1.2"><h3 data-number="4.1.2" class="anchored" data-anchor-id="benötigte-r-pakete">
<span class="header-section-number">4.1.2</span> Benötigte R-Pakete</h3>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://easystats.github.io/easystats/">easystats</a></span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="benötigte-daten" class="level3" data-number="4.1.3"><h3 data-number="4.1.3" class="anchored" data-anchor-id="benötigte-daten">
<span class="header-section-number">4.1.3</span> Benötigte Daten</h3>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mariokart_path</span> <span class="op">&lt;-</span> <span class="st">"https://vincentarelbundock.github.io/Rdatasets/csv/openintro/mariokart.csv"</span></span>
<span></span>
<span><span class="va">mariokart</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="va">mariokart_path</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="exr-los" class="theorem exercise">
<p><span class="theorem-title"><strong>Übungsaufgabe 4.1</strong></span> Importieren Sie den Datensatz <code>mariokart</code>. Probieren Sie alle vorgestellten Verben des Datenjudos aus, zunächst in dem Sie einfach den R-Code kopieren und selber ausführen.<span class="math inline">\(\square\)</span></p>
</div>
</section><section id="r-code-zum-copy-pasten" class="level3" data-number="4.1.4"><h3 data-number="4.1.4" class="anchored" data-anchor-id="r-code-zum-copy-pasten">
<span class="header-section-number">4.1.4</span> R-Code zum Copy-Pasten</h3>
<p>Sie finden den R-Code für jedes Kapitel <a href="https://github.com/sebastiansauer/statistik1/tree/main/R-code-for-all-chapters">hier</a>. <span class="math inline">\(\square\)</span></p>
</section><section id="frag-den-bot" class="level3" data-number="4.1.5"><h3 data-number="4.1.5" class="anchored" data-anchor-id="frag-den-bot">
<span class="header-section-number">4.1.5</span> Frag den Bot</h3>
<blockquote class="blockquote">
<p><span>🧑‍🎓</span> Erkläre einem Fünfjährigen, warum Statistik nützlich ist.</p>
</blockquote>
<blockquote class="blockquote">
<p><span>🤖</span> Okay, hör zu. Stell dir vor, du hast viele Spielzeugautos und du willst herausfinden, welches Auto am meisten bespielt wird. Du kannst jeden Tag zählen, wie oft du jedes Auto benutzt hast. Aber das wäre sehr mühsam und könnte schnell durcheinander gebracht werden. Stattdessen kannst du mit Statistik eine einfachere Methode finden. Du kannst zum Beispiel eine Liste machen und jedes Auto mit einer bestimmten Farbe markieren. Dann kannst du jeden Tag einfach zählen, wie oft du jede Farbe verwendet hast. Am Ende kannst du herausfinden, welches Auto am meisten bespielt wurde, indem du siehst, welche Farbe am meisten verwendet wurde. Das ist ein Beispiel dafür, wie Statistik uns dabei helfen kann, Muster in großen Datensätzen zu finden und Entscheidungen zu treffen, ohne alles einzeln zu zählen.</p>
</blockquote>
<p>Quelle: ChatGTP 3.5, 2023-02-09</p>
</section><section id="zum-einstieg" class="level3" data-number="4.1.6"><h3 data-number="4.1.6" class="anchored" data-anchor-id="zum-einstieg">
<span class="header-section-number">4.1.6</span> Zum Einstieg</h3>
<p>Vielleicht fordert Sie die Lehrkraft zu einem Einstiegsquiz auf, etwas mittels der Plattform <a href="https://antworte.jetzt/">antworte.jetzt</a>.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> Alternativ überlegen Sie sich selber 10 Quiz-Aufgaben zum Stoff des letzten Kapitels.</p>
</section></section><section id="datenjudo" class="level2" data-number="4.2"><h2 data-number="4.2" class="anchored" data-anchor-id="datenjudo">
<span class="header-section-number">4.2</span> Datenjudo</h2>
<div id="def-datenjudo" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 4.1 (Datenjudo)</strong></span> Mit <em>Datenjudo</em> meint man den Prozess der Aufbereitens, Umformens oder Zusammenfassen von Daten, sowohl für einzelne Beobachtungen (Zeilen einer Datentabelle) oder Variablen (Spalten einer Datentabelle) oder einer ganzen Datentabelle. <span class="math inline">\(\square\)</span></p>
</div>
<section id="die-wahrheit-über-data-science" class="level3" data-number="4.2.1"><h3 data-number="4.2.1" class="anchored" data-anchor-id="die-wahrheit-über-data-science">
<span class="header-section-number">4.2.1</span> Die Wahrheit über Data Science</h3>
<p>Denkt man an Data Science, stellt man sich coole Leute vor (in San Francisco oder Berlin), die an abgefahrenen Berechnungen mit hoch komplexen statistischen Modellen für gigantische Datenmengen basteln. Tatsächlich besteht ein großer Teil der Arbeit aus dem Aufbereiten von Daten.</p>
</section><section id="praxisbezug-aus-dem-alltag-des-data-scientisten" class="level3 exm-datenjudo1" data-number="4.2.2"><h3 data-number="4.2.2" class="anchored" data-anchor-id="praxisbezug-aus-dem-alltag-des-data-scientisten">
<span class="header-section-number">4.2.2</span> Praxisbezug: Aus dem Alltag des Data Scientisten</h3>
<p>Laut dem <em>Harvard Business Review</em> allerdings, verbringen Data Scientist “80%” ihrer Zeit mit dem <em>Aufbereiten</em> von Daten <span class="citation" data-cites="bowne-anderson_what_2018">(<a href="references.html#ref-bowne-anderson_what_2018" role="doc-biblioref">Bowne-Anderson, 2018</a>)</span>. Ja: mit uncoolen Tätigkeiten wie Tippfehler aus Datensätzen entfernen oder die Daten überhaupt nutzbar und verständlich zu machen.</p>
<p>Das zeigt zumindest, dass das Aufbereiten von Daten a) wichtig ist und b) dass man allein damit schon weit kommen kann. Eine gute Nachricht ist (vielleicht), dass das Aufbereiten von Daten keine aufwändige Mathematik verlangt, stattdessen muss man ein paar Handgriffe und Kniffe kennen. Daher passt der Begriff <em>Datenjudo</em> vielleicht ganz gut. Kümmern wir uns also um das Aufbereiten bzw. Umformen von Daten, um das Datenjudo. <span>🔢🤹</span> <span class="math inline">\(\square\)</span></p>
</section><div id="exm-datenjudo" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 4.1</strong></span> Beispiele für typische Tätigkeiten des Datenjudos sind:</p>
<ul>
<li>Zeilen <em>filtern</em> (z. B. nur Studentis des Studiengangs X)</li>
<li>Zeilen <em>sortieren</em> (z. B. Studenten mit guten Noten in den oberen Zeilen)</li>
<li>Spalten <em>wählen</em> (z. B. 100 weitere Produkte ausblenden)</li>
<li>Spalten in eine Zahl <em>zusammenfassen</em> (z. B. Notenschnitt der 1. Klausur)</li>
<li>Tabelle <em>gruppieren</em> (z. B. Analyse getrennt nach Standorten)</li>
<li>Werte aus einer Spalte <em>verändern</em> oder <em>neue Spalte</em> bilden (z. B. Punkte in Prozent-Richtige umrechnen).</li>
<li>… <span class="math inline">\(\square\)</span>
</li>
</ul>
</div>
<section id="machs-einfach" class="level3" data-number="4.2.3"><h3 data-number="4.2.3" class="anchored" data-anchor-id="machs-einfach">
<span class="header-section-number">4.2.3</span> Mach’s einfach</h3>
<p>Es gibt einen (einfachen) Trick, wie man umfangreiche Datenaufbereitung elegant geregelt kriegt, klingt fast zu schön, um wahr zu sein (s. <a href="#fig-that-would-be-great" class="quarto-xref">Abbildung&nbsp;<span>4.1</span></a>).</p>
<div id="fig-that-would-be-great" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-that-would-be-great-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/thatwouldbegreat.jpg" class="img-fluid figure-img" style="width:50.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-that-would-be-great-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;4.1: Mach’s einfach <span class="citation" data-cites="imgflip_imageflip_2024">(<a href="references.html#ref-imgflip_imageflip_2024" role="doc-biblioref">imgflip, 2024</a>)</span>
</figcaption></figure>
</div>
<p>Der Trick besteht darin, komplexe Operationen in mehrere einfache Teilschritte zu zergliedern. (In gewisser Weise besteht das Wesen einer Analyse eben darin: die Zerlegung eines Objekts in seine Bestandteile.) Man könnte vom “Lego-Prinzip” sprechen, s. <a href="#fig-lego" class="quarto-xref">Abbildung&nbsp;<span>4.2</span></a>. Im linken Teil von <a href="#fig-lego" class="quarto-xref">Abbildung&nbsp;<span>4.2</span></a> sieht man ein (recht) komplexes Gebilde. Zerlegt man es aber in seine Einzelteile, so sind es deutlich einfachere geometrische Objekte wie Dreiecke oder Quadrate (rechter Teil des Diagramms).</p>
<div id="fig-lego" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-lego-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/Bausteine_dplyr_crop.png" class="img-fluid figure-img" style="width:75.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-lego-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;4.2: Das Lego-Prinzip <span class="citation" data-cites="sauer_moderne_2019">(<a href="references.html#ref-sauer_moderne_2019" role="doc-biblioref">Sauer, 2019</a>)</span>
</figcaption></figure>
</div>
<p>Damit Sie es selber einfach machen können, müssen Sie selber Hand anlegen. Importieren Sie daher den Datensatz <code>mariokart</code>, z.B. so:</p>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mariokart</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="va">mariokart_path</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Werfen wir einen Blick hinein (to glimpse):</p>
<div class="cell">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">mariokart</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="exm-datenjudo" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 4.2</strong></span> Sie arbeiten immer noch bei dem großen Online-Auktionshaus. Mittlerweile haben Sie sich den Ruf des “Datenguru” erworben. Vielleicht weil Sie behauptet haben, Data Science sei zu 80% Datenjudo, das hat irgendwie Eindruck geschindet… Naja, jedenfalls müssen Sie jetzt mal zeigen, dass Sie nicht nur schlaue Sprüche draufhaben, sondern auch die Daten ordentlich abbürsten können. Sie analysieren dafür im Folgenden den Datensatz <code>mariokart</code>. Na, dann los.<span class="math inline">\(\square\)</span></p>
</div>
</section></section><section id="die-verben-des-datenjudos" class="level2" data-number="4.3"><h2 data-number="4.3" class="anchored" data-anchor-id="die-verben-des-datenjudos">
<span class="header-section-number">4.3</span> Die Verben des Datenjudos</h2>
<p>Im R-Paket <code>dplyr</code>, das wiederum Teil des R-Pakets <code>tidyverse</code> ist, gibt es eine Reihe von R-Befehlen, die das Datenjudo in eine Handvoll einfacher Verben runterbrechen. (Falls Sie das R-Paket <code>tidyverse</code> noch nicht installiert haben sollten, wäre jetzt ein guter Zeitpunkt dafür.) Die wichtigsten Verben des Datenjudos schauen wir uns im Folgenden an.</p>
<p>Wir betrachten dazu im Folgenden einen einfachen (Spielzeug-)Datensatz, an dem wir zunächst die Verben des Datenjudos vorstellen, s. <a href="#tbl-datenjudo" class="quarto-xref">Tabelle&nbsp;<span>4.1</span></a>.</p>
<div class="cell">
<div id="tbl-datenjudo" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-datenjudo-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;4.1: Ein einfacher Datensatz von schlichtem Gemüt
</figcaption><div aria-describedby="tbl-datenjudo-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div id="xguoztcbly" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#xguoztcbly table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#xguoztcbly thead, #xguoztcbly tbody, #xguoztcbly tfoot, #xguoztcbly tr, #xguoztcbly td, #xguoztcbly th {
  border-style: none;
}

#xguoztcbly p {
  margin: 0;
  padding: 0;
}

#xguoztcbly .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#xguoztcbly .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#xguoztcbly .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#xguoztcbly .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#xguoztcbly .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xguoztcbly .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xguoztcbly .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xguoztcbly .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#xguoztcbly .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#xguoztcbly .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#xguoztcbly .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#xguoztcbly .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#xguoztcbly .gt_spanner_row {
  border-bottom-style: hidden;
}

#xguoztcbly .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#xguoztcbly .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#xguoztcbly .gt_from_md > :first-child {
  margin-top: 0;
}

#xguoztcbly .gt_from_md > :last-child {
  margin-bottom: 0;
}

#xguoztcbly .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#xguoztcbly .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#xguoztcbly .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#xguoztcbly .gt_row_group_first td {
  border-top-width: 2px;
}

#xguoztcbly .gt_row_group_first th {
  border-top-width: 2px;
}

#xguoztcbly .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xguoztcbly .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#xguoztcbly .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#xguoztcbly .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xguoztcbly .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xguoztcbly .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#xguoztcbly .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#xguoztcbly .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#xguoztcbly .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xguoztcbly .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xguoztcbly .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xguoztcbly .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xguoztcbly .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xguoztcbly .gt_left {
  text-align: left;
}

#xguoztcbly .gt_center {
  text-align: center;
}

#xguoztcbly .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#xguoztcbly .gt_font_normal {
  font-weight: normal;
}

#xguoztcbly .gt_font_bold {
  font-weight: bold;
}

#xguoztcbly .gt_font_italic {
  font-style: italic;
}

#xguoztcbly .gt_super {
  font-size: 65%;
}

#xguoztcbly .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#xguoztcbly .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#xguoztcbly .gt_indent_1 {
  text-indent: 5px;
}

#xguoztcbly .gt_indent_2 {
  text-indent: 10px;
}

#xguoztcbly .gt_indent_3 {
  text-indent: 15px;
}

#xguoztcbly .gt_indent_4 {
  text-indent: 20px;
}

#xguoztcbly .gt_indent_5 {
  text-indent: 25px;
}

#xguoztcbly .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#xguoztcbly div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="gt_table do-not-create-environment cell caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="header gt_col_headings">
<th id="id" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">id</th>
<th id="name" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">name</th>
<th id="gruppe" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">gruppe</th>
<th id="note" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">note</th>
</tr></thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="id">1</td>
<td class="gt_row gt_left" headers="name">Anni</td>
<td class="gt_row gt_left" headers="gruppe">A</td>
<td class="gt_row gt_right" headers="note">2.7</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="id">2</td>
<td class="gt_row gt_left" headers="name">Berti</td>
<td class="gt_row gt_left" headers="gruppe">A</td>
<td class="gt_row gt_right" headers="note">2.7</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="id">3</td>
<td class="gt_row gt_left" headers="name">Charli</td>
<td class="gt_row gt_left" headers="gruppe">B</td>
<td class="gt_row gt_right" headers="note">1.7</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</figure>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Wichtig
</div>
</div>
<div class="callout-body-container callout-body">
<p>Die Verben des Datenjudos wohnen im Paket <code>dpylr</code>, welches gestartet wird, wenn Sie <code><a href="https://tidyverse.tidyverse.org">library(tidyverse)</a></code> eingeben. Falls Sie vergessen , das Paket <code>tidyverse</code> zu starten, dann funktionieren diese Befehle nicht.<span class="math inline">\(\square\)</span></p>
</div>
</div>
<!-- :::{.callout-note} -->
<!-- Zur Erinnerung: In RStudio können Sie per Klick auf das kleine Tabellen-Icon im Bereich *Environment* die Tabellenansicht einer Tabelle öffnen, s. @sec-viewtab. $\square$ -->
<!-- ::: -->
<section id="tabelle-sortieren-arrange" class="level3" data-number="4.3.1"><h3 data-number="4.3.1" class="anchored" data-anchor-id="tabelle-sortieren-arrange">
<span class="header-section-number">4.3.1</span> Tabelle sortieren: <code>arrange</code>
</h3>
<p><em>Sortieren</em> der Zeilen ist eine einfache, aber häufige Tätigkeit des Datenjudos, s. <a href="#fig-arrange" class="quarto-xref">Abbildung&nbsp;<span>4.3</span></a>.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-arrange" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-arrange-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="030-aufbereiten_files/figure-html/fig-arrange-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-arrange-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;4.3: Sinnbild für das Sortieren einer Tabelle mit <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code>
</figcaption></figure>
</div>
</div>
</div>
<div id="exm-arrange1" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 4.3 (Was sind die höchsten Preise?)</strong></span> Sie wollen mal locker anfangen. Daher stellen Sie sich folgende Frage: Was sind denn eigentlich die höchsten Preise, für die das Spiel <em>Mariokart</em> über den Online-Ladentisch geht? Die Spalte des Verkaufspreis heißt offenbar <code>total_pr</code> (s. Tabelle <code>mariokart</code>). In Excel kann die Spalte, nach der man die Tabelle sortieren möchte, einfach anklicken. Ob das in R auch so einfach geht? Die Funktion <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> macht es uns ziemlich einfach, s. tbl-arrange.</p>
<p>Die Funktion <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> macht es uns ziemlich einfach, s. tbl-arrange-pdf.</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">mariokart</span>, <span class="va">total_pr</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="tbl-arrange" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-arrange-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;4.2: Die Datentabelle, soritert nach <code>total_pr</code>
</figcaption><div aria-describedby="tbl-arrange-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 8%">
<col style="width: 7%">
<col style="width: 8%">
<col style="width: 6%">
<col style="width: 4%">
<col style="width: 8%">
<col style="width: 7%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 6%">
</colgroup>
<thead><tr class="header">
<th style="text-align: right;">rownames</th>
<th style="text-align: right;">id</th>
<th style="text-align: right;">duration</th>
<th style="text-align: right;">n_bids</th>
<th style="text-align: left;">cond</th>
<th style="text-align: right;">start_pr</th>
<th style="text-align: right;">ship_pr</th>
<th style="text-align: right;">total_pr</th>
<th style="text-align: left;">ship_sp</th>
<th style="text-align: right;">seller_rate</th>
<th style="text-align: left;">stock_photo</th>
<th style="text-align: right;">wheels</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">52</td>
<td style="text-align: right;">2.6e+11</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">17</td>
<td style="text-align: left;">used</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">29</td>
<td style="text-align: left;">standard</td>
<td style="text-align: right;">4982</td>
<td style="text-align: left;">yes</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">62</td>
<td style="text-align: right;">1.2e+11</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">12</td>
<td style="text-align: left;">used</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">30</td>
<td style="text-align: left;">standard</td>
<td style="text-align: right;">7284</td>
<td style="text-align: left;">yes</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">21</td>
<td style="text-align: right;">2.6e+11</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">used</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">31</td>
<td style="text-align: left;">standard</td>
<td style="text-align: right;">4982</td>
<td style="text-align: left;">yes</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">32</td>
<td style="text-align: right;">3.2e+11</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">14</td>
<td style="text-align: left;">used</td>
<td style="text-align: right;">1.99</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">31</td>
<td style="text-align: left;">media</td>
<td style="text-align: right;">166</td>
<td style="text-align: left;">yes</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">60</td>
<td style="text-align: right;">1.8e+11</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">used</td>
<td style="text-align: right;">30.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">31</td>
<td style="text-align: left;">priority</td>
<td style="text-align: right;">19</td>
<td style="text-align: left;">no</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">95</td>
<td style="text-align: right;">1.1e+11</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">16</td>
<td style="text-align: left;">used</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">31</td>
<td style="text-align: left;">standard</td>
<td style="text-align: right;">7284</td>
<td style="text-align: left;">yes</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>Übersetzen wir die R-Syntax ins Deutsche:</p>
<pre><code>Hey R,
arrangiere (sortiere) `mariokart` nach der Spalte `total_pr`.</code></pre>
<p>Gar nicht so schwer.<span class="math inline">\(\square\)</span></p>
</div>
<p>Übrigens wird in <code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code> per Voreinstellung aufsteigend sortiert. Setzt man ein Minus vor der zu sortierenden Spalte, wird umgekehrt, also <em>absteigend</em> sortiert:</p>
<div class="cell">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mario_sortiert</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">mariokart</span>, <span class="op">-</span><span class="va">total_pr</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="exr-arrange2" class="theorem exercise">
<p><span class="theorem-title"><strong>Übungsaufgabe 4.2</strong></span> Sortieren Sie die Mariokart-Daten absteigend nach der Anzahl der beigelegten Lenkräder.<span class="math inline">\(\square\)</span></p>
</div>
</section><section id="zeilen-filtern-filter" class="level3" data-number="4.3.2"><h3 data-number="4.3.2" class="anchored" data-anchor-id="zeilen-filtern-filter">
<span class="header-section-number">4.3.2</span> Zeilen filtern: <code>filter</code>
</h3>
<section id="nur-bestimmte-zeilen-behalten" class="level4" data-number="4.3.2.1"><h4 data-number="4.3.2.1" class="anchored" data-anchor-id="nur-bestimmte-zeilen-behalten">
<span class="header-section-number">4.3.2.1</span> Nur bestimmte Zeilen behalten</h4>
<p>Zeilen <em>filtern</em> bedeutet, dass man nur <em>bestimmte</em> <em>Zeilen</em> (Beobachtungen) <em>behalten</em> möchte, die restlichen Zeilen brauchen wir nicht, weg mit ihnen. Wir haben also ein Filterkriterium im Kopf, anhand dessen wir die Tabelle filern, s. <a href="#fig-filter" class="quarto-xref">Abbildung&nbsp;<span>4.4</span></a>.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-filter" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-filter-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="030-aufbereiten_files/figure-html/fig-filter-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-filter-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;4.4: Sinnbild für das Filtern einer Tabelle mit <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code>
</figcaption></figure>
</div>
</div>
</div>
<div id="exm-filter" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 4.4 (Ob ein Foto für den Verkaufspreis nützlich ist?)</strong></span> Als nächstes kommt Ihnen die Idee, mal zu schauen, ob Auktionen mit Photo der Ware einen höheren Verkaufspreis erzielen als Auktionen ohne Photo.</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mariokart_neu</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">mariokart</span>, <span class="va">stock_photo</span> <span class="op">==</span> <span class="st">"yes"</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mariokart_neu</span> </span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 8%">
<col style="width: 7%">
<col style="width: 8%">
<col style="width: 6%">
<col style="width: 4%">
<col style="width: 8%">
<col style="width: 7%">
<col style="width: 8%">
<col style="width: 10%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 6%">
</colgroup>
<thead><tr class="header">
<th style="text-align: right;">rownames</th>
<th style="text-align: right;">id</th>
<th style="text-align: right;">duration</th>
<th style="text-align: right;">n_bids</th>
<th style="text-align: left;">cond</th>
<th style="text-align: right;">start_pr</th>
<th style="text-align: right;">ship_pr</th>
<th style="text-align: right;">total_pr</th>
<th style="text-align: left;">ship_sp</th>
<th style="text-align: right;">seller_rate</th>
<th style="text-align: left;">stock_photo</th>
<th style="text-align: right;">wheels</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.5e+11</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">20</td>
<td style="text-align: left;">new</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">52</td>
<td style="text-align: left;">standard</td>
<td style="text-align: right;">1580</td>
<td style="text-align: left;">yes</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">2.6e+11</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">13</td>
<td style="text-align: left;">used</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">37</td>
<td style="text-align: left;">firstClass</td>
<td style="text-align: right;">365</td>
<td style="text-align: left;">yes</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">2.8e+11</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">18</td>
<td style="text-align: left;">new</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">44</td>
<td style="text-align: left;">standard</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">yes</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: right;">5</td>
<td style="text-align: right;">1.7e+11</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">20</td>
<td style="text-align: left;">new</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">71</td>
<td style="text-align: left;">media</td>
<td style="text-align: right;">820</td>
<td style="text-align: left;">yes</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6</td>
<td style="text-align: right;">3.6e+11</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">19</td>
<td style="text-align: left;">new</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">45</td>
<td style="text-align: left;">standard</td>
<td style="text-align: right;">270144</td>
<td style="text-align: left;">yes</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">7</td>
<td style="text-align: right;">1.2e+11</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">13</td>
<td style="text-align: left;">used</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">37</td>
<td style="text-align: left;">standard</td>
<td style="text-align: right;">7284</td>
<td style="text-align: left;">yes</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Sie filtern also die Tabelle so, dass <em>nur</em> diese Auktionen im Datensatz verbleiben, welche ein Photo haben, mit anderen Worten, Auktionen (Beobachtungen) bei denen gilt: <code>stock_photo == TRUE</code>.<span class="math inline">\(\square\)</span></p>
</div>
</section><section id="komplexeres-filtern" class="level4" data-number="4.3.2.2"><h4 data-number="4.3.2.2" class="anchored" data-anchor-id="komplexeres-filtern">
<span class="header-section-number">4.3.2.2</span> Komplexeres Filtern</h4>
<p>Angestachelt von Ihren Erfolgen möchten Sie jetzt komplexere Hypothesen prüfen: Ob wohl Auktionen von <em>neuen</em> Spielen und zwar <em>mit</em> Photo einen höheren Preis erzielen als die übrigen Auktionen?</p>
<p>Anders gesagt haben Sie zwei Filterkriterien im Blick: Neuheit <code>cond</code> und Photo <code>stock_photo</code>. Nur diejenigen Auktionen, die <em>sowohl</em> Neuheit <em>als auch</em> Photo erfüllen, möchten Sie näher untersuchen (Filtern mit dem logischen UND):</p>
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mario_filter1</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">mariokart</span>,  <span class="co"># "&amp;" heißt UND:</span></span>
<span>         <span class="va">stock_photo</span> <span class="op">==</span> <span class="st">"yes"</span> <span class="op">&amp;</span> <span class="va">cond</span> <span class="op">==</span> <span class="st">"new"</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mario_filter1</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 8%">
<col style="width: 7%">
<col style="width: 8%">
<col style="width: 6%">
<col style="width: 4%">
<col style="width: 8%">
<col style="width: 7%">
<col style="width: 8%">
<col style="width: 9%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 6%">
</colgroup>
<thead><tr class="header">
<th style="text-align: right;">rownames</th>
<th style="text-align: right;">id</th>
<th style="text-align: right;">duration</th>
<th style="text-align: right;">n_bids</th>
<th style="text-align: left;">cond</th>
<th style="text-align: right;">start_pr</th>
<th style="text-align: right;">ship_pr</th>
<th style="text-align: right;">total_pr</th>
<th style="text-align: left;">ship_sp</th>
<th style="text-align: right;">seller_rate</th>
<th style="text-align: left;">stock_photo</th>
<th style="text-align: right;">wheels</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.5e+11</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">20</td>
<td style="text-align: left;">new</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">52</td>
<td style="text-align: left;">standard</td>
<td style="text-align: right;">1580</td>
<td style="text-align: left;">yes</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: right;">2.8e+11</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">18</td>
<td style="text-align: left;">new</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">44</td>
<td style="text-align: left;">standard</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">yes</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: right;">1.7e+11</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">20</td>
<td style="text-align: left;">new</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">71</td>
<td style="text-align: left;">media</td>
<td style="text-align: right;">820</td>
<td style="text-align: left;">yes</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: right;">3.6e+11</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">19</td>
<td style="text-align: left;">new</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">45</td>
<td style="text-align: left;">standard</td>
<td style="text-align: right;">270144</td>
<td style="text-align: left;">yes</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">8</td>
<td style="text-align: right;">3.0e+11</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">new</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">54</td>
<td style="text-align: left;">upsGround</td>
<td style="text-align: right;">4858</td>
<td style="text-align: left;">yes</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: right;">11</td>
<td style="text-align: right;">2.9e+11</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">new</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">55</td>
<td style="text-align: left;">upsGround</td>
<td style="text-align: right;">4858</td>
<td style="text-align: left;">yes</td>
<td style="text-align: right;">2</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Hm. Was ist mit den Auktionen, die <em>entweder</em> über ein Photo verfügen <em>oder auch</em> neu sind, oder beides (Filtern mit dem logischen ODER)?</p>
<div class="cell">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mario_filter2</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">mariokart</span>,  <span class="co"># "|" heißt ODER:</span></span>
<span>         <span class="va">stock_photo</span> <span class="op">==</span> <span class="st">"yes"</span> <span class="op">|</span> <span class="va">cond</span> <span class="op">==</span> <span class="st">"new"</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mario_filter2</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 8%">
<col style="width: 7%">
<col style="width: 8%">
<col style="width: 6%">
<col style="width: 4%">
<col style="width: 8%">
<col style="width: 7%">
<col style="width: 8%">
<col style="width: 10%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 6%">
</colgroup>
<thead><tr class="header">
<th style="text-align: right;">rownames</th>
<th style="text-align: right;">id</th>
<th style="text-align: right;">duration</th>
<th style="text-align: right;">n_bids</th>
<th style="text-align: left;">cond</th>
<th style="text-align: right;">start_pr</th>
<th style="text-align: right;">ship_pr</th>
<th style="text-align: right;">total_pr</th>
<th style="text-align: left;">ship_sp</th>
<th style="text-align: right;">seller_rate</th>
<th style="text-align: left;">stock_photo</th>
<th style="text-align: right;">wheels</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.5e+11</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">20</td>
<td style="text-align: left;">new</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">4.0</td>
<td style="text-align: right;">52</td>
<td style="text-align: left;">standard</td>
<td style="text-align: right;">1580</td>
<td style="text-align: left;">yes</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">2.6e+11</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">13</td>
<td style="text-align: left;">used</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">4.0</td>
<td style="text-align: right;">37</td>
<td style="text-align: left;">firstClass</td>
<td style="text-align: right;">365</td>
<td style="text-align: left;">yes</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">3.2e+11</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">16</td>
<td style="text-align: left;">new</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">3.5</td>
<td style="text-align: right;">46</td>
<td style="text-align: left;">firstClass</td>
<td style="text-align: right;">998</td>
<td style="text-align: left;">no</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: right;">2.8e+11</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">18</td>
<td style="text-align: left;">new</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">44</td>
<td style="text-align: left;">standard</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">yes</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: right;">1.7e+11</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">20</td>
<td style="text-align: left;">new</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">71</td>
<td style="text-align: left;">media</td>
<td style="text-align: right;">820</td>
<td style="text-align: left;">yes</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: right;">3.6e+11</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">19</td>
<td style="text-align: left;">new</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: right;">4.0</td>
<td style="text-align: right;">45</td>
<td style="text-align: left;">standard</td>
<td style="text-align: right;">270144</td>
<td style="text-align: left;">yes</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Zur Erinnerung: Logische Operatoren sind in <a href="020-R.html#sec-logic" class="quarto-xref"><span>Kapitel 3.9</span></a> erläutert.</p>
<div id="exr-hyps-filter" class="theorem exercise">
<p><span class="theorem-title"><strong>Übungsaufgabe 4.3</strong></span> Hier könnte man noch viele interessante Hypothesen prüfen, denken Sie sich und tun das auch. <span class="math inline">\(\square\)</span></p>
</div>
<div id="exr-filter2" class="theorem exercise">
<p><span class="theorem-title"><strong>Übungsaufgabe 4.4</strong></span> Filtern Sie die Spiele mit nur einem Lenkrad und ohne Versandkosten.<span class="math inline">\(\square\)</span></p>
</div>
<div id="exr-filter3" class="theorem exercise">
<p><span class="theorem-title"><strong>Übungsaufgabe 4.5</strong></span> Filtern Sie die Spiele mit nur einem Lenkrad, die einen überdurchschnittlichen Verkaufspreis erzielen. Tipp: Nutzen Sie die Funktion <code>describe_distribution</code>, um den Mittelwert einer Variable des Datensatzes zu erfahren (diese Funktion wohnt im R-Paket <code>easystats</code>). <span class="math inline">\(\square\)</span></p>
</div>
</section></section><section id="spalten-auswählen-mit-select" class="level3" data-number="4.3.3"><h3 data-number="4.3.3" class="anchored" data-anchor-id="spalten-auswählen-mit-select">
<span class="header-section-number">4.3.3</span> Spalten auswählen mit <code>select</code>
</h3>
<p>Eine Tabelle mit vielen Spalten kann schnell unübersichtlich werden. Da lohnt es sich, eine alte goldene Regel zu beachten: Mache die Dinge so einfach wie möglich, aber nicht einfacher. Wählen wir also <em>nur</em> die Spalten aus, die uns interessieren und entfernen wir die restlichen, s. <a href="#fig-select" class="quarto-xref">Abbildung&nbsp;<span>4.5</span></a>.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-select" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-select-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="030-aufbereiten_files/figure-html/fig-select-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-select-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;4.5: Sinnbild für das Auswählen von Spalten mit <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code>
</figcaption></figure>
</div>
</div>
</div>
<div id="exm-select" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 4.5 (Fokus auf nur zwei Spalten)</strong></span> Ob wohl gebrauchte Spiele deutlich geringere Preise erzielen im Vergleich zu neuwertigen Spielen? Sie entschließen sich, mal ein Stündchen auf die relevanten Daten zu starren.</p>
<div class="cell">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mario_select1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mariokart</span>, <span class="va">cond</span>, <span class="va">total_pr</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Aha (?)<span class="math inline">\(\square\)</span></p>
</div>
<p>Der Befehl <code>select</code> erwartet als Input eine Tabelle und gibt (als Output) eine Tabelle zurück – genau wie die meisten anderen Befehle des Datenjudos. Auch wenn Sie nur eine Spalte auswählen, bleibt es eine Tabelle, eben eine Tabelle mit nur einer Spalte.</p>
<p><code>select</code> erlaubt Komfort; Sie können Spalten auf mehrere Arten auswählen, z.B.</p>
<div class="cell">
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mariokart</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>  <span class="co"># Spalte 1 und 2</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mariokart</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span>  <span class="co">#  Spalten 2 *bis* 5 </span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mariokart</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span>  <span class="co"># Alle Spalte *aber nicht* Spalte 1</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="exr-select" class="theorem exercise">
<p><span class="theorem-title"><strong>Übungsaufgabe 4.6</strong></span> Wählen Sie die Spalten <code>total_pr</code>, <code>cond</code> sowie die zweite Spalte der Tabelle <code>mariokart</code> aus!<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> <span class="math inline">\(\square\)</span></p>
</div>
<p>Vertiefte Informationen zum Auswählen von Spalten mit <code>select</code> findet sich <a href="https://tidyr.tidyverse.org/reference/tidyr_tidy_select.html">hier</a>.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></p>
</section><section id="spalten-zu-einer-zahl-zusammenfassen-mit-summarise" class="level3" data-number="4.3.4"><h3 data-number="4.3.4" class="anchored" data-anchor-id="spalten-zu-einer-zahl-zusammenfassen-mit-summarise">
<span class="header-section-number">4.3.4</span> Spalten zu einer Zahl zusammenfassen mit <code>summarise</code>
</h3>
<p>So eine lange Spalte mit Zahlen – mal ehrlich: wer blickt da schon durch? Viel besser wäre es doch, die Spalte <code>total_pr</code> zu einer Zahl zusammenzufassen, das ist doch viel handlicher. Kurz entschlossen fassen Sie die Spalte <code>total_pr</code>, den Verkaufspreis, zum Mittelwert zusammen, s. <a href="#fig-summarise" class="quarto-xref">Abbildung&nbsp;<span>4.6</span></a>.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-summarise" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-summarise-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="030-aufbereiten_files/figure-html/fig-summarise-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-summarise-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;4.6: Spalten zu einer einzelnen Zahl zusammenfassen mit <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code>
</figcaption></figure>
</div>
</div>
</div>
<div id="exm-summarise" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 4.6 (Was ist der mittlere Verkaufspreis?)</strong></span> Mit <code>summarise</code>, s. <a href="#lst-summarise" class="quarto-xref">Listing&nbsp;<span>4.1</span></a>, können wir den mittleren Verkaufspreis der Mariokart-Spiele berechnen.</p>
<div class="cell">
<div id="lst-summarise" class="r cell-code listing quarto-float quarto-figure quarto-figure-left anchored">
<figure class="quarto-float quarto-float-lst figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-summarise-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Listing&nbsp;4.1: Die R-Funktion summarise fasst einen Vektor z u einer Zahl zusammen
</figcaption><div aria-describedby="lst-summarise-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-summarise"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mariokart_mittelwert</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span><span class="va">mariokart</span>,</span>
<span>                                  preis_mw <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">total_pr</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">mariokart_mittelwert</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</figure>
</div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: right;">preis_mw</th>
</tr></thead>
<tbody><tr class="odd">
<td style="text-align: right;">50</td>
</tr></tbody>
</table>
</div>
</div>
<p>Aha! Etwa 50€ erzielt so eine Auktion im Schnitt.<span class="math inline">\(\square\)</span></p>
</div>
<p>Übersetzen wir <a href="#lst-summarise" class="quarto-xref">Listing&nbsp;<span>4.1</span></a> vom Errischen ins Deutsche:</p>
<blockquote class="blockquote">
<p><span>🧑‍🎓</span> Hey R, fasse die Zeilen von <code>total_pr</code> aus <code>mariokart</code> zu einer Zahl zusammen, und zwar mit Hilfe des Mittelwerts. Die resultierende Tabelle nennen wir <code>mariokart_mittelwert</code>, sehr kreativ. Und die resultierende Spalte, die einzige in <code>mariokart_mittelwert</code>, nennen wir <code>preis_mw</code>.</p>
</blockquote>
<p>Ein bisschen abstrakter gesprochen, fasst <code>summarise</code> also eine <em>Spalte</em> zu einer (einzelnen) <em>Zahl</em> zusammen, s. <a href="#eq-desk-summ" class="quarto-xref">Gleichung&nbsp;<span>4.1</span></a>.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hinweis
</div>
</div>
<div class="callout-body-container callout-body">
<p>Eine Alternative, um eine Spalte zu einer Zahl zusammenzufassen, bietet der “Dollar-Operator” (<code>$</code>): <code>mean(mariokart$total_pr)</code>. Der Dollar-Operator trennt hier die Tabelle von der Spalte: <code>tibble$spalte</code>. Im Gegensatz zu den Verben des Tidyverse (die immer einer Tabelle zurückliefern), liefert der Dollar-Operator einen Vektor (Spalte) zurück. (Diese wird von <code>mean</code> dann zu einer einzelnen Zahl zusammengefasst.) <span class="math inline">\(\square\)</span></p>
</div>
</div>
<p><em>Auf welche Art</em> zusammengefasst werden soll, z.B. anhand des Mittelwerts oder Maximalwerts, muss noch zusätzlich innerhalb von <code>summarise</code> angegeben werden.</p>
<p><span id="eq-desk-summ"><span class="math display">\[\begin{array}{|c|} \hline \\ \hline \\  \\  \\ \\ \hline \end{array} \qquad \rightarrow  \qquad \begin{array}{|c|} \hline \\  \hline \end{array} \tag{4.1}\]</span></span></p>
<div id="exr-summarise" class="theorem exercise">
<p><span class="theorem-title"><strong>Übungsaufgabe 4.7</strong></span> Identifizieren Sie den höchsten Kaufpreis eines Mariokart-Spiels!<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> <span class="math inline">\(\square\)</span></p>
</div>
</section><section id="tabelle-gruppieren" class="level3" data-number="4.3.5"><h3 data-number="4.3.5" class="anchored" data-anchor-id="tabelle-gruppieren">
<span class="header-section-number">4.3.5</span> Tabelle gruppieren</h3>
<p>Es ist ja gut und schön, zu wissen, was so ein Spiel im Schnitt kostet. Aber viel interessanter wäre es doch, denken Sie sich, zu wissen, ob die neuen Spiele im Schnitt mehr kosten als die alten? Ob R Ihnen so etwas ausrechnen kann?</p>
<blockquote class="blockquote">
<p><span>🤖</span> Ich tue fast alles für dich. <span>🧡</span></p>
</blockquote>
<p>Also gut, R, dann gruppiere die Tabelle, s. <a href="#fig-group" class="quarto-xref">Abbildung&nbsp;<span>4.7</span></a>.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-group" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-group-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="030-aufbereiten_files/figure-html/fig-group-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-group-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;4.7: Gruppieren von Datensätzen mit <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code>
</figcaption></figure>
</div>
</div>
</div>
<p>Durch das Gruppieren wird die Tabelle in “Teiltabellen” – entsprechend der Gruppen – aufgeteilt. Das sieht man der R-Tabelle aber nicht wirklich an. Aber alle nachfolgenden Berechnungen werden <em>für jede Teiltabelle</em> einzeln ausgeführt.</p>
<div id="exm-groupby" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 4.7 (Mittlerer Preis pro Gruppe)</strong></span> Gruppieren alleine liefert Ihnen zwei (oder mehrere) Teiltabellen, etwa neue Spiele (Gruppe 1, <code>new</code>) vs.&nbsp;gebrauchte Spiele (Gruppe 2, <code>used</code>). Mit anderen Worten: Wir gruppieren anhand der Variable <code>cond</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mariokart_gruppiert</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">mariokart</span>, <span class="va">cond</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Wenn Sie die neue Tabelle betrachte, sehen Sie wenig Aufregendes, nur einen Hinweis, dass die Tabelle gruppiert ist. Jetzt können Sie an jeder Teiltabelle Ihre weiteren Berechnungen vornehmen, etwa die Berechnung des mittleren Verkaufspreises.</p>
<div class="cell">
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span><span class="va">mariokart_gruppiert</span>, preis_mw <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">total_pr</span><span class="op">)</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">cond</th>
<th style="text-align: right;">preis_mw</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">new</td>
<td style="text-align: right;">54</td>
</tr>
<tr class="even">
<td style="text-align: left;">used</td>
<td style="text-align: right;">47</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Langsam fühlen Sie sich als Datenchecker … <span>🥷 🦹‍♀</span>] <span class="math inline">\(\square\)</span></p>
</div>
<div id="exr-groupby" class="theorem exercise">
<p><span class="theorem-title"><strong>Übungsaufgabe 4.8</strong></span> &nbsp;</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">Aufgabe</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Lösung</a></li>
</ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>Berechnen Sie den mittleren und maximalen Verkaufspreis getrennt für Spiele mit und ohne Foto!</p>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mariokart_gruppiert_foto</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">mariokart</span>, <span class="va">stock_photo</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mariokart_verkaufspreis_foto</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span><span class="va">mariokart_gruppiert_foto</span>,</span>
<span>            total_pr_avg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">total_pr</span><span class="op">)</span>,</span>
<span>            total_pr_max <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">total_pr</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mariokart_verkaufspreis_foto</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">stock_photo</th>
<th style="text-align: right;">total_pr_avg</th>
<th style="text-align: right;">total_pr_max</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">no</td>
<td style="text-align: right;">54</td>
<td style="text-align: right;">327</td>
</tr>
<tr class="even">
<td style="text-align: left;">yes</td>
<td style="text-align: right;">48</td>
<td style="text-align: right;">75</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section id="spalten-verändern-mit-mutate" class="level3" data-number="4.3.6"><h3 data-number="4.3.6" class="anchored" data-anchor-id="spalten-verändern-mit-mutate">
<span class="header-section-number">4.3.6</span> Spalten verändern mit <code>mutate</code>
</h3>
<p>Immer mal wieder möchte man <em>Spalten verändern</em>, bzw. deren Werte umrechnen, s. <a href="#fig-mutate" class="quarto-xref">Abbildung&nbsp;<span>4.8</span></a>.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-mutate" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-mutate-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="030-aufbereiten_files/figure-html/fig-mutate-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mutate-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;4.8: Spalten verändern/neu berechnen mit <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>
</figcaption></figure>
</div>
</div>
</div>
<div id="exm-mutate" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 4.8</strong></span> Der Hersteller des Computerspiels <em>Mariokart</em> kommt aus Japan; daher erscheint es Ihnen opportun für ein anstehendes Meeting mit dem Hersteller die Verkaufspreise von Dollar in japanische Yen umzurechnen. Nach etwas Googeln finden Sie einen Umrechnungskurs von 1:133.</p>
<div class="cell">
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mariokart_yen</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="va">mariokart</span>, total_pr_yen <span class="op">=</span> <span class="va">total_pr</span> <span class="op">*</span> <span class="fl">133</span><span class="op">)</span></span>
<span><span class="va">mariokart_yen</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mariokart_yen</span>, <span class="va">total_pr_yen</span>, <span class="va">total_pr</span><span class="op">)</span></span>
<span><span class="va">mariokart_yen</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>  <span class="co"># nur die ersten paar Zeilen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: right;">total_pr_yen</th>
<th style="text-align: right;">total_pr</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">6856</td>
<td style="text-align: right;">52</td>
</tr>
<tr class="even">
<td style="text-align: right;">4926</td>
<td style="text-align: right;">37</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6052</td>
<td style="text-align: right;">46</td>
</tr>
<tr class="even">
<td style="text-align: right;">5852</td>
<td style="text-align: right;">44</td>
</tr>
<tr class="odd">
<td style="text-align: right;">9443</td>
<td style="text-align: right;">71</td>
</tr>
<tr class="even">
<td style="text-align: right;">5985</td>
<td style="text-align: right;">45</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Sicherlich werden Sie Ihre Gesprächspartner schwer beeindrucken.<span class="math inline">\(\square\)</span></p>
</div>
<p>Mit <code>mutate</code> berechnen Sie eine Spalte <code>x</code> (in einer Tabelle) neu. Die Funktion, die Sie in <code>mutate</code> benennen wird für jede Zeile der Spalte <code>x</code> angewendet.</p>
<div id="exm-mutate2" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 4.9 (Beispiele für Funktionen für <code>mutate</code>)</strong></span> <code>mutate</code> eignet sich, z.B. um Spalten zu addieren, zu multiplizieren oder sonstwie zu transformieren (z.B. den Logarithmus anwenden oder den Mittelwert der Spalte von jeder Zeile abziehen). <span class="math inline">\(\square\)</span></p>
</div>
<div id="exr-mutate" class="theorem exercise">
<p><span class="theorem-title"><strong>Übungsaufgabe 4.9</strong></span> &nbsp;</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Aufgabe</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Lösung</a></li>
</ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<p>Rechnen Sie die Dauer der Auktionen von Tagen in Wochen um.</p>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mariokart_duration_wochen</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="va">mariokart</span>, duration_week <span class="op">=</span> <span class="va">duration</span> <span class="op">/</span> <span class="fl">7</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mariokart_duration_wochen</span> <span class="op">&lt;-</span></span>
<span>   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mariokart_duration_wochen</span>, <span class="va">duration</span>, <span class="va">duration_week</span><span class="op">)</span></span>
<span><span class="va">mariokart_duration_wochen</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span>  <span class="co"># nur die ersten paar Zeilen</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: right;">duration</th>
<th style="text-align: right;">duration_week</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">0.43</td>
</tr>
<tr class="even">
<td style="text-align: right;">7</td>
<td style="text-align: right;">1.00</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">0.43</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">0.43</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.14</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">0.43</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="exr-mutate2" class="theorem exercise">
<p><span class="theorem-title"><strong>Übungsaufgabe 4.10</strong></span> &nbsp;</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">Aufgabe</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Lösung</a></li>
</ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<p>Rechnen Sie wieder die Dauer der Auktionen von Tagen in Wochen um, aber runden Sie die Wochen auf ganze Wochen.</p>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="cell">
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mariokart_duration_wochen</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="va">mariokart</span>, duration_week <span class="op">=</span> <span class="va">duration</span> <span class="op">/</span> <span class="fl">7</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mariokart_duration_wochen_gerundet</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="va">mariokart_duration_wochen</span>, duration_week_gerundet <span class="op">=</span></span>
<span>           <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">duration_week</span>, digits <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mariokart_duration_wochen_schmal</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mariokart_duration_wochen_gerundet</span>, <span class="va">duration</span>, </span>
<span>         <span class="va">duration_week</span>, <span class="va">duration_week_gerundet</span><span class="op">)</span></span>
<span><span class="va">mariokart_duration_wochen_schmal</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: right;">duration</th>
<th style="text-align: right;">duration_week</th>
<th style="text-align: right;">duration_week_gerundet</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">0.43</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">7</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">0.43</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">0.43</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.14</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">0.43</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<blockquote class="blockquote">
<p><span>🧟‍♀️</span>️ Statistik, wann braucht man schon sowas!?</p>
</blockquote>
<blockquote class="blockquote">
<p><span>🤖</span> Eigentlich nur dann, wenn man die Fakten gut verstehen will, sonst nicht.</p>
</blockquote>
</section><section id="zeilen-zählen-mit-count" class="level3" data-number="4.3.7"><h3 data-number="4.3.7" class="anchored" data-anchor-id="zeilen-zählen-mit-count">
<span class="header-section-number">4.3.7</span> Zeilen zählen mit <code>count</code>
</h3>
<p>Arbeitet man mit nominalskalierten Daten, ist (fast) alles, was man tun kann, die entsprechenden Zeilen der Tabelle zu zählen: Man könnte z.B. fragen, wie viele neue und wie viele alte Spiele in der Tabelle (Dataframe) <code>mariokart</code> vorhanden sind.</p>
<div id="exm-count" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 4.10</strong></span> Nach der letzten Präsentation Ihrer Analyse hat Ihre Chefin gestöhnt: “Oh nein, alles so kompliziert. Statistik! Himmel hilf! Kann man das nicht einfacher machen?” Anstelle von irgendwelchen komplizierten Berechnungen (Mittelwert?) möchten Sie ihr beim nächsten Treffen nur zeigen, wie viele Computerspiele neu und wie viele gebraucht sind (in Ihrem Datensatz). Schlichte Häufigkeiten also. Hoffentlich ist Ihre Chefin nicht wieder überfordert…</p>
<div class="cell">
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mariocart_counted</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">mariokart</span>, <span class="va">cond</span><span class="op">)</span></span>
<span><span class="va">mariocart_counted</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">cond</th>
<th style="text-align: right;">n</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">new</td>
<td style="text-align: right;">59</td>
</tr>
<tr class="even">
<td style="text-align: left;">used</td>
<td style="text-align: right;">84</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Aha! Es gibt mehr gebrauchte als neue Spiele.<span class="math inline">\(\square\)</span></p>
</div>
<p>Jetzt könnte man noch den <em>Anteil</em> (engl. <em>proportion</em>) ergänzen: Welcher <em>Anteil</em> (der 143 Spiele in <code>mariokart</code>) ist neu, welcher gebraucht?</p>
<div class="cell">
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="va">mariocart_counted</span>, Anteil <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">cond</th>
<th style="text-align: right;">n</th>
<th style="text-align: right;">Anteil</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">new</td>
<td style="text-align: right;">59</td>
<td style="text-align: right;">0.41</td>
</tr>
<tr class="even">
<td style="text-align: left;">used</td>
<td style="text-align: right;">84</td>
<td style="text-align: right;">0.59</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="exr-count" class="theorem exercise">
<p><span class="theorem-title"><strong>Übungsaufgabe 4.11</strong></span> Zählen Sie Sie, wie viele Auktionen ein Foto enthalten.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> <span class="math inline">\(\square\)</span></p>
</div>
<div id="exr-count2" class="theorem exercise">
<p><span class="theorem-title"><strong>Übungsaufgabe 4.12</strong></span> Zählen Sie Sie, wie viele Auktionen ein Foto enthalten – innerhalb der gebrauchten Spiele und innerhalb der neuen Spiele. Anders gesagt: Teilen Sie den Datensatz sowohl nach Zustand als auch nach Foto auf und zählen Sie jeweils, wie viele Spiele/Auktionen in die jeweilige Gruppe gehören.<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a> <span class="math inline">\(\square\)</span></p>
</div>
</section><section id="fazit-verben-am-fließband" class="level3" data-number="4.3.8"><h3 data-number="4.3.8" class="anchored" data-anchor-id="fazit-verben-am-fließband">
<span class="header-section-number">4.3.8</span> Fazit: Verben am Fließband</h3>
<p>Die Befehle (“Verben”) des Tidyverse sind jeweils für einzelne, typische Aufgaben des Datenaufbereitens (“Datenjudo”) zuständig. Typischerweise erwarten diese Befehle eine Tabelle (<i class="fa-solid fa-table" aria-label="table"></i>) als Input und liefern eine Tabelle aus Output zurück, s. <a href="#fig-tbl-in-out" class="quarto-xref">Abbildung&nbsp;<span>4.9</span></a>.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-tbl-in-out" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-tbl-in-out-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>
<pre class="mermaid mermaid-js" data-label="fig-tbl-in-out">flowchart LR
  A["▥"] --&gt; B[tidyverse-Befehl] --&gt; C["▥"] 
</pre>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-tbl-in-out-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;4.9: Tidyverse-Befehle erwarten normalerweise eine Tabelle (tibble) als Input und geben auch eine Tabelle zurück als Output
</figcaption></figure>
</div>
</div>
</div>
</section></section><section id="sec-pipe" class="level2" data-number="4.4"><h2 data-number="4.4" class="anchored" data-anchor-id="sec-pipe">
<span class="header-section-number">4.4</span> Die Pfeife</h2>
<p><span>🚬 👈</span>Das ist keine Pfeife, wie René Magritte 1929 in seinem <a href="https://en.wikipedia.org/wiki/File:MagrittePipe.jpg">berühmten Bild</a> schrieb, s. <a href="#fig-pfeifen" class="quarto-xref">Abbildung&nbsp;<span>4.10</span></a>.<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a></p>
<div id="fig-pfeifen" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-pfeifen-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>

</div>
<div class="quarto-layout-panel" data-layout-ncol="4">
<div class="quarto-layout-row">
<div class="column quarto-layout-cell" style="flex-basis: 41.7%;justify-content: center;">
<p><img src="img/800px-Pipa_savinelli.jpg" class="img-fluid figure-img"></p>
</div>
<div class="column quarto-layout-cell" style="flex-basis: 8.3%;justify-content: flex-start;">
<!-- Empty col -->
</div>
<div class="column quarto-layout-cell" style="flex-basis: 25.0%;justify-content: flex-start;">
<div class="xlarge">
<p>%&gt;%</p>
</div>
</div>
<div class="column quarto-layout-cell" style="flex-basis: 25.0%;justify-content: flex-start;">
<div class="xlarge">
<p>|&gt;</p>
</div>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-pfeifen-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;4.10: So sieht die Pfeife in R aus (Jaja, das ist keine Pfeife, sondern ein Symbol einer Pfeife…). Links: Ein <em>Bild</em> einer Pfeife. Mitte und Rechts: Die zwei R-Symbole für eine “Pfeife” (pipe).
</figcaption></figure>
</div>
<section id="russische-puppen" class="level3" data-number="4.4.1"><h3 data-number="4.4.1" class="anchored" data-anchor-id="russische-puppen">
<span class="header-section-number">4.4.1</span> Russische Puppen</h3>
<p>Computerbefehle, und im Speziellen R-Befehle kann man “aufeinander” – oder vielmehr: ineinander – stapeln, so ähnlich wie eine russische Puppe (vgl. <a href="020-R.html#sec-first-fun" class="quarto-xref"><span>Kapitel 3.7.3</span></a>). Schauen wir uns das in einem Beispiel an. Dazu definieren wir zuerst einen Vektor <code>x</code> aus drei Zahlen:</p>
<div class="cell">
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Und dann kommt unser verschachtelter Befehl:</p>
<div class="cell">
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">x</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">## [1] 0</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Wie schon erwähnt, arbeitet R so einen “verschachtelten” Befehl <em>von innen nach außen</em> ab:</p>
<p>Start: <code>sum(x - mean(x))</code></p>
<p><span>⬇️</span> </p>
<p>Schritt 1: <code>sum(x - 2)</code></p>
<p><span>⬇️</span> </p>
<p>Schritt 2: <code>sum(-1, 0, 1)</code></p>
<p><span>⬇️</span> </p>
<p>Schritt 3: <code>0</code>. Fertig. Puh. Kompliziert.</p>
<p>Soweit kann man noch einigermaßen folgen. Aber das Verschachteln kann man noch extremer machen, dann wird’s wild. Schauen Sie sich mal folgende (Pseudo-)Syntax an:</p>
<div id="lst-schachtel" class="r listing quarto-float quarto-figure quarto-figure-left anchored">
<figure class="quarto-float quarto-float-lst figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-schachtel-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Listing&nbsp;4.2: Eine wild verschachtelte Sequenz von R-Befehlen
</figcaption><div aria-describedby="lst-schachtel-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-schachtel"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">fasse_zusammen</span><span class="op">(</span></span>
<span>  <span class="fu">gruppiere</span><span class="op">(</span></span>
<span>    <span class="fu">wähle_spalten</span><span class="op">(</span></span>
<span>      <span class="fu">filter_zeilen</span><span class="op">(</span><span class="va">meine_daten</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</figure>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Vorsicht
</div>
</div>
<div class="callout-body-container callout-body">
<p>Ein beliebter Fehler ist es übrigens, nicht die richtige Zahl an schließenden Klammern hinzuschreiben, z.B. <code>d(c(b(a(meine_daten))</code> FALSCHE ZAHL AN KLAMMERN. <span class="math inline">\(\square\)</span></p>
</div>
</div>
</section><section id="die-pfeife-zur-rettung" class="level3" data-number="4.4.2"><h3 data-number="4.4.2" class="anchored" data-anchor-id="die-pfeife-zur-rettung">
<span class="header-section-number">4.4.2</span> Die Pfeife zur Rettung</h3>
<p><a href="#lst-schachtel" class="quarto-xref">Listing&nbsp;<span>4.2</span></a> ist schon harter Tobak, was für echte Fans. Wäre es nicht einfacher, man könnte <a href="#lst-schachtel" class="quarto-xref">Listing&nbsp;<span>4.2</span></a> wie folgt schreiben:</p>
<pre><code>Nimm "meine_daten" *und dann*
  filter gewünschte Zeilen *und dann*
  wähle gewünschte Spalten *und dann*
  teile in Subgruppen *und dann*
  fasse sie zusammen.</code></pre>
<div id="def-pipe" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 4.2 (Pfeife)</strong></span> “Und dann” heißt auf Errisch <code>%&gt;%</code> oder <code>|&gt;</code>. Man nennt diesen Befehl “Pfeife” (engl. <em>pipe</em>). <span class="math inline">\(\square\)</span></p>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hinweis
</div>
</div>
<div class="callout-body-container callout-body">
<p>Der Befehl <code>%&gt;%</code> <em>verknüpft</em> Befehle. Der Shortcut für diesen Befehl ist Strg-Shift-M. Die Pfeife <code>%&gt;%</code> “wohnt” im Paket <code>tidyverse</code>.<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a></p>
</div>
</div>
<p>Mittlerweile (Seit R 4.1) ist auch im Standard-R eine Pfeife eingebaut. die sieht so aus: <code>|&gt;</code>. Die eingebaute Pfeife funktioniert praktisch gleich zur anderen Pfeife <code>%&gt;%</code>, hat aber den Vorteil, dass Sie nicht <code>tidyverse</code> starten müssen. Da wir <code>tidyverse</code> aber sowieso praktisch immer starten werden, bringt es uns keinen Vorteil, die neuere Pfeife des Standard-R <code>|&gt;</code> zu verwenden. Aber auch keinen Nachteil. Unter <em>Tools &gt; Global Options…</em> können Sie einstellen, dass der Shortcut Strg-Shift-M die eingebaute Pfeife verwendet.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-out-width="100%" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-pfeife" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-pfeife-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>
<pre class="mermaid mermaid-js" data-label="fig-pfeife">flowchart TD
  A["meine Daten 🗳"] --filter_zeilen--&gt;B["▥"] 
  B --wähle_spalten--&gt; C["▥"]
  C --gruppiere--&gt; D["▥"]
  D --fasse_zusammen--&gt; E["▥ Fertig. 🤩"]

</pre>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-pfeife-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;4.11: Illustration für eine Pfeifensequenz, es geht vorwärts wie am Fließband.
</figcaption></figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<p>Und jetzt kommt’s: So eine Art von Befehls-Verkettung gibt es in R. Schauen Sie sich mal <a href="#lst-pfeife" class="quarto-xref">Listing&nbsp;<span>4.3</span></a> an.</p>
<div id="lst-pfeife" class="r listing quarto-float quarto-figure quarto-figure-left anchored">
<figure class="quarto-float quarto-float-lst figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst" id="lst-pfeife-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Listing&nbsp;4.3: Eine Pfeifen-Befehlssequenz (Pseudo-Syntax)
</figcaption><div aria-describedby="lst-pfeife-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode" id="lst-pfeife"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">meine_daten</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">filter_gewünschte_zeilen</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">wähle_gewünschte_spalten</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">gruppiere</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">fasse_zusammen</span><span class="op">(</span><span class="op">)</span> </span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</figure>
</div>
<p>So eine Pfeifen-Befehlsequenz ist ein wie ein Fließband, an dem es mehrere Arbeitsstationen gibt, s. <a href="#fig-pfeife" class="quarto-xref">Abbildung&nbsp;<span>4.11</span></a>. Unser Datensatz wird am Fließband von Station zu Station weitergereicht und an jeder Stelle weiterverarbeitet.</p>
</div>
</div>
<!-- TODO  -->
<!-- ## Praxisprobleme des Datenaufbereitens -->
<!-- ### Fehlende Werte  -->
<!-- ### Spalten umbenennen -->
<!-- ### Werte umkodieren -->
<p>So könnte Ihre “Pfeifen-Sequenz” aussehen:</p>
<div class="cell">
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Hey R, nimm die Tabelle "mariokart":</span></span>
<span><span class="va">mariokart</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  </span>
<span>   <span class="co"># filter nur die günstigen Spiele:</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">total_pr</span> <span class="op">&lt;</span> <span class="fl">100</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="co"># wähle die zwei Spalten:</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">cond</span>, <span class="va">total_pr</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  </span>
<span>  <span class="co"># gruppiere die Tabelle nach Zustand des Spiels:</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">cond</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>  </span>
<span>  <span class="co"># fasse beide Gruppen nach dem mittleren Preis zusammen:</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>total_pr_mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">total_pr</span><span class="op">)</span><span class="op">)</span>  </span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">cond</th>
<th style="text-align: right;">total_pr_mean</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">new</td>
<td style="text-align: right;">54</td>
</tr>
<tr class="even">
<td style="text-align: left;">used</td>
<td style="text-align: right;">43</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Wichtig
</div>
</div>
<div class="callout-body-container callout-body">
<p>Die Syntax <code>filter(mariokart, total_pr &lt; 100)</code> und die Syntax <code>mariokart |&gt; filter(total_pr &lt; 100)</code> sind identisch.</p>
<p>Allgemeiner: <code>d |&gt; f(x)</code> = <code>f(d, x)</code>.</p>
</div>
</div>
</section></section><section id="beispiele-für-forschungsfragen" class="level2" data-number="4.5"><h2 data-number="4.5" class="anchored" data-anchor-id="beispiele-für-forschungsfragen">
<span class="header-section-number">4.5</span> Beispiele für Forschungsfragen</h2>
<div id="exr-fallbsps" class="theorem exercise">
<p><span class="theorem-title"><strong>Übungsaufgabe 4.13</strong></span> Bevor Sie die Lösungen der folgenden Fallbeispiele lesen, versuchen Sie die Aufgaben selber zu lösen. Ja, ich weiß, es ist hart, nicht gleich auf die Lösungen zu schauen! <span class="math inline">\(\square\)</span></p>
</div>
<p>Sie arbeiten als <del>Diener</del> strategischer Assistent der Geschäftsführerin und sind für Faktenchecks und andere Daten-Aufgaben zuständig. Heute sollen Sie zeigen, was Sie können (Schluck).</p>
<div id="exr-fofrage1" class="theorem exercise">
<p><span class="theorem-title"><strong>Übungsaufgabe 4.14 (Das teuerste Spiel?)</strong></span> &nbsp;</p>
<blockquote class="blockquote">
<p><span>👩</span> Ich würde von Ihnen gerne wissen, was das teuerste Spiel ist, aber jeweils für neue und gebrauchte Spiele. Aber nur für Spiele, die mit Foto verkauft wurden!</p>
</blockquote>
<p><strong>Antwort</strong></p>
<div class="cell">
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mariokart</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">stock_photo</span> <span class="op">==</span> <span class="st">"yes"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">cond</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>total_pr_max <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">total_pr</span><span class="op">)</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">cond</th>
<th style="text-align: right;">total_pr_max</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">new</td>
<td style="text-align: right;">75</td>
</tr>
<tr class="even">
<td style="text-align: left;">used</td>
<td style="text-align: right;">62</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Die Funktion <code>max</code> liefert den größten Wert eines Vektors zurück:</p>
<div class="cell">
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="co">## [1] 10</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="exr-Forschungsfrage2" class="theorem exercise">
<p><span class="theorem-title"><strong>Übungsaufgabe 4.15 (Die mittlere Versandpauschale?)</strong></span> &nbsp;</p>
<blockquote class="blockquote">
<p><span>👩</span> Ich würde gerne die mittlere Versandpauschale wissen, aber getrennt nach Anzahl der Lenkräder, die dem Spiel beigelegt sind. Und ich will nur Gruppen berücksichtigen, die aus mindestens 10 Spielen bestehen!</p>
</blockquote>
<p><strong>Antwort</strong></p>
<p>Wenn wir die Anzahl der Spiele zählen in Abhängigkeit der beigelegten Lenkräder (<code>wheels</code>), bekommen wir eine Tabelle mit zwei Spalten: <code>wheels</code> und <code>n</code>. <code>n</code> zählt, wie viele Spiele (Zeilen) in der jeweiligen Gruppe (“Teiltabelle”) von <code>wheels</code> sind.</p>
<div class="cell">
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mariokart</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">wheels</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: right;">wheels</th>
<th style="text-align: right;">n</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">37</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">52</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">51</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Aus dieser Tabellet sehen wir, dass 3 oder 4 Lenkräder nur selten (2 bzw. 1 Mal) beigelegt wurden und wir solche Spiele herausfiltern sollten, bevor wir den Mittelwert der Versankosten ausrechnen:</p>
<div class="cell">
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mariokart</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">wheels</span> <span class="op">&lt;</span> <span class="fl">3</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">wheels</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>mittlere_versandkosten <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">ship_pr</span><span class="op">)</span>,</span>
<span>            anzahl_spiele <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: right;">wheels</th>
<th style="text-align: right;">mittlere_versandkosten</th>
<th style="text-align: right;">anzahl_spiele</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">2.7</td>
<td style="text-align: right;">37</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">3.6</td>
<td style="text-align: right;">52</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">2.9</td>
<td style="text-align: right;">51</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Die Funktion <code><a href="https://dplyr.tidyverse.org/reference/context.html">n()</a></code> gibt die Anzahl der Zeilen pro Teiltabelle zurück.</p>
</div>
<div id="exr-Forschungsfrage3" class="theorem exercise">
<p><span class="theorem-title"><strong>Übungsaufgabe 4.16 (Verkaufspreis in Yen?)</strong></span> &nbsp;</p>
<blockquote class="blockquote">
<p><span>👩</span> Ich würde gerne den Verkaufspreis in Yen wissen, nicht in Euro. Dann rechne mal den mittleren Verkaufspreis aus und ziehe 10% ab, die wir als Provision unseren Verkäufern zahlen müssen.</p>
</blockquote>
<p><strong>Antwort</strong></p>
<div class="cell">
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mariokart</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">total_pr</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>total_pr_yen <span class="op">=</span> <span class="va">total_pr</span> <span class="op">*</span> <span class="fl">133</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span></span>
<span>    preis_yen_mw <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">total_pr_yen</span><span class="op">)</span>,</span>
<span>    preis_yen_mw_minus_10proz <span class="op">=</span> <span class="va">preis_yen_mw</span> <span class="op">-</span> <span class="fl">0.1</span><span class="op">*</span><span class="va">preis_yen_mw</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: right;">preis_yen_mw</th>
<th style="text-align: right;">preis_yen_mw_minus_10proz</th>
</tr></thead>
<tbody><tr class="odd">
<td style="text-align: right;">6634</td>
<td style="text-align: right;">5971</td>
</tr></tbody>
</table>
</div>
</div>
<p>Wie man sieht kann man in <code>summarise</code> auch mehr als eine Berechnung einstellen. In diesem Fall haben wir zwei Berechnungen angestellt: Einmal den Mittelwert und einmal den Mittelwert minus 10% (des Mittelwerts).</p>
</div>
<div id="exr-diy" class="theorem exercise">
<p><span class="theorem-title"><strong>Übungsaufgabe 4.17 (Do It Yourself)</strong></span> Denken Sie sich selber ähnliche Forschungsfragen aus. Stellen Sie diese einer vertrauenswürdigen Kommilitonen bzw. einem vertrauenswürdigen Kommilitonen. DIY! Schauen Sie, ob Ihre Aufgabe richtig gelöst wird. Prüfen Sie streng.<span class="math inline">\(\square\)</span></p>
</div>
</section><section id="praxisbezug" class="level2" data-number="4.6"><h2 data-number="4.6" class="anchored" data-anchor-id="praxisbezug">
<span class="header-section-number">4.6</span> Praxisbezug</h2>
<p>Die Covid19-Epidemie hatte weltweit massive Auswirkungen; auch psychologischer Art wie Vereinsamung, Angst oder Depression. Eine Studie, die die psychologischen Auswirkungen von <span class="citation" data-cites="mulukom_psychological_2020">Mulukom et al. (<a href="references.html#ref-mulukom_psychological_2020" role="doc-biblioref">2020</a>)</span>, die <a href="https://osf.io/tsjnb/">unter der Projekt-ID tsjnb bei der Open Science Foundation (OSF), &lt;https://osf.io/tsjnb/&gt;, angemeldet ist</a>. Die Daten wurden mit R ausgewertet. Beispielhaft ist unter <a href="https://osf.io/4b9p2" class="uri">https://osf.io/4b9p2</a> die R-Syntax zu sehen, die die Autoren zur Datenaufbereitung verwendet haben. Einen guten Teil dieser Syntax kennen Sie aus diesem Kapitel. Diese Studie ist, neben einigen vergleichbaren, ein schönes Beispiel, wie Forschung und Praxis ineinander greifen können: Angewandte Forschung als Beitrag zur Lösung eines akuten Problems, der Corona-Pandemie.</p>
</section><section id="wie-man-mit-statistik-lügt" class="level2" data-number="4.7"><h2 data-number="4.7" class="anchored" data-anchor-id="wie-man-mit-statistik-lügt">
<span class="header-section-number">4.7</span> Wie man mit Statistik lügt</h2>
<p>Ein (leider) immer mal wieder zu beobachtender “Trick”, um Daten zu frisieren ist, nur die Daten zu berichten, die einem in den Kram passen.</p>
<div id="exm-luege-filter" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 4.11</strong></span> Eine Analystin <span>👩</span> möchte zeigen, dass der Verkaufspreis von Mariokart-Spielen “viel zu niedrig” ist. Es muss ein höherer Wert rauskommen, findet die Analystin. Der mittlere Verkaufspreis (im Datensatz <code>mariokart</code>) liegt bei 50 Euro.</p>
<blockquote class="blockquote">
<p><span>👩</span> Kann man den Wert nicht … “kreativ verbessern”? Ein paar Statistik-Tricks anwenden?</p>
</blockquote>
<p>Um dieses Ziel zu erreichen, teilt die Analystin den Datensatz in Gruppen nach Anzahl der dem Spiel beigelegten Lenkräder (<code>wheels</code>). Dann wird der Mittelwert pro Gruppe berechnet.</p>
<div class="cell">
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mariokart_wheels</span> <span class="op">&lt;-</span> </span>
<span><span class="va">mariokart</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">wheels</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>pr_mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">total_pr</span><span class="op">)</span>,</span>
<span>            count_n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>  <span class="co"># n() gibt die Anzahl der Zeilen pro Gruppe an</span></span>
<span></span>
<span><span class="va">mariokart_wheels</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: right;">wheels</th>
<th style="text-align: right;">pr_mean</th>
<th style="text-align: right;">count_n</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">41</td>
<td style="text-align: right;">37</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">44</td>
<td style="text-align: right;">52</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">61</td>
<td style="text-align: right;">51</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">70</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">65</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Schließlich berechnet unsere Analystin den <em>ungewichteten</em> Mittelwert über diese 5 Gruppen:</p>
<div class="cell">
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mariokart_wheels</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">pr_mean</span><span class="op">)</span><span class="op">)</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: right;">mean(pr_mean)</th>
</tr></thead>
<tbody><tr class="odd">
<td style="text-align: right;">56</td>
</tr></tbody>
</table>
</div>
</div>
<p>Und das Ergebnis lautet: 56 Euro! Das ist doch schon etwas “besser” als 50 Euro.</p>
<p>Natürlich ist es <em>falsch</em> und irreführend, hier einen ungewichteten Mittelwert zu berechnen. Der gewichtete Mittelwert würde wiederum zum korrekten Ergebnis, 50 Euro, führen.<span class="math inline">\(\square\)</span></p>
</div>
</section><section id="fallstudien" class="level2" data-number="4.8"><h2 data-number="4.8" class="anchored" data-anchor-id="fallstudien">
<span class="header-section-number">4.8</span> Fallstudien</h2>
<section id="die-pinguine" class="level3" data-number="4.8.1"><h3 data-number="4.8.1" class="anchored" data-anchor-id="die-pinguine">
<span class="header-section-number">4.8.1</span> Die Pinguine</h3>
<div id="fig-penguins" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-penguins-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/penguins.png" class="img-fluid figure-img" style="width:50.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-penguins-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;4.12: Possierlich: Die Pinguine <span class="citation" data-cites="horst_statistics_2024">(<a href="references.html#ref-horst_statistics_2024" role="doc-biblioref">Horst, 2024</a>)</span>
</figcaption></figure>
</div>
<div id="exr-peng-start" class="theorem exercise">
<p><span class="theorem-title"><strong>Übungsaufgabe 4.18</strong></span> Machen Sie sich zunächst mit dem Pinguin-Datensatz vertraut. Sie finden den Datensatz <code>penguins</code> im R-Paket <code>palmerpenguins</code>, das Sie auf gewohnte Art installieren können (vgl. <a href="020-R.html#sec-install-r-pckgs" class="quarto-xref"><span>Kapitel 3.5.2</span></a>); im Internet findet man den Datensatz auch als CSV-Datei. Fokussieren Sie Ihre Analyse auf die Zielvariable <em>Gewicht</em>. <span class="math inline">\(\square\)</span></p>
</div>
<p>Die folgende Datenapp ermöglicht Ihnen, die Verteilung des Körpergewichts zu betrachten, wobei sie die Pinguin-Spezies filtern können sowie eine Mindestlänge des Schnabels verlangen können.</p>
<div class="cell panel-input card bg-light p-2">
<div class="sourceCode cell-code hidden" id="cb35" data-startfrom="1410" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1409;"><span id="cb35-1410"><a href="#cb35-1410" aria-hidden="true" tabindex="-1"></a>viewof bill_length_min <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>(</span>
<span id="cb35-1411"><a href="#cb35-1411" aria-hidden="true" tabindex="-1"></a>  [<span class="dv">32</span><span class="op">,</span> <span class="dv">50</span>]<span class="op">,</span> </span>
<span id="cb35-1412"><a href="#cb35-1412" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">value</span><span class="op">:</span> <span class="dv">35</span><span class="op">,</span> <span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Bill length (min):"</span>}</span>
<span id="cb35-1413"><a href="#cb35-1413" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb35-1414"><a href="#cb35-1414" aria-hidden="true" tabindex="-1"></a>viewof islands <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">checkbox</span>(</span>
<span id="cb35-1415"><a href="#cb35-1415" aria-hidden="true" tabindex="-1"></a>  [<span class="st">"Torgersen"</span><span class="op">,</span> <span class="st">"Biscoe"</span><span class="op">,</span> <span class="st">"Dream"</span>]<span class="op">,</span> </span>
<span id="cb35-1416"><a href="#cb35-1416" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">value</span><span class="op">:</span> [<span class="st">"Torgersen"</span><span class="op">,</span> <span class="st">"Biscoe"</span>]<span class="op">,</span> </span>
<span id="cb35-1417"><a href="#cb35-1417" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">"Islands:"</span></span>
<span id="cb35-1418"><a href="#cb35-1418" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb35-1419"><a href="#cb35-1419" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-2" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">Plot</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">Data</a></li>
</ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb36" data-startfrom="1427" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1426;"><span id="cb36-1427"><a href="#cb36-1427" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">rectY</span>(filtered<span class="op">,</span> </span>
<span id="cb36-1428"><a href="#cb36-1428" aria-hidden="true" tabindex="-1"></a>  Plot<span class="op">.</span><span class="fu">binX</span>(</span>
<span id="cb36-1429"><a href="#cb36-1429" aria-hidden="true" tabindex="-1"></a>    {<span class="dt">y</span><span class="op">:</span> <span class="st">"count"</span>}<span class="op">,</span> </span>
<span id="cb36-1430"><a href="#cb36-1430" aria-hidden="true" tabindex="-1"></a>    {<span class="dt">x</span><span class="op">:</span> <span class="st">"body_mass_g"</span><span class="op">,</span> <span class="dt">fill</span><span class="op">:</span> <span class="st">"species"</span><span class="op">,</span> <span class="dt">thresholds</span><span class="op">:</span> <span class="dv">20</span>}</span>
<span id="cb36-1431"><a href="#cb36-1431" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb36-1432"><a href="#cb36-1432" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb36-1433"><a href="#cb36-1433" aria-hidden="true" tabindex="-1"></a>    <span class="dt">facet</span><span class="op">:</span> {</span>
<span id="cb36-1434"><a href="#cb36-1434" aria-hidden="true" tabindex="-1"></a>      <span class="dt">data</span><span class="op">:</span> filtered<span class="op">,</span></span>
<span id="cb36-1435"><a href="#cb36-1435" aria-hidden="true" tabindex="-1"></a>      <span class="dt">x</span><span class="op">:</span> <span class="st">"sex"</span><span class="op">,</span></span>
<span id="cb36-1436"><a href="#cb36-1436" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y</span><span class="op">:</span> <span class="st">"species"</span><span class="op">,</span></span>
<span id="cb36-1437"><a href="#cb36-1437" aria-hidden="true" tabindex="-1"></a>      <span class="dt">marginRight</span><span class="op">:</span> <span class="dv">80</span></span>
<span id="cb36-1438"><a href="#cb36-1438" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb36-1439"><a href="#cb36-1439" aria-hidden="true" tabindex="-1"></a>    <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb36-1440"><a href="#cb36-1440" aria-hidden="true" tabindex="-1"></a>      Plot<span class="op">.</span><span class="fu">frame</span>()<span class="op">,</span></span>
<span id="cb36-1441"><a href="#cb36-1441" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb36-1442"><a href="#cb36-1442" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb36-1443"><a href="#cb36-1443" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-2" data-nodetype="expression">

</div>
</div>
</div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb37" data-startfrom="1450" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1449;"><span id="cb37-1450"><a href="#cb37-1450" aria-hidden="true" tabindex="-1"></a>Inputs<span class="op">.</span><span class="fu">table</span>(filtered)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-3" data-nodetype="expression">

</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb38" data-startfrom="1457" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1456;"><span id="cb38-1457"><a href="#cb38-1457" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"daten/penguins.csv"</span>)<span class="op">.</span><span class="fu">csv</span>({ <span class="dt">typed</span><span class="op">:</span> <span class="kw">true</span> })</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb39" data-startfrom="1462" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1461;"><span id="cb39-1462"><a href="#cb39-1462" aria-hidden="true" tabindex="-1"></a>filtered <span class="op">=</span> data<span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span>(penguin) {</span>
<span id="cb39-1463"><a href="#cb39-1463" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> bill_length_min <span class="op">&lt;</span> penguin<span class="op">.</span><span class="at">bill_length_mm</span> <span class="op">&amp;&amp;</span></span>
<span id="cb39-1464"><a href="#cb39-1464" aria-hidden="true" tabindex="-1"></a>         islands<span class="op">.</span><span class="fu">includes</span>(penguin<span class="op">.</span><span class="at">island</span>)<span class="op">;</span></span>
<span id="cb39-1465"><a href="#cb39-1465" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-5" data-nodetype="declaration">

</div>
</div>
</div>
<p>Bearbeiten Sie die <a href="https://allisonhorst.shinyapps.io/dplyr-learnr/#section-welcome">Fallstudie zu Pinguinen</a> von Allison Horst.<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a> Sie können die Teile auslassen, die Themen beinhalten, die <em>nicht</em> in diesem Kapitel vorgestellt wurden.</p>
</section><section id="weitere-fallstudien" class="level3" data-number="4.8.2"><h3 data-number="4.8.2" class="anchored" data-anchor-id="weitere-fallstudien">
<span class="header-section-number">4.8.2</span> Weitere Fallstudien</h3>
<p><a href="https://sebastiansauer.github.io/Fallstudie_Flights/">Diese Fallstudie</a> hat die Analyse von Flugverspätungen zum Thema.</p>
<p><img src="img/Covidistress1.jpg" class="img-fluid" style="width:30.0%" alt="Studie COVIDiSTTRESS (Lieberoth et al., 2020)"><a href="https://osf.io/z39us/" class="uri">https://osf.io/z39us/</a></p>
<blockquote class="blockquote">
<p>The COVIDiSTRESS global survey is an international collaborative undertaking for data gathering on human experiences, behavior and attitudes during the COVID-19 pandemic. In particular, the survey focuses on psychological stress, compliance with behavioral guidelines to slow the spread of Coronavirus, and trust in governmental institutions and their preventive measures, but multiple further items and scales are included for descriptive statistics, further analysis and comparative mapping between participating countries. Round one data collection was concluded May 30. 2020. To gather comparable data swiftly from across the globe, when the Coronavirus started making a critical impact on societies and individuals, the collaboration and survey was constructed as an urgent collaborative process. Individual contributors and groups in the COVIDiSTRESS network (see below) conducted translations to each language and shared online links by their own best means in each country.</p>
</blockquote>
<p><a href="https://osf.io/z39us/files/osfstorage">Die Daten</a> stehen unter <a href="https://osf.io/z39us" class="uri">https://osf.io/z39us</a> zur freien Verfügung. Sie können diese echten Daten eigenständig analysieren.</p>
<p><a href="https://osf.io/z39us/files/osfstorage/5f20b69732080501f5156b02">Diese Datei</a> beinhaltet die finalen, aufbereiteten Daten. Achtung: Die Datei ist recht groß, ca. 90 MB.</p>
</section></section><section id="aufgaben" class="level2" data-number="4.9"><h2 data-number="4.9" class="anchored" data-anchor-id="aufgaben">
<span class="header-section-number">4.9</span> Aufgaben</h2>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
ChatGPT
</div>
</div>
<div class="callout-body-container callout-body">
<p>Nutzen Sie einen Chat-Bot wie ChatGPT, um sich Hilfe für die R-Syntax geben zu lassen. <span class="math inline">\(\square\)</span></p>
</div>
</div>
<p>Die Webseite <a href="https://datenwerk.netlify.app">datenwerk.netlify.app</a> stellt eine Reihe von einschlägigen Übungsaufgaben bereit. Sie können die Suchfunktion der Webseite nutzen, um die Aufgaben mit den folgenden Namen zu suchen:</p>
<ol type="1">
<li><a href="https://datenwerk.netlify.app/posts/wrangle3/wrangle3.html">wrangle3</a></li>
<li><a href="https://datenwerk.netlify.app/posts/wrangle4/wrangle4.html">wrangle4</a></li>
<li><a href="https://datenwerk.netlify.app/posts/wrangle5/wrangle5.html">wrangle5</a></li>
<li><a href="https://datenwerk.netlify.app/posts/wrangle7/wrangle7.html">wrangle7</a></li>
<li><a href="https://datenwerk.netlify.app/posts/wrangle9/wrangle9.html">wrangle9</a></li>
<li><a href="https://datenwerk.netlify.app/posts/wrangle10/wrangle10.html">wrangle10</a></li>
<li><a href="https://datenwerk.netlify.app/posts/tidydata1/tidydata1.html">tidydata1</a></li>
<li><a href="https://datenwerk.netlify.app/posts/affairs-dplyr/affairs-dplyr.html">affairs-dplyr</a></li>
<li><a href="https://datenwerk.netlify.app/posts/dplyr-uebersetzen/dplyr-uebersetzen.html">dplyr-uebersetzen</a></li>
<li><a href="https://datenwerk.netlify.app/posts/haeufigkeit01/haeufigkeit01.html">haeufigkeit01</a></li>
<li><a href="https://datenwerk.netlify.app/posts/mariokart-mean1/mariokart-mean1.html">mariokart-mean1</a></li>
<li><a href="https://datenwerk.netlify.app/posts/mariokart-mean2/mariokart-mean2.html">mariokart-mean2</a></li>
<li><a href="https://datenwerk.netlify.app/posts/mariokart-mean3/mariokart-mean3.html">mariokart-mean3</a></li>
<li><a href="https://datenwerk.netlify.app/posts/mariokart-mean4/mariokart-mean4.html">mariokart-mean4</a></li>
<li><a href="https://datenwerk.netlify.app/posts/mariokart-max1/mariokart-max1.html">mariokart-max1</a></li>
<li><a href="https://datenwerk.netlify.app/posts/mariokart-max2/mariokart-max2.html">mariokart-max2</a></li>
<li><a href="https://datenwerk.netlify.app/posts/filter01/filter01.html">filter01</a></li>
<li><a href="https://datenwerk.netlify.app/posts/affairs-dplyr/affairs-dplyr.html">affairs-dplyr</a></li>
<li><a href="https://datenwerk.netlify.app/posts/summarise01/summarise01.html">summarise01</a></li>
<li><a href="https://datenwerk.netlify.app/posts/summarise02/summarise02.html">summarise02</a></li>
<li><a href="https://datenwerk.netlify.app/posts/mutate01/mutate01.html">mutate01</a></li>
<li><a href="https://datenwerk.netlify.app/posts/wrangle3/wrangle3">wrangle3</a></li>
</ol></section><section id="vertiefung" class="level2" data-number="4.10"><h2 data-number="4.10" class="anchored" data-anchor-id="vertiefung">
<span class="header-section-number">4.10</span> Vertiefung</h2>
<section id="tidydatatutor" class="level3" data-number="4.10.1"><h3 data-number="4.10.1" class="anchored" data-anchor-id="tidydatatutor">
<span class="header-section-number">4.10.1</span> Tidydatatutor</h3>
<p>Die Verben des Datenjudos werden beim <a href="https://tidydatatutor.com/">“Tidydatatutor”</a> anschaulich illustriert.<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a></p>
</section><section id="fortgeschrittenes-r" class="level3" data-number="4.10.2"><h3 data-number="4.10.2" class="anchored" data-anchor-id="fortgeschrittenes-r">
<span class="header-section-number">4.10.2</span> Fortgeschrittenes R</h3>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hinweis
</div>
</div>
<div class="callout-body-container callout-body">
<p>In weiterführendem Material werden Sie immer wieder auf Inhalte treffen, die Sie noch nicht kennen, die etwa noch nicht im Unterricht behandelt wurden. Seien Sie unbesorgt: In der Regel können Sie diese Inhalte einfach auslassen, ohne den Anschluss zu verlieren. Einfach ignorieren. 😄</p>
</div>
</div>
<p>Häufig ist es nützlich, die Werte einer Variablen umzukodieren, z.B. “weiblich” in “w” oder in <code>0</code>. Eine gute Möglichkeit, dies in R umzusetzen, bietet der Befehl <code><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when()</a></code>; der Befehl wohnt im Tidyverse. <a href="https://www.statology.org/dplyr-case_when/">Hier</a> – und an vielen weiteren Stellen im Internet – finden Sie ein Tutorium.<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a> Im Datenwerk finden Sie dazu Übungen, etwa <a href="https://datenwerk.netlify.app/posts/mutate03/mutate03.html">mutate03</a></p>
</section><section id="sec-erbie" class="level3" data-number="4.10.3"><h3 data-number="4.10.3" class="anchored" data-anchor-id="sec-erbie">
<span class="header-section-number">4.10.3</span> Hilfe?! Erbie!</h3>
<p>R will nicht, so wie Sie wollen? Sie haben das Gefühl, R verweigert störrisch den Dienst, vermutlich rein aus Boshaftigkeit, rein um Sie zu ärgern? Ausführliches Googeln und ChatGPT befragen hat keine Lösung gebracht? Kurz, Sie brauchen die Hilfe eines kundigen Menschens?<a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a> <a href="https://data-se.netlify.app/2022/01/31/erbie-einfache-reproduzierbare-beispiele-ihres-problems-mit-r-syntax/">Hier</a> finden Sie eine Anleitung, wie man seinen Hilfeschrei so formuliert (ruft), dass er nicht nur gehört, sondern auch verstanden wird und einen anderen Menschen veranlasst und ermöglicht Ihnen zu helfen.<a href="#fn13" class="footnote-ref" id="fnref13" role="doc-noteref"><sup>13</sup></a></p>
<p>Also: Sie müssen Ihr Problem nachvollziehbar aber prägnant formulieren. Das nennt man auch ein <em>ERBie</em>, ein <em>einfaches, reproduzierbare Beispiel</em> Ihres Problems mit (R-)Syntax:</p>
<ul>
<li>einfach: die einfachste Syntax, die Ihr Problem bzw. die Fehlermeldung produziert. Es bietet sich an, einen einfachen, allgemein bekannten Datensatz zu verwenden, etwa <code>mtcars</code>
</li>
<li>reproduzierbar: Code (z.B. als Textdatei oder in einem Post), der die Fehlermeldung entstehen lässt</li>
</ul>
<div id="exm-erbie" class="theorem example">
<p><span class="theorem-title"><strong>Beispiel 4.12 (Beispiel für ein Erbie)</strong></span> <em>Problem:</em> Ich verstehe nicht, warum eine Fehlermeldung kommt</p>
<p><em>Ziel:</em> Ich möchte die Automatikautos filtern (am = 0)</p>
<p><em>Was ich schon versucht habe:</em> Ich habe folgende Posts gelesen …, aber ohne Erfolg</p>
<p><em>Erbie</em>:</p>
<div class="cell">
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>  <span class="co"># nicht "tidyverse", denn "dplyr" reicht</span></span>
<span></span>
<span><span class="va">mtcars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span>am <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>  <span class="co"># den kürzesten Code, der Ihren Fehler entstehen lässt!</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html">sessionInfo</a></span><span class="op">(</span><span class="op">)</span>  <span class="co"># gibt Infos zur R-Version etc. aus</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Mit dem Paket <code>reprex</code> kann man sich R-Syntax schön formuliert ausgeben lassen. Das ist perfekt, um den Code dann in einem Forum (oder Mail) einzustellen. Dafür müssen Sie nur den Code auswählen, <code>Strg-c</code> drücken und dann <code><a href="https://reprex.tidyverse.org/reference/reprex.html">reprex::reprex</a></code> ausführen. Mit <code>Strg-v</code> können Sie die schön formatierte Syntax (sowie die Ausgabe, auch schön formatiert) dann irgendwohin pasten.</p>
</div>
<center>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="img/help-me-help-you.gif" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption>Help me help you <span class="citation" data-cites="imgflip_imageflip_2024">(<a href="references.html#ref-imgflip_imageflip_2024" role="doc-biblioref">imgflip, 2024</a>)</span></figcaption></figure>
</div>
</center>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tipp
</div>
</div>
<div class="callout-body-container callout-body">
<div>

</div>
<div class="quarto-layout-panel" data-layout="[ 80, 20 ]">
<div class="quarto-layout-row">
<div id="first-column" class="quarto-layout-cell" style="flex-basis: 80.0%;justify-content: flex-start;">
<p>Posten Sie Ihr Erbie bei <a href="https://gist.github.com/" class="uri">https://gist.github.com/</a> als “public gist”. <a href="https://gist.github.com/sebastiansauer/0649a0453b5cc7c6a1d16ac760667215">Hier</a> ist ein Beispiel.<span class="math inline">\(\square\)</span></p>
</div>
<div id="second-column" class="quarto-layout-cell" style="flex-basis: 20.0%;justify-content: flex-start;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="030-aufbereiten_files/figure-html/unnamed-chunk-49-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:75.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section id="zertifikate-und-online-kurse" class="level3" data-number="4.10.4"><h3 data-number="4.10.4" class="anchored" data-anchor-id="zertifikate-und-online-kurse">
<span class="header-section-number">4.10.4</span> Zertifikate und Online-Kurse</h3>
<p>Sie können zu den Inhalten dieses Kapitels Zertifikate erwerben (teilweise kostenlos), indem Sie einen Online-Kurs absolvieren, bei z.B. folgenden Anbietern – Das ist keine Werbung für spezifische Anbieter und kein umfassender Überblick und keine Kaufempfehlung.</p>
<ul>
<li><a href="https://www.linkedin.com/learning/search?keywords=R">LinkedIn: R Courses</a></li>
<li><a href="https://www.coursera.org/learn/data-analysis-r#modules">Google/Coursera: Data Analysis with R Programming</a></li>
<li><a href="https://www.coursera.org/specializations/statistics">Duke University/Coursera: Data Analysis with R Specialization</a></li>
</ul></section></section><section id="exkurs" class="level2" data-number="4.11"><h2 data-number="4.11" class="anchored" data-anchor-id="exkurs">
<span class="header-section-number">4.11</span> Exkurs</h2>
<p><a href="https://openai.com/dall-e-2/">Dall-E 2</a> ist eine KI, die “realistische Bilder und Kunst aus einer Beschreibung in natürlicher Sprache” erstellt.</p>
<blockquote class="blockquote">
<p><span>👨‍🏫</span> I’d like a mixture between robot und professor, in oil painting</p>
</blockquote>
<blockquote class="blockquote">
<p><span>🤖</span> … s. <a href="#fig-mix-rob-prof" class="quarto-xref">Abbildung&nbsp;<span>4.13</span></a></p>
</blockquote>
<div id="fig-mix-rob-prof" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-mix-rob-prof-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="img/mix-prof-robot.png" class="img-fluid figure-img" style="width:50.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mix-rob-prof-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;4.13: Bild erzeugt von künstlicher Intelligenz, Quelle: DALL-E 2, 2023-02-09
</figcaption></figure>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hinweis
</div>
</div>
<div class="callout-body-container callout-body">
<p>Der Nutzen künstlicher Intelligenz für die Datenanalyse ist natürlich breiter: Wenn Sie sich z.B. über die Syntax eines bestimmten Befehls (oder allgemeiner: Vorhabens) nicht sicher sind, fragen Sie sich doch mal einen Bot wie ChatGPT.</p>
</div>
</div>
</section><section id="literaturhinweise" class="level2" data-number="4.12"><h2 data-number="4.12" class="anchored" data-anchor-id="literaturhinweise">
<span class="header-section-number">4.12</span> Literaturhinweise</h2>
<p><span class="citation" data-cites="sauer_moderne_2019">Sauer (<a href="references.html#ref-sauer_moderne_2019" role="doc-biblioref">2019</a>)</span>, Kap. 7, gibt eine Einführung in die Datenaufbereitung (mit Hilfe von R), ähnlich zu den Inhalten dieses Kapitels. Mehr in die Tiefe des “Datenjudo” führen <span class="citation" data-cites="wickham_r_2018">Wickham &amp; Grolemund (<a href="references.html#ref-wickham_r_2018" role="doc-biblioref">2018</a>)</span>; der Autor Hadley Wickham ist die Leitfigur in der R-Community schlechthin. Kap. 5 behandelt (etwas ausführlicher) die Themen dieses Kapitels. Er ist einer der Hauptautoren von beliebten R-Paketen wie <code>dplyr</code> und <code>ggplot2</code>.</p>
<p>Wer sich tiefer in das Datenjudo mit dem Tidyverse einarbeiten möchte, dem sei z.B. dieser <a href="https://www.datacamp.com/courses/introduction-to-the-tidyverse">Kurs</a> empfohlen.<a href="#fn14" class="footnote-ref" id="fnref14" role="doc-noteref"><sup>14</sup></a></p>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" data-line-spacing="2" role="list" style="display: none">
<div id="ref-bowne-anderson_what_2018" class="csl-entry" role="listitem">
Bowne-Anderson, H. (2018). What <span>Data Scientists Really Do</span>, <span>According</span> to 35 <span>Data Scientists</span>. <em>Harvard Business Review</em>. <a href="https://hbr.org/2018/08/what-data-scientists-really-do-according-to-35-data-scientists">https://hbr.org/2018/08/what-data-scientists-really-do-according-to-35-data-scientists</a>
</div>
<div id="ref-horst_statistics_2024" class="csl-entry" role="listitem">
Horst, A. (2024). <em>Statistics <span>Artwork</span></em>. <a href="https://allisonhorst.com/">https://allisonhorst.com/</a>
</div>
<div id="ref-imgflip_imageflip_2024" class="csl-entry" role="listitem">
imgflip. (2024). <em>Imageflip <span>Meme</span></em>. <a href="https://imgflip.com">https://imgflip.com</a>
</div>
<div id="ref-lieberoth_covidistress_2020" class="csl-entry" role="listitem">
Lieberoth, A., Rasmussen, J., Stoeckli, S., Tran, T., Ćepulić, D.-B., Han, H., Lin, S.-Y., Tuominen, J., Travaglino, G. A., &amp; Vestergren, S. (2020). <em><span>COVIDiSTRESS</span> Global Survey</em>. <a href="https://doi.org/10.17605/OSF.IO/Z39US">https://doi.org/10.17605/OSF.IO/Z39US</a>
</div>
<div id="ref-mulukom_psychological_2020" class="csl-entry" role="listitem">
Mulukom, V. van, Muzzulini, B., Rutjens, B., Lissa, C. J. van, &amp; Farias, M. (2020). <em>Psychological Impact of <span>COVID-19</span> Pandemic</em>. <a href="https://doi.org/10.17605/OSF.IO/TSJNB">https://doi.org/10.17605/OSF.IO/TSJNB</a>
</div>
<div id="ref-sauer_moderne_2019" class="csl-entry" role="listitem">
Sauer, S. (2019). <em>Moderne Datenanalyse mit R: Daten einlesen, aufbereiten, visualisieren und modellieren</em> (1. Auflage 2019). Springer. <a href="https://www.springer.com/de/book/9783658215866">https://www.springer.com/de/book/9783658215866</a>
</div>
<div id="ref-wickham_r_2018" class="csl-entry" role="listitem">
Wickham, H., &amp; Grolemund, G. (2018). <em>R für Data Science: Daten importieren, bereinigen, umformen, modellieren und visualisieren</em> (F. Langenau, Übers.; 1. Auflage). O’Reilly. <a href="https://r4ds.had.co.nz/index.html">https://r4ds.had.co.nz/index.html</a>
</div>
</div>
</section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><hr>
<ol>
<li id="fn1"><p><a href="https://antworte.jetzt/" class="uri">https://antworte.jetzt/</a><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p><code>select(mariokart, total_pr, cond, 2)</code><a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p><a href="https://tidyr.tidyverse.org/reference/tidyr_tidy_select.html" class="uri">https://tidyr.tidyverse.org/reference/tidyr_tidy_select.html</a><a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p><code>summarise(mariokart, hoechster_preis = max(total_pr))</code><a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p><code>count(mariokart, stock_photo)</code><a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p><code>count(mariokart, stock_photo, cond)</code><a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>Vgl. <a href="https://en.wikipedia.org/wiki/The_Treachery_of_Images" class="uri">https://en.wikipedia.org/wiki/The_Treachery_of_Images</a><a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p>Genauer gesagt im Paket <code>magrittr</code>, welches aber von <code>tidyverse</code> geladen wird. Also nichts, um das Sie sich kümmern müssten.<a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9"><p><a href="https://allisonhorst.shinyapps.io/dplyr-learnr/#section-welcome" class="uri">https://allisonhorst.shinyapps.io/dplyr-learnr/#section-welcome</a><a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn10"><p><a href="https://tidydatatutor.com" class="uri">https://tidydatatutor.com</a><a href="#fnref10" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn11"><p><a href="https://www.statology.org/dplyr-case_when/" class="uri">https://www.statology.org/dplyr-case_when/</a><a href="#fnref11" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn12"><p><a href="https://www.youtube.com/watch?v=2Q_ZzBGPdqE" class="uri">https://www.youtube.com/watch?v=2Q_ZzBGPdqE</a><a href="#fnref12" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn13"><p><a href="https://data-se.netlify.app/2022/01/31/erbie-einfache-reproduzierbare-beispiele-ihres-problems-mit-r-syntax/" class="uri">https://data-se.netlify.app/2022/01/31/erbie-einfache-reproduzierbare-beispiele-ihres-problems-mit-r-syntax/</a><a href="#fnref13" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn14"><p><a href="https://www.datacamp.com/courses/introduction-to-the-tidyverse" class="uri">https://www.datacamp.com/courses/introduction-to-the-tidyverse</a><a href="#fnref14" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol></section></main><!-- /main --><script type="ojs-module-contents">
eyJjb250ZW50cyI6W3sibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InZpZXdvZiBiaWxsX2xlbmd0aF9taW4gPSBJbnB1dHMucmFuZ2UoXG4gIFszMiwgNTBdLCBcbiAge3ZhbHVlOiAzNSwgc3RlcDogMSwgbGFiZWw6IFwiQmlsbCBsZW5ndGggKG1pbik6XCJ9XG4pXG52aWV3b2YgaXNsYW5kcyA9IElucHV0cy5jaGVja2JveChcbiAgW1wiVG9yZ2Vyc2VuXCIsIFwiQmlzY29lXCIsIFwiRHJlYW1cIl0sIFxuICB7IHZhbHVlOiBbXCJUb3JnZXJzZW5cIiwgXCJCaXNjb2VcIl0sIFxuICAgIGxhYmVsOiBcIklzbGFuZHM6XCJcbiAgfVxuKVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0yIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiUGxvdC5yZWN0WShmaWx0ZXJlZCwgXG4gIFBsb3QuYmluWChcbiAgICB7eTogXCJjb3VudFwifSwgXG4gICAge3g6IFwiYm9keV9tYXNzX2dcIiwgZmlsbDogXCJzcGVjaWVzXCIsIHRocmVzaG9sZHM6IDIwfVxuICApKVxuICAucGxvdCh7XG4gICAgZmFjZXQ6IHtcbiAgICAgIGRhdGE6IGZpbHRlcmVkLFxuICAgICAgeDogXCJzZXhcIixcbiAgICAgIHk6IFwic3BlY2llc1wiLFxuICAgICAgbWFyZ2luUmlnaHQ6IDgwXG4gICAgfSxcbiAgICBtYXJrczogW1xuICAgICAgUGxvdC5mcmFtZSgpLFxuICAgIF1cbiAgfVxuKVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0zIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiSW5wdXRzLnRhYmxlKGZpbHRlcmVkKVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC00IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiZGF0YSA9IEZpbGVBdHRhY2htZW50KFwiZGF0ZW4vcGVuZ3VpbnMuY3N2XCIpLmNzdih7IHR5cGVkOiB0cnVlIH0pXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTUiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJmaWx0ZXJlZCA9IGRhdGEuZmlsdGVyKGZ1bmN0aW9uKHBlbmd1aW4pIHtcbiAgcmV0dXJuIGJpbGxfbGVuZ3RoX21pbiA8IHBlbmd1aW4uYmlsbF9sZW5ndGhfbW0gJiZcbiAgICAgICAgIGlzbGFuZHMuaW5jbHVkZXMocGVuZ3Vpbi5pc2xhbmQpO1xufSlcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoic2hpbnlJbnB1dCgnYmlsbF9sZW5ndGhfbWluJykifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6InNoaW55SW5wdXQoJ2lzbGFuZHMnKSJ9XX0=
</script><script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../..";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Kopiert");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Kopiert");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./020-R.html" class="pagination-link" aria-label="Daten einlesen">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Daten einlesen</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./040-verbildlichen.html" class="pagination-link" aria-label="Daten verbildlichen">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Daten verbildlichen</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>