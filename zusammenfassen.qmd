# Punktmodelle 1 {#sec-punktmodelle1}



## Lernsteuerung

### Standort im Lernpfad

@fig-ueberblick zeigt den Standort dieses Kapitels im Lernpfad und gibt damit einen √úberblick √ºber das Thema dieses Kapitels im Kontext aller Kapitel.




### Lernziele


- Sie k√∂nnen g√§ngige Arten von Lagema√üe definieren.
- Sie k√∂nnen erl√§utern, inwiefern man ein Lagema√ü als ein Modell hernehmen kann.
- Sie k√∂nnen Lagema√üe mit R berechnen.


### Ben√∂tigte R-Pakete

In diesem Kapitel ben√∂tigen Sie folgende R-Pakete.

```{r}
library(tidyverse)
library(easystats)
```


### Ben√∂tigte Daten

```{r}
mariokart <- read.csv("https://vincentarelbundock.github.io/Rdatasets/csv/openintro/mariokart.csv")
```





```{r}
#| echo: false
ggplot2::theme_set(theme_minimal())
```




## Mittelwert als Modell {#sec-mw}

Der klassische Mittelwert (arithmetisches Mittel) ist ein prototypisches Beispiel f√ºr ein Modell in der Statistik.


:::{#exr-mw-md-mod}
Welche Vorstellung haben Sie, wenn Sie h√∂ren, dass der "typische deutsche Mann" 1,80m gro√ü ist [@owidhumanheight]?

a) Die H√§lfte der M√§nner ist gr√∂√üer als 1,80m, die andere H√§lfte kleiner.
b) Das arithmetische Mittel der M√§nner betr√§gt 1,80m.
c) Die meisten M√§nner sind 1,80m gro√ü.
d) Etwas anderes.
e) Keine Ahnung!$\square$
:::

:::{#exr-mw2}
Laut [dieser Quelle](https://en.wikipedia.org/wiki/Average_human_height_by_country) betr√§gt der Wert der mittleren Gr√∂√üe deutscher Frauen etwa 1,66m, also 14cm weniger als bei M√§nnern.
Ist das viel?

a) ja
b) nein
c) kommt drauf an
d) wei√ü nicht$\square$
:::




:::{#exm-mw}
### Beispiel zum Mittelwert

Ein Statistikkurs besteht aus drei Studentinnen: Anna, Berta und Carla.
Sie haben gerade ihre Noten in der Klausur erfahren. Anna hat eine 1, Berta eine 2 und Carla eine 3.
Der Durchschnitt ($\varnothing$) betr√§gt: 2.
:::

>   üßë‚Äçüéì Zu easy!

>   üë®‚Äçüè´ Schon gut! Chill mal. Wird gleich interessanter.


Die Rechenregel zum Mittelwert lautet:

1. Addiere alle Werte
2. Teile durch die Anzahl der Werte
3. Fertig. üòÑ




Etwas abstrakter kann man @exm-mw in folgendem Schaubild darstellen, s. @eq-mw.


$$
\begin{array}{|c|} \hline \\ \\ \square \\ \hline \end{array} + \begin{array}{|c|} \hline \\ \square \\ \square \\ \hline \end{array} + \begin{array}{|c|} \hline \square \\ \square \\ \square \\ \hline \end{array} = 3 \cdot \begin{array}{|c|} \hline \\ \square \\ \square \\ \hline \end{array}
$$ {#eq-mw}

Der Nutzen des Mittelwerts liegt darin, dass er uns ein Bild gibt (ein Modell ist!) f√ºr die "typische Note" im Statistikkurs, s. @eq-mw2.


$$\begin{array}{|c|} \hline \\ \\ \square \\ \hline \end{array} + \begin{array}{|c|} \hline \\ \square \\ \square \\ \hline \end{array} + \begin{array}{|c|} \hline \square \\ \square \\ \square \\ \hline \end{array} \qquad \leftrightarrow  \qquad \underbrace{\begin{array}{|c|} \hline \\ \square \\ \square \\ \hline \end{array}}_{\text{"typischer Vertreter"}}$$ {#eq-mw2}


:::{.callout-important}
Der Nutzen des Mittelwerts liegt darin, dass er eine Datenreihe zu einen "typischen Vertreter" zusammenfasst.
Er ist typisch in dem Sinne, als dass die Werte aller Merkmalstr√§ger in gleichem Ma√üe einflie√üen.
Er gibt uns eine (m√∂gliche) Vorstellung (ein Modell!), wie wir uns die Werte der Datenreihe vorstellen sollen.
:::


Eine n√ºtzliche Anschauung zum Mittelwert ist die Vorstellung des Mittelwerts als eine ausbalancierte Wippe, s. @fig-wippe.

![Mittelwert als ausbalancierte Wippe](img/1280px-Seesaw_with_mean.svg.png){#fig-wippe width="70%"}

:::{.xsmall}
[Quelle: Von Maphry - Eigenes Werk, CC BY-SA 4.0]( https://commons.wikimedia.org/w/index.php?curid=79390659)
:::

In "Mathe-Sprech" bezeichnet man den Mittelwert h√§ufig mit $\bar{x}$ und schreibt die Rechenregel so, s. @eq-mw-formel.


$$\bar {x} =\frac{1}{n} \sum_{i=1}^{n}{x_{i}}=\frac {x_{1}+x_{2}+\dotsb +x_{n}} {n}$$ {#eq-mw-formel}


:::{#def-mw}
### Mittelwert
Der Mittelwert von $X$, pr√§ziser: das arithmetische Mittel, ist definiert als die Summe der Elemente von $X$ geteilt durch deren Anzahl, $n$.\square$
:::

Da der Mittelwert eine zentrale Rolle spielt in der Statistik,
sollten wir ihn uns noch etwas genauer anschauen.
In s. @fig-mw1 sehen wir die Noten von (dieses Mal) vier Studentis.
Die gestrichelte horizontale Linie zeigt den Mittelwert der vier Noten.
Die schwarzen Punkte sind die Daten, in dem Fall die einzelnen Noten.
Die vertikalen Linien zeigen die Abweichungen der Noten zum Mittelwert.
Bezeichnen wir die Abweichung - auch als "Fehler", "Rest" oder "Residuum" bezeichnet - der $i$-ten Person mit $e_i$ (e wie "Fehler) und die $i$-te Note mit $x_i$, so k√∂nnen wir festhalten:

$$x_i = \bar{x} + e_i$$

Einfacher ausgedr√ºckt:


$$\text{Daten} = \text{Modell} + \text{Rest}$$

Der Mittelwert ist hier unser Modell der Daten.
Wie gesagt: Ein Modell ist eine vereinfachte (zusammengefasste) Beschreibung einer Datenreihe.


Um Modelle darzustellen, wird in der Datenanalyse h√§ufig folgende Art von Modellgleichung verwendet:


$$\hat{y} \sim m$$

Lies: "Der Modellwert $\hat{y}$ ist eine Funktion des Modells (m) ". 
Der Kringel "~"^[die sog. "Tilde"] soll also hier hei√üen "... ist eine Funktion von ...".

Mit $\hat{y}$ sind die vorhergesagten bzw. die zu erkl√§rende Variable^[AV, Output-Variable, Zielvariable] gemeint.

Das "Dach"  √ºber dem $y$ bedeutet "vorhergesager Y-Wert" oder "Y-Wert laut dem Modell".

Der tats√§chliche, beobachtete Wert $y$ setzt sich zusammen aus dem Modellwert (m) plus einem Fehler (e wie error):

$$y = m + e$$

Anstelle von $m$ schreibt ma nauch $\hat{y}$ ("y-Dach"). \hat{y} bedeutet der "vorhergesagte y-Wert laut einem Modell".


In diesem Fall ist das Modell einfach gleich dem Mittelwert (und nicht irgendeiner Funktion des Mittelwerts), so dass wir schreiben k√∂nnen:


$$y = \bar{x} + e$$


Die Zielvariable $Y$ wird also durch ihren eigenen Mittelwert erkl√§rt, au√üer gehen wir von einem Fehler $e$ in unseren Modellvorhersagen aus. Nobody is perfect.
In sp√§teren Kapiteln werden wir andere Variablen heranziehen, um die Zielvariable zu erkl√§ren.
W√ºrden wir z.B. sagen wollen, dass wir $Y$ als Funktion einer Variable $X$ erkl√§ren,
so w√ºrden wir schreiben:

$$\bar{y} \sim x$$
Da wir im Moment aber keine andere Variablen bem√ºhen, um $Y$ zu erkl√§ren schreibt man auch:

$$\bar{y} \sim 1$$

Diese Schreibweise sieht verwirrend aus. 
Die $1$ soll aber einfach zeigen, dass wir keine andere Variable zur Erkl√§rung von $Y$ verwenden, 
daher steht hier kein Buchstabe, sondern eine einfache $1$.


:::{#exm-noten}
### Noten, Mittelwert und Abweichung

Vier Studentis Anna, Berta, Carl, Dani haben ihre Statistik-Klausur zur√ºckbekommen.
Die Noten sehen Sie in @fig-mw1.
Au√üerdem ist der Mittelwert (gestrichelte horizontale Linie) sowie die Abweichungen der einzelnen Noten vom Mittelwert eingezeichnet.$\square$
:::


Schauen Sie sich die Abweichungsbalken^[Residuen, Fehler; h√§ufig mit $e$ wie *error* bezeichnet] in @fig-mw1 einmal genauer an.


```{r fig-abw-balken-mw, echo = FALSE}
#| fig-cap: "Der Mittelwert als horizontale (gestrichelte) Linie. Die vertikalen Linien zeigen die Abweichungen der einzelnen Werte zum Mittelwert. Die Abweichungen summieren sich zu Null auf."
#| label: fig-mw1

d <- tibble::tribble(
  ~id, ~note, ~note_avg, ~delta, ~note2, ~note_avg2,
   1L,     2,     2.325, -0.325,  2.325,          2,
   2L,   2.7,     2.325,  0.375,    2.7,      2.325,
   3L,   3.1,     2.325,  0.775,    3.1,      2.325,
   4L,   1.5,     2.325, -0.825,  2.325,        1.5
  )


d <- d %>% 
  mutate(delta_abs = abs(delta),
         pos = ifelse(delta > 0, "positiv", "negativ"),
         delta_sq = delta^2)



d %>%
  ggplot(aes(x = id, 
             y = note)) +
  geom_hline(yintercept = mean(d$note), 
             linetype = "dashed") +
  geom_segment(aes(y = mean(d$note),
                   yend = note,
                   x = id,
                   xend = id,
                   linetype = pos)
               ) +
  geom_point(size = 5) + 
  labs(linetype = "Richtung der Abweichung") +
  theme(legend.position =  c(1, 1),
        legend.justification = c(1, 1)) +
  annotate(geom = "label",
           x = 0,
           hjust = 0,
           y = mean(d$note), 
           label = paste0("MW = ", round(mean(d$note), 2))) +
  scale_y_continuous(limits = c(1, 4)) +
  labs(x = "",
       y = "") +
  scale_x_continuous(breaks = 1:4) +
  theme(legend.position = "bottom") +
  theme_minimal() -> p_mean_deltas

p_mean_deltas
```



Jetzt stellen Sie sich vor, Sie w√ºrden die vom Mittelwert nach oben ragenden Balkenl√§ngen aneinanderlegen.
Sehen Sie das vor Ihrem geistigen Auge? 
Jetzt legen Sie auch noch die Abweichungsbalken, die nach unten ragen aneinander, aneinander.
Wer viel Phantasie hat, erkennt (sieht) jetzt,
dass die Gesamtl√§nge der "Balken nach oben" identisch ist zur Gesamtl√§nge der nach "unten ragenden Balken", vgl. @fig-wippe.

Pr√§ziser ausgedr√ºckt und ohne Ihre Phantasie zu strapazieren (@eq-summenull):

$$\sum_{i=1}^n (x_i-\bar{x})=\sum_{i=1}^n x_i - \sum_{i=1}^n \bar{x} = n\cdot \bar{x} - n\cdot \bar{x}=0$$ {#eq-summenull}

:::{.callout-note}
Die Summe der Abweichungen vom Mittelwert ist Null.
:::



:::{#exr-mw-wealth1}
Was sch√§tzen Sie, wie hoch das mittlere Verm√∂gen des Haushalte in Deutschland in etwa ist?^[Quelle:  [WSI](https://www.wsi.de/en/how-is-wealth-distributed-in-germany-14401.htm), Abruf 2023-04-19])

a) 50.000 Euro
b) 100.000 Euro
c) 150.000 Euro
d) 200.000 Euro
e) 250.000 Euro$\square$
:::



:::{#exm-md}
### Der reichste Mensch der Welt in Ihrem H√∂rsaal

Kommt der wertvollste Fu√üballspieler der Welt in Ihren H√∂rsaal, sagen wir, es ist Kylian Mbapp√©^[Quelle: https://www.transfermarkt.de/spieler-statistik/wertvollstespieler/marktwertetop, 2023-03-19].
Das Jahreseinkommen mit einem Jahreseinkommen von ca. 120 Millionen Euro^[Quelle: https://www.einkommenmagazin.de/kylian-mbappe-einkommen/, 2023-03-19].

>    ü¶π‚Äç‚ôÇÔ∏è Hey Leute, wie geht's denn so! Wie viel Kohle verdient ihr eigentlich so?

>    üßë‚Äçüéì √Ñh, wir studieren und verdienen fast nix!

Die 100 Studis im H√∂rsaal schauen verdattert aus der W√§sche: Was ist das f√ºr eine komische Frage!?
Aber zumindest verteilt der Fu√üballspieler Autogramme.
:::


:::{#exr-elon}
### Mittleres Einkommen im H√∂rsaal, mit Kylian Mbapp√©

Sch√§tzen Sie - im Kopf - das mittlere Verm√∂gen im H√∂rsaal, gehen Sie davon aus,
dass alle der 100 Studentis jeweils 1000 Euro im Jahr verdienen.
:::



In R kann man das mittlere Einkommen (pr√§ziser: das arithmetische Mittel des Einkommenss) wie folgt berechnen.^[Die Details der Syntax, z.B. der Befehl `rep()` sind von geringer Bedeutung.]

```{r}
set.seed(42)  # Zufallszahlen festlegen, hier nicht so wichtig
einkommen_studis <- rep(x = 1000, times = 100)  # rep wie "repeat": wiederhole 1000 USD 100 Mal
einkommen <- c(einkommen_studis, 120*1e6)  # 100 Studis mit 1000E, 1 Mbapp√© mit 120 Mio
einkommen_mw <- mean(einkommen)
```


:::{.callout-note}
1 Million hat 6 Nuller hinter der f√ºhrenden Eins,
das ist 1000 mal 1000.
Anders gesagt: 1 Million = $10^6 = 10^3 * 10^3$.
In Taschenrechner oder Computerschreibweise: 1 Mio = `1e6`,
das `1e6` ist zu lesen als "1 Mal 10 mit 6 im *E*xponenten".
:::

Der Mittelwert im H√∂rsaal betr√§gt also `r scales::label_comma()(einkommen_mw)` Euro.
Ist das ein gutes Modell f√ºr das "typische" Verm√∂gen im H√∂rsaal?


### Der Mittelwert als lineares Modell

Man kann den Mittelwert als Gerade einzeichnen, s. @fig-mw2, bzw. als Gerade begreifen.
Insofern kann man vom Mittelwert auch als *lineares Modell* sprechen.

:::{#def-lm}
### Lineares Modell
Ein lineares Modell verwendet eine Gerade als Modell von Daten.$\square$
:::


```{r}
#| label: fig-mw2
#| fig-cap: Der mittlere Preis von Mariokart-Spielen als Gerade eingezeichnet
#| fig-subcap: 
#|   - "Mit Extremwerten"
#|   - "Ohne Extremwerte (<100 Euro)"
#| echo: false
#| layout-ncol: 2

ggplot(mariokart) +
  aes(x = X, y = total_pr) +
  geom_point(alpha = .7) +
  geom_hline(yintercept = mean(mariokart$total_pr),
             color = "red", size = 2) +
  labs(caption = paste0("MW: ", round(mean(mariokart$total_pr), 2)),
       x = "Nr. des Spiel") +
  scale_y_continuous(limits = c(0, 400))

mariokart2 <- 
mariokart %>% 
  filter(total_pr < 100)
  
ggplot(mariokart2) +
  aes(x = X, y = total_pr) +
  geom_point(alpha = .7) +
  geom_hline(yintercept = mean(mariokart2$total_pr),
             color = "red", size = 2) +
  labs(caption = paste0("MW: ", round(mean(mariokart2$total_pr), 2)),
       x = "Nr. des Spiel") +
  scale_y_continuous(limits = c(0, 400))


```


Ein lineares Modell kann man in R so berechnen:


```{r}
lm(einkommen ~ 1)  # lm wie "lineares Modell" oder engl. "linear modell"
```

Der Befehl gibt als *Koeffizient* einen Wert zur√ºck und zwar den Mittelwert von `einkommen`, s. oben.
Dieser Wert wird als Achsenabschnitt (engl. *intercept*) bezeichnet,
das wird verst√§ndlich, wenn man z.B. in @fig-mw2 sieht, dass die Gerade genau an diesem Punkt die Y-Achse schneidet.

Die Syntax des Befehls `lm()` sieht etwas merkw√ºrdig aus.
Ignorieren Sie das f√ºrs Erste, wir besprechen das sp√§ter (@sec-gerade1) ausf√ºhrlich.


## Median als Modell {#sec-median}


>   üßë‚Äçüéì Hey, der Mittelwert ist doch Quatsch! Das ist gar kein typischer Wert f√ºr die Menschen im H√∂rsaal. Weder f√ºr den Mbapp√©, noch f√ºr uns Studis!

>   üë®‚Äçüè´ Ja, da habt ihr Recht.

>    ‚öΩ   Die Welt  ist schon ungerecht! 


:::{.callout-important}
Bei (sehr) schiefen Verteilungen (s. @fig-mbappe) ist der Mittelwert (sehr) wenig aussagekr√§ftig,
da er nicht mehr "typische" Werte f√ºr die Merkmalstr√§ger beschreibt.
:::

@fig-mbappe stellt die Verteilung einer mit normal skalierter Achse und einmal mit logarithmischer X-Achse.
Die logarithmische X-Achse stellt den Unterschied von Mittelwert und Median deutlicher heraus als die "normale" (additive) Achse. 

```{r}
#| echo: false
#| fig-cap: "Die Einkommensverteilung im H√∂rsaal"
#| label: fig-mbappe
#| layout-ncol: 1
#| fig-asp: 0.5
#| fig-subcap: 
#|   - X-Achse in additiver Form
#|   - X-Achse in multiplikativer Form (logarithmische Darstellung)

d <-
  tibble(einkommen = einkommen,
         id = 1:length(einkommen))

p1 <- ggplot(d) +
  aes(x = einkommen) +
  geom_histogram() +
  theme_minimal() +
  geom_vline(xintercept = c(mean(einkommen)), color = "red") +
  geom_vline(xintercept = c(median(einkommen)), color = "blue") +
  annotate("label", x = median(einkommen), y = 100, label = "Median", color = "blue") +
  annotate("label", x = mean(einkommen), y = 0, label = "MW", color = "red") 

p1

p1 +
  scale_x_continuous(trans = "log10")
```


Der Mittelwert ist H√∂rsaal ist nicht typisch f√ºr die Menschen im H√∂rsaal:
Weder f√ºr Mbapp√©, noch f√ºr die Studis.
Genau genommen ist der Mittelwert in diesem Fall ziemlich nutzlos.


:::{.callout-important}
Der Mittelwert ist empf√§nglich f√ºr Extremwerte:
Gibt es einen extremen Wert in einer Datenreihe,
so spiegelt der Mittelwert stark diesen Wert wieder
und weniger die Mehrheit der gem√§√üigten Werte.
Man sagt, der Mittelwert ist nicht *robust* (gegen√ºber Extremwerten).
:::

:::{#exm-med}
### Das Median-Einkommen einiger Studentinnen
F√ºnf Studentinnen tauschen sich √ºber ihr Einkommen aus, s. @fig-md1, links.
Es handelt sich um eine schiefe Verteilung.



```{r}
#| label: fig-md1
#| fig-cap: Das Median-Einkommen einiger Studentinnen sowie der Mittelwert (MW) ihres Einkommens
#| fig-subcap: 
#|   - "ID auf der X-Achse, Einkommen auf der Y-Achse"
#|   - "Einkommen auf der X-Achse, H√§ufigkeit auf der Y-Achse"
#| echo: false
#| layout-ncol: 1
#| fig-asp: 0.5 


d <-
  tibble(id = 1:5,
         name = c("Anna", "Berta", "Carla", "Dora", "Emma"),
         einkommen = c(1, 2, 3, 4, 100))

d %>% 
  ggplot(aes(x = id, y = einkommen)) +
  geom_vline(xintercept = 3, color = "red") +
  geom_col() +
  geom_label(aes(label = name)) +
  annotate("label", x = 3, y = 50, label = "Median") +
  theme_minimal()


d %>% 
  ggplot(aes(x = einkommen)) +
  geom_histogram(binwidth = 1, color = "white") +
  geom_vline(xintercept = median(d$einkommen), color = "red") +
  annotate("label", x = 3, y = 1, label = "Median", color = "red") +
  geom_vline(xintercept = mean(d$einkommen), color = "blue") +  
  annotate("label", x = 22, y = 1, label = "MW", color = "blue")   +
  theme_minimal()
```



Wir k√∂nnten jetzt behaupten, dass Carla das typische Einkommen (f√ºr diese Datenreihe) aufweist,
da es genauso viele Studentinnen gibt, die mehr verdienen, wie solche, die weniger verdienen.

$\square$

:::


:::{#def-median}
### Median
Merkmalsauspr√§gung, die bei (aufsteigend) sortierten Beobachtungen in der Mitte liegt.
:::

Der Median ist robust (gegen√ºber) Extremwerten: F√ºgt man Extremwerte zu einer Verteilung hinzu, √§ndert sich der Median zumeist (deutlich) weniger als der Mittelwert.

@fig-median-human stellt den Median schematisch dar.




::: {#fig-median-human layout-ncol=5 width="1%" fig-align="bottom"}
![1,60m](img/Human_Silhouette.svg.png){width=0.1%}

![1,72m](img/Human_Silhouette.svg.png){width=0.13%}

![1,79m: Median!](img/human-red.png){width=0.15%}

![1,94](img/Human_Silhouette.svg.png){width=0.16%}

![2,12m](img/Human_Silhouette.svg.png){width=0.2%}

Der Median als der Wert des "mittleren" Objekts, wenn die Objekte aufsteigend sortiert sind.

:::


Bei geradem $n$ werden die beiden mittleren Werte betrachtet und das arithmetische Mittel aus diesen beiden Werten gebildet.


:::{#exm-med2}
Bei der Messreihe 1, 2, 3, 4, 5, 6, 8, 9 betr√§gt der Median 4.5.$\square$
:::



:::{#exr-md2}
### Emma wird reich
Durch ein geniales Patent wird Emma steinreich. Ihr Einkommen erh√∂ht sich um das Hundertfache.
Wie ver√§ndert sich der Median?^[Er bleibt gleich, ver√§ndert sich also nicht.]$\square$
:::

Der Median ist *robust*, er ver√§ndert sich nicht oder kaum, wenn Extremwerte vorliegen.



:::{#exr-mw-md}

### Wer ist mehr "mittel"? Median oder Mittelwert?


>   üßë‚Äçüéì Das arithmetische Mittel sollte Mittelwert hei√üen, weil es die Mitte von zwei Messwerten widerspiegelt, also z.B. von 1 und 10 ist die Mitte 5,5 - also genau beim Mittelwert!

>   üë©‚Äçüéì Moment! Der Median zeigt den mittleren Messert! Links und rechts sind gleich viele Messwerte, wenn man die Werte der Gr√∂√üe nach sortiert. Also liegt der Median genau in der Mitte!

Nehmen Sie Stellung zu dieser Diskussion!$\square$
:::


:::{#exm-md3}

### Ein "mittlerer" Preis f√ºr Mariokart

Der Mittelwert (das arithmetische Mittel) und der Median f√ºr das Start-Gebot (`start_pr)` von Mariokart-Spielen sind nicht gleich, der Mittelwert ist h√∂her als der Median.

```{r}
mariokart <- read.csv("https://vincentarelbundock.github.io/Rdatasets/csv/openintro/mariokart.csv")

mariokart %>% 
  summarise(price_mw = mean(start_pr),
            price_md = median(start_pr))
```

Wie man sieht, ist der Mittelwert gr√∂√üer als der Median, s. @fig-mario-md


```{r fig-mario-md}
#| echo: false
#| fig-cap: "Das Start-Gebot bei Mariokart-Spielen ist schief verteilt: Median und Mittelwert sind unterschiedlich"
#| label: fig-mario-md
mariokart %>% 
  select(start_pr) %>% 
  ggplot(aes(x = start_pr)) +
  geom_histogram() +
  geom_vline(xintercept = 1, color = "red") +
  annotate("label", x = 1, y = 0.1, label = "Md: 1", color = "red") +
  geom_vline(xintercept = 8.7, color = "blue") +
  annotate("label", x = 8.7, y = 0.1, label = "MW: 8.7", color = "blue") +
  theme_minimal()

```


:::


:::{.callout-note}
Klaffen Mittelwert und Median auseinander, so liegt eine schiefe Verteilung vor.
Ist der Mittelwert gr√∂√üer als der Median, so nennt man die Verteilung rechtsschief.
Bei schiefen Verteilungen ist der Median dem Mittelwert als Modell f√ºr den "typischen Wert" vorzuziehen.
:::



:::{#exr-mw-wealthmd}
Was sch√§tzen Sie, wie hoch das *mediane* Verm√∂gen des Haushalte in Deutschland in etwa ist?^[Quelle:  [WSI](https://www.wsi.de/en/how-is-wealth-distributed-in-germany-14401.htm), Abruf 2023-04-19])

a) 50.000 Euro
b) 100.000 Euro
c) 150.000 Euro
d) 200.000 Euro
e) 250.000 Euro$\square$
:::


:::{#exr-mw-wealthmd}
Was sch√§tzen Sie, wie gro√ü der *Unterschied* zwischen medianem und mittlerem (arithm. Mittel) des Jahreseinkommen deutscher Haushalte ungef√§hr ist?^[Quelle:  [Wikipedia](https://de.wikipedia.org/wiki/Einkommensverteilung_in_Deutschland), Abruf 2023-04-19, der Unterschied betr√§gt knapp 3000 Euro laut der Quelle])

a) 1.000 Euro
b) 2.000 Euro
c) 3.000 Euro
d) 4.000 Euro
e) 5.000 Euro$\square$
:::



## Quartile


Der Median teilt eine Verteilung in eine untere und ein obere H√§lfte.
Er markiert sozusagen eine "50-Prozent-Marke" (der aufsteigend sortierten Beobachtungen).
Betrachten wir einmal nur alle Spiele, die f√ºr weniger als 100 Euro verkauft wurden (`total_pr`, finales Verkaufsgebot), 
s. @fig-mario-qs.
50% aller Spiele wurden f√ºr weniger als ca. 46 Euro verkauft;
50% aller Spiele f√ºr mehr als 46 Euro.

Jetzt k√∂nnten wir nur die g√ºnstigere H√§lfte betrachten und wieder nach dem Median fragen.
Dieser "Median der g√ºnstigeren H√§lfte" grenzt damit das insgesamt g√ºnstigste Viertel vom Rest der Verkaufsgebote ab.
In unserem Datensatz liegt dieser Wert bei ca. 41 Euro.
Entsprechend kann man nach dem Wert fragen, der das oberste Viertel 
vom Rest der Verkaufsgebote abtrennt.
Dieser Wert liegt bei ca. 54 Euro.


:::{#def-quartile}

### Quartile

Sortiert man die Daten aufsteigend, so nennt man den Wert,
der das Viertel mit den kleisten Wert vom Rest der Daten trennt das *erste Quartil* (Q1, 25%).
Den Median nennt man das *zweite Quartil* (Q2, 50%).
Entsprechend hei√üt der Wert, der die drei Viertel kleinsten Werte vom oberen Viertel abtrennt, das *dritte Quartil* (Q3, 75%).$\square$
:::

:::{#exm-mario-qs}

### Quartile des Verkaufsgebot

@fig-mario-qs zeigt die Quartile f√ºr das Verkaufsgebot.$\square$
:::




Jetzt k√∂nnte man sagen, hey, warum nur in 25%-St√ºcke die Verteilung aufteilen?
Warum nicht in 10%-Schritten? Oder in 1%-Schritten oder in sonstigen Schnitten?
Wo die Quartile in 25%-Schritten aufteilen, teilt in *Quantil* in $p$-Prozent-Schritten auf.


:::{#def-quantile}
### Quantile
Ein p-Quantil ist der Wert, der von $p$ Prozent der Werte nicht √ºberschritten wird.$\square$
:::


```{r}
#| echo: false
#| label: fig-mario-qs
#| fig-cap: Q1, Q2 und Q3 f√ºr das Schlussgebot (nur Spiele f√ºr weniger als 100 Euro)
mario_quantile <- 
mariokart %>% 
  filter(total_pr < 100) %>% 
  summarise(q25 = quantile(total_pr, .25),
            q50 = quantile(total_pr, .50),
            q75 = quantile(total_pr, .75))

mario_quantile <- 
  mariokart %>% 
  filter(total_pr < 100) %>% 
  reframe(qs = quantile(total_pr, c(.25, .5, .75)))

mariokart %>% 
  filter(total_pr < 100) %>%  
  ggplot(aes(x = total_pr)) +
  geom_histogram() +
  geom_vline(xintercept = mario_quantile$qs) +
  annotate("label", x =  mario_quantile$qs, y = 0, label =  mario_quantile$qs)
```


Quantile kann man in R so berechnen:

```{r}
#| eval: false
mario_quantile <- 
mariokart %>% 
  filter(total_pr < 100) %>% 
  summarise(q25 = quantile(total_pr, .25),
            q50 = quantile(total_pr, .50),
            q75 = quantile(total_pr, .75))
```


## Lagema√üe {#sec-lage}

>    üßë‚Äçüéì Was ist der Oberbegriff f√ºr Median, Mittelwert und so weiter?

>    üë©‚Äçüè´ Gute Frage! Wie w√ºrden Sie ihn nennen?



:::{#def-lage}

### Lagema√ü
Ein Lagema√ü oder *Ma√ü der zentralen Tendenz* gibt einen Vorschlag, welchen Wert wir als typisch, normal, zu erwarten, repr√§sentativ oder mittel ansehen sollten.$\square$
:::

Typische Lagema√üe:

- Mittelwert (arithmetisches Mittel)
- Median
- Quartile
- Quantile
- Minimum (kleinester Wert)
- Maximum (gr√∂√üter Wert)
- Modus (h√§ufigster Wert)


```{r}
mariokart_lagema√üe_total_pr <-
  mariokart %>% 
  summarise(mw = mean(total_pr),
            md = median(total_pr),
            q1 = quantile(total_pr, .25),
            q2 = quantile(total_pr, .5),
            q3 = quantile(total_pr, .75),
            min = min(total_pr),
            max = max(total_pr))
mariokart_lagema√üe_total_pr
```


### Gruppierte Lagema√üe

H√§ufig m√∂chte man Statistiken wie Lagema√üe f√ºr mehrere Teilgruppen - z.B. Mittlere K√∂rpergr√∂√üe von Frauen vs. Mittlere K√∂rpergr√∂√üe von M√§nner - berechnen und dann vergleichen.
Die dahinter stehende *Forschungsfrage* k√∂nnte lauten:


>    Unterscheidet sich die mittlere K√∂rpergr√∂√üe von Frauen und M√§nnern?

Oder vielleicht:

>    Hat das Geschlecht einen Einfluss auf die K√∂rpergr√∂√üe?


Anders ausgedr√ºckt:


>    K√∂rpergr√∂√üe $y$ ist eine Funktion des Geschlechts $G$.


Die *Modellformel* k√∂nnte also lauten:

$$y \sim G$$

Gruppierte Lagema√üe lassen sich in R z.B. so berechnen:


```{r}
mariokart_lagema√üe_gruppiert <-
  mariokart %>% 
  group_by(wheels) %>%  # neue Zeile, der Rest ist gleich!
  summarise(mw = mean(total_pr))

mariokart_lagema√üe_gruppiert
```


@fig-mw2 zeigt ein Beispiel f√ºr ungruppierte (links) bzw. gruppierte (rechts) Mittelwerte.
Wie man in dem Diagramm sieht, kann das *Residuum kleiner* werden bei einer Gruppierung (im Vergleich zu einem ungruppierten, "globalen" Mittelwert).





:::{#def-punktmodell}
### Punktmodell
Ein Modell, welches f√ºr alle Beobachtungen ein und denselben Wert annimmt (vorhersagt),
hei√üt ein *Punktmodell*. 
Anders gesagt fasst ein Punktmodell eine Wertereihe (h√§ufig ist das eine Tabellenspalte) zu einer einzelnen Zahl zusammen, einem "Punkt" in diesem Sinne, s. @eq-desk.$\square$
:::

$$\begin{array}{|c|} \hline \\ \hline \\\\\\ \hline \end{array} \qquad \rightarrow \qquad \begin{array}{|c|} \hline \\ \hline  \hline \end{array}$$ {#eq-desk}

Mittelwert, Median und Quartile sind Beispiele f√ºr Punktmodelle:
Sie fassen eine Verteilung zu einem einzelnen Wert zusammen und geben uns ein "Bild" der Daten, machen Sie uns verst√§ndlich - sie sind uns ein Modell.




## Fazit

:::{#exm-survival1}
### Survival-Tipp

Eine Studentin aus dem dem Bachelorstudiengang "Angewandte Medien- und Wirtschaftspsychologie" mit Schwerpunkt *Data Science* berichtet ihre "Survival-Tipps" f√ºr Statistik.

1. Wenn man mal nicht weiterkommt hilft es auch mal ein paar Tage Abstand von R und Statistik zu nehmen. 
2. Sich w√§hrend des Semesters neue Begriffe und ihre Erkl√§rung zusammenschreiben.
3. Mit KommilitonInnen austauschen oder in h√∂heren Semestern nach Tipps fragen.$\square$
:::


>    üë©‚Äçüéì Irgendwie kann ich mir R-Code so schlecht merken.

>    üë©‚Äçüè´ Frag doch mal ChatGPT, da bekommt man auch R-Code ausgegegeben.


<!-- TODO Literatur pro Kapitel hinzuf√ºgen. -->




## Aufgaben

Ein Teil der Aufgaben kann Stoff beinhalten,
den Sie noch nicht kennen, aber sp√§ter kennenlernen.
Ignorieren Sie daher Aufgaben(teile) mit (noch) unbekannte Stoff.


1. [Kennwert-robust](https://datenwerk.netlify.app/posts/kennwert-robust/kennwert-robust)
1. [mw-berechnen](https://datenwerk.netlify.app/posts/mw-berechnen/mw-berechnen.html)
1. [mariokart-max2](https://datenwerk.netlify.app/posts/mariokart-max2/mariokart-max2.html)
1. [nasa01](https://datenwerk.netlify.app/posts/nasa01/nasa01.html)
1. [nasa02](https://datenwerk.netlify.app/posts/nasa02/nasa02.html)
1. [mariokart-mean1](https://datenwerk.netlify.app/posts/mariokart-mean1/mariokart-mean1.html)
1. [wrangle10](https://datenwerk.netlify.app/posts/wrangle10/wrangle10.html)
1. [summarise01](https://datenwerk.netlify.app/posts/summarise01/summarise01.html)
1. [mariokart-max1](https://datenwerk.netlify.app/posts/mariokart-max1/mariokart-max1.html)
1. [Schiefe1](https://datenwerk.netlify.app/posts/schiefe1/schiefe1)
1. [mariokart-mean2](https://datenwerk.netlify.app/posts/mariokart-mean2/mariokart-mean2.html)
1. [summarise03](https://datenwerk.netlify.app/posts/summarise03/summarise03.html)
1. [mariokart-mean4](https://datenwerk.netlify.app/posts/mariokart-mean4/mariokart-mean4.html)
1. [mariokart-mean3](https://datenwerk.netlify.app/posts/mariokart-mean3/mariokart-mean3.html)
1. [summarise02](https://datenwerk.netlify.app/posts/summarise02/summarise02.html)


Schauen Sie sich auch mal auf [Datenwerk](https://datenwerk.netlify.app/) die Aufgaben zu z.B. dem Tag [EDA](https://datenwerk.netlify.app/#category=eda) an.


## Literatur


