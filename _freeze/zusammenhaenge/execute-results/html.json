{
  "hash": "16730ef2e61c1cd311b4b598fb0631c2",
  "result": {
    "markdown": "# Punktmodelle 2\n\n\n\n## Lernsteuerung\n\n### Standort im Lernpfad\n\n@fig-ueberblick zeigt den Standort dieses Kapitels im Lernpfad und gibt damit einen √úberblick √ºber das Thema dieses Kapitels im Kontext aller Kapitel.\n\n\n\n\n### Lernziele\n\n\n- Sie k√∂nnen die Begriffe Kovarianz und Korrelation definieren und ihren Zusammenh√§ng erl√§utern.\n- Sie k√∂nnen die St√§rke einer Korrelation einsch√§tzen.\n\n### Ben√∂tigte R-Pakete\n\nIn diesem Kapitel ben√∂tigen Sie folgende R-Pakete.\n\n\n::: {.cell hash='zusammenhaenge_cache/html/unnamed-chunk-1_a7cd71d403adefc4410dd9fd8b40c296'}\n\n:::\n\n\n\n\n\n\n## Zusammenfassen zum Zusammenhang\n\n\nIn @sec-punktmodelle1 haben wir gelernt,\ndass das Wesen eines Punktmodells als Zusammenfassung *einer* Spalte (eines Vektors) zu einer einzelnen Zahl^[auch Skalar genannt], zu einem \"Punkt\" sozusagen, zusammengefasst werden kann.\n\nIn diesem Kapitel fassen wir *zwei* Spalten zusammen, wieder zu *einer* Zahl, s. @eq-desk2.\n\n$$\\begin{array}{|c|} \\hline \\\\ \\hline \\\\\\\\\\\\ \\hline \\end{array} + \\begin{array}{|c|} \\hline \\\\ \\hline \\\\\\\\\\\\ \\hline \\end{array} \\qquad \\rightarrow \\qquad \\begin{array}{|c|} \\hline \\\\ \\hline  \\hline \\end{array}$$ {#eq-desk2}\n\n\nWo wir in @sec-punktmodelle1 eine Variable mit Hilfe eines Lagema√ües beschrieben/dargestellt/zusammengefasst/modelliert haben, tun wir hier das Gleich f√ºr zwei Variablen.\nBeschreibt man aber zwei Variablen, so geht es um die Frage, was die beiden Variablen miteinander zu tun haben:\nWie die beiden Variablen von einander abh√§ngen bzw. miteinander (irgendwie) zusammenh√§ngen.\nWir begrenzen auf *metrische* Variablen.\n\nDie Verbildlichung^[Visualisierung] zweier metrischer Variablen haben wir bereits in @sec-zshg-metr kennengelernt.\nZur Verdeutlichung, wie ein Zusammenhang zweier metrischer Variablen aussehen kann, helfe noch einmal @fig-zshg.\n\n\n\n::: {#fig-zshg .cell layout-ncol=\"2\" hash='zusammenhaenge_cache/html/fig-zshg_bf9cf7f75c28e6f9e488b976789198a4'}\n::: {.cell-output-display}\n![Streudiagramm mit Trendlinie (und Ellipse zur Verdeutlichung)](zusammenhaenge_files/figure-html/fig-zshg-1.png){#fig-zshg-1 width=672}\n:::\n\n::: {.cell-output-display}\n!['Verwackeltes' Streudiagramm, um die einzelnen Punkte besser zu erkennen](zusammenhaenge_files/figure-html/fig-zshg-2.png){#fig-zshg-2 width=672}\n:::\n\nVisualisierung des Zusammenhangs von wheels und total_pr\n:::\n\n\n\n\n## Abweichungsrechtecke\n\n\n### Noten und Abweichungsrechtecke\n\n\n\n::: {.cell hash='zusammenhaenge_cache/html/unnamed-chunk-4_cd432ebe9109b30d6da8545f7c36a35b'}\n\n:::\n\n\n\n:::{#exm-noten2}\n### Wieder Statistiknoten\n\nAnton, Bert, Carl und Daniel haben ihre Statistikklausur zur√ºckbekommen.\nDie Lernzeit $X$ scheint mit der erreichten Punktzahl $Y$ (0-100, je mehr desto besser) zusammenzuh√§ngen.^[>    üßë‚Äçüéì  Typisches Lehrerbeispiel!!]\nGar nicht so schlecht ausgefallen, s. @tbl-noten2.$\\square$\n:::\n\n\n::: {#tbl-noten2 .cell tbl-cap='Statistiknoten und Lernzeit' hash='zusammenhaenge_cache/html/tbl-noten2_fdae5e77669473fc57628729154a09f5'}\n::: {.cell-output-display}\n| id|  y|  x|\n|--:|--:|--:|\n|  1| 72| 70|\n|  2| 44| 40|\n|  3| 39| 35|\n|  4| 50| 67|\n:::\n:::\n\n\nZeichner wir uns die Daten als Streudiagramm, s. @fig-delta-rect.\nDabei zeichnen wir noch *Abweichungsrechtecke* ein.\n\n\n:::{#def-abweichungsrechteck}\n### Abweichungsrechteck\nIm zweidimensionalen Fall spannt sich ein Abweichungsrechteck vom Mittelwert $\\bar{x}$ bis zum Messwert $x_i$ und genauso f√ºr $Y$.\nBezeichnet man die Distanz vom Mittelwert $\\bar{x}$ bis zum Messwert $x_i$ mit $dx_i$ (und analog $dy_i$), so betr√§gt die Fl√§che des Abweichungsrechtecks $dx_i \\cdot dy_i$.$\\square$\n:::\n\n\n::: {.cell hash='zusammenhaenge_cache/html/fig-delta-rect_9f2221a1b8eda6549773adfd1211f4ac'}\n::: {.cell-output-display}\n![Die Kovarianz als mittleres Abweichungsrechteck. In jedem der vier Quadranten (Q1, Q2, Q3, Q4) ist das Vorzeichen der Abweichungsrechtecke dargestellt. Die Farben der Abweichungsrechtecke spiegeln das Vorzeichen wider.](zusammenhaenge_files/figure-html/fig-delta-rect-1.png){#fig-delta-rect width=672}\n:::\n:::\n\n\n\nStellen Sie sich vor, wir legen alle Rechtecke zusammen aus @fig-delta-rect.\nNennen wir das resultierende Rechteck das \"Summenrechteck\".\nJa, ich wei√ü, ich strapaziere mal wieder Ihre Phantasie^[hoffentlich nicht Ihre Geduld].\nJetzt kommt's: Je gr√∂√üer die Fl√§che des Summenrechtecks, desto st√§rker der (lineare) Zusammenhang.\n\nBeachten Sie, dass die Fl√§chen Vorzeichen haben, positiv oder negativ (Plus oder Minus), je nach dem, in welchem der vier Quadranten sie stehen. Die F√ºllfarben der Rechtecke verdeutlicht dies.\n\nDas *Vorzeichen* der Summe zeigt an, ob der Zusammenhang positiv (gleichsinnig, ansteigende Trendlinie) oder negativ (gegensinnig, absinkende Trendlinie) ist.\n\nSo zeigt @fig-kov links eine positive Summe der Abweichungsrechtecke und rechts eine negative Summe. Man sieht im linken Diagramme, dass die Summe der Rechtecke mit positivem Vorzeigen √ºberwiegt; im rechten Diagramm ist es umgekehrt.\n\n\n::: {#fig-kov .cell layout-ncol=\"2\" hash='zusammenhaenge_cache/html/fig-kov_32bb317adbca75f2cd38fcc2f2984948'}\n::: {.cell-output-display}\n![Positive Vorzeichen (Quadranten 1 und 3) √ºberweigen, was in einer positiven Kovarianz resultiert - Negative Vorzeichen (Quadranten 2 und 4) √ºberweigen, was in einer negativen Kovarianz resultiert](zusammenhaenge_files/figure-html/fig-kov-1.png){#fig-kov-1 width=672}\n:::\n\n::: {.cell-output-display}\n![Positive Vorzeichen (Quadranten 1 und 3) √ºberweigen, was in einer positiven Kovarianz resultiert - Negative Vorzeichen (Quadranten 2 und 4) √ºberweigen, was in einer negativen Kovarianz resultiert](zusammenhaenge_files/figure-html/fig-kov-2.png){#fig-kov-2 width=672}\n:::\n\nPositive und negative Kovarianz: Einmal resultiert eine positive Summe, einmal eine negative Summe, wenn man die Fl√§chen der Abweichungsrechtecke addiert.\n:::\n\n\n\n\nWir k√∂nnen das Summenrechteck noch durch die Anzahl der Datenpunkte teilen,\ndas √§ndert nichts an der Aussage,\naber der Mittelwert hat gegen√ºber der Summe den Vorteil, dass er unabh√§ngig ist in seiner Aussage von der Anzahl der eingegangenen Datenpunkte.\nDas resultierende Rechteck nennen wir das *mittlere Abweichungsrechteck*.\n\n\nEin Ma√ü f√ºr den Zusammenhang von Lernzeit und Klausurpunkte ist also die *Gr√∂√üe des mittleren Abweichungsrechtecks*.\n\n\n### Kovarianz {#sec-kov}\n\n:::{#def-kov}\n### Kovarianz\nDie Kovarianz ist definiert als die Fl√§che des mittleren Abweichungsrechtecks.\nSie ist ein Ma√ü f√ºr die St√§rke und Richtung des linearen Zusammenhangs zweier metrischer Variablen.$\\square$\n:::\n\n\n>   üë©‚Äçüéì Zu viele Bilder! Ich brauch Zahlen.\n\n>   üë©‚Äçüè´ Kommen schon!\n\n\n@tbl-kov2 zeigt die Werte f√ºr die X- und Y-Abweichung und die resultierenden Fl√§chen der Abweichungsrechtecke.\nWenn Sie die Werte selber nachrechnen wollen, finden Sie den Noten-Datensatz in der Datei [noten.csv](https://raw.githubusercontent.com/sebastiansauer/statistik1/main/daten/noten.csv).\n\n\n\n\n::: {#tbl-kov2 .cell tbl-cap='Werte der Abweichungsrechtecke' hash='zusammenhaenge_cache/html/tbl-kov2_68c538288f24d0e7958423c56bd5f844'}\n::: {.cell-output-display}\n| id|  y|  x| x_avg| y_avg| x_delta| y_delta|x_pos |y_pos | cov_sign| xy_area|\n|--:|--:|--:|-----:|-----:|-------:|-------:|:-----|:-----|--------:|-------:|\n|  1| 72| 70|    53| 51.25|      17|   20.75|TRUE  |TRUE  |        1|  352.75|\n|  2| 44| 40|    53| 51.25|     -13|   -7.25|FALSE |FALSE |        1|   94.25|\n|  3| 39| 35|    53| 51.25|     -18|  -12.25|FALSE |FALSE |        1|  220.50|\n|  4| 50| 67|    53| 51.25|      14|   -1.25|TRUE  |FALSE |       -1|  -17.50|\n:::\n:::\n\n\n\nBerechnen wir als n√§chstes das mittlere Abweichungsrechteck, die Kovarianz:\n\n\n::: {.cell hash='zusammenhaenge_cache/html/unnamed-chunk-9_eb2e62091a68ad90c2664b5f69411c37'}\n\n```{.r .cell-code}\nd %>%\n  summarise(kovarianz = sum(xy_area))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"kovarianz\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"650\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nDie Formel der Kovarianz lautet (@eq-cov3): \n\n$$\\text{cov(xy)} = s_{xy}:=\\frac{1}{n}\\sum_{i=1}^n (x_i-\\bar{x})(y_i-\\bar{y}) = \\frac{1}{n}\\sum_{i=1}^n dx_i\\cdot dy_i$$ {#eq-cov3}.\n\nIn Worten:\n\n1. Rechne f√ºr jedes $x_i$ die Abweichung vom Mittelwert, $\\bar{x}$, aus, $dx_i$\n1. Rechne f√ºr jedes $y_i$ die Abweichung vom Mittelwert, $\\bar{y}$, aus, $dy_i$\n3. Multipliziere f√ºr alle $i$ $dx_i$ mit $xy_i$, um die Abweichungsrechtecke $dx_i dy_i$ zu berechnen\n4. Addiere die Fl√§chen der Abweichungsrechtecke\n5. Teile durch die Anzahl der Beobachtungen $n$\n\n\n:::{#exm-pos-kov}\n### Variablen mit positiver Kovarianz\n\n- Gr√∂√üe und Gewicht\n- Lernzeit und Klausurerfolg\n- Distanz zum Ziel und Reisezeit\n- Temperatur und Eisverkauf$\\square$\n:::\n\n\n\n:::{#exm-neg-kov}\n### Variablen mit negativer Kovarianz\n\n- Lernzeit und Freizeit\n- Alter und Restlebenszeit\n- Temperatur und Schneemenge\n- Lebenszufriedenheit und Depressivit√§t$\\square$\n:::\n\n\nDrei Extrembeispiele f√ºr Kovarianz-Werte sind in @fig-demos-cov dargestellt.\n\n\n\n::: {#fig-demos-cov .cell layout-ncol=\"3\" hash='zusammenhaenge_cache/html/fig-demos-cov_703f45bf3c0b2d59645752394c8d0b25'}\n::: {.cell-output-display}\n![Perfekter positiver Zusammenhang](zusammenhaenge_files/figure-html/fig-demos-cov-1.png){#fig-demos-cov-1 width=672}\n:::\n\n::: {.cell-output-display}\n![stark negativer Zusammenhang](zusammenhaenge_files/figure-html/fig-demos-cov-2.png){#fig-demos-cov-2 width=672}\n:::\n\n::: {.cell-output-display}\n![kein Zusammenhang](zusammenhaenge_files/figure-html/fig-demos-cov-3.png){#fig-demos-cov-3 width=672}\n:::\n\nVerschiedene Werte der Kovarianz\n:::\n\n\n\n\nBei einer Kovarianz von 0 ist die Fl√§che der Abweichungsrechtecke^[Bei der Varianz waren es Quadrate, bei der Kovarianz sind es Rechtecke.], wenn man sie pro Quadrant aufsummiert, etwa gleich gro√ü, s. @fig-covnull.\nAddiert man die Abweichungsrechtecke (unter Beachtung der Vorzeichen: rot = positiv; blau = negativ), so betr√§gt die Summe in etwa (oder genau) Null.\n\nDamit ist die Kovarianz in diesem Fall etwa (bzw. genau) Null:\n\n\n$$\\begin{align}\n\\sum \\left(dX \\cdot dY \\right) &= 0\\\\\n\\Leftrightarrow \\varnothing \\left(dX \\cdot dY \\right) &= 0\\\\\n\\Leftrightarrow \\text{cov} &= 0\n\\end{align}$$\n\n\n\n\n\n::: {#fig-covnull .cell layout-ncol=\"2\" hash='zusammenhaenge_cache/html/fig-covnull_36c64959d97eb898b0f755efd1aeb058'}\n::: {.cell-output-display}\n![4 Abweichungsrechtecke, deren Fl√§che sich zu 0 addiert](zusammenhaenge_files/figure-html/fig-covnull-1.png){#fig-covnull-1 width=672}\n:::\n\n::: {.cell-output-display}\n![200 Abweichungsrechtecke, deren Fl√§che sich zu 0 addiert](zusammenhaenge_files/figure-html/fig-covnull-2.png){#fig-covnull-2 width=672}\n:::\n\nWenn die Kovarianz 0 ist, gleichen sich die Abweichungsrechtecke auf 0 aus\n:::\n\n\n\n\n\n\n\n### Die Kovarianz ist schwer zu interpretieren\n\nDie Kovarianz hat den Nachteil, dass sie abh√§ngig ist von der Skalierung.\nSo steigt die Kovarianz z.B. um den Faktor 100, wenn man eine Variable (z.B. Einkommen) anstelle von Euro in Cent bemisst.\nDas ist nicht w√ºnschenswert, denn der Zusammenhang zwischen z.B. Einkommen und Lebenszufriedenheit ist unabh√§ngig davon, ob man Einkommen in Euro, Cent oder Dollar misst.\nAu√üerdem hat die Kovarianz keinen Maximalwert, der einen perfekten Zusammenhang anzeigt.\n\nInsgesamt ist die Kovarianz schwer zu interpretieren und wird in der praktischen Anwendung nur wenig verwendet.\n\n\n\n## Korrelation\n\nDer Korrelationskoeffizient $r$ nach Karl Pearson l√∂st das Problem, dass die Kovarianz schwer interpretierbar ist.\nDer Wertebereich von $r$ reicht von -1 (perfekte negative lineare Korrelation) bis +1 (perfekte positive lineare Korrelation).\nEine Korrelation von $r = 0$ bedeutet kein linearer Zusammenhang.\n\n\nDie Korrelation berechnet sich wie folgt:\n\n1. Teile alle $x_i$ durch ihre Standardabweichung, $s_x$\n2. Teile alle $y_i$ durch ihre Standardabweichung, $s_y$\n3. Berechne mit diesen Werten die Kovarianz\n\n\nTeilt man n√§mlich alle $x_i$ bzw. $y_i$ durch ihre Standardabweichung,\nso f√ºhrt man mit $X$ bzw. $Y$ eine z-Transformation durch.\nDaher kann man den Korrelationskoeffizienten $r$ so definieren:\n\n\n:::{#def-r}\n### Korrelationskoeffizient r\n\nDer Korrelationskoeffizient $r$ ist definiert als das mittlere Produkt der z-Wert-Paare: $r_{xy}=\\frac{1}{n}\\sum_{i=1}^n z^x_i z^y_i$.$\\square$\n:::\n\n\n\n:::{.callout-note}\nAus dem Korrelationskoeffizienten k√∂nnen Sie zwei Informationen ableiten:\n\n1. *Vorzeichen*: Ein positives Vorzeichen bedeutet positiver (gleichsinniger) linearer Zusammenhang (und umgekehrt: negatives Vorzeichen, negativer, also gegensinniger linearer Zusamamenhang).\n2. *Absolutwert* der Korrelation: Der Absolutwert des Korrelationskoeffizienten gibt die St√§rke des linearen Zusammenhangs an. Je n√§her der Wert bei 1 liegt desto st√§rker der Zusammenhang. \n  - $r = 0$: kein linearer Zusammenhang\n  - $r = 1$: perfekter linearer Zusammenhang$\\square$\n:::\n\n\n\nEine Zuordnung des Korrelationskoeffizienten zum Profil des Streudiagramms zeigt @fig-corr-wiki.\n\n![Verschiedene Streudiagramme, die sich in ihrem Korrelationskoeffizienten unterscheiden. Quelle: Wikipedia, By DenisBoigelot, original uploader was Imagecreator, CC0, https://commons.wikimedia.org/w/index.php?curid=15165296 CC0](img/Correlation_examples2.svg){#fig-corr-wiki}\n\n\n\n:::{#exr-corrgame}\n### Korrelationsspiel\nSpielen Sie das [Korrelationsspiel](https://gallery.shinyapps.io/correlation_game/): Sie Sehen ein Streudiagramm und m√ºssen den richtigen Korrelationskoeffizienten eingeben.$\\square$\n:::\n\n\n:::{#exr-corrvis}\n### Interaktive Visualisierung der Korrelation\n\nAuf der Seite von [RPsychologist](https://rpsychologist.com/correlation/) findet sich eine ansprechende dynamische Visualisierung der Korrelation.\nNutzen Sie sie, um Ihr Gef√ºhl f√ºr die St√§rke des Korrelationskoeffizienten zu entwickeln.$\\square$\n:::\n\n\n\n\n\n### Korrelation ‚â† Kausation\n\nEine Studie fand eine starke Korrelation, \n zwischen der (H√∂he des) Schokoladenkonsums eines Landes und (Anzahl der) Nobelpreise eines Landes [@messerli_chocolate_2012], s. @fig-schoki.\n \n ![Schoki futtern macht schlau?](img/correlation_550.png){#fig-schoki}\n\n:::{.callout-caution}\nKorrelation (bzw. Zusammenhang) ungleich Kausation! Korrelation kann bedeuten, dass eine Kausation vorliegt, aber es muss auch nicht sein, dass Kausation vorliegt. \nLiegt Korrelation ohne Kausation vor, so spricht man von einer Scheinkorrelation. \n:::\n\n\n### Korrelation misst nur linearen Zusammenhang\n\n\n\n\n\n:::{#exm-scheinkorr}\n### Scheinkorrelation\nEine Urban Myth besagt: Die Anzahl der St√∂rche pro Landkreis korreliert mit der Anzahl der Babies in diesem Landkreis.\n\n>   Bald men at higher risk of severe case of Covid-19, research finds^[https://www.telegraph.co.uk/global-health/science-and-disease/bald-men-higher-risk-severe-case-covid-19-research-finds/, Abruf 2023-03-24]\n\nMacht die Glatze krank? M√§nner mit Glatze bekommen h√§ufiger Corona [@goren_preliminary_2020].\n\n\n[Hier](https://scheinkorrelation.jimdofree.com/) finden Sie weitere Beispiele f√ºr Scheinkorerlation.$\\square$\n:::\n\n\n\n## Fallbeispiel\n\n\nIn Ihrer Arbeit beim Online-Auktionshaus analysieren Sie, welche Variablen mit dem Verkaufspreis von Computerspielen zusammenh√§ngen.\n\n\nFalls der Datensatz auf Ihrem Computer (am besten in Ihrem Projektverzeichnis in RStudio) abgelegt ist, k√∂nnen Sie die Daten so (in mittlerweile gewohnter Manier) importieren:\n\n\n::: {.cell hash='zusammenhaenge_cache/html/unnamed-chunk-12_ac55a7d5219595449c25b038f01c6c44'}\n\n```{.r .cell-code}\nmariokart <- read.csv(\"mariokart.csv\")\n```\n:::\n\n\n\nFalls der Datensatz im Unterordner mit Namen \"Mein_Unterordner\" liegt, so w√ºrden Sie folgenden Pfad eingeben:\n\n\n::: {.cell hash='zusammenhaenge_cache/html/unnamed-chunk-13_bfa92fc701f69a1739e95876110d1698'}\n\n```{.r .cell-code}\nmariokart <- read.csv(\"Mein_Unterordner/mariokart.csv\")\n```\n:::\n\n\nMan beachte, dass solche sog. relativen Pfade (relativ zu Ihrem Arbeitsverzeichnis, d.h. Ihr Projektverzeichnis in R-Studio) *nicht* mit einem Schr√§gstrich (Slash) beginnen.\n\nFalls Sie die Daten nicht auf Ihrem Computer haben,\nk√∂nnen Sie sie komfortable von z.B. der Webseite von [Vincent Arel-Bundock](https://vincentarelbundock.github.io/Rdatasets) herunterladen:\n\n\n::: {.cell hash='zusammenhaenge_cache/html/unnamed-chunk-14_5b504637cf311412e7840a9cac46f4e2'}\n\n```{.r .cell-code}\nmariokart <- read.csv(\"https://vincentarelbundock.github.io/Rdatasets/csv/openintro/mariokart.csv\")\n```\n:::\n\n\nSie w√§hlen die Variablen von `mariokart`, die Sie interessieren - nat√ºrlich nur die metrischen - und lassen sich mit `cor` die Korrelation aller Variablen untereinander ausgeben: \n\n\n::: {.cell hash='zusammenhaenge_cache/html/unnamed-chunk-15_2010959ee13d8384502879f14d0e3979'}\n\n```{.r .cell-code}\nmariokart %>%  \n  dplyr::select(duration, n_bids, start_pr, ship_pr, total_pr, seller_rate, wheels) %>% \n  cor() %>% \n  round(2) # Runden auf zwei Dezimalen\n##             duration n_bids start_pr ship_pr total_pr seller_rate wheels\n## duration        1.00  -0.12     0.13    0.27    -0.04       -0.15  -0.30\n## n_bids         -0.12   1.00    -0.63    0.03     0.13       -0.11  -0.08\n## start_pr        0.13  -0.63     1.00    0.03     0.07        0.28   0.16\n## ship_pr         0.27   0.03     0.03    1.00     0.54       -0.02   0.05\n## total_pr       -0.04   0.13     0.07    0.54     1.00        0.01   0.33\n## seller_rate    -0.15  -0.11     0.28   -0.02     0.01        1.00  -0.15\n## wheels         -0.30  -0.08     0.16    0.05     0.33       -0.15   1.00\n```\n:::\n\n\n\n\n:::{.callout-caution}\n### Namensverwechslung (name clash)\nEs kann vorkommen, dass Sie zwei R-Pakete geladen haben, in denen es jeweils z.B. eine Funktion mit Namen `select` gibt.\nR wird in dem Fall diejenige Funktion verwenden, deren Paket Sie als letztes gestartet haben.\nDas kann dann das falsche `select` sein, wie es mir oben in der Syntax passiert ist.\nIn dem Fall resultiert eine verwirrende Fehlermeldung, die sinngem√§√ü sagt: \"Hey Mensch, du hast Argumente in der Funktion verwendet, die du gar nicht verwenden darfst, da es sie nicht gibt.\" Auf Errisch: `Error in select(., duration, n_bids, start_pr, ship_pr, total_pr, seller_rate,  : unused arguments (duration, n_bids, start_pr, ship_pr, total_pr, seller_rate, wheels)`.\nEine einfache Abhilfe ist es, R zu sagen: \"Hey R, nimm gef√§lligst `select` aus dem Paket `dplyr`, dort \"wohnt\" n√§mlich `select`. Auf Errisch spricht sich das so: `dplyr::select(...)`.$\\square$\n:::\n\n\n\nEtwas sch√∂ner sieht die Ausgabe mit dem Befehl `correlation` aus `{easystats}` aus, s. @tbl-mario-corr.\n\n\n::: {#tbl-mario-corr .cell tbl-cap='Korrelationstabelle (tidy) im Datensatz mariokart' hash='zusammenhaenge_cache/html/tbl-mario-corr_4f44dc2f900818cae4a1f4a054030efb'}\n\n```{.r .cell-code}\nmariokart %>% \n  dplyr::select(duration, n_bids, start_pr, ship_pr, total_pr, seller_rate, wheels) %>% \n  correlation() \n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"\"],\"name\":[\"_rn_\"],\"type\":[\"\"],\"align\":[\"left\"]},{\"label\":[\"Parameter1\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Parameter2\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"r\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"CI\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"CI_low\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"CI_high\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"t\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"df_error\"],\"name\":[8],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"p\"],\"name\":[9],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"Method\"],\"name\":[10],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"n_Obs\"],\"name\":[11],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"duration\",\"2\":\"n_bids\",\"3\":\"-0.121023965\",\"4\":\"0.95\",\"5\":\"-0.2796176776\",\"6\":\"0.043998681\",\"7\":\"-1.4477213\",\"8\":\"141\",\"9\":\"1.000000e+00\",\"10\":\"Pearson correlation\",\"11\":\"143\",\"_rn_\":\"1\"},{\"1\":\"duration\",\"2\":\"start_pr\",\"3\":\"0.134721334\",\"4\":\"0.95\",\"5\":\"-0.0300927184\",\"6\":\"0.292403601\",\"7\":\"1.6144452\",\"8\":\"141\",\"9\":\"1.000000e+00\",\"10\":\"Pearson correlation\",\"11\":\"143\",\"_rn_\":\"2\"},{\"1\":\"duration\",\"2\":\"ship_pr\",\"3\":\"0.266501330\",\"4\":\"0.95\",\"5\":\"0.1070350954\",\"6\":\"0.412600364\",\"7\":\"3.2832689\",\"8\":\"141\",\"9\":\"2.070358e-02\",\"10\":\"Pearson correlation\",\"11\":\"143\",\"_rn_\":\"3\"},{\"1\":\"duration\",\"2\":\"total_pr\",\"3\":\"-0.041235447\",\"4\":\"0.95\",\"5\":\"-0.2040031750\",\"6\":\"0.123750762\",\"7\":\"-0.4900606\",\"8\":\"141\",\"9\":\"1.000000e+00\",\"10\":\"Pearson correlation\",\"11\":\"143\",\"_rn_\":\"4\"},{\"1\":\"duration\",\"2\":\"seller_rate\",\"3\":\"-0.154832970\",\"4\":\"0.95\",\"5\":\"-0.3110753717\",\"6\":\"0.009558538\",\"7\":\"-1.8609819\",\"8\":\"141\",\"9\":\"9.076090e-01\",\"10\":\"Pearson correlation\",\"11\":\"143\",\"_rn_\":\"5\"},{\"1\":\"duration\",\"2\":\"wheels\",\"3\":\"-0.299473454\",\"4\":\"0.95\",\"5\":\"-0.4418990893\",\"6\":\"-0.142321124\",\"7\":\"-3.7271072\",\"8\":\"141\",\"9\":\"5.032701e-03\",\"10\":\"Pearson correlation\",\"11\":\"143\",\"_rn_\":\"6\"},{\"1\":\"n_bids\",\"2\":\"start_pr\",\"3\":\"-0.633103601\",\"4\":\"0.95\",\"5\":\"-0.7221990440\",\"6\":\"-0.523342364\",\"7\":\"-9.7119345\",\"8\":\"141\",\"9\":\"4.577811e-16\",\"10\":\"Pearson correlation\",\"11\":\"143\",\"_rn_\":\"7\"},{\"1\":\"n_bids\",\"2\":\"ship_pr\",\"3\":\"0.026337112\",\"4\":\"0.95\",\"5\":\"-0.1384098337\",\"6\":\"0.189665721\",\"7\":\"0.3128444\",\"8\":\"141\",\"9\":\"1.000000e+00\",\"10\":\"Pearson correlation\",\"11\":\"143\",\"_rn_\":\"8\"},{\"1\":\"n_bids\",\"2\":\"total_pr\",\"3\":\"0.127729402\",\"4\":\"0.95\",\"5\":\"-0.0371991093\",\"6\":\"0.285883960\",\"7\":\"1.5292284\",\"8\":\"141\",\"9\":\"1.000000e+00\",\"10\":\"Pearson correlation\",\"11\":\"143\",\"_rn_\":\"9\"},{\"1\":\"n_bids\",\"2\":\"seller_rate\",\"3\":\"-0.106156497\",\"4\":\"0.95\",\"5\":\"-0.2656755564\",\"6\":\"0.059020534\",\"7\":\"-1.2677018\",\"8\":\"141\",\"9\":\"1.000000e+00\",\"10\":\"Pearson correlation\",\"11\":\"143\",\"_rn_\":\"10\"},{\"1\":\"n_bids\",\"2\":\"wheels\",\"3\":\"-0.079618595\",\"4\":\"0.95\",\"5\":\"-0.2406224058\",\"6\":\"0.085649353\",\"7\":\"-0.9484293\",\"8\":\"141\",\"9\":\"1.000000e+00\",\"10\":\"Pearson correlation\",\"11\":\"143\",\"_rn_\":\"11\"},{\"1\":\"start_pr\",\"2\":\"ship_pr\",\"3\":\"0.029991444\",\"4\":\"0.95\",\"5\":\"-0.1348208584\",\"6\":\"0.193188937\",\"7\":\"0.3562889\",\"8\":\"141\",\"9\":\"1.000000e+00\",\"10\":\"Pearson correlation\",\"11\":\"143\",\"_rn_\":\"12\"},{\"1\":\"start_pr\",\"2\":\"total_pr\",\"3\":\"0.073406030\",\"4\":\"0.95\",\"5\":\"-0.0918492797\",\"6\":\"0.234726269\",\"7\":\"0.8740063\",\"8\":\"141\",\"9\":\"1.000000e+00\",\"10\":\"Pearson correlation\",\"11\":\"143\",\"_rn_\":\"13\"},{\"1\":\"start_pr\",\"2\":\"seller_rate\",\"3\":\"0.281321092\",\"4\":\"0.95\",\"5\":\"0.1228453273\",\"6\":\"0.425806574\",\"7\":\"3.4810913\",\"8\":\"141\",\"9\":\"1.130605e-02\",\"10\":\"Pearson correlation\",\"11\":\"143\",\"_rn_\":\"14\"},{\"1\":\"start_pr\",\"2\":\"wheels\",\"3\":\"0.163685563\",\"4\":\"0.95\",\"5\":\"-0.0004757928\",\"6\":\"0.319256122\",\"7\":\"1.9702318\",\"8\":\"141\",\"9\":\"7.615633e-01\",\"10\":\"Pearson correlation\",\"11\":\"143\",\"_rn_\":\"15\"},{\"1\":\"ship_pr\",\"2\":\"total_pr\",\"3\":\"0.542508581\",\"4\":\"0.95\",\"5\":\"0.4153475423\",\"6\":\"0.648873651\",\"7\":\"7.6685084\",\"8\":\"141\",\"9\":\"5.166823e-11\",\"10\":\"Pearson correlation\",\"11\":\"143\",\"_rn_\":\"16\"},{\"1\":\"ship_pr\",\"2\":\"seller_rate\",\"3\":\"-0.023292381\",\"4\":\"0.95\",\"5\":\"-0.1867270188\",\"6\":\"0.141396810\",\"7\":\"-0.2766568\",\"8\":\"141\",\"9\":\"1.000000e+00\",\"10\":\"Pearson correlation\",\"11\":\"143\",\"_rn_\":\"17\"},{\"1\":\"ship_pr\",\"2\":\"wheels\",\"3\":\"0.052289257\",\"4\":\"0.95\",\"5\":\"-0.1128277391\",\"6\":\"0.214595908\",\"7\":\"0.6217511\",\"8\":\"141\",\"9\":\"1.000000e+00\",\"10\":\"Pearson correlation\",\"11\":\"143\",\"_rn_\":\"18\"},{\"1\":\"total_pr\",\"2\":\"seller_rate\",\"3\":\"0.009434813\",\"4\":\"0.95\",\"5\":\"-0.1549537374\",\"6\":\"0.173314971\",\"7\":\"0.1120372\",\"8\":\"141\",\"9\":\"1.000000e+00\",\"10\":\"Pearson correlation\",\"11\":\"143\",\"_rn_\":\"19\"},{\"1\":\"total_pr\",\"2\":\"wheels\",\"3\":\"0.329983751\",\"4\":\"0.95\",\"5\":\"0.1753322914\",\"6\":\"0.468742261\",\"7\":\"4.1508427\",\"8\":\"141\",\"9\":\"1.083791e-03\",\"10\":\"Pearson correlation\",\"11\":\"143\",\"_rn_\":\"20\"},{\"1\":\"seller_rate\",\"2\":\"wheels\",\"3\":\"-0.145769743\",\"4\":\"0.95\",\"5\":\"-0.3026759173\",\"6\":\"0.018829377\",\"7\":\"-1.7496082\",\"8\":\"141\",\"9\":\"1.000000e+00\",\"10\":\"Pearson correlation\",\"11\":\"143\",\"_rn_\":\"21\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\nNeben einigen Statistiken, die wir einfach geflissentlich ausblenden (`t` und `p`) beinhaltet die Tabelle eine interessante Information: den Sch√§tzbereich f√ºr die Korrelation, gekennzeichnet als `95% CI`.\n*Grob* gesagt k√∂nnen wir diese Information so interpretieren: \"Mit 95% Wahrscheinlichkeit liegt der echte Wert der Korrelation in folgendem Bereich.\"^[Bayesianische Interpretation]\n\n\nM√∂chte man nur einzelne Korrelationskoeffizienten ausrechnen, k√∂nnen wir die Idee des Zusammenfassens, s. @eq-desk2, nutzen:\n\n\n::: {.cell hash='zusammenhaenge_cache/html/unnamed-chunk-17_91cde42299549da701ebb29fdacb62c6'}\n\n```{.r .cell-code}\nmariokart %>% \n  summarise(cor_super_wichtig = cor(total_pr, wheels))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"cor_super_wichtig\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"0.3299838\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n:::{.callout-caution}\nIm Falle von fehlenden Werte m√ºssen Sie R aus seiner sch√ºchternen Vorsicht befreien und ermutigen, trotz fehlender Werte einen Korrelationskoeffizienten auszugeben.\nDas geht mit dem Argument `use = \"complete.obs\"` in `cor`:\n\n\n::: {.cell hash='zusammenhaenge_cache/html/unnamed-chunk-18_fdb27e99004534a30c691eab0eda64fb'}\n\n```{.r .cell-code}\nmariokart %>% \n  summarise(cor_super_wichtig = cor(total_pr, wheels, use = \"complete.obs\"))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"cor_super_wichtig\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"0.3299838\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n:::\n\n\n>   üßë‚Äçüéì Immer so viele Zahlen! Ich brauch Bilder.\n\n\nMit dem Befehl `plot_correlation` aus dem R-Paket `{dataExplorer}` bekommt man eine ansehnlich Heatmap zur Verdeutlichung der Korrelationswerte, s. @fig-mario-corr.\n\n\n::: {.cell hash='zusammenhaenge_cache/html/fig-mario-corr_dbbba96466c2fb1ea5d35f82429e96e9'}\n\n```{.r .cell-code}\nlibrary(DataExplorer)\n\nmariokart %>% \n  dplyr::select(duration, n_bids, start_pr, ship_pr, total_pr, seller_rate, wheels) %>% \n  plot_correlation()\n```\n\n::: {.cell-output-display}\n![Heatmap zu den Korrelationen im Datensatz mariokart.](zusammenhaenge_files/figure-html/fig-mario-corr-1.png){#fig-mario-corr width=672}\n:::\n:::\n\n\n\n\n## Vertiefung\n\n[TED-Vortrag](https://www.youtube.com/watch?v=8B271L3NtAw) zum Thema Scheinkorrelation.\n\n\n\n## Aufgaben\n\n\n\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}